(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[962],{4606:(t,e,n)=>{"use strict";n.d(e,{K:()=>c});var a=n(51150),i=n(70715),o=n(33455),r=n.n(o),s=n(63814),l=n(21777);const c=r()((t=>(i.Ay.defaults.headers["X-Requested-With"]="XMLHttpRequest",a.getPatcher().patch("request",i.Ay),a.createClient((0,s.dC)(`dav/${t}/${(0,l.HW)().uid}`)))))},5197:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,'[data-v-6ce7251a] .modal-wrapper .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:490px !important;max-height:500px !important}.modal-content[data-v-6ce7251a]{padding:30px 30px 20px !important}.modal-content__calendar-picker[data-v-6ce7251a]{display:block}.modal-content__description-input[data-v-6ce7251a]{width:100%;resize:vertical}input[data-v-6ce7251a]{width:100%}[data-v-6ce7251a] input[type="text"]{padding:0 !important}.all-day[data-v-6ce7251a]{margin-inline-start:-1px;margin-top:5px;margin-bottom:5px}.eventTitle[data-v-6ce7251a]{margin-bottom:5px}.primary[data-v-6ce7251a]{height:44px !important;float:inline-end}[data-v-6ce7251a] .mx-datepicker{width:213px}',"",{version:3,sources:["webpack://./src/components/EventModal.vue"],names:[],mappings:"AACA,kDACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAGD,gCACC,iCAAA,CAEA,iDACC,aAAA,CAED,mDACC,UAAA,CACA,eAAA,CAIF,uBACC,UAAA,CAGD,qCACC,oBAAA,CAGD,0BACC,wBAAA,CACA,cAAA,CACA,iBAAA,CAGD,6BACC,iBAAA,CAGD,0BACC,sBAAA,CACA,gBAAA,CAGD,iCACC,WAAA",sourcesContent:["\n:deep(.modal-wrapper .modal-container) {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 490px !important;\n\tmax-height: 500px !important;\n}\n\n.modal-content {\n\tpadding: 30px 30px 20px !important;\n\n\t&__calendar-picker {\n\t\tdisplay: block;\n\t}\n\t&__description-input {\n\t\twidth: 100%;\n\t\tresize: vertical;\n\t}\n}\n\ninput {\n\twidth: 100%;\n}\n\n:deep(input[type='text']) {\n\tpadding: 0 !important;\n}\n\n.all-day {\n\tmargin-inline-start: -1px;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n\n.eventTitle {\n\tmargin-bottom: 5px;\n}\n\n.primary {\n\theight: 44px !important;\n\tfloat: inline-end;\n}\n\n:deep(.mx-datepicker) {\n\twidth: 213px;\n}\n"],sourceRoot:""}]);const s=r},8151:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".app-navigation-entry-bullet-wrapper[data-v-3b8b530c]{width:44px;height:44px;display:inline-block;position:fixed;list-style:none;top:18px;inset-inline-start:15px}.app-navigation-entry-bullet-wrapper .color0[data-v-3b8b530c]{width:22px !important;height:22px;border-radius:50%;background-size:14px;z-index:2;display:flex;position:relative}.tag-group[data-v-3b8b530c]{display:block;position:relative;margin:0 1px;overflow:hidden}.tag-actions[data-v-3b8b530c]{background-color:rgba(0,0,0,0);border:none;float:inline-end}.tag-actions[data-v-3b8b530c]:hover,.tag-actions[data-v-3b8b530c]:focus{background-color:var(--color-border-dark)}.tag-group__label[data-v-3b8b530c]{z-index:2;font-weight:bold;border:none;background-color:rgba(0,0,0,0);padding-inline:10px;overflow:hidden;text-overflow:ellipsis;max-width:94px}.action-item[data-v-3b8b530c]{inset-inline-end:8px;float:inline-end}[data-v-3b8b530c] .input-field{margin-top:3px}","",{version:3,sources:["webpack://./src/components/TagItem.vue"],names:[],mappings:"AACA,sDACC,UAAA,CACA,WAAA,CACA,oBAAA,CACA,cAAA,CACA,eAAA,CACA,QAAA,CACA,uBAAA,CAEA,8DACC,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,oBAAA,CACA,SAAA,CACA,YAAA,CACA,iBAAA,CAIF,4BACC,aAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CAGD,8BACC,8BAAA,CACA,WAAA,CACA,gBAAA,CACA,wEAEC,yCAAA,CAIF,mCACC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,8BAAA,CACA,mBAAA,CACA,eAAA,CACA,sBAAA,CACA,cAAA,CAGD,8BACC,oBAAA,CACA,gBAAA,CAGD,+BACC,cAAA",sourcesContent:["\n.app-navigation-entry-bullet-wrapper {\n\twidth: 44px;\n\theight: 44px;\n\tdisplay: inline-block;\n\tposition: fixed;\n\tlist-style: none;\n\ttop: 18px;\n\tinset-inline-start: 15px;\n\n\t.color0 {\n\t\twidth: 22px !important;\n\t\theight: 22px;\n\t\tborder-radius: 50%;\n\t\tbackground-size: 14px;\n\t\tz-index: 2;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n}\n\n.tag-group {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n}\n\n.tag-actions {\n\tbackground-color: transparent;\n\tborder: none;\n\tfloat: inline-end;\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-border-dark);\n\t}\n}\n\n.tag-group__label {\n\tz-index: 2;\n\tfont-weight: bold;\n\tborder: none;\n\tbackground-color: transparent;\n\tpadding-inline: 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmax-width: 94px;\n}\n\n.action-item {\n\tinset-inline-end: 8px;\n\tfloat: inline-end;\n}\n\n:deep(.input-field) {\n\tmargin-top: 3px;\n}\n"],sourceRoot:""}]);const s=r},10652:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".message-loading-skeleton[data-v-f20a6902]{display:flex;flex-grow:1;align-items:flex-start;padding:8px;width:100%}.message-loading-skeleton__body[data-v-f20a6902]{max-height:500px;max-width:1200px;flex:1 1 100%;display:flex;flex-direction:column;margin-inline-start:50px}.message-loading-skeleton__body__line-one[data-v-f20a6902],.message-loading-skeleton__body__line-two[data-v-f20a6902],.message-loading-skeleton__body__line-three[data-v-f20a6902],.message-loading-skeleton__body__line-four[data-v-f20a6902],.message-loading-skeleton__body__line-five[data-v-f20a6902],.message-loading-skeleton__body__line-six[data-v-f20a6902]{white-space:nowrap;height:13px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-f20a6902 3s ease-in infinite}.message-loading-skeleton__body__line-one[data-v-f20a6902]{width:10%;margin-bottom:25px}.message-loading-skeleton__body__line-two[data-v-f20a6902]{width:80%;margin-bottom:6px}.message-loading-skeleton__body__line-three[data-v-f20a6902]{width:50%;margin-bottom:6px}.message-loading-skeleton__body__line-four[data-v-f20a6902]{width:70%;margin-bottom:6px}.message-loading-skeleton__body__line-five[data-v-f20a6902]{width:40%;margin-bottom:25px}.message-loading-skeleton__body__line-six[data-v-f20a6902]{width:30%}@keyframes gradient-f20a6902{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}","",{version:3,sources:["webpack://./src/components/MessageLoadingSkeleton.vue"],names:[],mappings:"AAGA,2CACC,YAAA,CACA,WAAA,CACA,sBAAA,CACA,WAAA,CACA,UAAA,CACA,iDACC,gBAAA,CACA,gBAAA,CACA,aAAA,CACA,YAAA,CACA,qBAAA,CACA,wBAAA,CACA,sWAMC,kBAAA,CACA,WAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAED,2DACC,SAAA,CACA,kBAAA,CAED,2DACC,SAAA,CACA,iBAAA,CAED,6DACC,SAAA,CACA,iBAAA,CAED,4DACC,SAAA,CACA,iBAAA,CAED,4DACC,SAAA,CACA,kBAAA,CAED,2DACC,SAAA,CAGF,6BACE,GACC,0BAAA,CAED,IACC,4BAAA,CAED,KACC,0BAAA,CAAA",sourcesContent:["\n\n/* skeleton */\n.message-loading-skeleton {\n\tdisplay: flex;\n\tflex-grow: 1;\n\talign-items: flex-start;\n\tpadding: 8px;\n\twidth: 100%;\n\t&__body {\n\t\tmax-height: 500px;\n\t\tmax-width: 1200px;\n\t\tflex: 1 1 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-inline-start: 50px;\n\t\t&__line-one,\n\t\t&__line-two,\n\t\t&__line-three,\n\t\t&__line-four,\n\t\t&__line-five,\n\t\t&__line-six {\n\t\t\twhite-space: nowrap;\n\t\t\theight: 13px;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t}\n\t\t&__line-one {\n\t\t\twidth: 10%;\n\t\t\tmargin-bottom: 25px;\n\t\t}\n\t\t&__line-two {\n\t\t\twidth: 80%;\n\t\t\tmargin-bottom: 6px;\n\t\t}\n\t\t&__line-three {\n\t\t\twidth: 50%;\n\t\t\tmargin-bottom: 6px;\n\t\t}\n\t\t&__line-four {\n\t\t\twidth: 70%;\n\t\t\tmargin-bottom: 6px;\n\t\t}\n\t\t&__line-five {\n\t\t\twidth: 40%;\n\t\t\tmargin-bottom: 25px;\n\t\t}\n\t\t&__line-six {\n\t\t\twidth: 30%;\n\t\t}\n\t}\n\t@keyframes gradient {\n\t\t 0% {\n\t\t\t background-position: 0% 50%;\n\t\t }\n\t\t 50% {\n\t\t\t background-position: 100% 50%;\n\t\t }\n\t\t 100% {\n\t\t\t background-position: 0% 50%;\n\t\t }\n\t }\n}\n\n"],sourceRoot:""}]);const s=r},10833:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var a=n(41944),i=n(63814),o=n(32817),r=n(85745);const s={name:"Avatar",components:{NcAvatar:a.A},props:{displayName:{type:String,required:!0},avatar:{type:Object,default:null},fetchAvatar:{type:Boolean,default:!1},email:{type:String,required:!0},disableTooltip:{type:Boolean,default:!1},size:{type:Number,default:40}},data:()=>({loading:!0,avatarUrl:void 0}),computed:{hasAvatar(){return void 0!==this.avatarUrl}},async mounted(){if(this.avatar)this.avatarUrl=this.avatar.isExternal?(0,i.Jv)("/apps/mail/api/avatars/image/{email}",{email:this.email}):this.avatar.url;else if(this.fetchAvatar&&""!==this.email)try{this.avatarUrl=await(0,o.F)(this.email)}catch{r.A.debug("Could not fetch avatar",{email:this.email})}this.loading=!1}},l=(0,n(14486).A)(s,(function(){var t=this,e=t._self._c;return t.loading||!t.hasAvatar?e("NcAvatar",{attrs:{"display-name":t.displayName,size:t.size,"disable-tooltip":t.disableTooltip}}):e("NcAvatar",{attrs:{"display-name":t.displayName,url:t.avatarUrl,size:t.size,"disable-tooltip":t.disableTooltip}})}),[],!1,null,null,null).exports},11029:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".user-bubble__title[data-v-ede1b5f6]{max-width:30vw}.contact-menu[data-v-ede1b5f6]{display:flex;flex-wrap:wrap}.contact-popover[data-v-ede1b5f6]{display:flex}.contact-popover__email[data-v-ede1b5f6]{text-align:center}.contact-wrapper[data-v-ede1b5f6]{padding:10px;min-width:300px}.contact-wrapper a[data-v-ede1b5f6]{opacity:.7}.contact-wrapper a[data-v-ede1b5f6]:hover{opacity:1}.contact-input-wrapper[data-v-ede1b5f6]{margin-top:10px;margin-bottom:10px}.contact-input-wrapper input[data-v-ede1b5f6]{width:100%}.contact-existing[data-v-ede1b5f6]{font-size:small !important}[data-v-ede1b5f6] .button-vue__text{font-weight:normal !important}[data-v-ede1b5f6] .vs__dropdown-menu{max-height:100px}","",{version:3,sources:["webpack://./src/components/RecipientBubble.vue"],names:[],mappings:"AACA,qCACC,cAAA,CAGD,+BACC,YAAA,CACA,cAAA,CAGD,kCACC,YAAA,CAEA,yCACC,iBAAA,CAIF,kCACC,YAAA,CACA,eAAA,CAEA,oCACC,UAAA,CAED,0CACC,SAAA,CAIF,wCACC,eAAA,CACG,kBAAA,CACH,8CACC,UAAA,CAIF,mCACC,0BAAA,CAGD,oCACC,6BAAA,CAGD,qCAEC,gBAAA",sourcesContent:["\n.user-bubble__title {\n\tmax-width: 30vw;\n}\n\n.contact-menu {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n\n.contact-popover {\n\tdisplay: flex;\n\n\t&__email {\n\t\ttext-align: center;\n\t}\n}\n\n.contact-wrapper {\n\tpadding:10px;\n\tmin-width: 300px;\n\n\ta {\n\t\topacity: 0.7;\n\t}\n\ta:hover {\n\t\topacity: 1;\n\t}\n}\n\n.contact-input-wrapper {\n\tmargin-top: 10px;\n    margin-bottom: 10px;\n\tinput {\n\t\twidth: 100%;\n\t}\n}\n\n.contact-existing {\n\tfont-size: small !important;\n}\n\n:deep(.button-vue__text) {\n\tfont-weight: normal !important;\n}\n\n:deep(.vs__dropdown-menu) {\n\t// Make the dropdown scrollable\n\tmax-height: 100px;\n}\n"],sourceRoot:""}]);const s=r},16942:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"[data-v-839f574c] .modal-content{padding:20px 20px 20px 20px;max-height:calc(100vh - 210px);overflow-y:auto}[data-v-839f574c] .modal-container{width:auto !important}.icon-colorpicker[data-v-839f574c]{background-image:var(--icon-add-fff)}.tagButton[data-v-839f574c]{display:inline-block;margin-inline-start:10px}.tag-title[data-v-839f574c]{margin-top:20px;margin-inline-start:10px}.create-tag[data-v-839f574c]{list-style:none;margin-bottom:12px}@media only screen and (max-width: 512px){[data-v-839f574c] .modal-container{top:100px !important;max-height:calc(100vh - 170px) !important}}","",{version:3,sources:["webpack://./src/components/TagModal.vue"],names:[],mappings:"AACA,iCACC,2BAAA,CACA,8BAAA,CACA,eAAA,CAGD,mCACC,qBAAA,CAGD,mCACC,oCAAA,CAGD,4BACC,oBAAA,CACA,wBAAA,CAGD,4BACC,eAAA,CACA,wBAAA,CAGD,6BACC,eAAA,CACA,kBAAA,CAED,0CACC,mCACA,oBAAA,CACA,yCAAA,CAAA",sourcesContent:["\n:deep(.modal-content) {\n\tpadding: 20px 20px 20px 20px;\n\tmax-height: calc(100vh - 210px);\n\toverflow-y: auto;\n}\n\n:deep(.modal-container) {\n\twidth: auto !important;\n}\n\n.icon-colorpicker {\n\tbackground-image: var(--icon-add-fff);\n}\n\n.tagButton {\n\tdisplay: inline-block;\n\tmargin-inline-start: 10px;\n}\n\n.tag-title {\n\tmargin-top: 20px;\n\tmargin-inline-start: 10px;\n}\n\n.create-tag {\n\tlist-style: none;\n\tmargin-bottom:12px;\n}\n@media only screen and (max-width: 512px) {\n\t:deep(.modal-container) {\n\ttop: 100px !important;\n\tmax-height: calc(100vh - 170px) !important\n\t}\n}\n"],sourceRoot:""}]);const s=r},22812:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"\n#mail-content[data-v-4cdc070e] {\n\theight: 450px;\n}\n","",{version:3,sources:["webpack://./src/components/MessageEncryptedBody.vue"],names:[],mappings:";AAkDA;CACA,aAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div>\n\t\t<div v-if=\"mailvelope\" id=\"mail-content\">\n\t\t\t<MdnRequest :message=\"message\" />\n\t\t</div>\n\t\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getMailvelope } from '../crypto/mailvelope.js'\nimport MdnRequest from './MdnRequest.vue'\n\nexport default {\n\tname: 'MessageEncryptedBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmailvelope: false,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.mailvelope = await getMailvelope()\n\t\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\n\t\t\tsenderAddress: this.from,\n\t\t})\n\t},\n}\n<\/script>\n\n<style scoped>\n#mail-content {\n\theight: 450px;\n}\n</style>\n"],sourceRoot:""}]);const s=r},23612:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"div[data-v-3ffd1b9a]{position:relative}.load-more[data-v-3ffd1b9a]{text-align:center;margin-top:10px;cursor:pointer;margin-inline-start:28px;color:var(--color-text-maxcontrast);display:inline-flex;gap:12px}.load-more .plus-icon[data-v-3ffd1b9a]{transform:translateX(-8px)}.multiselect-header[data-v-3ffd1b9a]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--color-main-background-translucent);position:sticky;top:0;height:48px;z-index:100}.multiselect-header .action-buttons[data-v-3ffd1b9a]{display:flex}#load-more-mail-messages[data-v-3ffd1b9a]{background-position:9px center}.multiselect-header-enter-active[data-v-3ffd1b9a],.multiselect-header-leave-active[data-v-3ffd1b9a],.list-enter-active[data-v-3ffd1b9a],.list-leave-active[data-v-3ffd1b9a]{transition:all calc(var(--animation-slow)/2)}.multiselect-header-enter[data-v-3ffd1b9a],.multiselect-header-leave-to[data-v-3ffd1b9a],.list-enter[data-v-3ffd1b9a],.list-leave-to[data-v-3ffd1b9a]{opacity:0;height:0;transform:scaleY(0)}#action-label[data-v-3ffd1b9a]{vertical-align:middle}@media only screen and (min-width: 600px){#action-label[data-v-3ffd1b9a]{display:block}}[data-v-3ffd1b9a] .button-vue--text-only{padding:0 !important}","",{version:3,sources:["webpack://./src/components/EnvelopeList.vue"],names:[],mappings:"AACA,qBAEC,iBAAA,CAGD,4BACC,iBAAA,CACA,eAAA,CACA,cAAA,CACA,wBAAA,CACA,mCAAA,CACA,mBAAA,CACA,QAAA,CACA,uCACC,0BAAA,CAIF,qCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,sBAAA,CACA,yDAAA,CACA,eAAA,CACA,KAAA,CACA,WAAA,CACA,WAAA,CACA,qDACC,YAAA,CAIF,0CACC,8BAAA,CAGD,4KAIC,4CAAA,CAGD,sJAIC,SAAA,CACA,QAAA,CACA,mBAAA,CAGD,+BACC,qBAAA,CAED,0CACC,+BACC,aAAA,CAAA,CAIF,yCACC,oBAAA",sourcesContent:["\ndiv {\n\t// So we can align the loading spinner in the Priority inbox\n\tposition: relative;\n}\n\n.load-more {\n\ttext-align: center;\n\tmargin-top: 10px;\n\tcursor: pointer;\n\tmargin-inline-start: 28px;\n\tcolor: var(--color-text-maxcontrast);\n\tdisplay: inline-flex;\n\tgap: 12px;\n\t.plus-icon{\n\t\ttransform: translateX(-8px);\n\t}\n}\n\n.multiselect-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--color-main-background-translucent);\n\tposition: sticky;\n\ttop: 0;\n\theight: 48px;\n\tz-index: 100;\n\t.action-buttons {\n\t\tdisplay: flex;\n\t}\n}\n\n#load-more-mail-messages {\n\tbackground-position: 9px center;\n}\n\n.multiselect-header-enter-active,\n.multiselect-header-leave-active,\n.list-enter-active,\n.list-leave-active {\n\ttransition: all calc(var(--animation-slow) / 2);\n}\n\n.multiselect-header-enter,\n.multiselect-header-leave-to,\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0;\n\ttransform: scaleY(0);\n}\n\n#action-label {\n\tvertical-align: middle;\n}\n@media only screen and (min-width: 600px) {\n\t#action-label {\n\t\tdisplay: block;\n\t}\n}\n\n:deep(.button-vue--text-only) {\n\tpadding: 0 !important;\n}\n"],sourceRoot:""}]);const s=r},24660:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n\tgap: 10px;\n.material-design-icon {\n\t\tmargin-bottom: -15px;\n}\n}\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n","",{version:3,sources:["webpack://./src/components/EnvelopePrimaryActions.vue"],names:[],mappings:";AAiBA;CACA,aAAA;CACA,8BAAA;AACA;AAEA;CACA,mBAAA;CACA,sBAAA;CACA,yBAAA;CACA,SAAA;AAEA;EACA,oBAAA;AACA;AACA;AAEA;;CAEA,YAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<ul class=\"list-item-content__actions--primary\">\n\t\t<slot />\n\t</ul>\n</template>\n\n<script>\nexport default {\n\tname: 'EnvelopePrimaryActions',\n}\n<\/script>\n\n<style>\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n\tgap: 10px;\n\n\t.material-design-icon {\n\t\tmargin-bottom: -15px;\n\t}\n}\n\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n</style>\n"],sourceRoot:""}]);const s=r},25026:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".nameimportant[data-v-86cd4438] #load-more-mail-messages{margin-top:0}.empty-content[data-v-86cd4438]{height:100%;display:flex;justify-content:center}","",{version:3,sources:["webpack://./src/components/Mailbox.vue"],names:[],mappings:"AAGC,yDACC,YAAA,CAIF,gCACC,WAAA,CACA,YAAA,CACA,sBAAA",sourcesContent:["\n// Fix vertical space between sections in priority inbox\n.nameimportant {\n\t:deep(#load-more-mail-messages) {\n\t\tmargin-top: 0;\n\t}\n}\n\n.empty-content {\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n"],sourceRoot:""}]);const s=r},28629:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"[data-v-764c6f5c] .button-vue--vue-secondary{box-shadow:none}","",{version:3,sources:["webpack://./src/components/Outbox.vue"],names:[],mappings:"AACA,6CACC,eAAA",sourcesContent:["\n:deep(.button-vue--vue-secondary) {\n\tbox-shadow: none;\n}\n"],sourceRoot:""}]);const s=r},29061:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".item-list__entry[data-v-42cebb20]{display:flex;align-items:flex-start;padding:8px}.item-list__entry .item-avatar[data-v-42cebb20]{position:relative;top:4px;border-radius:50px;width:44px;height:44px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-42cebb20 3s ease-in infinite}.item-list__entry .item__details[data-v-42cebb20]{padding-inline-start:8px;max-height:70px;flex-grow:1;display:flex;flex-direction:column}.item-list__entry .item__details h3[data-v-42cebb20],.item-list__entry .item__details .message.message-preview[data-v-42cebb20]{white-space:nowrap;background-color:var(--color-background-hover)}.item-list__entry .item__details h3[data-v-42cebb20]{font-size:100%;margin:0;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-42cebb20 3s ease-in infinite;width:40%;height:15px}.item-list__entry .item__details .message-preview[data-v-42cebb20]{width:100%;height:15px;margin-top:5px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-42cebb20 3s ease-in infinite}.item-list__entry .item__details .message[data-v-42cebb20]{width:70%;height:15px;margin-top:5px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-42cebb20 3s ease-in infinite}@keyframes gradient-42cebb20{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}","",{version:3,sources:["webpack://./src/components/LoadingSkeleton.vue"],names:[],mappings:"AAGA,mCACC,YAAA,CACA,sBAAA,CACA,WAAA,CACA,gDACC,iBAAA,CACA,OAAA,CACA,kBAAA,CACA,UAAA,CACA,WAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAED,kDACC,wBAAA,CACA,eAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,gIAEC,kBAAA,CACA,8CAAA,CAED,qDACC,cAAA,CACA,QAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CACA,SAAA,CACA,WAAA,CAED,mEACC,UAAA,CACA,WAAA,CACA,cAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAED,2DACC,SAAA,CACA,WAAA,CACA,cAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAGF,6BACC,GACC,0BAAA,CAED,IACC,4BAAA,CAED,KACC,0BAAA,CAAA",sourcesContent:["\n\n/* skeleton */\n.item-list__entry {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tpadding: 8px;\n\t.item-avatar {\n\t\tposition: relative;\n\t\ttop: 4px;\n\t\tborder-radius: 50px;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\tbackground-size: 400% 400%;\n\t\tanimation: gradient 3s ease-in infinite;\n\t}\n\t.item__details {\n\t\tpadding-inline-start: 8px;\n\t\tmax-height: 70px;\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\th3,\n\t\t.message.message-preview {\n\t\t\twhite-space: nowrap;\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\t\th3 {\n\t\t\tfont-size: 100%;\n\t\t\tmargin: 0;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t\twidth: 40%;\n\t\t\theight: 15px;\n\t\t}\n\t\t.message-preview {\n\t\t\twidth: 100%;\n\t\t\theight: 15px;\n\t\t\tmargin-top: 5px;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t}\n\t\t.message {\n\t\t\twidth: 70%;\n\t\t\theight: 15px;\n\t\t\tmargin-top: 5px;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t}\n\t}\n\t@keyframes gradient {\n\t\t0% {\n\t\t\tbackground-position: 0% 50%;\n\t\t}\n\t\t50% {\n\t\t\tbackground-position: 100% 50%;\n\t\t}\n\t\t100% {\n\t\t\tbackground-position: 0% 50%;\n\t\t}\n\t}\n}\n\n"],sourceRoot:""}]);const s=r},29570:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".mail-message-has-mdn-request[data-v-240bd3b7]{white-space:normal}.notify-button[data-v-240bd3b7]{display:inline-block}","",{version:3,sources:["webpack://./src/components/MdnRequest.vue"],names:[],mappings:"AACA,+CACC,kBAAA,CAGD,gCACC,oBAAA",sourcesContent:["\n.mail-message-has-mdn-request {\n\twhite-space: normal;\n}\n\n.notify-button {\n\tdisplay: inline-block;\n}\n"],sourceRoot:""}]);const s=r},30003:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".search-messages{border-bottom:1px solid var(--color-border);position:sticky;top:0;z-index:10;height:52px;background-color:var(--color-main-background)}.search-messages__input{min-height:52px;margin-inline-start:calc(var(--app-navigation-padding)*2 + var(--default-clickable-area));padding-inline-end:3px;position:relative;display:flex;align-items:center;z-index:1}.search-messages__input input{flex-grow:1}.search-messages__input .action-item--single{border:none;background:none;transition:.4s}.search-messages__input .action-item--single:hover{transition:.4s;background:var(--color-primary-element)}.search-input{width:100%}.checkbox-radio-switch__label{background:none !important;padding:0 !important;margin:0 !important}.tag-group__search{box-sizing:border-box;position:relative;margin:3px 3px;padding:0 6px}.tag-group__bg{position:absolute;inset-inline:0;bottom:0;top:0;opacity:.4;border-radius:14px;z-index:1}.tag-group__label{font-weight:bold;font-size:12px;position:relative;z-index:2}.search-modal .modal-inner--content{padding:16px 0 36px 0;overflow-y:scroll;width:calc(100% - 2px)}.search-modal .modal-inner--content .marked-as .modal-inner-inline{display:inline-block;width:32%}.search-modal .modal-inner--content .range{display:flex;flex-wrap:wrap}.search-modal .modal-inner--content .range .modal-inner-inline{width:calc(50% - 5px)}.search-modal .modal-inner--content .range .modal-inner-inline:first-child{margin-inline-end:5px}.search-modal .modal-inner--content .range .modal-inner-inline:last-child{margin-inline-start:5px}@media(max-width: 420px){.modal-inner--container{width:100%;flex-wrap:nowrap;flex-direction:column}}@media(max-width: 420px){.search-modal .modal-inner--content .range{flex-direction:row}}.multiselect-search-tags{width:100%}.multiselect-search-tags .multiselect__tags .multiselect__tags-wrap{flex-wrap:wrap !important}.modal-inner-field--right{display:flex;align-items:center;justify-content:flex-end;padding:0 33px;margin-top:15px}.modal-inner--field{display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:15px;padding:0 12px 0 30px}.modal-inner--field .checkbox-radio-switch{margin:0 8px 0 0}.modal-inner--field>label{font-weight:bold;width:120px}.modal-inner--field .modal-inner--container{width:calc(100% - 120px);display:flex;flex-wrap:wrap}.modal-inner--field .modal-inner--container .select{width:100%}.modal-wrapper--normal .modal-container{position:relative}.button-vue.search-messages--filter.button-vue--icon-only{position:absolute;width:auto;height:auto;z-index:5;inset-inline-end:7px;inset-inline-start:auto;box-shadow:none !important;background:rgba(0,0,0,0) !important;border:none !important;padding:0 !important}.button-vue.search-messages--close.button-vue--icon-only{position:absolute;width:auto;height:auto;z-index:5;inset-inline-end:35px;inset-inline-start:auto;box-shadow:none !important;background:rgba(0,0,0,0) !important;border:none !important;padding:0 !important}.button-reset-filter{margin-inline-end:10px}.filter-changed{width:6px;height:6px;background:var(--color-error);position:absolute;z-index:10;inset-inline-end:12px;border-radius:50%;top:12px}.mx-datepicker{width:100%}.filter-buttons{display:flex;justify-content:center;align-items:center;flex-wrap:nowrap;gap:4px;overflow:hidden;text-overflow:ellipsis;padding:0 5px 5px 5px}","",{version:3,sources:["webpack://./src/components/SearchMessages.vue"],names:[],mappings:"AACA,iBACC,2CAAA,CACA,eAAA,CACA,KAAA,CACA,UAAA,CACA,WAAA,CACA,6CAAA,CACA,wBACC,eAAA,CACA,yFAAA,CACA,sBAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CAEA,SAAA,CAEA,8BACC,WAAA,CAGD,6CACC,WAAA,CACA,eAAA,CACA,cAAA,CAGD,mDACC,cAAA,CACA,uCAAA,CAKH,cACC,UAAA,CAGD,8BACC,0BAAA,CACA,oBAAA,CACA,mBAAA,CAGD,mBACC,qBAAA,CACA,iBAAA,CACA,cAAA,CACA,aAAA,CAGD,eACC,iBAAA,CACA,cAAA,CACA,QAAA,CACA,KAAA,CACA,UAAA,CACA,kBAAA,CACA,SAAA,CAGD,kBACC,gBAAA,CACA,cAAA,CACA,iBAAA,CACA,SAAA,CAIA,oCACC,qBAAA,CACA,iBAAA,CACA,sBAAA,CAEA,mEACC,oBAAA,CACA,SAAA,CAGD,2CACC,YAAA,CACA,cAAA,CAEA,+DACC,qBAAA,CACA,2EACC,qBAAA,CAED,0EACC,uBAAA,CAML,yBACC,wBACC,UAAA,CACA,gBAAA,CACA,qBAAA,CAAA,CAGF,yBACC,2CACC,kBAAA,CAAA,CAIF,yBACC,UAAA,CAGD,oEACC,yBAAA,CAGD,0BACC,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,cAAA,CACA,eAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,6BAAA,CACA,kBAAA,CACA,qBAAA,CAEA,2CACC,gBAAA,CAGD,0BACC,gBAAA,CACA,WAAA,CAGD,4CACC,wBAAA,CACA,YAAA,CACA,cAAA,CAEA,oDACC,UAAA,CAKH,wCACC,iBAAA,CAGD,0DACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,oBAAA,CACA,uBAAA,CACA,0BAAA,CACA,mCAAA,CACA,sBAAA,CACA,oBAAA,CAGD,yDACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,qBAAA,CACA,uBAAA,CACA,0BAAA,CACA,mCAAA,CACA,sBAAA,CACA,oBAAA,CAGD,qBACC,sBAAA,CAGD,gBACC,SAAA,CACA,UAAA,CACA,6BAAA,CACA,iBAAA,CACA,UAAA,CACA,qBAAA,CACA,iBAAA,CACA,QAAA,CAGD,eACC,UAAA,CAGD,gBACC,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,gBAAA,CACA,OAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA",sourcesContent:["\n.search-messages {\n\tborder-bottom: 1px solid var(--color-border);\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 10;\n\theight: 52px;\n\tbackground-color: var(--color-main-background);\n\t&__input {\n\t\tmin-height: 52px;\n\t\tmargin-inline-start: calc(var(--app-navigation-padding) * 2 + var(--default-clickable-area));\n\t\tpadding-inline-end: 3px; /* matches .app-content-list */\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t//important info icon overlaps it while scrolling\n\t\tz-index: 1;\n\n\t\tinput {\n\t\t\tflex-grow: 1;\n\t\t}\n\n\t\t.action-item--single {\n\t\t\tborder: none;\n\t\t\tbackground: none;\n\t\t\ttransition: 0.4s;\n\t\t}\n\n\t\t.action-item--single:hover {\n\t\t\ttransition: 0.4s;\n\t\t\tbackground: var(--color-primary-element);\n\t\t}\n\t}\n}\n\n.search-input {\n\twidth: 100%;\n}\n\n.checkbox-radio-switch__label {\n\tbackground: none !important;\n\tpadding: 0 !important;\n\tmargin: 0 !important;\n}\n\n.tag-group__search {\n\tbox-sizing: border-box;\n\tposition: relative;\n\tmargin: 3px 3px;\n\tpadding: 0 6px;\n}\n\n.tag-group__bg {\n\tposition: absolute;\n\tinset-inline: 0;\n\tbottom: 0;\n\ttop: 0;\n\topacity: 0.4;\n\tborder-radius: 14px;\n\tz-index: 1;\n}\n\n.tag-group__label {\n\tfont-weight: bold;\n\tfont-size: 12px;\n\tposition: relative;\n\tz-index: 2;\n}\n\n.search-modal {\n\t.modal-inner--content {\n\t\tpadding: 16px 0 36px 0;\n\t\toverflow-y: scroll;\n\t\twidth: calc(100% - 2px);\n\n\t\t.marked-as .modal-inner-inline {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 32%;\n\n\t\t}\n\t\t.range {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\n\t\t\t.modal-inner-inline {\n\t\t\t\twidth: calc(50% - 5px);\n\t\t\t\t&:first-child {\n\t\t\t\t\tmargin-inline-end: 5px;\n\t\t\t\t}\n\t\t\t\t&:last-child {\n\t\t\t\t\tmargin-inline-start: 5px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n@media (max-width: 420px) {\n\t.modal-inner--container {\n\t\twidth: 100%;\n\t\tflex-wrap: nowrap;\n\t\tflex-direction: column;\n\t}\n}\n@media (max-width: 420px) {\n\t.search-modal .modal-inner--content .range {\n\t\tflex-direction: row;\n\t}\n}\n\n.multiselect-search-tags {\n\twidth: 100%;\n}\n\n.multiselect-search-tags .multiselect__tags .multiselect__tags-wrap {\n\tflex-wrap: wrap !important;\n}\n\n.modal-inner-field--right {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tpadding: 0 33px;\n\tmargin-top: 15px;\n}\n\n.modal-inner--field {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n\tmargin-bottom: 15px;\n\tpadding: 0 12px 0 30px;\n\n\t.checkbox-radio-switch {\n\t\tmargin: 0 8px 0 0;\n\t}\n\n\t& > label {\n\t\tfont-weight: bold;\n\t\twidth: 120px;\n\t}\n\n\t.modal-inner--container {\n\t\twidth: calc(100% - 120px);\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\n\t\t.select {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n}\n\n.modal-wrapper--normal .modal-container {\n\tposition: relative\n}\n\n.button-vue.search-messages--filter.button-vue--icon-only {\n\tposition: absolute;\n\twidth: auto;\n\theight: auto;\n\tz-index: 5;\n\tinset-inline-end: 7px; /* same spacing to the input border as top/bottom */\n\tinset-inline-start: auto;\n\tbox-shadow: none !important;\n\tbackground: transparent !important;\n\tborder: none !important;\n\tpadding: 0 !important;\n}\n\n.button-vue.search-messages--close.button-vue--icon-only {\n\tposition: absolute;\n\twidth: auto;\n\theight: auto;\n\tz-index: 5;\n\tinset-inline-end: 35px;\n\tinset-inline-start: auto;\n\tbox-shadow: none !important;\n\tbackground: transparent !important;\n\tborder: none !important;\n\tpadding: 0 !important;\n}\n\n.button-reset-filter {\n\tmargin-inline-end: 10px;\n}\n\n.filter-changed {\n\twidth: 6px;\n\theight: 6px;\n\tbackground: var(--color-error);\n\tposition: absolute;\n\tz-index: 10;\n\tinset-inline-end: 12px;\n\tborder-radius: 50%;\n\ttop: 12px;\n}\n\n.mx-datepicker {\n\twidth:100%;\n}\n\n.filter-buttons {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-wrap: nowrap;\n\tgap: 4px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tpadding: 0 5px 5px 5px;\n}\n"],sourceRoot:""}]);const s=r},30135:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".confirm-modal[data-v-381b722b]{padding:20px}.confirm-modal__buttons[data-v-381b722b]{display:flex;justify-content:space-between}","",{version:3,sources:["webpack://./src/components/ConfirmationModal.vue"],names:[],mappings:"AACA,gCACC,YAAA,CAEA,yCACC,YAAA,CACA,6BAAA",sourcesContent:["\n.confirm-modal {\n\tpadding: 20px;\n\n\t&__buttons {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t}\n}\n"],sourceRoot:""}]);const s=r},30748:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".imip[data-v-69100434]{display:flex;flex-direction:column;border:solid 2px var(--color-border);border-radius:var(--border-radius-large);padding:10px}.imip__type[data-v-69100434]{display:flex;gap:5px;margin-inline-start:36px}.imip__more-options[data-v-69100434]{display:flex;flex-direction:column;margin-top:15px;gap:10px}.imip__more-options__row[data-v-69100434]{display:flex;flex-direction:column}.imip__more-options__row--calendar[data-v-69100434]{display:flex;width:100%}.imip__more-options__row--calendar[data-v-69100434] .calendar-picker-option__label{max-width:unset !important}.imip__more-options__row--comment textarea[data-v-69100434]{display:block;width:100%}.imip__actions[data-v-69100434]{margin-top:15px;margin-inline-start:36px}.imip__actions--buttons[data-v-69100434]{display:flex}.imip__actions--hint[data-v-69100434]{font-style:italic}","",{version:3,sources:["webpack://./src/components/Imip.vue"],names:[],mappings:"AACA,uBACC,YAAA,CACA,qBAAA,CACA,oCAAA,CACA,wCAAA,CACA,YAAA,CAEA,6BACC,YAAA,CACA,OAAA,CACA,wBAAA,CAGD,qCACC,YAAA,CACA,qBAAA,CACA,eAAA,CACA,QAAA,CAEA,0CACC,YAAA,CACA,qBAAA,CAEA,oDACC,YAAA,CACA,UAAA,CAEC,mFACC,0BAAA,CAKF,4DACC,aAAA,CACA,UAAA,CAMJ,gCACC,eAAA,CACA,wBAAA,CAEA,yCACC,YAAA,CAGD,sCACC,iBAAA",sourcesContent:["\n.imip {\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: solid 2px var(--color-border);\n\tborder-radius: var(--border-radius-large);\n\tpadding: 10px;\n\n\t&__type {\n\t\tdisplay: flex;\n\t\tgap: 5px;\n\t\tmargin-inline-start: 36px;\n\t}\n\n\t&__more-options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-top: 15px;\n\t\tgap: 10px;\n\n\t\t&__row {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t&--calendar {\n\t\t\t\tdisplay: flex;\n\t\t\t\twidth: 100%;\n\n\t\t\t\t\t:deep(.calendar-picker-option__label) {\n\t\t\t\t\t\tmax-width: unset !important;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\t&--comment {\n\t\t\t\ttextarea {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t&__actions {\n\t\tmargin-top: 15px;\n\t\tmargin-inline-start: 36px;\n\n\t\t&--buttons {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t&--hint {\n\t\t\tfont-style: italic;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},31020:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"\n.reservation[data-v-6b4c380e] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.event[data-v-6b4c380e] {\n\tflex-grow: 1;\n}\n.event-name[data-v-6b4c380e] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/EventReservation.vue"],names:[],mappings:";AAoIA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">\n\t\t\t\t{{ eventName }}\n\t\t\t</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">\n\t\t\t\t{{ location }}\n\t\t\t</div>\n\t\t\t<div v-if=\"date\">\n\t\t\t\t{{ date }}\n\t\t\t</div>\n\t\t\t<div v-if=\"time\">\n\t\t\t\t{{ time }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport.vue'\nimport { importCalendarEvent } from '../../service/DAVService.js'\nimport logger from '../../logger.js'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: { CalendarImport },\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.endDate)).format()\n\t\t\t} else if ('startDate' in this.data.reservationFor) {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).add(2, 'hours').format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tconst end = this.getEndDateTime(this.data.reservationFor)\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(end))\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n"],sourceRoot:""}]);const s=r},32684:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".translate-dialog[data-v-7b7cbb5d] .dialog__content{position:relative;display:flex;flex-direction:column;gap:calc(var(--default-grid-baseline)*2);min-height:300px;padding-bottom:calc(var(--default-grid-baseline)*3)}.translate-dialog__wrapper[data-v-7b7cbb5d]{display:flex;align-items:center;gap:calc(var(--default-grid-baseline)*4)}.translate-dialog .translate-dialog__select[data-v-7b7cbb5d]{width:50%}.translate-dialog__button[data-v-7b7cbb5d]{flex-shrink:0;margin-inline-start:auto}.translate-dialog__message[data-v-7b7cbb5d]{padding:calc(var(--default-grid-baseline)*2);flex-grow:1;border-radius:var(--border-radius-large)}.translate-dialog__message-source[data-v-7b7cbb5d]{color:var(--color-text-maxcontrast);border:2px solid var(--color-border)}.translate-dialog__message-translation[data-v-7b7cbb5d]{border:2px solid var(--color-primary-element)}","",{version:3,sources:["webpack://./src/components/TranslationModal.vue"],names:[],mappings:"AAEC,oDACC,iBAAA,CACA,YAAA,CACA,qBAAA,CACA,wCAAA,CACA,gBAAA,CACA,mDAAA,CAGD,4CACC,YAAA,CACA,kBAAA,CACA,wCAAA,CAGD,6DACC,SAAA,CAGD,2CACC,aAAA,CACA,wBAAA,CAGD,4CACC,4CAAA,CACA,WAAA,CACA,wCAAA,CAEA,mDACC,mCAAA,CACA,oCAAA,CAGD,wDACC,6CAAA",sourcesContent:["\n.translate-dialog {\n\t:deep(.dialog__content) {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: calc(var(--default-grid-baseline) * 2);\n\t\tmin-height: 300px;\n\t\tpadding-bottom: calc(var(--default-grid-baseline) * 3);\n\t}\n\n\t&__wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: calc(var(--default-grid-baseline) * 4);\n\t}\n\n\t& &__select {\n\t\twidth: 50%;\n\t}\n\n\t&__button {\n\t\tflex-shrink: 0;\n\t\tmargin-inline-start: auto;\n\t}\n\n\t&__message {\n\t\tpadding: calc(var(--default-grid-baseline) * 2);\n\t\tflex-grow: 1;\n\t\tborder-radius: var(--border-radius-large);\n\n\t\t&-source {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\tborder: 2px solid var(--color-border);\n\t\t}\n\n\t\t&-translation {\n\t\t\tborder: 2px solid var(--color-primary-element);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},32817:(t,e,n)=>{"use strict";n.d(e,{F:()=>s});var a=n(33455),i=n.n(a),o=n(70715),r=n(63814);const s=i()((t=>{if(null===t)return Promise.resolve(void 0);const e=(0,r.Jv)("/apps/mail/api/avatars/url/{email}",{email:t});return o.Ay.get(e,{adapter:"fetch",fetchOptions:{priority:"low"}}).then((e=>{if(204!==e.status)return e.data.isExternal?(0,r.Jv)("/apps/mail/api/avatars/image/{email}",{email:t}):e.data.url}))}))},34148:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,'[data-v-444bd1f3] .modal-wrapper .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:490px !important;max-height:500px !important}[data-v-444bd1f3] .calendar-picker-option__color-indicator{margin-inline-start:10px !important}.modal-content[data-v-444bd1f3]{padding:30px 30px 20px !important}input[data-v-444bd1f3],textarea[data-v-444bd1f3]{width:100%}[data-v-444bd1f3] input[type="text"]{padding:0 !important}.all-day[data-v-444bd1f3]{margin-inline-start:-1px;margin-top:5px;margin-bottom:5px}.taskTitle[data-v-444bd1f3]{margin-bottom:5px}.primary[data-v-444bd1f3]{height:44px !important;float:inline-end}[data-v-444bd1f3] .mx-datepicker{width:213px}',"",{version:3,sources:["webpack://./src/components/TaskModal.vue"],names:[],mappings:"AACA,kDACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAGD,2DACI,mCAAA,CAGJ,gCACC,iCAAA,CAGD,iDACC,UAAA,CAGD,qCACC,oBAAA,CAGD,0BACC,wBAAA,CACA,cAAA,CACA,iBAAA,CAGD,4BACC,iBAAA,CAGD,0BACC,sBAAA,CACA,gBAAA,CAGD,iCACC,WAAA",sourcesContent:["\n:deep(.modal-wrapper .modal-container) {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 490px !important;\n\tmax-height: 500px !important;\n}\n\n:deep(.calendar-picker-option__color-indicator){\n    margin-inline-start: 10px !important;\n}\n\n.modal-content {\n\tpadding: 30px 30px 20px !important;\n}\n\ninput , textarea {\n\twidth: 100%;\n}\n\n:deep(input[type='text']) {\n\tpadding: 0 !important;\n}\n\n.all-day {\n\tmargin-inline-start: -1px;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n\n.taskTitle {\n\tmargin-bottom: 5px;\n}\n\n.primary {\n\theight: 44px !important;\n\tfloat: inline-end;\n}\n\n:deep(.mx-datepicker) {\n\twidth: 213px;\n}\n"],sourceRoot:""}]);const s=r},37963:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,'/*!\n * SPDX-FileCopyrightText: 2019-2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */@media only screen and (max-width: var(--breakpoint-mobile)){.app-content-list{max-width:100vw}#mail-messages{width:100%}#mail-message-list-loading{width:100%}#mail-message{z-index:100;background:var(--color-main-background);width:100%;inset-inline-start:0;top:0}#mail-message-close{display:block;position:fixed;inset-inline-end:0;top:45px;width:44px;height:44px;background-size:24px;z-index:101;cursor:pointer;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";opacity:.4}#mail-message-close:hover,#mail-message-close:focus{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";opacity:.6}.hidden-mobile{display:none}textarea.message-body{padding-inline-end:12px}#mail-thread-header .mail-message-actions{margin-inline-end:5px}}',"",{version:3,sources:["webpack://./css/mobile.scss"],names:[],mappings:"AAAA;;;EAAA,CAIA,6DACC,kBACC,eAAA,CAID,eACC,UAAA,CAID,2BACC,UAAA,CAID,cACC,WAAA,CACA,uCAAA,CACA,UAAA,CACA,oBAAA,CACA,KAAA,CAGD,oBACC,aAAA,CACA,cAAA,CACA,kBAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CACA,oBAAA,CACA,WAAA,CACA,cAAA,CACA,gEAAA,CACA,UAAA,CAED,oDAEC,gEAAA,CACA,UAAA,CAGD,eACC,YAAA,CAGD,sBACC,uBAAA,CAID,0CACC,qBAAA,CAAA",sourcesContent:["/*!\n * SPDX-FileCopyrightText: 2019-2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n@media only screen and (max-width: var(--breakpoint-mobile)) {\n\t.app-content-list {\n\t\tmax-width: 100vw;\n\t}\n\n\t/* full width for message list on mobile */\n\t#mail-messages {\n\t\twidth: 100%;\n\t}\n\n\t/* correctly center loading icon on mobile */\n\t#mail-message-list-loading {\n\t\twidth: 100%;\n\t}\n\n\t/* overlay message detail on top of message list */\n\t#mail-message {\n\t\tz-index: 100;\n\t\tbackground: var(--color-main-background);\n\t\twidth: 100%;\n\t\tinset-inline-start: 0;\n\t\ttop: 0;\n\t}\n\n\t#mail-message-close {\n\t\tdisplay: block;\n\t\tposition: fixed;\n\t\tinset-inline-end: 0;\n\t\ttop: 45px;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tbackground-size: 24px;\n\t\tz-index: 101;\n\t\tcursor: pointer;\n\t\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=40)';\n\t\topacity: 0.4;\n\t}\n\t#mail-message-close:hover,\n\t#mail-message-close:focus {\n\t\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=60)';\n\t\topacity: 0.6;\n\t}\n\n\t.hidden-mobile {\n\t\tdisplay: none;\n\t}\n\n\ttextarea.message-body {\n\t\tpadding-inline-end: 12px;\n\t}\n\n\t/* reply-forward actions align to the far right */\n\t#mail-thread-header .mail-message-actions {\n\t\tmargin-inline-end: 5px;\n\t}\n}\n"],sourceRoot:""}]);const s=r},39679:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var a=n(85745);let i;const o=async()=>i||(i=window.mailvelope,i?(a.A.debug("mailvelope found statically"),i):(a.A.debug("loading mailvelope dynamically"),i=await new Promise((t=>{window.addEventListener("mailvelope",(()=>t(window.mailvelope)),!1)})),a.A.debug("mailvelope found dynamically"),i))},40653:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".sender[data-v-74b4b5fc]{margin-inline-start:calc(var(--default-grid-baseline)*2)}.sender__email[data-v-74b4b5fc]{color:var(--color-text-maxcontrast);text-overflow:ellipsis;overflow:hidden}.sender__external[data-v-74b4b5fc]{color:var(--color-error)}.right[data-v-74b4b5fc]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:calc(var(--default-grid-baseline)*2);height:44px}.right .app-content-list-item-menu[data-v-74b4b5fc]{margin-inline-start:var(--default-grid-baseline)}.right .timestamp[data-v-74b4b5fc]{margin-inline-end:calc(var(--default-grid-baseline)*2);color:var(--color-text-maxcontrast);white-space:nowrap;margin-bottom:0}.button[data-v-74b4b5fc]{color:var(--color-main-background)}.button[data-v-74b4b5fc]:not(.active):not(.primary){display:none}.button:not(.active):not(.primary).primary[data-v-74b4b5fc]{background-color:var(--color-primary-element);opacity:1;margin-bottom:0}.envelope[data-v-74b4b5fc]{display:flex;flex-direction:column;border:2px solid var(--color-border);border-radius:var(--border-radius-container-large);margin-inline:calc(var(--default-grid-baseline)*2);background-color:var(--color-main-background);padding-bottom:calc(var(--default-grid-baseline)*7);animation:show-74b4b5fc 200ms 90ms cubic-bezier(0.17, 0.67, 0.83, 0.67) forwards;opacity:.5;transform-origin:top center}@keyframes show-74b4b5fc{100%{opacity:1;transform:none}}.envelope+.envelope[data-v-74b4b5fc]{margin-top:calc(var(--default-grid-baseline)*-7)}.envelope[data-v-74b4b5fc]:last-of-type{margin-bottom:calc(var(--default-grid-baseline)*2);padding-bottom:0}.envelope__follow-up-header[data-v-74b4b5fc]{display:flex;align-items:center;justify-content:flex-end;gap:calc(var(--default-grid-baseline)*4);padding:calc(var(--default-grid-baseline)*2)}.envelope__follow-up-header__date[data-v-74b4b5fc]{flex-shrink:1}.envelope__follow-up-header__actions[data-v-74b4b5fc]{flex-shrink:0;display:flex;gap:var(--default-grid-baseline)}.envelope__header[data-v-74b4b5fc]{position:relative;display:flex;align-items:center;padding:var(--border-radius-element) var(--border-radius-container) var(--border-radius-container) var(--border-radius-container);border-radius:var(--border-radius);min-height:68px}.envelope__header__avatar[data-v-74b4b5fc]{position:relative}.envelope__header__avatar-avatar[data-v-74b4b5fc]{display:block}.envelope__header__avatar .app-content-list-item-star[data-v-74b4b5fc]{position:absolute;cursor:pointer}.envelope__header__avatar .app-content-list-item-star.icon-important[data-v-74b4b5fc]{background-image:none;opacity:1;width:16px;height:16px;display:flex;top:0px;inset-inline-start:0px}.envelope__header__avatar .app-content-list-item-star.icon-important[data-v-74b4b5fc]:hover,.envelope__header__avatar .app-content-list-item-star.icon-important[data-v-74b4b5fc]:focus{opacity:.5}.envelope__header__avatar .app-content-list-item-star.icon-important[data-v-74b4b5fc] path{fill:#fc0;stroke:var(--color-main-background);cursor:pointer}.envelope__header__avatar .app-content-list-item-star.favorite-icon-style[data-v-74b4b5fc]{display:inline-block;top:-2px;inset-inline-end:-2px;stroke:var(--color-main-background);stroke-width:2}.envelope__header__avatar .app-content-list-item-star.favorite-icon-style[data-v-74b4b5fc]:hover{opacity:.5}.envelope__header__avatar .app-content-list-item-star.junk-icon-style[data-v-74b4b5fc]{display:inline-block;bottom:-2px;inset-inline-end:-2px;opacity:.2}.envelope__header__avatar .app-content-list-item-star.junk-icon-style[data-v-74b4b5fc]:hover{opacity:.1}.envelope__header__unsubscribe[data-v-74b4b5fc]{color:var(--color-text-maxcontrast)}.envelope__header__left__sender-subject-tags[data-v-74b4b5fc]{white-space:nowrap;width:100%}.envelope .subline[data-v-74b4b5fc]{margin-inline-start:8px;color:var(--color-text-maxcontrast);cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.envelope--expanded[data-v-74b4b5fc]{min-height:350px}.left[data-v-74b4b5fc]{flex-grow:1;min-width:0;display:flex;position:relative;z-index:1;align-items:center}.left[data-v-74b4b5fc]:not(.seen){font-weight:bold}.tag-group__label[data-v-74b4b5fc]{margin:0 calc(var(--default-grid-baseline)*2);z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-inline:calc(var(--default-grid-baseline)*.5)}.tag-group__bg[data-v-74b4b5fc]{position:absolute;width:100%;height:100%;top:0;inset-inline-start:0;opacity:15%}.tagline[data-v-74b4b5fc]{display:flex;text-overflow:ellipsis;overflow:hidden}.tag-group[data-v-74b4b5fc]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;text-overflow:ellipsis;inset-inline-start:var(--default-grid-baseline)}.smime-text[data-v-74b4b5fc]{padding-inline-start:calc(var(--default-grid-baseline)*3)}[data-v-74b4b5fc] .action-button__name{font-weight:normal;display:inline;align-items:center}@media only screen and (max-width: 400px){.sender[data-v-74b4b5fc]{text-overflow:ellipsis;overflow:hidden;width:180px}}","",{version:3,sources:["webpack://./src/components/ThreadEnvelope.vue"],names:[],mappings:"AACA,yBACC,wDAAA,CACA,gCACC,mCAAA,CACA,sBAAA,CACA,eAAA,CAGD,mCACC,wBAAA,CAIF,wBACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,wBAAA,CACA,wDAAA,CACA,WAAA,CAEA,oDACC,gDAAA,CAGD,mCACC,sDAAA,CACA,mCAAA,CACA,kBAAA,CACA,eAAA,CAIF,yBACC,kCAAA,CACA,oDACC,YAAA,CAEA,4DACC,6CAAA,CACA,SAAA,CACA,eAAA,CAMH,2BACC,YAAA,CACA,qBAAA,CACA,oCAAA,CACA,kDAAA,CACA,kDAAA,CACA,6CAAA,CACA,mDAAA,CACA,gFAAA,CACA,UAAA,CACA,2BAAA,CACA,yBACC,KACC,SAAA,CACA,cAAA,CAAA,CAIF,qCACC,gDAAA,CAGD,wCACC,kDAAA,CACA,gBAAA,CAGD,6CACC,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,wCAAA,CACA,4CAAA,CAEA,mDACC,aAAA,CAGD,sDACC,aAAA,CACA,YAAA,CACA,gCAAA,CAIF,mCACC,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,iIAAA,CACA,kCAAA,CACA,eAAA,CAEA,2CACC,iBAAA,CAEA,kDAKC,aAAA,CAGD,uEACC,iBAAA,CACA,cAAA,CAEA,sFACC,qBAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,OAAA,CACA,sBAAA,CAEA,wLAEC,UAAA,CAGD,2FACC,SAAA,CACA,mCAAA,CACA,cAAA,CAGF,2FACC,oBAAA,CACA,QAAA,CACA,qBAAA,CAEA,mCAAA,CACA,cAAA,CACA,iGACC,UAAA,CAGF,uFACC,oBAAA,CACA,WAAA,CACA,qBAAA,CACA,UAAA,CACA,6FACC,UAAA,CAMJ,gDACC,mCAAA,CAED,8DACC,kBAAA,CACA,UAAA,CAIF,oCACC,uBAAA,CACA,mCAAA,CACA,cAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGD,qCACC,gBAAA,CAIF,uBACC,WAAA,CACA,WAAA,CACA,YAAA,CACA,iBAAA,CACA,SAAA,CACA,kBAAA,CAGD,kCACC,gBAAA,CAGD,mCACC,6CAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,oDAAA,CAGD,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,oBAAA,CACA,WAAA,CAGD,0BACC,YAAA,CACA,sBAAA,CACA,eAAA,CAGD,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,sBAAA,CACA,+CAAA,CAGD,6BAEC,yDAAA,CAGD,uCACC,kBAAA,CACA,cAAA,CACA,kBAAA,CAED,0CACC,yBACC,sBAAA,CACA,eAAA,CACA,WAAA,CAAA",sourcesContent:["\n.sender {\n\tmargin-inline-start: calc(var(--default-grid-baseline) * 2);\n\t&__email{\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t}\n\n\t&__external{\n\t\tcolor: var(--color-error);\n\t}\n}\n\n.right {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tmargin-inline-start: calc(var(--default-grid-baseline) * 2);\n\theight: 44px;\n\n\t.app-content-list-item-menu {\n\t\tmargin-inline-start: var(--default-grid-baseline);\n\t}\n\n\t.timestamp {\n\t\tmargin-inline-end: calc(var(--default-grid-baseline) * 2);\n\t\tcolor: var(--color-text-maxcontrast);\n\t\twhite-space: nowrap;\n\t\tmargin-bottom: 0;\n\t}\n}\n\n.button {\n\tcolor: var(--color-main-background);\n\t&:not(.active):not(.primary) {\n\t\tdisplay: none;\n\n\t\t&.primary {\n\t\t\tbackground-color: var(--color-primary-element);\n\t\t\topacity: 1;\n\t\t\tmargin-bottom: 0;\n\n\t\t}\n\t}\n}\n\n.envelope {\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: 2px solid var(--color-border);\n\tborder-radius: var(--border-radius-container-large);\n\tmargin-inline: calc(var(--default-grid-baseline) * 2);\n\tbackground-color: var(--color-main-background);\n\tpadding-bottom: calc(var(--default-grid-baseline) * 7);\n\tanimation: show 200ms 90ms cubic-bezier(.17, .67, .83, .67) forwards;\n\topacity: 0.5;\n\ttransform-origin: top center;\n\t@keyframes show {\n\t\t100% {\n\t\t\topacity: 1;\n\t\t\ttransform: none;\n\t\t}\n\t}\n\n\t& + .envelope {\n\t\tmargin-top: calc(var(--default-grid-baseline) * -7);\n\t}\n\n\t&:last-of-type {\n\t\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n\t\tpadding-bottom: 0;\n\t}\n\n\t&__follow-up-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tgap: calc(var(--default-grid-baseline) * 4);\n\t\tpadding: calc(var(--default-grid-baseline) * 2);\n\n\t\t&__date {\n\t\t\tflex-shrink: 1;\n\t\t}\n\n\t\t&__actions {\n\t\t\tflex-shrink: 0;\n\t\t\tdisplay: flex;\n\t\t\tgap: var(--default-grid-baseline);\n\t\t}\n\t}\n\n\t&__header {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: var(--border-radius-element) var(--border-radius-container) var(--border-radius-container) var(--border-radius-container);\n\t\tborder-radius: var(--border-radius);\n\t\tmin-height: 68px; /* prevents jumping between open/collapsed */\n\n\t\t&__avatar {\n\t\t\tposition: relative;\n\n\t\t\t&-avatar {\n\t\t\t\t/* The block makes the wrapper div cover the avatar exactly\n\t\t\t\t * (no extra space) and allows center aligning the avatar\n\t\t\t\t * with the rest of the header elements.\n\t\t\t\t */\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t.app-content-list-item-star {\n\t\t\t\tposition: absolute;\n\t\t\t\tcursor: pointer;\n\n\t\t\t\t&.icon-important {\n\t\t\t\t\tbackground-image: none;\n\t\t\t\t\topacity: 1;\n\t\t\t\t\twidth: 16px;\n\t\t\t\t\theight: 16px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\ttop: 0px;\n\t\t\t\t\tinset-inline-start: 0px;\n\n\t\t\t\t\t&:hover,\n\t\t\t\t\t&:focus {\n\t\t\t\t\t\topacity: 0.5;\n\t\t\t\t\t}\n\n\t\t\t\t\t:deep(path) {\n\t\t\t\t\t\tfill: #ffcc00;\n\t\t\t\t\t\tstroke: var(--color-main-background);\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t&.favorite-icon-style {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\ttop: -2px;\n\t\t\t\t\tinset-inline-end: -2px;\n\n\t\t\t\t\tstroke: var(--color-main-background);\n\t\t\t\t\tstroke-width: 2;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\topacity: .5;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t&.junk-icon-style {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tbottom: -2px;\n\t\t\t\t\tinset-inline-end: -2px;\n\t\t\t\t\topacity: .2;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\topacity: .1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t&__unsubscribe {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t\t&__left__sender-subject-tags {\n\t\t\twhite-space: nowrap;\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\t.subline {\n\t\tmargin-inline-start: 8px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tcursor: default;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t&--expanded {\n\t\tmin-height: 350px;\n\t}\n}\n\n.left {\n\tflex-grow: 1;\n\tmin-width: 0; /* https://css-tricks.com/flexbox-truncated-text/ */\n\tdisplay: flex;\n\tposition: relative;\n\tz-index: 1;\n\talign-items: center;\n}\n\n.left:not(.seen) {\n\tfont-weight: bold;\n}\n\n.tag-group__label {\n\tmargin: 0 calc(var(--default-grid-baseline) * 2);\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-inline: calc(var(--default-grid-baseline) * 0.5);\n}\n\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tinset-inline-start: 0;\n\topacity: 15%;\n}\n\n.tagline {\n\tdisplay: flex;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tinset-inline-start: var(--default-grid-baseline);\n}\n\n.smime-text {\n\t// same as padding-right on action-text styling\n\tpadding-inline-start: calc(var(--default-grid-baseline) * 3);\n}\n\n:deep(.action-button__name) {\n\tfont-weight: normal;\n\tdisplay: inline;\n\talign-items: center;\n}\n@media only screen and (max-width: 400px) {\n\t.sender {\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\twidth: 180px;\n\t}\n}\n"],sourceRoot:""}]);const s=r},41497:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg"><path d="M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z" stroke="#000" stroke-width="2"></path></svg>'},45111:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".needs-translation-info[data-v-648f74b8]{display:flex;align-items:center}.needs-translation-info--html[data-v-648f74b8]{margin-inline-start:10px;color:var(--color-text-maxcontrast) !important}","",{version:3,sources:["webpack://./src/components/NeedsTranslationInfo.vue"],names:[],mappings:"AACA,yCACI,YAAA,CACH,kBAAA,CACG,+CACF,wBAAA,CACA,8CAAA",sourcesContent:["\n.needs-translation-info {\n    display: flex;\n\talign-items: center;\n    &--html {\n\t\tmargin-inline-start: 10px;\n\t\tcolor: var(--color-text-maxcontrast) !important;\n    }\n}\n"],sourceRoot:""}]);const s=r},47677:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".list-item__wrapper[data-v-f6f186fa]{display:flex;position:relative;width:100%;padding:2px 4px}.list-item__wrapper[data-v-f6f186fa]:first-of-type{padding-block-start:4px}.list-item__wrapper[data-v-f6f186fa]:last-of-type{padding-block-end:4px}.list-item__wrapper--active .list-item[data-v-f6f186fa],.list-item__wrapper.active .list-item[data-v-f6f186fa]{background-color:var(--color-primary-element)}.list-item__wrapper--active .list-item[data-v-f6f186fa]:hover,.list-item__wrapper--active .list-item[data-v-f6f186fa]:focus-within,.list-item__wrapper--active .list-item[data-v-f6f186fa]:has(:focus-visible),.list-item__wrapper--active .list-item[data-v-f6f186fa]:has(:active),.list-item__wrapper.active .list-item[data-v-f6f186fa]:hover,.list-item__wrapper.active .list-item[data-v-f6f186fa]:focus-within,.list-item__wrapper.active .list-item[data-v-f6f186fa]:has(:focus-visible),.list-item__wrapper.active .list-item[data-v-f6f186fa]:has(:active){background-color:var(--color-primary-element-hover)}.list-item__wrapper--active .list-item-content__name[data-v-f6f186fa],.list-item__wrapper--active .list-item-content__subname[data-v-f6f186fa],.list-item__wrapper--active .list-item-content__details[data-v-f6f186fa],.list-item__wrapper--active .list-item-details__details[data-v-f6f186fa],.list-item__wrapper.active .list-item-content__name[data-v-f6f186fa],.list-item__wrapper.active .list-item-content__subname[data-v-f6f186fa],.list-item__wrapper.active .list-item-content__details[data-v-f6f186fa],.list-item__wrapper.active .list-item-details__details[data-v-f6f186fa]{color:var(--color-primary-element-text)}.list-item__wrapper .list-item-content__name[data-v-f6f186fa],.list-item__wrapper .list-item-content__subname[data-v-f6f186fa],.list-item__wrapper .list-item-content__details[data-v-f6f186fa],.list-item__wrapper .list-item-details__details[data-v-f6f186fa]{white-space:nowrap;margin-block:0;margin-inline-start:0;margin-inline-end:auto;overflow:hidden;text-overflow:ellipsis}.list-item[data-v-f6f186fa]{--list-item-padding: calc(var(--default-grid-baseline) * 2);--list-item-border-radius: var(--border-radius-element, 32px);--list-item-height: calc(4 * var(--default-line-height));height:var(--list-item-height);box-sizing:border-box;display:flex;position:relative;flex:0 0 auto;justify-content:flex-start;width:100%;border-radius:var(--border-radius-element, 32px);cursor:pointer;transition:background-color var(--animation-quick) ease-in-out;list-style:none;flex-wrap:nowrap !important;padding:var(--default-grid-baseline)}.list-item[data-v-f6f186fa]:hover,.list-item[data-v-f6f186fa]:has(:active),.list-item[data-v-f6f186fa]:has(:focus-visible){background-color:var(--color-background-hover)}.list-item:hover a[data-v-f6f186fa],.list-item:has(:active) a[data-v-f6f186fa],.list-item:has(:focus-visible) a[data-v-f6f186fa]{max-width:calc(100% - var(--default-clickable-area))}.list-item[data-v-f6f186fa]:has(.list-item__anchor:focus-visible){outline:2px solid var(--color-main-text);box-shadow:0 0 0 4px var(--color-main-background)}.list-item .list-item-content[data-v-f6f186fa]{display:flex;flex-direction:column}.list-item .list-item-content__name[data-v-f6f186fa]{min-width:100px;flex:1 1 10%;font-weight:500;max-width:78%;line-height:var(--default-line-height)}.list-item .list-item-content__inner[data-v-f6f186fa]{display:flex;flex-direction:row;justify-content:space-between;max-width:100%}.list-item .list-item-content__inner__main[data-v-f6f186fa]{flex:0 1 auto;min-width:0}.list-item .list-item-content__inner__subname[data-v-f6f186fa]{flex:1 0;min-width:0;color:var(--color-text-maxcontrast);line-height:var(--default-line-height)}.list-item .list-item-content__inner__subname--bold[data-v-f6f186fa]{font-weight:500}.list-item .list-item-content__inner__tags[data-v-f6f186fa]{overflow-y:auto;display:flex;flex-direction:row;justify-content:start;align-items:center;line-height:var(--default-line-height)}.list-item .list-item-content__inner__details[data-v-f6f186fa]{display:flex;flex-direction:column;justify-content:start;align-items:end;white-space:nowrap;gap:4px;margin-top:-22px}.list-item .list-item-content__inner__details__details[data-v-f6f186fa]{margin:0 4px !important;color:var(--color-text-maxcontrast);height:var(--default-line-height);font-weight:normal}.list-item .list-item-content__inner__details__extra[data-v-f6f186fa]{margin:0 4px;height:calc(var(--default-line-height)*var(--default-font-size));display:flex;align-items:center}.list-item .list-item-content__inner__details__extra__indicator[data-v-f6f186fa]{margin:0 4px}.list-item a[data-v-f6f186fa]{max-width:100%;margin:0}.list-item .one-line .envelope__subtitle__subject[data-v-f6f186fa]{max-width:300px}.list-item--compact[data-v-f6f186fa]{--list-item-padding: 2px}.list-item--one-line[data-v-f6f186fa]{--list-item-height: calc(var(--default-line-height) * var(--default-font-size) * 2 + var(--list-item-padding) * 4);--list-item-border-radius: var(--border-radius-element, calc(var(--default-clickable-area) / 2));padding-block:calc(var(--list-item-padding)*2);--list-item-padding: 2px;height:unset}.list-item--one-line .list-item-content[data-v-f6f186fa]{flex-direction:row;align-content:center;align-items:center}.list-item--one-line .list-item-content__name[data-v-f6f186fa]{align-self:center;min-width:300px;padding-inline-end:calc(var(--default-grid-baseline)*2)}.list-item--one-line .list-item-content__inner[data-v-f6f186fa]{overflow-y:hidden}.list-item--one-line .list-item-content__inner__main[data-v-f6f186fa]{display:flex;justify-content:start;min-width:0}.list-item--one-line .list-item-content__inner__details[data-v-f6f186fa]{flex-direction:row;align-items:unset;justify-content:end;margin-top:0;margin-inline-start:0}.list-item--one-line a[data-v-f6f186fa]{margin:0;align-items:center;height:unset}.list-item--one-line .list-item__actions[data-v-f6f186fa]{align-self:center;margin-top:0}.list-item__anchor[data-v-f6f186fa]{display:flex;flex:1 1 auto;align-items:start;height:var(--list-item-height);min-width:0}.list-item__anchor[data-v-f6f186fa]:focus-visible{outline:none}.list-item-content[data-v-f6f186fa]{display:flex;flex:1 0;justify-content:space-between;padding-inline-start:8px;min-width:0}.list-item-content__main[data-v-f6f186fa]{flex:1 0;width:0;margin:auto 0}.list-item-content__main--oneline[data-v-f6f186fa]{display:flex}.list-item__actions[data-v-f6f186fa]{flex:0 0 auto;justify-content:center;align-self:start;margin-top:0}[data-v-f6f186fa] .app-content-list-item-icon,[data-v-f6f186fa] .avatardiv,[data-v-f6f186fa] .avatardiv__initials-wrapper{height:calc(var(--header-menu-item-height) - 4px);width:calc(var(--header-menu-item-height) - 4px)}","",{version:3,sources:["webpack://./src/components/EnvelopeSkeleton.vue"],names:[],mappings:"AAEA,qCACC,YAAA,CACA,iBAAA,CACA,UAAA,CAEA,eAAA,CAEA,mDACC,uBAAA,CAED,kDACC,qBAAA,CAKA,+GACC,6CAAA,CACA,oiBAIC,mDAAA,CAIF,8jBAIC,uCAAA,CAGF,iQAIC,kBAAA,CACA,cAAA,CACA,qBAAA,CACA,sBAAA,CACA,eAAA,CACA,sBAAA,CAKF,4BACC,2DAAA,CAEA,6DAAA,CACA,wDAAA,CACA,8BAAA,CAGA,qBAAA,CACA,YAAA,CACA,iBAAA,CACA,aAAA,CACA,0BAAA,CAEA,UAAA,CACA,gDAAA,CACA,cAAA,CACA,8DAAA,CACA,eAAA,CACA,2BAAA,CACA,oCAAA,CAEA,2HAGC,8CAAA,CAEA,iIACC,oDAAA,CAIF,kEACC,wCAAA,CACA,iDAAA,CAGD,+CACC,YAAA,CACA,qBAAA,CAEA,qDACC,eAAA,CACA,YAAA,CACA,eAAA,CAEA,aAAA,CACA,sCAAA,CAGD,sDACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,cAAA,CAEA,4DACC,aAAA,CACA,WAAA,CAGD,+DACC,QAAA,CACA,WAAA,CACA,mCAAA,CACA,sCAAA,CACA,qEACC,eAAA,CAIF,4DACC,eAAA,CACA,YAAA,CACA,kBAAA,CACA,qBAAA,CACA,kBAAA,CACA,sCAAA,CAGD,+DACC,YAAA,CACA,qBAAA,CACA,qBAAA,CACA,eAAA,CACA,kBAAA,CACA,OAAA,CAEA,gBAAA,CAEA,wEACC,uBAAA,CACA,mCAAA,CACA,iCAAA,CACA,kBAAA,CAGD,sEACC,YAAA,CACA,gEAAA,CACA,YAAA,CACA,kBAAA,CAEA,iFACC,YAAA,CAOL,8BACC,cAAA,CACA,QAAA,CAGD,mEACC,eAAA,CAGD,qCACC,wBAAA,CAGD,sCACC,kHAAA,CACA,gGAAA,CACA,8CAAA,CACA,wBAAA,CACA,YAAA,CAEA,yDACC,kBAAA,CACA,oBAAA,CACA,kBAAA,CAEA,+DACC,iBAAA,CACA,eAAA,CACA,uDAAA,CAGD,gEACC,iBAAA,CAGD,sEACC,YAAA,CACA,qBAAA,CACA,WAAA,CAGD,yEACC,kBAAA,CACA,iBAAA,CACA,mBAAA,CACA,YAAA,CACA,qBAAA,CAIF,wCACC,QAAA,CACA,kBAAA,CACA,YAAA,CAGD,0DACC,iBAAA,CACA,YAAA,CAIF,oCACC,YAAA,CACA,aAAA,CACA,iBAAA,CACA,8BAAA,CACA,WAAA,CAGA,kDACC,YAAA,CAIF,oCACC,YAAA,CACA,QAAA,CACA,6BAAA,CACA,wBAAA,CACA,WAAA,CACA,0CACC,QAAA,CACA,OAAA,CACA,aAAA,CAEA,mDACC,YAAA,CAKH,qCACC,aAAA,CACA,sBAAA,CACA,gBAAA,CACA,YAAA,CAMF,0HACC,iDAAA,CACA,gDAAA",sourcesContent:["\n\n.list-item__wrapper {\n\tdisplay: flex;\n\tposition: relative;\n\twidth: 100%;\n\t// padding for the focus-visible styles. Width is reduced to compensate it\n\tpadding: 2px 4px;\n\t// The first and lastelement needs also padding for the box shadow of the focus-visible effect\n\t&:first-of-type {\n\t\tpadding-block-start: 4px;\n\t}\n\t&:last-of-type {\n\t\tpadding-block-end: 4px\n\t}\n\n\t&--active,\n\t&.active {\n\t\t.list-item {\n\t\t\tbackground-color: var(--color-primary-element);\n\t\t\t&:hover,\n\t\t\t&:focus-within,\n\t\t\t&:has(:focus-visible),\n\t\t\t&:has(:active) {\n\t\t\t\tbackground-color: var(--color-primary-element-hover);\n\t\t\t}\n\t\t}\n\n\t\t.list-item-content__name,\n\t\t.list-item-content__subname,\n\t\t.list-item-content__details,\n\t\t.list-item-details__details {\n\t\t\tcolor: var(--color-primary-element-text);\n\t\t}\n\t}\n\t.list-item-content__name,\n\t.list-item-content__subname,\n\t.list-item-content__details,\n\t.list-item-details__details {\n\t\twhite-space: nowrap;\n\t\tmargin-block: 0;\n\t\tmargin-inline-start: 0;\n\t\tmargin-inline-end: auto;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n\n// NcListItem\n.list-item {\n\t--list-item-padding: calc(var(--default-grid-baseline) * 2);\n\t// The content are two lines of text and respect the 1.5 line height\n\t--list-item-border-radius: var(--border-radius-element, 32px);\n\t--list-item-height: calc(4 * var(--default-line-height));\n\theight: var(--list-item-height);\n\n\t// General styles\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tposition: relative;\n\tflex: 0 0 auto;\n\tjustify-content: flex-start;\n\t// we need to make sure the elements are not cut off by the border\n\twidth: 100%;\n\tborder-radius: var(--border-radius-element, 32px);\n\tcursor: pointer;\n\ttransition: background-color var(--animation-quick) ease-in-out;\n\tlist-style: none;\n\tflex-wrap: nowrap !important;\n\tpadding: var(--default-grid-baseline);\n\n\t&:hover,\n\t&:has(:active),\n\t&:has(:focus-visible) {\n\t\tbackground-color: var(--color-background-hover);\n\n\t\ta {\n\t\t\tmax-width: calc(100% - var(--default-clickable-area));\n\t\t}\n\t}\n\n\t&:has(&__anchor:focus-visible) {\n\t\toutline: 2px solid var(--color-main-text);\n\t\tbox-shadow: 0 0 0 4px var(--color-main-background);\n\t}\n\n\t.list-item-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&__name {\n\t\t\tmin-width: 100px;\n\t\t\tflex: 1 1 10%;\n\t\t\tfont-weight: 500;\n\t\t\t// we changed the time/date and actions to be alighned with the name\n\t\t\tmax-width: 78%;\n\t\t\tline-height: var(--default-line-height);\n\t\t}\n\n\t\t&__inner {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\tjustify-content: space-between;\n\t\t\tmax-width: 100%;\n\n\t\t\t&__main {\n\t\t\t\tflex: 0 1 auto;\n\t\t\t\tmin-width: 0;\n\t\t\t}\n\n\t\t\t&__subname {\n\t\t\t\tflex: 1 0;\n\t\t\t\tmin-width: 0;\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t\tline-height: var(--default-line-height);\n\t\t\t\t&--bold {\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t&__tags {\n\t\t\t\toverflow-y: auto;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tjustify-content: start;\n\t\t\t\talign-items: center;\n\t\t\t\tline-height: var(--default-line-height);\n\t\t\t}\n\n\t\t\t&__details {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tjustify-content: start;\n\t\t\t\talign-items: end;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tgap: 4px;\n\t\t\t\t// to align details on top instead of in the center. The right way to do it would be to change the template, but that breaks one-line layout\n\t\t\t\tmargin-top: -22px;\n\n\t\t\t\t&__details {\n\t\t\t\t\tmargin: 0 4px !important;\n\t\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t\t\theight: var(--default-line-height);\n\t\t\t\t\tfont-weight: normal;\n\t\t\t\t}\n\n\t\t\t\t&__extra {\n\t\t\t\t\tmargin: 0 4px;\n\t\t\t\t\theight: calc(var(--default-line-height) * var(--default-font-size));\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t&__indicator {\n\t\t\t\t\t\tmargin: 0 4px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ta {\n\t\tmax-width: 100%;\n\t\tmargin: 0;\n\t}\n\n\t.one-line .envelope__subtitle__subject {\n\t\tmax-width: 300px;\n\t}\n\n\t&--compact {\n\t\t--list-item-padding: 2px;\n\t}\n\n\t&--one-line {\n\t\t--list-item-height: calc(var(--default-line-height) * var(--default-font-size) * 2 + var(--list-item-padding) * 4);\n\t\t--list-item-border-radius: var(--border-radius-element, calc(var(--default-clickable-area) / 2));\n\t\tpadding-block: calc(var(--list-item-padding) * 2);\n\t\t--list-item-padding: 2px;\n\t\theight: unset;\n\n\t\t.list-item-content {\n\t\t\tflex-direction: row;\n\t\t\talign-content: center;\n\t\t\talign-items: center;\n\n\t\t\t&__name {\n\t\t\t\talign-self: center;\n\t\t\t\tmin-width: 300px;\n\t\t\t\tpadding-inline-end: calc(var(--default-grid-baseline) * 2);\n\t\t\t}\n\n\t\t\t&__inner {\n\t\t\t\toverflow-y: hidden;\n\t\t\t}\n\n\t\t\t&__inner__main {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: start;\n\t\t\t\tmin-width: 0;\n\t\t\t}\n\n\t\t\t&__inner__details {\n\t\t\t\tflex-direction: row;\n\t\t\t\talign-items: unset;\n\t\t\t\tjustify-content: end;\n\t\t\t\tmargin-top: 0;\n\t\t\t\tmargin-inline-start: 0;\n\t\t\t}\n\t\t}\n\n\t\ta {\n\t\t\tmargin: 0;\n\t\t\talign-items: center;\n\t\t\theight: unset;\n\t\t}\n\n\t\t.list-item__actions {\n\t\t\talign-self: center;\n\t\t\tmargin-top: 0;\n\t\t}\n\t}\n\n\t&__anchor {\n\t\tdisplay: flex;\n\t\tflex: 1 1 auto;\n\t\talign-items: start;\n\t\theight: var(--list-item-height);\n\t\tmin-width: 0;\n\n\t\t// This is handled by the parent container\n\t\t&:focus-visible {\n\t\t\toutline: none;\n\t\t}\n\t}\n\n\t&-content {\n\t\tdisplay: flex;\n\t\tflex: 1 0;\n\t\tjustify-content: space-between;\n\t\tpadding-inline-start: 8px;\n\t\tmin-width: 0;\n\t\t&__main {\n\t\t\tflex: 1 0;\n\t\t\twidth: 0;\n\t\t\tmargin: auto 0;\n\n\t\t\t&--oneline {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__actions {\n\t\tflex: 0 0 auto;\n\t\tjustify-content: center;\n\t\talign-self: start;\n\t\tmargin-top: 0;\n\t}\n\n}\n\n// Force icon to be in line with the first two lines\n:deep(.app-content-list-item-icon), :deep(.avatardiv), :deep(.avatardiv__initials-wrapper) {\n\theight: calc(var(--header-menu-item-height) - 4px);\n\twidth: calc(var(--header-menu-item-height) - 4px);\n}\n\n"],sourceRoot:""}]);const s=r},49518:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,'.mail-message-account-color[data-v-5b0e59a1]{position:absolute;inset-inline-start:0px;width:2px;height:69px;z-index:1}.envelope .app-content-list-item-icon[data-v-5b0e59a1]{height:40px}.envelope__subtitle[data-v-5b0e59a1]{display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;align-items:center}.envelope__subtitle__subject[data-v-5b0e59a1]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:var(--default-line-height)}.envelope__subtitle__subject__text.draft[data-v-5b0e59a1]{line-height:130%}.envelope__subtitle__subject__text.draft[data-v-5b0e59a1] em{font-style:italic}.envelope__preview-text[data-v-5b0e59a1]{color:var(--color-text-maxcontrast);overflow:hidden;font-weight:initial;max-height:calc(var(--default-font-size)*var(--default-line-height)*2);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.envelope__preview-text .material-design-icon[data-v-5b0e59a1]{display:inline;position:relative;top:2px}.list-item__wrapper--active div[data-v-5b0e59a1],.list-item__wrapper--active[data-v-5b0e59a1] .list-item-content__inner__details__details{color:var(--color-primary-element-text) !important}.icon-important[data-v-5b0e59a1] path{fill:#fc0;stroke:var(--color-main-background);stroke-width:2}.list-item:hover .icon-important[data-v-5b0e59a1] path,.list-item:focus .icon-important[data-v-5b0e59a1] path,.list-item.active .icon-important[data-v-5b0e59a1] path{stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star[data-v-5b0e59a1]{background-image:none;inset-inline-start:1px;top:8px;opacity:1}.icon-important.app-content-list-item-star[data-v-5b0e59a1]:hover,.icon-important.app-content-list-item-star[data-v-5b0e59a1]:focus{opacity:.5}.important-one-line.app-content-list-item-star[data-v-5b0e59a1] {top:4px !important;inset-inline-start:2px}.app-content-list-item-select-checkbox[data-v-5b0e59a1]{display:inline-block;vertical-align:middle;position:absolute;inset-inline-start:33px;top:35px;z-index:50}.list-item-style[data-v-5b0e59a1]:not(.seen){font-weight:bold}.junk-icon-style[data-v-5b0e59a1]{opacity:.2;display:flex;top:32px;inset-inline-start:32px;background-size:16px;height:20px;width:20px;margin:0;padding:0;position:absolute;z-index:2}.junk-icon-style[data-v-5b0e59a1]:hover{opacity:.1}.one-line.junk-icon-style[data-v-5b0e59a1]{top:36px}.icon-attachment[data-v-5b0e59a1]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";opacity:.25}[data-v-5b0e59a1] .action--primary .material-design-icon{margin-bottom:-14px}.tag-group__label[data-v-5b0e59a1]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-inline:2px;white-space:nowrap}.tag-group__bg[data-v-5b0e59a1]{position:absolute;width:100%;height:100%;top:0;inset-inline-start:0;opacity:15%}.tag-group[data-v-5b0e59a1]{display:inline-block;border-radius:var(--border-radius-pill);position:relative;margin-inline-end:1px;overflow:hidden;text-overflow:ellipsis}.list-item__wrapper[data-v-5b0e59a1] {list-style:none}.icon-important.app-content-list-item-star[data-v-5b0e59a1] {position:absolute;top:3px;z-index:1;stroke:var(--color-main-background);stroke-width:2}.app-content-list-item-star.favorite-icon-style[data-v-5b0e59a1]{display:inline-block;position:absolute;top:3px;inset-inline-start:30px;cursor:pointer;stroke:var(--color-main-background);stroke-width:2;z-index:1}.app-content-list-item-star.favorite-icon-style[data-v-5b0e59a1]:hover{opacity:.4}.one-line.favorite-icon-style[data-v-5b0e59a1]{top:3px;inset-inline-start:31px}.seen-icon-style[data-v-5b0e59a1],.attachment-icon-style[data-v-5b0e59a1]{opacity:.6;display:inline-flex;align-items:center;margin-inline-end:5px}[data-v-5b0e59a1] .list-item__anchor{margin-top:6px;margin-bottom:6px}[data-v-5b0e59a1] .line-two__subtitle{display:flex;flex-basis:100%;padding-inline-start:40px;width:450px}[data-v-5b0e59a1] .line-one__title{flex-direction:row;display:flex;width:200px}.line-two.one-line[data-v-5b0e59a1]{display:flex;overflow:hidden;align-items:center;text-overflow:ellipsis;white-space:nowrap}.envelope__subtitle__subject.one-line[data-v-5b0e59a1]{display:flex;align-items:center;height:calc(var(--default-font-size)*var(--default-line-height))}.envelope__subtitle__subject.one-line[data-v-5b0e59a1]::after{content:"·";margin:12px}.envelope__subtitle__subject__text.one-line[data-v-5b0e59a1]{max-width:300px;display:inline-block;text-overflow:ellipsis;overflow:hidden}.app-content-list-item-avatar-selected[data-v-5b0e59a1]{background-color:var(--color-primary-element);color:var(--color-primary-light);border-radius:32px}.app-content-list-item-avatar-selected[data-v-5b0e59a1]:hover{background-color:var(--color-primary-element);color:var(--color-primary-light);border-radius:32px}.hover-active[data-v-5b0e59a1]:hover{color:var(--color-primary-hover);background-color:var(--color-primary-light-hover);border-radius:32px}.check-icon[data-v-5b0e59a1]{border-radius:32px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}',"",{version:3,sources:["webpack://./Envelope.vue","webpack://./src/components/Envelope.vue"],names:[],mappings:"AAAA,6CCCA,iBACC,CAAA,sBACA,CAAA,SACA,CAAA,WACA,CAAA,SACA,CAAA,uDAIA,WACC,CAAA,qCAGD,YACC,CAAA,eACA,CAAA,sBACA,CAAA,kBACA,CAAA,kBACA,CAAA,8CACA,MACC,CAAA,eACA,CAAA,sBACA,CAAA,kBACA,CAAA,sCACA,CAAA,0DAEC,gBACC,CAAA,6DAEA,iBACC,CAAA,yCAML,mCACC,CAAA,eACA,CAAA,mBACA,CAAA,sEACA,CAAA,mBAGA,CAAA,oBACA,CAAA,2BACA,CAAA,+DAEA,cACC,CAAA,iBAEA,CAAA,OACA,CAAA,0IAMF,kDACC,CAAA,sCAKD,SACC,CAAA,mCACA,CAAA,cACA,CAAA,sKAKA,mCACC,CAAA,4DAKF,qBACC,CAAA,sBACA,CAAA,OACA,CAAA,SACA,CAAA,oIAEA,UAEC,CAAA,iEAKH,kBACC,CAAA,sBACA,CAAA,wDAGD,oBACC,CAAA,qBACA,CAAA,iBACA,CAAA,uBACA,CAAA,QACA,CAAA,UACA,CAAA,6CAGD,gBACC,CAAA,kCAGD,UACC,CAAA,YACA,CAAA,QACA,CAAA,uBACA,CAAA,oBACA,CAAA,WACA,CAAA,UACA,CAAA,QACA,CAAA,SACA,CAAA,iBACA,CAAA,SACA,CAAA,wCACA,UACC,CAAA,2CAIF,QACC,CAAA,kCAGD,gEACC,CAAA,WACA,CAAA,yDAIA,mBACC,CAAA,mCAIF,YACC,CAAA,SACA,CAAA,2CACA,CAAA,gBACA,CAAA,kBACA,CAAA,kBACA,CAAA,gCAGD,iBACC,CAAA,UACA,CAAA,WACA,CAAA,KACA,CAAA,oBACA,CAAA,WACA,CAAA,4BAGD,oBACC,CAAA,uCACA,CAAA,iBACA,CAAA,qBACA,CAAA,eACA,CAAA,sBACA,CAAA,sCAGD,eACC,CAAA,6DAGD,iBACC,CAAA,OACA,CAAA,SACA,CAAA,mCACA,CAAA,cACA,CAAA,iEAGD,oBACC,CAAA,iBACA,CAAA,OACA,CAAA,uBACA,CAAA,cACA,CAAA,mCACA,CAAA,cACA,CAAA,SACA,CAAA,uEACA,UACC,CAAA,+CAIF,OACC,CAAA,uBACA,CAAA,0EAGD,UAEC,CAAA,mBACA,CAAA,kBACA,CAAA,qBACA,CAAA,qCAGD,cACC,CAAA,iBACA,CAAA,sCAGD,YACC,CAAA,eACA,CAAA,yBACA,CAAA,WACA,CAAA,mCAGD,kBACC,CAAA,YACA,CAAA,WACA,CAAA,oCAGD,YACC,CAAA,eACA,CAAA,kBACA,CAAA,sBACA,CAAA,kBACA,CAAA,uDAGD,YACC,CAAA,kBACA,CAAA,gEACA,CAAA,8DAEA,WACC,CAAA,WACA,CAAA,6DAIF,eACC,CAAA,oBACA,CAAA,sBACA,CAAA,eACA,CAAA,wDAGD,6CACC,CAAA,gCACA,CAAA,kBACA,CAAA,8DACA,6CACC,CAAA,gCACA,CAAA,kBACA,CAAA,qCAKD,gCACC,CAAA,iDACA,CAAA,kBACA,CAAA,6BAIF,kBACC,CAAA,UACA,CAAA,WACA,CAAA,YACA,CAAA,kBACA,CAAA,sBACA",sourcesContent:['.mail-message-account-color{position:absolute;inset-inline-start:0px;width:2px;height:69px;z-index:1}.envelope .app-content-list-item-icon{height:40px}.envelope__subtitle{display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;align-items:center}.envelope__subtitle__subject{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:var(--default-line-height)}.envelope__subtitle__subject__text.draft{line-height:130%}.envelope__subtitle__subject__text.draft :deep(em){font-style:italic}.envelope__preview-text{color:var(--color-text-maxcontrast);overflow:hidden;font-weight:initial;max-height:calc(var(--default-font-size)*var(--default-line-height)*2);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.envelope__preview-text .material-design-icon{display:inline;position:relative;top:2px}.list-item__wrapper--active div,.list-item__wrapper--active :deep(.list-item-content__inner__details__details){color:var(--color-primary-element-text) !important}.icon-important :deep(path){fill:#fc0;stroke:var(--color-main-background);stroke-width:2}.list-item:hover .icon-important :deep(path),.list-item:focus .icon-important :deep(path),.list-item.active .icon-important :deep(path){stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star{background-image:none;inset-inline-start:1px;top:8px;opacity:1}.icon-important.app-content-list-item-star:hover,.icon-important.app-content-list-item-star:focus{opacity:.5}.important-one-line.app-content-list-item-star:deep(){top:4px !important;inset-inline-start:2px}.app-content-list-item-select-checkbox{display:inline-block;vertical-align:middle;position:absolute;inset-inline-start:33px;top:35px;z-index:50}.list-item-style:not(.seen){font-weight:bold}.junk-icon-style{opacity:.2;display:flex;top:32px;inset-inline-start:32px;background-size:16px;height:20px;width:20px;margin:0;padding:0;position:absolute;z-index:2}.junk-icon-style:hover{opacity:.1}.one-line.junk-icon-style{top:36px}.icon-attachment{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";opacity:.25}:deep(.action--primary) .material-design-icon{margin-bottom:-14px}.tag-group__label{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-inline:2px;white-space:nowrap}.tag-group__bg{position:absolute;width:100%;height:100%;top:0;inset-inline-start:0;opacity:15%}.tag-group{display:inline-block;border-radius:var(--border-radius-pill);position:relative;margin-inline-end:1px;overflow:hidden;text-overflow:ellipsis}.list-item__wrapper:deep(){list-style:none}.icon-important.app-content-list-item-star:deep(){position:absolute;top:3px;z-index:1;stroke:var(--color-main-background);stroke-width:2}.app-content-list-item-star.favorite-icon-style{display:inline-block;position:absolute;top:3px;inset-inline-start:30px;cursor:pointer;stroke:var(--color-main-background);stroke-width:2;z-index:1}.app-content-list-item-star.favorite-icon-style:hover{opacity:.4}.one-line.favorite-icon-style{top:3px;inset-inline-start:31px}.seen-icon-style,.attachment-icon-style{opacity:.6;display:inline-flex;align-items:center;margin-inline-end:5px}:deep(.list-item__anchor){margin-top:6px;margin-bottom:6px}:deep(.line-two__subtitle){display:flex;flex-basis:100%;padding-inline-start:40px;width:450px}:deep(.line-one__title){flex-direction:row;display:flex;width:200px}.line-two.one-line{display:flex;overflow:hidden;align-items:center;text-overflow:ellipsis;white-space:nowrap}.envelope__subtitle__subject.one-line{display:flex;align-items:center;height:calc(var(--default-font-size)*var(--default-line-height))}.envelope__subtitle__subject.one-line::after{content:"·";margin:12px}.envelope__subtitle__subject__text.one-line{max-width:300px;display:inline-block;text-overflow:ellipsis;overflow:hidden}.app-content-list-item-avatar-selected{background-color:var(--color-primary-element);color:var(--color-primary-light);border-radius:32px}.app-content-list-item-avatar-selected:hover{background-color:var(--color-primary-element);color:var(--color-primary-light);border-radius:32px}.hover-active:hover{color:var(--color-primary-hover);background-color:var(--color-primary-light-hover);border-radius:32px}.check-icon{border-radius:32px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}',"\n.mail-message-account-color {\n\tposition: absolute;\n\tinset-inline-start: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.envelope {\n\t.app-content-list-item-icon {\n\t\theight: 40px; // To prevent some unexpected spacing below the avatar\n\t}\n\n\t&__subtitle {\n\t\tdisplay: flex;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\talign-items: center;\n\t\t&__subject {\n\t\t\tflex: 1;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t\tline-height: var(--default-line-height);\n\t\t\t&__text {\n\t\t\t\t&.draft {\n\t\t\t\t\tline-height: 130%;\n\t\t\t\t\t/* deep because there is no data attribute for the em rendered from JS output */\n\t\t\t\t\t:deep(em) {\n\t\t\t\t\t\tfont-style: italic;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t&__preview-text {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\toverflow: hidden;\n\t\tfont-weight: initial;\n\t\tmax-height: calc(var(--default-font-size) * var(--default-line-height) * 2);\n\n\t\t/* Weird CSS hacks to make text ellipsize without white-space: nowrap */\n\t\tdisplay: -webkit-box;\n\t\t-webkit-line-clamp: 2;\n\t\t-webkit-box-orient: vertical;\n\n\t\t.material-design-icon {\n\t\t\tdisplay: inline;\n\n\t\t\tposition: relative;\n\t\t\ttop: 2px;\n\t\t}\n\t}\n}\n\n.list-item__wrapper--active {\n\tdiv, :deep(.list-item-content__inner__details__details) {\n\t\tcolor: var(--color-primary-element-text) !important;\n\t}\n}\n\n.icon-important {\n\t:deep(path) {\n\t\tfill: #ffcc00;\n\t\tstroke: var(--color-main-background);\n\t\tstroke-width: 2;\n\t}\n\t.list-item:hover &,\n\t.list-item:focus &,\n\t.list-item.active & {\n\t\t:deep(path) {\n\t\t\tstroke: var(--color-background-dark);\n\t\t}\n\t}\n\n\t// In message list, but not the one in the action menu\n\t&.app-content-list-item-star {\n\t\tbackground-image: none;\n\t\tinset-inline-start: 1px;\n\t\ttop: 8px;\n\t\topacity: 1;\n\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n}\n\n.important-one-line.app-content-list-item-star:deep() {\n\ttop: 4px !important;\n\tinset-inline-start: 2px;\n}\n\n.app-content-list-item-select-checkbox {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: absolute;\n\tinset-inline-start: 33px;\n\ttop: 35px;\n\tz-index: 50; // same as icon-starred\n}\n\n.list-item-style:not(.seen) {\n\tfont-weight: bold;\n}\n\n.junk-icon-style {\n\topacity: .2;\n\tdisplay: flex;\n\ttop: 32px;\n\tinset-inline-start: 32px;\n\tbackground-size: 16px;\n\theight: 20px;\n\twidth: 20px;\n\tmargin: 0;\n\tpadding: 0;\n\tposition: absolute;\n\tz-index: 2;\n\t&:hover {\n\t\topacity: .1;\n\t}\n}\n\n.one-line.junk-icon-style {\n\ttop: 36px;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n:deep(.action--primary) {\n\t.material-design-icon {\n\t\tmargin-bottom: -14px;\n\t}\n}\n\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-inline: 2px;\n\twhite-space: nowrap;\n}\n\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tinset-inline-start: 0;\n\topacity: 15%;\n}\n\n.tag-group {\n\tdisplay: inline-block;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin-inline-end: 1px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.list-item__wrapper:deep() {\n\tlist-style: none;\n}\n\n.icon-important.app-content-list-item-star:deep() {\n\tposition: absolute;\n\ttop: 3px;\n\tz-index: 1;\n\tstroke: var(--color-main-background);\n\tstroke-width: 2;\n}\n\n.app-content-list-item-star.favorite-icon-style {\n\tdisplay: inline-block;\n\tposition: absolute;\n\ttop: 3px;\n\tinset-inline-start: 30px;\n\tcursor: pointer;\n\tstroke: var(--color-main-background);\n\tstroke-width: 2;\n\tz-index: 1;\n\t&:hover {\n\t\topacity: .4;\n\t}\n}\n\n.one-line.favorite-icon-style {\n\ttop: 3px;\n\tinset-inline-start: 31px;\n}\n\n.seen-icon-style,\n.attachment-icon-style  {\n\topacity: .6;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tmargin-inline-end: 5px;\n}\n\n:deep(.list-item__anchor) {\n\tmargin-top: 6px;\n\tmargin-bottom: 6px;\n}\n\n:deep(.line-two__subtitle) {\n\tdisplay: flex;\n\tflex-basis: 100%;\n\tpadding-inline-start: 40px;\n\twidth: 450px;\n}\n\n:deep(.line-one__title) {\n\tflex-direction: row;\n\tdisplay: flex;\n\twidth: 200px;\n}\n\n.line-two.one-line {\n\tdisplay: flex;\n\toverflow: hidden;\n\talign-items: center;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.envelope__subtitle__subject.one-line {\n\tdisplay: flex;\n\talign-items: center;\n\theight: calc(var(--default-font-size) * var(--default-line-height));\n\n\t&::after {\n\t\tcontent: '\\00B7';\n\t\tmargin: 12px;\n\t}\n}\n\n.envelope__subtitle__subject__text.one-line {\n\tmax-width: 300px;\n\tdisplay: inline-block;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.app-content-list-item-avatar-selected {\n\tbackground-color: var(--color-primary-element);\n\tcolor: var(--color-primary-light);\n\tborder-radius: 32px;\n\t&:hover {\n\t\tbackground-color: var(--color-primary-element);\n\t\tcolor: var(--color-primary-light);\n\t\tborder-radius: 32px;\n\t}\n}\n\n.hover-active {\n\t&:hover {\n\t\tcolor: var(--color-primary-hover);\n\t\tbackground-color: var(--color-primary-light-hover);\n\t\tborder-radius: 32px;\n\t}\n}\n\n.check-icon {\n\tborder-radius: 32px;\n\twidth: 40px;\n\theight: 40px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n"],sourceRoot:""}]);const s=r},50713:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".message-source[data-v-58097824]{padding:0 calc(var(--default-grid-baseline)*4)}.message-source h2[data-v-58097824]{margin-top:0;margin-bottom:0}.message-source pre[data-v-58097824]{font-family:monospace;white-space:pre-wrap;user-select:text}","",{version:3,sources:["webpack://./src/components/SourceModal.vue"],names:[],mappings:"AACA,iCACC,8CAAA,CAEA,oCACC,YAAA,CACA,eAAA,CAGD,qCACC,qBAAA,CACA,oBAAA,CACA,gBAAA",sourcesContent:["\n.message-source {\n\tpadding: 0 calc(var(--default-grid-baseline) * 4);\n\n\th2 {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t}\n\n\tpre {\n\t\tfont-family: monospace;\n\t\twhite-space: pre-wrap;\n\t\tuser-select: text;\n\t}\n\n}\n"],sourceRoot:""}]);const s=r},52014:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"@media print{.mail-content[data-v-fea0252e]{height:initial;position:relative !important}}[data-v-fea0252e] .app-content-details{margin:0 auto;display:flex;flex-direction:column;flex:1 1 100%;min-width:70%}","",{version:3,sources:["webpack://./src/views/Home.vue"],names:[],mappings:"AACA,aACC,+BACC,cAAA,CAEA,4BAAA,CAAA,CAIF,uCACC,aAAA,CACA,YAAA,CACA,qBAAA,CACA,aAAA,CACA,aAAA",sourcesContent:["\n@media print {\n\t.mail-content {\n\t\theight: initial;\n\t\t/* needs important because of a more specific selector */\n\t\tposition: relative !important;\n\t}\n}\n\n:deep(.app-content-details) {\n\tmargin: 0 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 100%;\n\tmin-width: 70%;\n}\n"],sourceRoot:""}]);const s=r},52319:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"\n.empty-content[data-v-2a79703f]{\n\theight: 100%;\n\tdisplay: flex;\n}\n","",{version:3,sources:["webpack://./src/components/OutboxMessageContent.vue"],names:[],mappings:";AA0BA;CACA,YAAA;CACA,aAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<NcEmptyContent :name=\"t('mail', 'Pending or not sent messages will show up here')\" class=\"empty-content\">\n\t\t<template #icon>\n\t\t\t<IconMail />\n\t\t</template>\n\t</NcEmptyContent>\n</template>\n\n<script>\nimport IconMail from 'vue-material-design-icons/EmailOutline.vue'\nimport NcEmptyContent from '@nextcloud/vue/components/NcEmptyContent'\n\nexport default {\n\tname: 'OutboxMessageContent',\n\tcomponents: {\n\t\tIconMail,\n\t\tNcEmptyContent,\n\t},\n}\n<\/script>\n\n<style scoped>\n.empty-content{\n\theight: 100%;\n\tdisplay: flex;\n}\n</style>\n"],sourceRoot:""}]);const s=r},53993:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,'#mail-message{margin-bottom:30vh}#mail-message .icon-loading:only-child:after{margin-top:calc(var(--default-line-height) - var(--default-grid-baseline))}.mail-message-body{flex:1;margin-bottom:calc(var(--default-grid-baseline)*7);position:relative}#mail-thread-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 0 calc(var(--default-grid-baseline)*2) 0;box-sizing:content-box !important;width:100%;z-index:100;position:fixed;position:-webkit-sticky;position:sticky;top:0;margin-bottom:5px}#mail-thread-header::before{content:"";position:absolute;top:0;inset-inline-start:50%;transform:translateX(-50%);width:100vw;height:100%;background:var(--color-main-background);border-bottom:var(--border-width-input-focused) solid var(--color-border);z-index:-1}#mail-thread-header-fields{width:0;padding-inline-start:calc(var(--border-radius-container-large) + var(--header-height));flex:1 1 auto}#mail-thread-header-fields h2,#mail-thread-header-fields p{padding-bottom:calc(var(--default-grid-baseline)*2);margin-bottom:0;margin-top:var(--default-grid-baseline)}#mail-thread-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#mail-thread-header-fields .transparency{opacity:.6}#mail-thread-header-fields .transparency a{font-weight:bold}@media only screen and (max-width: 1024px){#mail-thread-header-fields{margin-top:-20px}}.attachment-popover{position:sticky;bottom:calc(var(--default-grid-baseline)*3);text-align:center}.tooltip-inner{text-align:start}#mail-content{margin:calc(var(--default-grid-baseline)*2) calc(var(--default-grid-baseline)*10) 0 calc(var(--default-grid-baseline)*15)}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:var(--border-width-input) dotted #07d;text-decoration:none;word-wrap:break-word}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:calc(var(--default-grid-baseline)*3) center}}.avatar-header{height:var(--default-clickable-area);overflow:hidden;display:flex;align-items:stretch}.avatar-header :deep(.v-popper--theme-dropdown.v-popper__popper .v-popper__inner){height:300px;width:250px;overflow:auto}.avatar-more{display:inline;background-color:var(--color-background-dark);border-radius:var(--border-radius-large);cursor:pointer}.v-popper.avatar-more{padding:calc(var(--default-grid-baseline)*2)}.avatar-hidden{visibility:hidden}.app-content-list-item-star.icon-starred{display:none}.user-bubble__wrapper{height:var(--default-clickable-area);padding:var(--default-grid-baseline);margin-inline-end:var(--default-grid-baseline);background-color:var(--color-background-dark);border-radius:var(--border-radius-large)}.v-popper__popper--shown .user-bubble__wrapper{margin-inline-end:0 !important}.v-popper__popper--shown .user-bubble__wrapper .user-bubble__content{padding:calc(var(--default-grid-baseline))}.v-popper__popper--shown .user-bubble__wrapper .user-bubble__wrapper{padding:0}.user-bubble__title{cursor:pointer}',"",{version:3,sources:["webpack://./src/components/Thread.vue"],names:[],mappings:"AACA,cACC,kBAAA,CAGC,6CACC,0EAAA,CAKH,mBACC,MAAA,CACA,kDAAA,CACA,iBAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CACA,kDAAA,CAIA,iCAAA,CACA,UAAA,CAEA,WAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,KAAA,CACA,iBAAA,CAEA,4BACC,UAAA,CACA,iBAAA,CACA,KAAA,CACA,sBAAA,CACA,0BAAA,CACA,WAAA,CACA,WAAA,CACA,uCAAA,CACA,yEAAA,CACA,UAAA,CAIF,2BAEC,OAAA,CAEA,sFAAA,CAEA,aAAA,CACA,2DAEC,mDAAA,CACA,eAAA,CAEA,uCAAA,CAGD,6BACC,kBAAA,CACA,eAAA,CACA,sBAAA,CAED,yCACC,UAAA,CACA,2CACC,gBAAA,CAIH,2CACC,2BACC,gBAAA,CAAA,CAIF,oBACC,eAAA,CACA,2CAAA,CACA,iBAAA,CAGD,eACC,gBAAA,CAGD,cACC,yHAAA,CAGD,qBACC,UAAA,CAGD,kBACC,YAAA,CAGD,kCAEC,UAAA,CACA,mDAAA,CACA,oBAAA,CACA,oBAAA,CAKD,0CACC,cACC,YAAA,CAAA,CAGF,0CACC,wCAEC,+DAAA,CAAA,CAIF,eACC,oCAAA,CACA,eAAA,CACA,YAAA,CACA,mBAAA,CAEA,kFACC,YAAA,CACA,WAAA,CACA,aAAA,CAIF,aACC,cAAA,CACA,6CAAA,CACA,wCAAA,CACA,cAAA,CAGD,sBACC,4CAAA,CAGD,eACC,iBAAA,CAGD,yCACC,YAAA,CAGD,sBACC,oCAAA,CACA,oCAAA,CACA,8CAAA,CACA,6CAAA,CACA,wCAAA,CAGD,+CACC,8BAAA,CAEA,qEACC,0CAAA,CAGD,qEACC,SAAA,CAIF,oBACC,cAAA",sourcesContent:["\n#mail-message {\n\tmargin-bottom: 30vh;\n\n\t.icon-loading {\n\t\t&:only-child:after {\n\t\t\tmargin-top: calc(var(--default-line-height) - var(--default-grid-baseline));\n\t\t}\n\t}\n}\n\n.mail-message-body {\n\tflex: 1;\n\tmargin-bottom: calc(var(--default-grid-baseline) * 7);\n\tposition: relative;\n}\n\n#mail-thread-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 0 0 calc(var(--default-grid-baseline) * 2) 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\twidth: 100%;\n\n\tz-index: 100;\n\tposition: fixed; // ie fallback\n\tposition: -webkit-sticky; // ios/safari fallback\n\tposition: sticky;\n\ttop: 0;\n\tmargin-bottom: 5px;\n\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tinset-inline-start: 50%;\n\t\ttransform: translateX(-50%);\n\t\twidth: 100vw;\n\t\theight: 100%;\n\t\tbackground: var(--color-main-background);\n\t\tborder-bottom: var(--border-width-input-focused) solid var(--color-border);\n\t\tz-index: -1;\n\t}\n}\n\n#mail-thread-header-fields {\n\t// initial width\n\twidth: 0;\n\t// while scrolling, the back button overlaps with subject on small screen\n\tpadding-inline-start: calc(var(--border-radius-container-large) + var(--header-height));\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\tpadding-bottom: calc(var(--default-grid-baseline) * 2);\n\t\tmargin-bottom: 0;\n\t\t// some h2 styling coming from server add some space on top\n\t\tmargin-top: var(--default-grid-baseline);\n\t}\n\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n@media only screen and (max-width: 1024px) {\n\t#mail-thread-header-fields {\n\t\tmargin-top: -20px;\n\t}\n}\n\n.attachment-popover {\n\tposition: sticky;\n\tbottom: calc(var(--default-grid-baseline) * 3);\n\ttext-align: center;\n}\n\n.tooltip-inner {\n\ttext-align: start;\n}\n\n#mail-content {\n\tmargin: calc(var(--default-grid-baseline) * 2) calc(var(--default-grid-baseline) * 10) 0 calc(var(--default-grid-baseline) * 15);\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: var(--border-width-input) dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: calc(var(--default-grid-baseline) * 3) center;\n\t}\n}\n\n.avatar-header {\n\theight: var(--default-clickable-area);\n\toverflow: hidden;\n\tdisplay: flex;\n\talign-items: stretch;\n\n\t:deep(.v-popper--theme-dropdown.v-popper__popper .v-popper__inner) {\n\t\theight: 300px;\n\t\twidth: 250px;\n\t\toverflow: auto;\n\t}\n}\n\n.avatar-more {\n\tdisplay: inline;\n\tbackground-color: var(--color-background-dark);\n\tborder-radius: var(--border-radius-large);\n\tcursor: pointer;\n}\n\n.v-popper.avatar-more {\n\tpadding: calc(var(--default-grid-baseline) * 2);\n}\n\n.avatar-hidden {\n\tvisibility: hidden;\n}\n\n.app-content-list-item-star.icon-starred {\n\tdisplay: none;\n}\n\n.user-bubble__wrapper {\n\theight: var(--default-clickable-area);\n\tpadding: var(--default-grid-baseline);\n\tmargin-inline-end: var(--default-grid-baseline);\n\tbackground-color: var(--color-background-dark);\n\tborder-radius: var(--border-radius-large);\n}\n\n.v-popper__popper--shown .user-bubble__wrapper {\n\tmargin-inline-end: 0 !important;\n\n\t.user-bubble__content {\n\t\tpadding: calc(var(--default-grid-baseline));\n\t}\n\n\t.user-bubble__wrapper {\n\t\tpadding: 0;\n\t}\n}\n\n.user-bubble__title {\n\tcursor: pointer;\n}\n"],sourceRoot:""}]);const s=r},55258:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,'@media screen and (max-width: 1024px){.attachment[data-v-f8592c78]{width:100% !important}}@media screen and (min-width: 1025px)and (max-width: 1500px){.attachment[data-v-f8592c78]{width:calc(50% - 4px) !important}}.attachment[data-v-f8592c78]{height:auto;display:inline-flex;flex-wrap:wrap;justify-content:space-between;width:calc(33.3334% - 4px);margin:2px;padding:5px;position:relative;align-items:center;flex-grow:1}.attachment[data-v-f8592c78]:hover{border-radius:6px}.attachment[data-v-f8592c78]:hover,.attachment span[data-v-f8592c78]:hover{background-color:var(--color-background-hover)}.attachment:hover.message-attachment--can-preview *[data-v-f8592c78],.attachment span:hover.message-attachment--can-preview *[data-v-f8592c78]{cursor:pointer}.mail-attachment-img--wrapper[data-v-f8592c78]{height:44px;width:44px;overflow:hidden;display:flex;justify-content:center;position:relative;border-radius:6px}.mail-attachment-img--wrapper img[data-v-f8592c78]{transition:.3s;opacity:1;width:44px;height:44px}.mail-attachment-img--wrapper .mail-attached-image[data-v-f8592c78]{width:100px}.mail-attached--content[data-v-f8592c78]{width:calc(100% - 100px);display:flex;flex-direction:column}.mail-attached-image[data-v-f8592c78]{display:block;max-width:100%;border-radius:var(--border-radius)}.attachment-import-popover[data-v-f8592c78]{inset-inline-end:32px;top:42px}.mail-attached-image[data-v-f8592c78]:hover{opacity:.8}.attachment-name[data-v-f8592c78]{display:inline-block;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.attachment-size[data-v-f8592c78]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";opacity:.5;font-size:12px;line-height:14px}.attachment-icon[data-v-f8592c78]{vertical-align:middle;text-align:start;margin-bottom:20px}.action-item[data-v-f8592c78]{transition:.4s}.mail-message-attachments[data-v-f8592c78]{overflow-x:auto;overflow-y:auto}',"",{version:3,sources:["webpack://./src/components/MessageAttachment.vue"],names:[],mappings:"AAEA,sCACC,6BACC,qBAAA,CAAA,CAIF,6DACC,6BACC,gCAAA,CAAA,CAIF,6BACC,WAAA,CACG,mBAAA,CACA,cAAA,CACA,6BAAA,CACH,0BAAA,CACG,UAAA,CACH,WAAA,CACG,iBAAA,CACA,kBAAA,CACH,WAAA,CAEA,mCACC,iBAAA,CAIF,2EAEC,8CAAA,CAEA,+IACC,cAAA,CAIF,+CACC,WAAA,CACA,UAAA,CACA,eAAA,CACA,YAAA,CACA,sBAAA,CACA,iBAAA,CACA,iBAAA,CAEA,mDACC,cAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CAGD,oEACC,WAAA,CAIF,yCACC,wBAAA,CACA,YAAA,CACG,qBAAA,CAGJ,sCACC,aAAA,CACA,cAAA,CACA,kCAAA,CAGD,4CACC,qBAAA,CACA,QAAA,CAGD,4CACC,UAAA,CAGD,kCACC,oBAAA,CACA,UAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CAID,kCACC,gEAAA,CACA,UAAA,CACA,cAAA,CACA,gBAAA,CAGD,kCACC,qBAAA,CACA,gBAAA,CACA,kBAAA,CAGD,8BACC,cAAA,CAGD,2CACC,eAAA,CACA,eAAA",sourcesContent:["\n\n@media screen and (max-width: 1024px) {\n\t.attachment{\n\t\twidth: 100% !important;\n\t}\n}\n\n@media screen and (min-width: 1025px) and (max-width: 1500px) {\n\t.attachment{\n\t\twidth: calc(50% - 4px)!important;\n\t}\n}\n\n.attachment {\n\theight: auto;\n    display: inline-flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n\twidth: calc(33.3334% - 4px);\n    margin: 2px;\n\tpadding: 5px;\n    position: relative;\n    align-items: center;\n\tflex-grow: 1;\n\n\t&:hover {\n\t\tborder-radius: 6px;\n\t}\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-hover);\n\n\t&.message-attachment--can-preview * {\n\t\tcursor: pointer;\n\t}\n}\n\n.mail-attachment-img--wrapper {\n\theight: 44px;\n\twidth: 44px;\n\toverflow: hidden;\n\tdisplay:flex;\n\tjustify-content: center;\n\tposition: relative;\n\tborder-radius: 6px;\n\n\timg {\n\t\ttransition: 0.3s;\n\t\topacity: 1;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t}\n\n\t.mail-attached-image {\n\t\twidth: 100px;\n\t}\n}\n\n.mail-attached--content {\n\twidth: calc(100% - 100px);\n\tdisplay: flex;\n    flex-direction: column;\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tborder-radius: var(--border-radius);\n}\n\n.attachment-import-popover {\n\tinset-inline-end: 32px;\n\ttop: 42px;\n}\n\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: 100%;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n\tfont-size: 12px;\n\tline-height: 14px;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n\ttext-align: start;\n\tmargin-bottom: 20px;\n}\n\n.action-item {\n\ttransition: 0.4s;\n}\n\n.mail-message-attachments {\n\toverflow-x: auto;\n\toverflow-y: auto;\n}\n"],sourceRoot:""}]);const s=r},56186:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".v-popover>.trigger>.action-item[data-v-663f27a0]{border-radius:22px;background-color:var(--color-background-darker)}.message-imip[data-v-663f27a0]{padding:5px 10px}.invalid-signature-warning[data-v-663f27a0]{display:flex;align-items:center;gap:5px;border:solid 2px var(--color-border);border-radius:var(--border-radius-large);border-color:var(--color-warning);margin:5px 10px;padding:10px}.invalid-signature-warning__icon[data-v-663f27a0]{margin-top:-5px}.reply-buttons[data-v-663f27a0]{margin:26px 30px 0 50px;display:flex;flex-wrap:wrap;gap:5px;justify-content:space-between;align-items:center}.reply-buttons__suggested[data-v-663f27a0]{justify-content:flex-start;display:flex;flex-wrap:wrap;gap:5px}.reply-buttons__suggested__button[data-v-663f27a0]{margin-inline-end:5px;border-radius:12px}.reply-buttons__suggested__button[data-v-663f27a0] .button-vue__text{font-weight:normal}.reply-buttons__notsuggested[data-v-663f27a0]{margin-inline-start:auto;margin-inline-end:-12px}@media screen and (max-width: 600px){.reply-buttons[data-v-663f27a0]{display:flex;flex-wrap:wrap;gap:5px}.reply-buttons__suggested[data-v-663f27a0]{display:flex;flex-wrap:wrap;gap:5px}.reply-buttons__notsuggested[data-v-663f27a0]{margin-inline-start:0}}","",{version:3,sources:["webpack://./src/components/Message.vue"],names:[],mappings:"AACA,kDACC,kBAAA,CACA,+CAAA,CAGD,+BACC,gBAAA,CAGD,4CACC,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,oCAAA,CACA,wCAAA,CACA,iCAAA,CAEA,eAAA,CACA,YAAA,CAEA,kDAEC,eAAA,CAIF,gCACC,uBAAA,CACA,YAAA,CACA,cAAA,CACA,OAAA,CACA,6BAAA,CACA,kBAAA,CAEA,2CACC,0BAAA,CACA,YAAA,CACA,cAAA,CACA,OAAA,CAEA,mDACC,qBAAA,CACA,kBAAA,CAEA,qEACC,kBAAA,CAKH,8CACC,wBAAA,CACA,uBAAA,CAGF,qCACC,gCACC,YAAA,CACA,cAAA,CACA,OAAA,CAEA,2CACC,YAAA,CACA,cAAA,CACA,OAAA,CAGD,8CACC,qBAAA,CAAA",sourcesContent:["\n.v-popover > .trigger > .action-item {\n\tborder-radius: 22px;\n\tbackground-color: var(--color-background-darker);\n}\n\n.message-imip {\n\tpadding: 5px 10px;\n}\n\n.invalid-signature-warning {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 5px;\n\n\tborder: solid 2px var(--color-border);\n\tborder-radius: var(--border-radius-large);\n\tborder-color: var(--color-warning);\n\n\tmargin: 5px 10px;\n\tpadding: 10px;\n\n\t&__icon {\n\t\t// Fix alignment with message\n\t\tmargin-top: -5px;\n\t}\n}\n\n.reply-buttons {\n\tmargin: 26px 30px 0 50px;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tgap: 5px;\n\tjustify-content: space-between;\n\talign-items: center;\n\n\t&__suggested {\n\t\tjustify-content: flex-start;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 5px;\n\n\t\t&__button {\n\t\t\tmargin-inline-end: 5px;\n\t\t\tborder-radius: 12px;\n\n\t\t\t:deep(.button-vue__text) {\n\t\t\t\tfont-weight: normal;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__notsuggested {\n\t\tmargin-inline-start: auto;\n\t\tmargin-inline-end: -12px;\n\t}\n}\n@media screen and (max-width: 600px) {\n\t.reply-buttons {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 5px;\n\n\t\t&__suggested {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t\tgap: 5px;\n\t\t}\n\n\t\t&__notsuggested {\n\t\t\tmargin-inline-start: 0;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},56524:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".html-message-body[data-v-1d99693e]{margin-inline-start:50px;margin-top:2px;background-color:#fff}#mail-message-has-blocked-content[data-v-1d99693e]{margin-inline-start:10px;color:var(--color-text-maxcontrast) !important}#message-container[data-v-1d99693e]{flex:1;display:flex;background-color:#fff}@media only screen{#message-container.scroll[data-v-1d99693e]{overflow-y:auto}}[data-v-1d99693e] .button-vue__text{border:none !important;font-weight:normal !important;padding-inline:14px 10px !important;text-decoration:underline !important}.message-frame[data-v-1d99693e]{width:100%}[data-v-1d99693e] .button-vue__icon{display:none !important}[data-v-1d99693e] .button-vue--vue-tertiary{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./src/components/MessageHTMLBody.vue"],names:[],mappings:"AAEA,oCACC,wBAAA,CACA,cAAA,CACA,qBAAA,CAGD,mDACC,wBAAA,CACA,8CAAA,CAGD,oCACC,MAAA,CACA,YAAA,CACA,qBAAA,CAGA,mBACC,2CACC,eAAA,CAAA,CAKH,oCACC,sBAAA,CACA,6BAAA,CACA,mCAAA,CACA,oCAAA,CAGD,gCACC,UAAA,CAGD,oCACC,uBAAA,CAGD,4CACC,mCAAA",sourcesContent:["\n// account for 8px margin on iframe body\n.html-message-body {\n\tmargin-inline-start: 50px;\n\tmargin-top: 2px;\n\tbackground-color: #FFFFFF;\n}\n\n#mail-message-has-blocked-content {\n\tmargin-inline-start: 10px;\n\tcolor: var(--color-text-maxcontrast) !important;\n}\n\n#message-container {\n\tflex: 1;\n\tdisplay: flex;\n\tbackground-color: #FFFFFF;\n\n\t// TODO: collapse quoted text and remove inner scrollbar\n\t@media only screen {\n\t\t&.scroll {\n\t\t\toverflow-y: auto;\n\t\t}\n\t}\n}\n\n:deep(.button-vue__text) {\n\tborder: none !important;\n\tfont-weight: normal !important;\n\tpadding-inline: 14px 10px !important;\n\ttext-decoration: underline !important;\n}\n\n.message-frame {\n\twidth: 100%;\n}\n\n:deep(.button-vue__icon) {\n\tdisplay: none !important;\n}\n\n:deep(.button-vue--vue-tertiary) {\n\tcolor: var(--color-text-maxcontrast);\n}\n"],sourceRoot:""}]);const s=r},57677:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".message-container[data-v-55ac0e45],.mail-signature[data-v-55ac0e45]{white-space:pre-wrap}.mail-signature[data-v-55ac0e45],.quoted[data-v-55ac0e45]{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}","",{version:3,sources:["webpack://./src/components/MessagePlainTextBody.vue"],names:[],mappings:"AACA,qEAEC,oBAAA,CAGD,0DACC,2CAAA,CAGC,oBAAA",sourcesContent:["\n.message-container,\n.mail-signature {\n\twhite-space: pre-wrap;\n}\n\n.mail-signature, .quoted {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n"],sourceRoot:""}]);const s=r},59704:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".mail-error[data-v-3011b3b6]{height:100%;display:flex}.mail-error--auto-margin[data-v-3011b3b6]{margin:auto 0}","",{version:3,sources:["webpack://./src/components/Error.vue"],names:[],mappings:"AACA,6BACC,WAAA,CACA,YAAA,CACA,0CACC,aAAA",sourcesContent:["\n.mail-error {\n\theight: 100%;\n\tdisplay: flex;\n\t&--auto-margin {\n\t\tmargin: auto 0;\n\t}\n}\n"],sourceRoot:""}]);const s=r},62110:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".modal__content[data-v-ede4a664]{margin:25px}h2[data-v-ede4a664],.intro-text[data-v-ede4a664],.headers-list[data-v-ede4a664]{margin-bottom:calc(var(--default-grid-baseline)*2)}","",{version:3,sources:["webpack://./src/components/mailFilter/CreateModal.vue"],names:[],mappings:"AACA,iCACC,WAAA,CAGD,gFACC,kDAAA",sourcesContent:["\n.modal__content {\n\tmargin: 25px;\n}\n\nh2, .intro-text, .headers-list {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n}\n"],sourceRoot:""}]);const s=r},62117:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".empty-content[data-v-0d4d556e]{height:100%;display:flex}","",{version:3,sources:["webpack://./src/components/EmptyMailboxSection.vue"],names:[],mappings:"AACA,gCACC,WAAA,CACA,YAAA",sourcesContent:["\n.empty-content {\n\theight: 100%;\n\tdisplay: flex;\n}\n"],sourceRoot:""}]);const s=r},62409:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".calendar-picker-option[data-v-5d8e3696]{width:100%;display:flex;align-items:center}.calendar-picker-option__color-indicator[data-v-5d8e3696]{width:12px;height:12px;border-radius:50%;border:none;margin-inline-end:calc(var(--default-grid-baseline)*2);flex-basis:calc(var(--default-grid-baseline)*3);flex-shrink:0}.calendar-picker-option__label[data-v-5d8e3696]{overflow:hidden;text-overflow:ellipsis;flex-grow:1;max-width:80px}","",{version:3,sources:["webpack://./src/components/CalendarPickerOption.vue"],names:[],mappings:"AACA,yCACC,UAAA,CACA,YAAA,CACA,kBAAA,CAEA,0DACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,sDAAA,CACA,+CAAA,CACA,aAAA,CAGD,gDACC,eAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA",sourcesContent:["\n.calendar-picker-option {\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\n\t&__color-indicator {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tmargin-inline-end: calc(var(--default-grid-baseline) * 2);\n\t\tflex-basis: calc(var(--default-grid-baseline) * 3);\n\t\tflex-shrink: 0;\n\t}\n\n\t&__label {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tflex-grow: 1;\n\t\tmax-width: 80px;\n\t}\n}\n\n"],sourceRoot:""}]);const s=r},63779:()=>{},65618:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,'/*!\n * SPDX-FileCopyrightText: 2016-2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2013-2016 ownCLoud, Inc.\n * SPDX-License-Identifier: AGPL-3.0-only\n */.loading{position:absolute;inset-inline-start:50%;top:50%}.emptycontent{margin-top:24px;margin-bottom:10px;position:absolute;top:0;bottom:0;inset-inline:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.container{position:relative;width:100%;height:100%}.folders .ui-droppable-active{background-color:#f0f0f0}.folder.no-select{cursor:not-allowed}#account-form{z-index:1001;width:250px;top:15%;padding-bottom:50px;margin:0 auto;padding-top:30px}#mail-settings #account-form{margin:0;padding-top:0}@media only screen and (max-height: 400px){#account-form #emptycontent{margin-top:0px}}@media only screen and (min-height: 401px)and (max-height: 600px){#account-form #emptycontent{margin-top:2vh}}@media only screen and (min-height: 601px){#account-form #emptycontent{margin-top:10vh}}#account-form h2{text-align:center;position:relative;width:300%;inset-inline-start:-100%;margin-bottom:20px}#account-form input{width:100%;box-sizing:border-box}#account-form .toggle-manual-mode{background-position:right;padding-inline-end:16px;margin-inline-start:6px;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";opacity:.3}#setup-imap-ssl-mode,#setup-smtp-ssl-mode{position:absolute;top:0;inset-inline-end:0;margin:0;background-color:rgba(0,0,0,0);border:none;z-index:100}#connect-loading{position:absolute;top:206px;inset-inline:0;margin-inline:auto;height:30px}.app-navigation .empty{display:none}.app-navigation .navigation-account:not(:first-child){margin-top:22px}.app-navigation .special-inbox .collapse,.app-navigation .special-drafts .collapse,.app-navigation .special-sent .collapse,.app-navigation .special-trash .collapse{display:none !important}.app-navigation .special-inbox:hover .collapse,.app-navigation .special-inbox:focus .collapse,.app-navigation .special-drafts:hover .collapse,.app-navigation .special-drafts:focus .collapse,.app-navigation .special-sent:hover .collapse,.app-navigation .special-sent:focus .collapse,.app-navigation .special-trash:hover .collapse,.app-navigation .special-trash:focus .collapse{display:inline-block !important}#accounts-list li.collapse-folders a{color:var(--color-text-maxcontrast)}#emptycontent,#mail-messages #emptycontent.emptycontent-search{position:static}#mail-messages #emptycontent.emptycontent-search h2{line-height:150%}#mail-messages #emptycontent{position:absolute}.mail-account-email{display:inline-block;opacity:.5;padding:20px 0 10px 25px;width:calc(100% - 50px);margin:initial;font-size:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mail-account-email:first-child{display:none}.account-toggle-collapse{opacity:.5}.mailaccount-list li{padding:10px 0}.mailaccount-list .mail-account-name{display:inline-block;width:90%;overflow:hidden;text-overflow:ellipsis}.mailaccount-list .actions{display:inline-flex;position:absolute;inset-inline-end:0;min-height:16px;min-width:16px;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";opacity:.5}.mailaccount-list .actions:hover,.mailaccount-list .actions:focus{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";opacity:.5}#mail-messages{position:relative;width:30%;height:100%;overflow-x:hidden;overflow-y:auto;border-inline-end:1px solid var(--color-border)}#mail-message-list-loading{position:sticky;height:40px;z-index:1;background:-moz-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255, 255, 255, 0) 70%);background:-webkit-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255, 255, 255, 0) 70%);background:radial-gradient(ellipse at top, var(--color-main-background), rgba(255, 255, 255, 0) 70%)}.app-navigation .msg.success{color:#fff;background-color:var(--color-success);padding:3px}.app-navigation .msg.error{color:#fff;background-color:var(--color-error);padding:3px}.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete{margin:0px;font-weight:normal !important;display:flex;align-content:center;align-items:center;border:none}.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete span{margin-inline-start:10px}.ui-autocomplete{padding-inline-start:16px !important;border-radius:0 !important;border-inline-start:none;border-inline-end:none;z-index:1000}.icon-starred[data-starred=false]:hover{background-image:var(--icon-star-dark-fc0) !important}.icon-starred[data-starred=false]:not(:hover){background-image:var(--icon-star-000) !important}.unread{font-weight:bold}.unread ul{font-weight:normal}.star{padding:20px;background-size:16px;display:inline-block;position:absolute;inset-inline-start:16px;top:28px;z-index:10}.star.icon-star{display:none;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";opacity:.3}.star.icon-star:hover,.star.icon-star:focus{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";opacity:1}.icon-add{display:inline-block;vertical-align:text-top}.transparency{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";opacity:.6}.compose{width:60%;margin:0 auto}.app-navigation>ul>.navigation-account>li,.app-navigation>ul>.navigation-account>.folders>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li{position:relative;width:100%;box-sizing:border-box;display:inline-flex;flex-wrap:wrap;order:1;flex-shrink:0}.app-navigation>ul>.navigation-account>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>li.icon-loading-small>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small>.app-navigation-entry-bullet{background:none !important}.app-navigation>ul>.navigation-account>li>a,.app-navigation>ul>.navigation-account>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a{background-size:16px 16px;background-position:14px center;background-repeat:no-repeat;display:block;justify-content:space-between;line-height:44px;min-height:44px;padding:0 12px;overflow:hidden;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;color:var(--color-main-text);opacity:.57;flex:1 1 0;z-index:100}.app-navigation>ul>.navigation-account>li>a:first-child img,.app-navigation>ul>.navigation-account>.folders>li>a:first-child img,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a:first-child img{margin-inline:-30px 11px;width:16px}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-bullet{position:absolute;display:block;margin:16px;width:12px;height:12px;border:none;border-radius:50%;cursor:pointer}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-menu,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-menu,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-menu{top:44px}.app-navigation>ul>.navigation-account>li.pinned,.app-navigation>ul>.navigation-account>.folders>li.pinned,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.pinned{order:2}.app-navigation>ul>.navigation-account>li.pinned.first-pinned,.app-navigation>ul>.navigation-account>.folders>li.pinned.first-pinned,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.pinned.first-pinned{margin-top:auto !important}.app-navigation>ul>.navigation-account>li>a,.app-navigation>ul>.navigation-account>li>.app-navigation-entry-deleted,.app-navigation>ul>.navigation-account>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-deleted,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-deleted{padding-inline-start:44px !important}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-edit,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-edit,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-edit{padding-inline-start:38px !important}.app-navigation>ul>.navigation-account>li:focus,.app-navigation>ul>.navigation-account>li:focus>a,.app-navigation>ul>.navigation-account>li:hover,.app-navigation>ul>.navigation-account>li:hover>a,.app-navigation>ul>.navigation-account>li.active,.app-navigation>ul>.navigation-account>li.active>a,.app-navigation>ul>.navigation-account>li a.selected,.app-navigation>ul>.navigation-account>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li:focus,.app-navigation>ul>.navigation-account>.folders>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li:hover,.app-navigation>ul>.navigation-account>.folders>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li.active,.app-navigation>ul>.navigation-account>.folders>li.active>a,.app-navigation>ul>.navigation-account>.folders>li a.selected,.app-navigation>ul>.navigation-account>.folders>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:focus,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:hover,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.active,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li a.selected>a{opacity:1;box-shadow:inset 2px 0 var(--color-primary-element)}.app-navigation>ul>.navigation-account>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small:after{inset-inline-start:22px;top:22px}.app-navigation>ul>.navigation-account>li.deleted>ul,.app-navigation>ul>.navigation-account>li.deleted>.folders,.app-navigation>ul>.navigation-account>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>li.collapsible:not(.open)>.folders,.app-navigation>ul>.navigation-account>.folders>li.deleted>ul,.app-navigation>ul>.navigation-account>.folders>li.deleted>.folders,.app-navigation>ul>.navigation-account>.folders>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>.folders>li.collapsible:not(.open)>.folders,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.deleted>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.deleted>.folders,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.collapsible:not(.open)>.folders{opacity:0;max-height:0;transition:max-height 1000ms cubic-bezier(0, 1, 0, 1),opacity 250ms ease-in-out}.app-navigation>ul>.navigation-account>li>ul,.app-navigation>ul>.navigation-account>.folders>li>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul{flex:1 0 100%;padding-inline-start:62px;width:inherit;transition:max-height 2000ms ease-in-out,opacity 250ms ease-in-out;max-height:9999px;opacity:1}.app-navigation>ul>.navigation-account>li>ul>li,.app-navigation>ul>.navigation-account>.folders>li>ul>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li{display:inline-flex;flex-wrap:wrap}.app-navigation>ul>.navigation-account>li>ul>li:focus,.app-navigation>ul>.navigation-account>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>li>ul>li:hover,.app-navigation>ul>.navigation-account>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>li>ul>li.active,.app-navigation>ul>.navigation-account>li>ul>li.active>a,.app-navigation>ul>.navigation-account>li>ul>li a.selected,.app-navigation>ul>.navigation-account>li>ul>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li:focus,.app-navigation>ul>.navigation-account>.folders>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li:hover,.app-navigation>ul>.navigation-account>.folders>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li.active,.app-navigation>ul>.navigation-account>.folders>li>ul>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>ul>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:focus,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:hover,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.active,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li a.selected>a{opacity:1}.app-navigation>ul>.navigation-account>li>ul>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>ul>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.icon-loading-small:after{inset-inline-start:-10px}.app-navigation>ul>.navigation-account>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>li>ul>li .app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>.folders>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>.folders>li>ul>li .app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li .app-navigation-entry-bullet{margin-inline-start:-32px}.app-navigation>ul>.navigation-account>li>ul>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>ul>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>.app-navigation-entry-bullet{inset-inline-start:-32px}.app-navigation .collapsible>.collapse{z-index:500}',"",{version:3,sources:["webpack://./css/mail.scss"],names:[],mappings:"AAAA;;;;EAAA,CAKA,SACC,iBAAA,CACA,sBAAA,CACA,OAAA,CAGD,cACC,eAAA,CACA,kBAAA,CACA,iBAAA,CACA,KAAA,CACA,QAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CAGD,WACC,iBAAA,CACA,UAAA,CACA,WAAA,CAGD,8BACC,wBAAA,CAGD,kBACC,kBAAA,CAID,cACC,YAAA,CACA,WAAA,CACA,OAAA,CACA,mBAAA,CACA,aAAA,CACA,gBAAA,CAIA,6BACC,QAAA,CACA,aAAA,CAGF,2CACC,4BACC,cAAA,CAAA,CAGF,kEACC,4BACC,cAAA,CAAA,CAGF,2CACC,4BACC,eAAA,CAAA,CAIF,iBACC,iBAAA,CACA,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,kBAAA,CAGD,oBACC,UAAA,CACA,qBAAA,CAGD,kCACC,yBAAA,CACA,uBAAA,CACA,uBAAA,CACA,gEAAA,CACA,UAAA,CAGD,0CAEC,iBAAA,CACA,KAAA,CACA,kBAAA,CACA,QAAA,CACA,8BAAA,CACA,WAAA,CACA,WAAA,CAGD,iBACC,iBAAA,CACA,SAAA,CACA,cAAA,CACA,kBAAA,CACA,WAAA,CAMD,uBACC,YAAA,CAGD,sDACI,eAAA,CAKJ,oKAIC,uBAAA,CAGD,wXAQC,+BAAA,CAGD,qCACC,mCAAA,CAGD,+DAEC,eAAA,CAGD,oDACC,gBAAA,CAGD,6BACC,iBAAA,CAGD,oBACC,oBAAA,CACA,UAAA,CACA,wBAAA,CACA,uBAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGD,gCACC,YAAA,CAGD,yBACC,UAAA,CAMD,qBACC,cAAA,CAGD,qCACC,oBAAA,CACA,SAAA,CACA,eAAA,CACA,sBAAA,CAGD,2BACC,mBAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,cAAA,CACA,gEAAA,CACA,UAAA,CAGD,kEAEC,gEAAA,CACA,UAAA,CAMD,eACC,iBAAA,CACA,SAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CACA,+CAAA,CAGD,2BACC,eAAA,CACA,WAAA,CACA,SAAA,CACA,6GAAA,CACA,gHAAA,CACA,oGAAA,CAGD,6BACC,UAAA,CACA,qCAAA,CACA,WAAA,CAGD,2BACC,UAAA,CACA,mCAAA,CACA,WAAA,CAID,6DACC,UAAA,CACA,6BAAA,CACA,YAAA,CACA,oBAAA,CACA,kBAAA,CACA,WAAA,CAGD,kEACC,wBAAA,CAGD,iBACC,oCAAA,CACA,0BAAA,CACA,wBAAA,CACA,sBAAA,CACA,YAAA,CAGD,wCACC,qDAAA,CAGD,8CACC,gDAAA,CAGD,QACC,gBAAA,CAGD,WACC,kBAAA,CAGD,MACC,YAAA,CACA,oBAAA,CACA,oBAAA,CACA,iBAAA,CACA,uBAAA,CACA,QAAA,CACA,UAAA,CAGD,gBACC,YAAA,CACA,gEAAA,CACA,UAAA,CAGD,4CAEC,iEAAA,CACA,SAAA,CAGD,UACC,oBAAA,CACA,uBAAA,CAGD,cACC,gEAAA,CACA,UAAA,CAMD,SACC,SAAA,CACA,aAAA,CAOC,qKAGC,iBAAA,CACA,UAAA,CACA,qBAAA,CACA,mBAAA,CACA,cAAA,CACA,OAAA,CACA,aAAA,CAIC,yhBAEC,0BAAA,CAIF,2KACC,yBAAA,CACA,+BAAA,CACA,2BAAA,CACA,aAAA,CACA,6BAAA,CACA,gBAAA,CACA,eAAA,CACA,cAAA,CACA,eAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,4BAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,2NACI,wBAAA,CACA,UAAA,CAKL,4PACC,iBAAA,CACA,aAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CACA,cAAA,CAID,sPACC,QAAA,CAID,0LACC,OAAA,CACA,iOACC,0BAAA,CAIF,0aAGC,oCAAA,CAED,sPAIC,oCAAA,CAOA,o/CAEC,SAAA,CACA,mDAAA,CAKF,gPACC,uBAAA,CACA,QAAA,CAMA,s5BAEC,SAAA,CACA,YAAA,CAEA,+EAAA,CAMF,8KACC,aAAA,CACA,yBAAA,CACA,aAAA,CACA,kEAAA,CAEA,iBAAA,CACA,SAAA,CACA,uLACC,mBAAA,CACA,cAAA,CAKC,ooDAEC,SAAA,CAKF,kQACC,wBAAA,CAID,6vBAGC,yBAAA,CAID,8QACC,wBAAA,CAML,uCACC,WAAA",sourcesContent:['/*!\n * SPDX-FileCopyrightText: 2016-2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-FileCopyrightText: 2013-2016 ownCLoud, Inc.\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n.loading {\n\tposition: absolute;\n\tinset-inline-start: 50%;\n\ttop: 50%;\n}\n\n.emptycontent {\n\tmargin-top: 24px;\n\tmargin-bottom: 10px;\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tinset-inline: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.folders .ui-droppable-active {\n\tbackground-color: rgb(240, 240, 240);\n}\n\n.folder.no-select {\n\tcursor: not-allowed;\n}\n\n/* ACCOUNT FORM */\n#account-form {\n\tz-index: 1001;\n\twidth: 250px;\n\ttop: 15%;\n\tpadding-bottom: 50px;\n\tmargin: 0 auto;\n\tpadding-top: 30px;\n}\n\n#mail-settings {\n\t#account-form {\n\t\tmargin: 0;\n\t\tpadding-top: 0;\n\t}\n}\n@media only screen and (max-height: 400px) {\n\t#account-form #emptycontent {\n\t\tmargin-top: 0px;\n\t}\n}\n@media only screen and (min-height: 401px) and (max-height: 600px) {\n\t#account-form #emptycontent {\n\t\tmargin-top: 2vh;\n\t}\n}\n@media only screen and (min-height: 601px) {\n\t#account-form #emptycontent {\n\t\tmargin-top: 10vh;\n\t}\n}\n\n#account-form h2 {\n\ttext-align: center;\n\tposition: relative;\n\twidth: 300%;\n\tinset-inline-start: -100%;\n\tmargin-bottom: 20px;\n}\n\n#account-form input {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n\n#account-form .toggle-manual-mode {\n\tbackground-position: right;\n\tpadding-inline-end: 16px;\n\tmargin-inline-start: 6px;\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";\n\topacity: .3;\n}\n\n#setup-imap-ssl-mode,\n#setup-smtp-ssl-mode {\n\tposition: absolute;\n\ttop: 0;\n\tinset-inline-end: 0;\n\tmargin: 0;\n\tbackground-color: transparent;\n\tborder: none;\n\tz-index: 100;\n}\n\n#connect-loading {\n\tposition: absolute;\n\ttop: 206px;\n\tinset-inline: 0;\n\tmargin-inline: auto;\n\theight: 30px;\n}\n\n/* app navigation */\n\n/* do not display empty folders in the sidebar */\n.app-navigation .empty {\n\tdisplay: none;\n}\n\n.app-navigation .navigation-account:not(:first-child) {\n    margin-top: 22px;\n}\n\n\n/* do not overlap collapse icon with special use icon */\n.app-navigation .special-inbox .collapse,\n.app-navigation .special-drafts .collapse,\n.app-navigation .special-sent .collapse,\n.app-navigation .special-trash .collapse {\n\tdisplay: none !important;\n}\n\n.app-navigation .special-inbox:hover .collapse,\n.app-navigation .special-inbox:focus .collapse,\n.app-navigation .special-drafts:hover .collapse,\n.app-navigation .special-drafts:focus .collapse,\n.app-navigation .special-sent:hover .collapse,\n.app-navigation .special-sent:focus .collapse,\n.app-navigation .special-trash:hover .collapse,\n.app-navigation .special-trash:focus .collapse {\n\tdisplay: inline-block !important;\n}\n\n#accounts-list li.collapse-folders a {\n\tcolor: var(--color-text-maxcontrast);\n}\n\n#emptycontent,\n#mail-messages #emptycontent.emptycontent-search {\n\tposition: static;\n}\n\n#mail-messages #emptycontent.emptycontent-search h2 {\n\tline-height: 150%;\n}\n\n#mail-messages #emptycontent {\n\tposition: absolute;\n}\n\n.mail-account-email {\n\tdisplay: inline-block;\n\topacity: .5;\n\tpadding: 20px 0 10px 25px;\n\twidth: calc(100% - 50px);\n\tmargin: initial;\n\tfont-size: 100%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.mail-account-email:first-child {\n\tdisplay: none;\n}\n\n.account-toggle-collapse {\n\topacity: .5;\n}\n\n\n/* settings */\n\n.mailaccount-list li {\n\tpadding: 10px 0;\n}\n\n.mailaccount-list .mail-account-name {\n\tdisplay: inline-block;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.mailaccount-list .actions {\n\tdisplay: inline-flex;\n\tposition: absolute;\n\tinset-inline-end: 0;\n\tmin-height: 16px;\n\tmin-width: 16px;\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";\n\topacity: .5;\n}\n\n.mailaccount-list .actions:hover,\n.mailaccount-list .actions:focus {\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n\topacity: .5;\n}\n\n\n/* app content*/\n\n#mail-messages {\n\tposition: relative;\n\twidth: 30%;\n\theight: 100%;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tborder-inline-end: 1px solid var(--color-border);\n}\n\n#mail-message-list-loading {\n\tposition: sticky;\n\theight: 40px;\n\tz-index: 1;\n\tbackground: -moz-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255,255,255,0) 70%);\n\tbackground: -webkit-radial-gradient(top, ellipse cover, var(--color-main-background),rgba(255,255,255,0) 70%);\n\tbackground: radial-gradient(ellipse at top, var(--color-main-background),rgba(255,255,255,0) 70%);\n}\n\n.app-navigation .msg.success {\n\tcolor: #fff;\n\tbackground-color: var(--color-success);\n\tpadding: 3px;\n}\n\n.app-navigation .msg.error {\n\tcolor: #fff;\n\tbackground-color: var(--color-error);\n\tpadding: 3px;\n}\n\n/* autocomplete list */\n.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete {\n\tmargin: 0px;\n\tfont-weight: normal !important;\n\tdisplay: flex;\n\talign-content: center;\n\talign-items: center;\n\tborder: none;\n}\n\n.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete span {\n\tmargin-inline-start: 10px;\n}\n\n.ui-autocomplete {\n\tpadding-inline-start: 16px !important;\n\tborder-radius: 0 !important;\n\tborder-inline-start: none;\n\tborder-inline-end: none;\n\tz-index: 1000;\n}\n\n.icon-starred[data-starred="false"]:hover {\n\tbackground-image: var(--icon-star-dark-fc0) !important;\n}\n\n.icon-starred[data-starred="false"]:not(:hover) {\n\tbackground-image: var(--icon-star-000) !important;\n}\n\n.unread {\n\tfont-weight: bold;\n}\n/* make sure subfolders of unread folders are not bolded as well */\n.unread ul {\n\tfont-weight: normal;\n}\n\n.star {\n\tpadding: 20px;\n\tbackground-size: 16px;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tinset-inline-start: 16px;\n\ttop: 28px;\n\tz-index: 10;\n}\n/* only show star on hover of row */\n.star.icon-star {\n\tdisplay: none;\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n\topacity: .3;\n}\n\n.star.icon-star:hover,\n.star.icon-star:focus {\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n\topacity: 1;\n}\n\n.icon-add {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.transparency {\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";\n\topacity: .6;\n}\n\n\n/* compose (handling mailto links) */\n\n.compose {\n\twidth: 60%;\n\tmargin: 0 auto;\n}\n\n// FIXES for core apps.scss\n\n.app-navigation {\n\t> ul {\n\t\t> .navigation-account > li,\n\t\t> .navigation-account > .folders > li,\n\t\t> .navigation-account > .folders > li > .folders > .folders > li {\n\t\t\tposition: relative;\n\t\t\twidth: 100%;\n\t\t\tbox-sizing: border-box;\n\t\t\tdisplay: inline-flex;\n\t\t\tflex-wrap: wrap;\n\t\t\torder: 1;\n\t\t\tflex-shrink: 0;\n\n\t\t\t/* hide icons if loading */\n\t\t\t&.icon-loading-small {\n\t\t\t\t> a,\n\t\t\t\t> .app-navigation-entry-bullet {\n\t\t\t\t\tbackground: none !important;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* Main entry link */\n\t\t\t> a {\n\t\t\t\tbackground-size: 16px 16px;\n\t\t\t\tbackground-position: 14px center;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tdisplay: block;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tline-height: 44px;\n\t\t\t\tmin-height: 44px;\n\t\t\t\tpadding: 0 12px;\n\t\t\t\toverflow: hidden;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\tcolor: var(--color-main-text);\n\t\t\t\topacity: .57;\n\t\t\t\tflex: 1 1 0;\n\t\t\t\tz-index: 100; /* above the bullet */\n\t\t\t\t/* TODO: forbid using img as icon in menu? */\n\t\t\t\t&:first-child img {\n\t\t\t\t    margin-inline: -30px 11px;\n\t\t\t\t    width: 16px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Bullet icon */\n\t\t\t> .app-navigation-entry-bullet {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin: 16px;\n\t\t\t\twidth: 12px;\n\t\t\t\theight: 12px;\n\t\t\t\tborder: none;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\n\t\t\t/* popover fix the flex positionning of the li parent */\n\t\t\t> .app-navigation-entry-menu {\n\t\t\t\ttop: 44px;\n\t\t\t}\n\n\t\t\t/* Pinned-to-bottom entries */\n\t\t\t&.pinned {\n\t\t\t\torder: 2;\n\t\t\t\t&.first-pinned {\n\t\t\t\t\tmargin-top: auto !important;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t> a,\n\t\t\t> .app-navigation-entry-deleted {\n\t\t\t\t/* Ugly hack for overriding the main entry link */\n\t\t\t\tpadding-inline-start: 44px !important;\n\t\t\t}\n\t\t\t> .app-navigation-entry-edit {\n\t\t\t\t/* Ugly hack for overriding the main entry link */\n\t\t\t\t/* align the input correctly with the link text\n\t\t\t\t   44px-6px padding for the input */\n\t\t\t\tpadding-inline-start: 38px !important;\n\t\t\t}\n\n\t\t\t&:focus,\n\t\t\t&:hover,\n\t\t\t&.active,\n\t\t\ta.selected {\n\t\t\t\t&,\n\t\t\t\t> a {\n\t\t\t\t\topacity: 1;\n\t\t\t\t\tbox-shadow: inset 2px 0 var(--color-primary-element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* align loader */\n\t\t\t&.icon-loading-small:after {\n\t\t\t\tinset-inline-start: 22px;\n\t\t\t\ttop: 22px;\n\t\t\t}\n\n\t\t\t/* hide and animate deletion/collapse of subitems */\n\t\t\t&.deleted,\n\t\t\t&.collapsible:not(.open) {\n\t\t\t\t> ul,\n\t\t\t\t> .folders {\n\t\t\t\t\topacity: 0;\n\t\t\t\t\tmax-height: 0;\n\t\t\t\t\t/* bezier override the hide/slow effect due to the 2000 max-height */\n\t\t\t\t\ttransition: max-height 1000ms cubic-bezier(0, 1, 0, 1),\n\t\t\t\t\t\t\t\topacity 250ms ease-in-out;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Second level nesting for lists */\n\t\t\t> ul {\n\t\t\t\tflex: 1 0 100%;\n\t\t\t\tpadding-inline-start: 62px;\n\t\t\t\twidth: inherit;\n\t\t\t\ttransition: max-height 2000ms ease-in-out,\n\t\t\t\t\t\t\topacity 250ms ease-in-out;\n\t\t\t\tmax-height: 9999px;\n\t\t\t\topacity: 1;\n\t\t\t\t> li {\n\t\t\t\t\tdisplay: inline-flex;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\t&:focus,\n\t\t\t\t\t&:hover,\n\t\t\t\t\t&.active,\n\t\t\t\t\ta.selected {\n\t\t\t\t\t\t&,\n\t\t\t\t\t\t> a {\n\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/* align loader */\n\t\t\t\t\t&.icon-loading-small:after {\n\t\t\t\t\t\tinset-inline-start: -10px;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Submenu fix for icon */\n\t\t\t\t\t> a[class*=\'icon-\'],\n\t\t\t\t\t> a[style*=\'background-image\'],\n\t\t\t\t\t.app-navigation-entry-bullet {\n\t\t\t\t\t\tmargin-inline-start: -32px; /* 44px padding - 12px padding */\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Submenu fix for bullet */\n\t\t\t\t\t> .app-navigation-entry-bullet {\n\t\t\t\t\t\tinset-inline-start: -32px;/* 44px padding - 12px padding */\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.collapsible > .collapse {\n\t\tz-index: 500;\n\t}\n}\n'],sourceRoot:""}]);const s=r},65901:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".quoted-text{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}","",{version:3,sources:["webpack://./src/components/MessagePlainTextBody.vue"],names:[],mappings:"AACA,aACC,2CAAA,CAGC,oBAAA",sourcesContent:["\n.quoted-text {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n"],sourceRoot:""}]);const s=r},70670:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".fade-enter-active[data-v-25fa7340],.fade-leave-active[data-v-25fa7340]{transition:opacity .5s}.fade-enter[data-v-25fa7340],.fade-leave-to[data-v-25fa7340]{opacity:0}.empty-content[data-v-25fa7340]{height:100%;display:flex}.wrapper[data-v-25fa7340]{display:flex;justify-content:center;flex-direction:column;flex:1 auto;align-items:center;height:100vh}","",{version:3,sources:["webpack://./src/components/Loading.vue"],names:[],mappings:"AACA,wEAEC,sBAAA,CAGD,6DAEC,SAAA,CAGD,gCACC,WAAA,CACA,YAAA,CAGD,0BACC,YAAA,CACA,sBAAA,CACA,qBAAA,CACA,WAAA,CACA,kBAAA,CACA,YAAA",sourcesContent:["\n.fade-enter-active,\n.fade-leave-active {\n\ttransition: opacity 0.5s;\n}\n\n.fade-enter,\n.fade-leave-to {\n\topacity: 0;\n}\n\n.empty-content {\n\theight: 100%;\n\tdisplay: flex;\n}\n\n.wrapper {\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n\tflex: 1 auto;\n\talign-items: center;\n\theight: 100vh;\n}\n"],sourceRoot:""}]);const s=r},73809:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".section-title[data-v-3fc27864] h2{margin:0 !important}[data-v-3fc27864] .app-content-list{flex:1 1 auto;height:100% !important;min-height:0;position:absolute;overflow:scroll;width:100% !important;top:52px}[data-v-3fc27864] .app-content-wrapper{display:flex;flex-direction:column;height:100%;overflow:hidden}.v-popover>.trigger>*[data-v-3fc27864]{z-index:1}.section-header-info[data-v-3fc27864]{max-width:230px;padding:16px}.app-content-list[data-v-3fc27864]{display:flex}.app-content-list-item[data-v-3fc27864]:hover{background:rgba(0,0,0,0)}.app-content-list-item[data-v-3fc27864]{flex:0}.button[data-v-3fc27864]{background-color:var(--color-main-background);margin-bottom:3px;inset-inline-end:2px}.button[data-v-3fc27864]:hover,.button[data-v-3fc27864]:focus{background-color:var(--color-background-dark)}.envelope-list[data-v-3fc27864]{flex:1 1 auto;overflow-y:auto;min-height:0}.information-icon[data-v-3fc27864]{opacity:.7}@media only screen and (max-width: 1024px){.information-icon[data-v-3fc27864]{margin-bottom:20px}}.list__wrapper[data-v-3fc27864]{display:flex;flex:1 1 auto;flex-direction:column;height:100%;overflow:hidden}[data-v-3fc27864] .app-details-toggle{opacity:1}[data-v-3fc27864] .app-content-wrapper.app-content-wrapper--no-split.app-content-wrapper--show-details{overflow-y:scroll !important}","",{version:3,sources:["webpack://./src/components/MailboxThread.vue"],names:[],mappings:"AAEC,mCACC,mBAAA,CAIF,oCACC,aAAA,CACA,sBAAA,CACA,YAAA,CACA,iBAAA,CACA,eAAA,CACA,qBAAA,CACA,QAAA,CAGD,uCACC,YAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CAGD,uCACC,SAAA,CAGD,sCACC,eAAA,CACA,YAAA,CAGD,mCAEC,YAAA,CAGD,8CACC,wBAAA,CAGD,wCACC,MAAA,CAGD,yBACC,6CAAA,CACA,iBAAA,CACA,oBAAA,CAEA,8DAEC,6CAAA,CAIF,gCACC,aAAA,CACA,eAAA,CACA,YAAA,CAGD,mCACC,UAAA,CAED,2CACC,mCACC,kBAAA,CAAA,CAIF,gCACC,YAAA,CACA,aAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CAGD,sCACC,SAAA,CAGD,uGACC,4BAAA",sourcesContent:["\n.section-title {\n\t:deep(h2) {\n\t\tmargin: 0 !important;\n\t}\n}\n\n:deep(.app-content-list) {\n\tflex: 1 1 auto;\n\theight: 100% !important;\n\tmin-height: 0;\n\tposition: absolute;\n\toverflow: scroll;\n\twidth: 100% !important;\n\ttop: 52px;\n}\n\n:deep(.app-content-wrapper) {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\toverflow: hidden;\n}\n\n.v-popover > .trigger > * {\n\tz-index: 1;\n}\n\n.section-header-info {\n\tmax-width: 230px;\n\tpadding: 16px;\n}\n\n.app-content-list {\n\t// Required for centering the loading indicator\n\tdisplay: flex;\n}\n\n.app-content-list-item:hover {\n\tbackground: transparent;\n}\n\n.app-content-list-item {\n\tflex: 0;\n}\n\n.button {\n\tbackground-color: var(--color-main-background);\n\tmargin-bottom: 3px;\n\tinset-inline-end: 2px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n}\n\n.envelope-list {\n\tflex: 1 1 auto;\n\toverflow-y: auto;\n\tmin-height: 0;\n}\n\n.information-icon {\n\topacity: .7;\n}\n@media only screen and (max-width: 1024px) {\n\t.information-icon {\n\t\tmargin-bottom: 20px;\n\t}\n}\n\n.list__wrapper {\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\tflex-direction: column;\n\theight: 100%;\n\toverflow: hidden;\n}\n\n:deep(.app-details-toggle) {\n\topacity: 1;\n}\n\n:deep(.app-content-wrapper.app-content-wrapper--no-split.app-content-wrapper--show-details) {\n\toverflow-y: scroll !important;\n}\n"],sourceRoot:""}]);const s=r},75197:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".attachments{width:100%;box-sizing:border-box;position:relative;display:flex;flex-wrap:wrap;margin:10px 0}.attachments-button-wrapper{text-align:center;display:flex;align-items:center}.show-more-attachments{display:flex;align-items:center;cursor:pointer;padding:2px 0;color:var(--color-text-lighter)}.show-more-attachments span{cursor:pointer}.show-more-attachments:hover{color:var(--color-main-text)}@keyframes spin{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}100%{transform:rotate(360deg)}}.spin{animation:spin 1s linear infinite}.attachment-link{cursor:pointer;display:flex;align-items:center;color:var(--color-text-lighter)}.attachment-link:hover{color:var(--color-main-text)}.attachment-link span{margin:0 4px 0 16px}.oc-dialog{z-index:10000000}.mail-message-attachments{display:flex;flex-wrap:wrap;padding:10px 6px 10px 46px;margin-top:4px;margin-bottom:0;position:sticky;bottom:0;background:linear-gradient(0deg, var(--color-main-background), var(--color-main-background) 90%, rgba(255, 255, 255, 0))}.mail-message-attachments--wrapper{display:flex;width:100%;height:auto;overflow:hidden;max-height:none}.mail-message-attachments--wrapper.hide{display:flex;max-height:70px}","",{version:3,sources:["webpack://./src/components/MessageAttachments.vue"],names:[],mappings:"AACA,aACC,UAAA,CACG,qBAAA,CACA,iBAAA,CACA,YAAA,CACA,cAAA,CACA,aAAA,CAKJ,4BACC,iBAAA,CACA,YAAA,CACA,kBAAA,CAGD,uBACC,YAAA,CACG,kBAAA,CACH,cAAA,CACA,aAAA,CACA,+BAAA,CAEA,4BACC,cAAA,CAGD,6BACC,4BAAA,CAIF,gBACE,GACE,sBAAA,CAEF,IACE,wBAAA,CAEF,KACE,wBAAA,CAAA,CAIJ,MACE,iCAAA,CAGF,iBACC,cAAA,CACA,YAAA,CACA,kBAAA,CACA,+BAAA,CAEA,uBACC,4BAAA,CAGD,sBACC,mBAAA,CAIF,WACC,gBAAA,CAGD,0BACC,YAAA,CACA,cAAA,CACA,0BAAA,CACA,cAAA,CACA,eAAA,CACA,eAAA,CACA,QAAA,CACA,wHAAA,CAGD,mCACC,YAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,eAAA,CAGD,wCACC,YAAA,CACA,eAAA",sourcesContent:["\n.attachments {\n\twidth: 100%;\n    box-sizing: border-box;\n    position: relative;\n    display: flex;\n    flex-wrap: wrap;\n    margin: 10px 0;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-button-wrapper {\n\ttext-align: center;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.show-more-attachments {\n\tdisplay: flex;\n    align-items: center;\n\tcursor: pointer;\n\tpadding: 2px 0;\n\tcolor: var(--color-text-lighter);\n\n\tspan {\n\t\tcursor: pointer;\n\t}\n\n\t&:hover {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  50% {\n    transform: rotate(180deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n.attachment-link {\n\tcursor: pointer;\n\tdisplay:flex;\n\talign-items: center;\n\tcolor: var(--color-text-lighter);\n\n\t&:hover {\n\t\tcolor: var(--color-main-text);\n\t}\n\n\tspan {\n\t\tmargin: 0 4px 0 16px;\n\t}\n}\n\n.oc-dialog {\n\tz-index: 10000000;\n}\n\n.mail-message-attachments {\n\tdisplay:flex;\n\tflex-wrap: wrap;\n\tpadding: 10px 6px 10px 46px;\n\tmargin-top: 4px;\n\tmargin-bottom: 0;\n\tposition:sticky;\n\tbottom:0;\n\tbackground: linear-gradient(0deg, var(--color-main-background), var(--color-main-background) 90%, rgba(255, 255, 255, 0));\n}\n\n.mail-message-attachments--wrapper {\n\tdisplay:flex;\n\twidth:100%;\n\theight:auto;\n\toverflow: hidden;\n\tmax-height: none;\n}\n\n.mail-message-attachments--wrapper.hide {\n\tdisplay:flex;\n\tmax-height: 70px;\n}\n"],sourceRoot:""}]);const s=r},76157:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"\n.reservation[data-v-50bfccc8] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-50bfccc8],\n.arrival[data-v-50bfccc8] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-50bfccc8],\n.arrival[data-v-50bfccc8],\n.connection[data-v-50bfccc8] {\n\tjustify-content: center;\n}\n.station[data-v-50bfccc8] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.departure[data-v-50bfccc8] {\n\ttext-align: end;\n}\n.connection[data-v-50bfccc8] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/TrainReservation.vue"],names:[],mappings:";AAmKA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,eAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.departureStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.arrivalStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight.vue'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport TrainIcon from 'vue-material-design-icons/Train.vue'\n\nimport CalendarImport from './CalendarImport.vue'\nimport { importCalendarEvent } from '../../service/DAVService.js'\nimport logger from '../../logger.js'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\n\t\t\t\t|| 'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: end;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n"],sourceRoot:""}]);const s=r},77342:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".composer-session[data-v-9f4f667e]{position:fixed;bottom:calc(var(--body-container-margin) + var(--default-grid-baseline));inset-inline-end:calc(var(--body-container-margin) + var(--default-grid-baseline));z-index:1000;display:flex;align-items:center;gap:var(--default-grid-baseline);width:360px;padding:0 calc(var(--default-grid-baseline)*2);border-radius:var(--body-container-radius);background-color:var(--color-primary-element-light)}@media(max-width: 1024px){.composer-session[data-v-9f4f667e]{width:calc(100% - 2*var(--default-grid-baseline));height:44px;border-radius:var(--border-radius-pill)}}.composer-session[data-v-9f4f667e]:not(.composer-session--disabled):hover{background-color:var(--color-primary-element-light-hover)}.composer-session[data-v-9f4f667e]:not(.composer-session--disabled),.composer-session:not(.composer-session--disabled) *[data-v-9f4f667e]{cursor:pointer}.composer-session__icon[data-v-9f4f667e]{width:44px}.composer-session__text[data-v-9f4f667e]{flex:1 auto;font-weight:bold;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.composer-session__actions[data-v-9f4f667e]{display:flex;flex-shrink:0}","",{version:3,sources:["webpack://./src/components/ComposerSessionIndicator.vue"],names:[],mappings:"AACA,mCACC,cAAA,CACA,wEAAA,CACA,kFAAA,CACA,YAAA,CAEA,YAAA,CACA,kBAAA,CACA,gCAAA,CAEA,WAAA,CACA,8CAAA,CAGA,0CAAA,CAUA,mDAAA,CAPA,0BAjBD,mCAkBE,iDAAA,CACA,WAAA,CACA,uCAAA,CAAA,CAMA,0EACC,yDAAA,CAGD,0IACC,cAAA,CAIF,yCACC,UAAA,CAGD,yCACC,WAAA,CACA,gBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGD,4CACC,YAAA,CACA,aAAA",sourcesContent:["\n.composer-session {\n\tposition: fixed;\n\tbottom: calc(var(--body-container-margin) + var(--default-grid-baseline));\n\tinset-inline-end: calc(var(--body-container-margin) + var(--default-grid-baseline));\n\tz-index: 1000;\n\n\tdisplay: flex;\n\talign-items: center;\n\tgap: var(--default-grid-baseline);\n\n\twidth: 360px;\n\tpadding: 0 calc(var(--default-grid-baseline) * 2);\n\n\t// Retain border radius from outer body container for visual consistency\n\tborder-radius: var(--body-container-radius);\n\n\t// Mobile\n\t@media (max-width: 1024px) {\n\t\twidth: calc(100% - 2 * var(--default-grid-baseline));\n\t\theight: 44px;\n\t\tborder-radius: var(--border-radius-pill);\n\t}\n\n\t// Conditional hover and pointer styles\n\tbackground-color: var(--color-primary-element-light);\n\t&:not(&--disabled) {\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-primary-element-light-hover);\n\t\t}\n\n\t\t&, * {\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\n\t&__icon {\n\t\twidth: 44px;\n\t}\n\n\t&__text {\n\t\tflex: 1 auto;\n\t\tfont-weight: bold;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t&__actions {\n\t\tdisplay: flex;\n\t\tflex-shrink: 0;\n\t}\n}\n"],sourceRoot:""}]);const s=r},82500:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"[data-v-23515788] .refresh__button{display:none !important}.header[data-v-23515788]{display:grid !important;justify-content:center !important}.app-content[data-v-23515788]{display:flex;height:100%;justify-content:center}.app-content__empty[data-v-23515788]{flex-grow:unset}","",{version:3,sources:["webpack://./src/components/NoMessageSelected.vue"],names:[],mappings:"AACA,mCACC,uBAAA,CAGD,yBACC,uBAAA,CACA,iCAAA,CAGD,8BACC,YAAA,CACA,WAAA,CACA,sBAAA,CACA,qCACC,eAAA",sourcesContent:["\n:deep(.refresh__button) {\n\tdisplay: none !important;\n}\n\n.header {\n\tdisplay: grid !important;\n\tjustify-content: center !important;\n}\n\n.app-content {\n\tdisplay: flex;\n\theight: 100%;\n\tjustify-content: center;\n\t&__empty {\n\t\tflex-grow: unset;\n\t}\n}\n"],sourceRoot:""}]);const s=r},82629:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".phishing-warning[data-v-0378b788]{background-color:rgba(var(--color-warning-rgb), 0.2);border-radius:var(--border-radius);text-align:start;padding:8px;margin:calc(var(--default-grid-baseline)*2);margin-inline-start:50px}.phishing-warning__title[data-v-0378b788]{display:flex}.phishing-warning__list[data-v-0378b788]{list-style-position:inside;list-style-type:disc}.phishing-warning__list__item[data-v-0378b788]{word-wrap:break-word}.phishing-warning__links[data-v-0378b788]{margin-top:10px}.phishing-warning__links__button[data-v-0378b788]{margin-bottom:10px}","",{version:3,sources:["webpack://./src/components/PhishingWarning.vue"],names:[],mappings:"AACA,mCACC,oDAAA,CACG,kCAAA,CACA,gBAAA,CACA,WAAA,CACA,2CAAA,CAEH,wBAAA,CACA,0CACC,YAAA,CAED,yCACC,0BAAA,CACA,oBAAA,CACA,+CACC,oBAAA,CAGC,0CACE,eAAA,CACJ,kDACC,kBAAA",sourcesContent:["\n.phishing-warning {\n\tbackground-color:rgba(var(--color-warning-rgb), 0.2);\n    border-radius: var(--border-radius);\n    text-align: start;\n    padding: 8px;\n    margin: calc(var(--default-grid-baseline) * 2);\n\t// To match the html message margin\n\tmargin-inline-start: 50px;\n\t&__title {\n\t\tdisplay: flex;\n\t}\n\t&__list {\n\t\tlist-style-position: inside;\n\t\tlist-style-type: disc;\n\t\t&__item {\n\t\t\tword-wrap: break-word;\n\t\t}\n\t}\n    &__links {\n      margin-top: 10px;\n\t\t&__button{\n\t\t\tmargin-bottom: 10px;\n\t\t}\n    }\n}\n"],sourceRoot:""}]);const s=r},84316:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i,y:()=>a});const a=t=>"plain"===t.format&&t.value.startsWith("-----BEGIN PGP MESSAGE-----");function i(t){return t.startsWith("-----BEGIN PGP MESSAGE-----")}},85863:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".event-data[data-v-b537fd88]{display:flex;flex-direction:column;gap:5px}.event-data__heading[data-v-b537fd88]{margin-inline-start:36px}.event-data__row[data-v-b537fd88]{display:flex}.event-data__row__icon[data-v-b537fd88]{align-self:start;margin:0 8px;padding-top:2px}.muted[data-v-b537fd88]{color:var(--color-text-lighter)}","",{version:3,sources:["webpack://./src/components/imip/EventData.vue"],names:[],mappings:"AACA,6BACC,YAAA,CACA,qBAAA,CACA,OAAA,CAEA,sCACC,wBAAA,CAGD,kCACC,YAAA,CAEA,wCACC,gBAAA,CACA,YAAA,CAGA,eAAA,CAKH,wBACC,+BAAA",sourcesContent:["\n.event-data {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5px;\n\n\t&__heading {\n\t\tmargin-inline-start: 36px;\n\t}\n\n\t&__row {\n\t\tdisplay: flex;\n\n\t\t&__icon {\n\t\t\talign-self: start;\n\t\t\tmargin: 0 8px;\n\n\t\t\t// Fix slight misalignment caused by align-self: start\n\t\t\tpadding-top: 2px;\n\t\t}\n\t}\n}\n\n.muted {\n\tcolor: var(--color-text-lighter);\n}\n"],sourceRoot:""}]);const s=r},86570:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"\n#priority[data-v-5cc766b6] {\n\tdisplay: inline-block;\n}\n.app-content-list-item[data-v-5cc766b6] {\n\topacity: .8;\n}\n.app-content-list-item[data-v-5cc766b6]:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\nh2[data-v-5cc766b6] {\n\tfont-weight: normal;\n\tfont-size: 17px;\n\tmargin-bottom: 2px;\n}\n","",{version:3,sources:["webpack://./src/components/SectionTitle.vue"],names:[],mappings:";AAyBA;CACA,qBAAA;AACA;AAEA;CACA,WAAA;AACA;AAEA;CACA,6BAAA;CACA,YAAA;AACA;AAEA;CACA,mBAAA;CACA,eAAA;CACA,kBAAA;AACA",sourcesContent:['\x3c!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<div id="priority">\n\t\t<div class="app-content-list-item">\n\t\t\t<h2>{{ name }}</h2>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: \'SectionTitle\',\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n#priority {\n\tdisplay: inline-block;\n}\n\n.app-content-list-item {\n\topacity: .8;\n}\n\n.app-content-list-item:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\n\nh2 {\n\tfont-weight: normal;\n\tfont-size: 17px;\n\tmargin-bottom: 2px;\n}\n</style>\n'],sourceRoot:""}]);const s=r},87420:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>is});var i=a(4658),o=a(16406),r=a(85072),s=a.n(r),l=a(97825),c=a.n(l),d=a(77659),A=a.n(d),p=a(55056),m=a.n(p),u=a(10540),h=a.n(u),g=a(41113),v=a.n(g),C=a(65618),f={};f.styleTagTransform=v(),f.setAttributes=m(),f.insert=A().bind(null,"head"),f.domAPI=c(),f.insertStyleElement=h(),s()(C.A,f),C.A&&C.A.locals&&C.A.locals;var b=a(37963),y={};y.styleTagTransform=v(),y.setAttributes=m(),y.insert=A().bind(null,"head"),y.domAPI=c(),y.insertStyleElement=h(),s()(b.A,y),b.A&&b.A.locals&&b.A.locals;var x=a(97627),_=a(85745);const w={name:"SectionTitle",props:{name:{type:String,required:!0}}};var k=a(86570),I={};I.styleTagTransform=v(),I.setAttributes=m(),I.insert=A().bind(null,"head"),I.domAPI=c(),I.insertStyleElement=h(),s()(k.A,I),k.A&&k.A.locals&&k.A.locals;var S=a(14486);const T=(0,S.A)(w,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"priority"}},[e("div",{staticClass:"app-content-list-item"},[e("h2",[t._v(t._s(t.name))])])])}),[],!1,null,"5cc766b6",null).exports;var D=a(27380),B=a(22457);const M="@@InfiniteScroll";var E=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},F=document.defaultView.getComputedStyle,z=function(t){return t===window?E(window):t.getBoundingClientRect().top+E(window)},P=function(t){for(var e=t.parentNode;e;){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},N=function(){if(!this.binded){this.binded=!0;var t,e,n,a,i,o,r,s,l=this,c=l.el,d=c.getAttribute("infinite-scroll-throttle-delay"),A=200;d&&(A=Number(l.vm[d]||d),(isNaN(A)||A<0)&&(A=200)),l.throttleDelay=A,l.scrollEventTarget=function(t){for(var e=t;e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType;){var n=F(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window}(c),l.scrollListener=(t=L.bind(l),e=l.throttleDelay,s=function(){t.apply(o,r),a=n},function(){if(o=this,r=arguments,n=Date.now(),i&&(clearTimeout(i),i=null),a){var t=e-(n-a);t<0?s():i=setTimeout((()=>{s()}),t)}else s()}),l.scrollEventTarget.addEventListener("scroll",l.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){l.scrollEventTarget.removeEventListener("scroll",l.scrollListener)}));var p=c.getAttribute("infinite-scroll-disabled"),m=!1;p&&(this.vm.$watch(p,(function(t){l.disabled=t,!t&&l.immediateCheck&&L.call(l)})),m=Boolean(l.vm[p])),l.disabled=m;var u=c.getAttribute("infinite-scroll-distance"),h=0;u&&(h=Number(l.vm[u]||u),isNaN(h)&&(h=0)),l.distance=h;var g=c.getAttribute("infinite-scroll-immediate-check"),v=!0;g&&(v=Boolean(l.vm[g])),l.immediateCheck=v,v&&L.call(l);var C=c.getAttribute("infinite-scroll-listen-for-event");C&&l.vm.$on(C,(function(){L.call(l)}))}},L=function(t){var e=this.scrollEventTarget,n=this.el,a=this.distance;if(!0===t||!this.disabled){var i=E(e),o=i+function(t){return t===window?document.documentElement.clientHeight:t.clientHeight}(e);(e===n?e.scrollHeight-o<=a:o+a>=z(n)-z(e)+n.offsetHeight+i)&&this.expression&&this.expression()}};const O={bind(t,e,n){t[M]={el:t,vm:n.context,expression:e.value};const a=arguments;console.info("binding",t,e,n),t[M].vm.$nextTick((function(){P(t)&&N.call(t[M],a),t[M].bindTryCount=0;var e=function(){t[M].bindTryCount>10||(t[M].bindTryCount++,P(t)?N.call(t[M],a):setTimeout(e,50))};e()}))},unbind(t){t&&t[M]&&t[M].scrollEventTarget&&t[M].scrollEventTarget.removeEventListener("scroll",t[M].scrollListener)}};var q=a(25216),$=a(5652),G=a(32190);const j={name:"EmptyMailbox",components:{IconMail:$.A,NcEmptyContent:G.A}},U=(0,S.A)(j,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{attrs:{name:t.t("mail","No messages in this folder")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail")]},proxy:!0}])})}),[],!1,null,null,null).exports;var R=a(85168);const W={name:"EnvelopeSkeleton",components:{NcActions:i.B6,NcCounterBubble:i.E7,NcVNodes:i.LZ},props:{details:{type:String,default:""},name:{type:String,required:!0},exact:{type:Boolean,default:!1},to:{type:[String,Object],default:null},href:{type:String,default:"#"},target:{type:String,default:""},anchorId:{type:String,default:""},bold:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},active:{type:Boolean,default:!1},linkAriaLabel:{type:String,default:""},actionsAriaLabel:{type:String,default:""},counterNumber:{type:[Number,String],default:0},counterType:{type:String,default:"",validator:t=>-1!==["highlighted","outlined",""].indexOf(t)},forceDisplayActions:{type:Boolean,default:!1},oneLine:{type:Boolean,default:!1}},emits:["click","update:menuOpen"],data:()=>({hovered:!1,hasActions:!1,hasSubname:!1,displayActionsOnHoverFocus:!1,menuOpen:!1,hasIndicator:!1,hasDetails:!1}),computed:{showAdditionalElements(){return!this.displayActionsOnHoverFocus||this.forceDisplayActions},showDetails(){return(""!==this.details||this.hasDetails)&&(!this.displayActionsOnHoverFocus||this.forceDisplayActions)},computedActionsAriaLabel(){return this.actionsAriaLabel||t('Actions for item with name "{name}"',{name:this.name})}},watch:{menuOpen(t){t||this.hovered||(this.displayActionsOnHoverFocus=!1)}},mounted(){this.checkSlots()},updated(){this.checkSlots()},methods:{onClick(t,e,n){this.$emit("click",t),t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||n&&(e?.(t),t.preventDefault())},showActions(){this.hasActions&&(this.displayActionsOnHoverFocus=!0),this.hovered=!1},hideActions(){this.displayActionsOnHoverFocus=!1},handleBlur(t){this.menuOpen||this.$refs["list-item"].contains(t.relatedTarget)||this.hideActions()},handleMouseleave(){this.menuOpen||(this.displayActionsOnHoverFocus=!1),this.hovered=!1},handleMouseover(){this.showActions(),this.hovered=!0},handleActionsUpdateOpen(t){this.menuOpen=t,this.$emit("update:menuOpen",t)},checkSlots(){this.hasActions!==!!this.$slots.actions&&(this.hasActions=!!this.$slots.actions),this.hasSubname!==!!this.$slots.subname&&(this.hasSubname=!!this.$slots.subname),this.hasIndicator!==!!this.$slots.indicator&&(this.hasIndicator=!!this.$slots.indicator),this.hasDetails!==!!this.$slots.details&&(this.hasDetails=!!this.$slots.details)}}};var V=a(47677),Y={};Y.styleTagTransform=v(),Y.setAttributes=m(),Y.insert=A().bind(null,"head"),Y.domAPI=c(),Y.insertStyleElement=h(),s()(V.A,Y),V.A&&V.A.locals&&V.A.locals;const H=(0,S.A)(W,(function(){var t=this,e=t._self._c;return e(t.to?"router-link":"NcVNodes",{tag:"component",attrs:{custom:!!t.to||null,to:t.to,exact:t.to?t.exact:null},scopedSlots:t._u([{key:"default",fn:function(n){let{href:a,navigate:i,isActive:o}=n;return[e("li",{staticClass:"list-item__wrapper",class:{"list-item__wrapper--active":o||t.active}},[e("div",{ref:"list-item",staticClass:"list-item",class:{"list-item--compact":t.compact,"list-item--one-line":t.oneLine},on:{mouseover:t.handleMouseover,mouseleave:t.handleMouseleave}},[e("a",{staticClass:"list-item__anchor",attrs:{id:t.anchorId||void 0,"aria-label":t.linkAriaLabel,href:a||t.href,target:t.target||("#"===t.href?void 0:"_blank"),rel:"#"===t.href?void 0:"noopener noreferrer"},on:{focus:t.showActions,focusout:t.handleBlur,click:function(e){return t.onClick(e,i,a)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideActions.apply(null,arguments)}}},[t._t("icon"),t._v(" "),e("div",{staticClass:"list-item-content"},[e("div",{staticClass:"list-item-content__name"},[t._t("name",(function(){return[t._v(t._s(t.name))]}))],2),t._v(" "),e("div",{staticClass:"list-item-content__inner"},[e("div",{staticClass:"list-item-content__inner__main"},[t.hasSubname?e("div",{staticClass:"list-item-content__inner__subname",class:{"list-item-content__inner__subname--bold":t.bold}},[t._t("subname")],2):t._e(),t._v(" "),t.$slots.tags?e("div",{staticClass:"list-item-content__inner__tags"},[t._t("tags")],2):t._e()]),t._v(" "),e("div",{staticClass:"list-item-content__inner__details"},[t.showDetails?e("div",{staticClass:"list-item-content__inner__details__details"},[t._t("details",(function(){return[t._v(t._s(t.details))]}))],2):t._e(),t._v(" "),t.counterNumber||t.hasIndicator?e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdditionalElements,expression:"showAdditionalElements"}],staticClass:"list-item-content__inner__details__extra"},[t.counterNumber?e("NcCounterBubble",{staticClass:"list-item-content__inner__details__extra__counter",attrs:{active:o||t.active,type:t.counterType}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.counterNumber)+"\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.hasIndicator?e("span",{staticClass:"list-item-content__inner__details__extra__indicator"},[t._t("indicator")],2):t._e()],1):t._e()])])])],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.forceDisplayActions||t.displayActionsOnHoverFocus,expression:"forceDisplayActions || displayActionsOnHoverFocus"}],staticClass:"list-item__actions",on:{focusout:t.handleBlur}},[e("NcActions",{ref:"actions",attrs:{primary:o||t.active,"aria-label":t.computedActionsAriaLabel},on:{"update:open":t.handleActionsUpdateOpen}},[t._t("actions")],2)],1)])])]}}],null,!0)})}),[],!1,null,"f6f186fa",null).exports;var Q=a(8895),K=a(10833),J=a(94767),X=a(74729),Z=a(98779),tt=a(90629),et=a(11893),nt=a(99495),at=a(71229),it=a(35052),ot=a(18816),rt=a(6178),st=a(86417),lt=a(35630),ct=a(64112),dt=a.n(ct);class At{constructor(t,e,n){this.el=t,this.options=n,this.registerListeners.bind(this)(t),this.setInitialAttributes()}setInitialAttributes(){this.el.setAttribute("draggable","true"),this.el.classList.add("draggable-envelope")}update(t,e){this.options=e.options}registerListeners(t){t.addEventListener("dragstart",this.onDragStart.bind(this)),t.addEventListener("dragend",this.onDragEnd.bind(this))}removeListeners(t){t.removeEventListener("dragstart",this.onDragStart),t.removeEventListener("dragend",this.onDragEnd)}onDragStart(t){if(!this.options.isDraggable)return;const{accountId:e,mailboxId:n,selectedEnvelopes:a}=this.options;t.dataTransfer.clearData(),t.dataTransfer.effectAllowed="move";const i=[];if(a.length)a.forEach(((t,a)=>{i.push({accountId:e,mailboxId:n,databaseId:t.databaseId,draggableLabel:`${t.subject} (${t.from[0].label})`})}));else{const{databaseId:t,draggableLabel:a}=this.options;i.push({accountId:e,mailboxId:n,databaseId:t,draggableLabel:a})}t.dataTransfer.setData("text/plain",JSON.stringify(i)),this.attachGhost({event:t,envelopes:i}),lt.A.emit("drag-start",{accountId:e,mailboxId:n,itemCount:i.length})}onDragEnd(t){lt.A.emit("drag-end",{accountId:this.options.accountId})}attachGhost(t){let{event:e,envelopes:n}=t;const a="draggable-envelope-ghost",i=document.createElement("div");i.classList.add(a);const o=document.createElement("span");o.classList.add(`${a}--counter`);const r=document.createTextNode(n.length);o.appendChild(r),i.appendChild(o);const s=document.createElement("div");s.classList.add(`${a}--label-wrapper`),n.forEach((t=>{const e=document.createElement("div");e.classList.add(`${a}--label-wrapper--label`);const n=document.createTextNode(t.draggableLabel);e.appendChild(n),s.appendChild(e)})),i.appendChild(s),document.body.appendChild(i),e.dataTransfer.setDragImage(i,0,15),dt()((()=>{document.body.removeChild(i)}))}}let pt=[];const mt={bind(t,e,n){const a=new At(t,n.context,e.value);pt.push(a)},componentUpdated(t,e){const n=e.value;setTimeout((()=>{pt.forEach((e=>{e.options.selectedEnvelopes=n.selectedEnvelopes,e.update(t,e)}))}))},unbind(t){pt=pt.filter((e=>e.el!==t))}};var ut=a(61178),ht=a(9140),gt=a.n(ht),vt=a(51651);const Ct=gt()(((t,e)=>{const n=(0,vt.A)(e);return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()?n.format("H:mm"):e.getTime()>t.getTime()-3024e5?n.format("dd"):e.getTime()>t.getTime()-15768e6?n.format("MMM D"):n.format("MMM D, YYYY")}))(new Date);var ft=a(66232),bt=a(16060),yt=a(64678),xt=a(49519),_t=a(51849);const wt={name:"MoveModal",components:{MailboxPicker:yt.A},props:{account:{type:Object,required:!0},envelopes:{type:Array,required:!0},moveThread:{type:Boolean,default:!1}},data:()=>({moving:!1,destMailboxId:void 0}),computed:{...(0,_t.n2)(xt.A)},methods:{onClose(){this.$emit("close")},async onMove(){this.moving=!0;try{const t=this.envelopes.filter((t=>t.mailboxId!==this.destMailboxId));if(0===t.length)return;for(const e of t)this.moveThread?await this.mainStore.moveThread({envelope:e,destMailboxId:this.destMailboxId}):await this.mainStore.moveMessage({id:e.databaseId,destMailboxId:this.destMailboxId});await this.mainStore.syncEnvelopes({mailboxId:this.destMailboxId}),this.$emit("move")}catch(t){_.A.error("could not move messages",{error:t})}finally{this.moving=!1,this.$emit("close")}}}},kt=(0,S.A)(wt,(function(){var t=this;return(0,t._self._c)("MailboxPicker",{attrs:{account:t.account,selected:t.destMailboxId,loading:t.moving,"label-select":t.moveThread?t.t("mail","Move thread"):t.t("mail","Move message"),"label-select-loading":t.moveThread?t.t("mail","Moving thread"):t.t("mail","Moving message")},on:{"update:selected":function(e){t.destMailboxId=e},select:t.onMove,close:t.onClose}})}),[],!1,null,null,null).exports;var It=a(35195),St=a(42622),Tt=a(29080),Dt=a(12624),Bt=a(67069),Mt=a(35538),Et=a(69635);const Ft={name:"JunkIcon",props:{title:{type:String,default:""},size:{type:Number,default:20},fillColor:{type:String,default:"currentColor"}}},zt=(0,S.A)(Ft,(function(t,e){return t("span",e._g(e._b({staticClass:"material-design-icon junk-icon",class:[e.data.class,e.data.staticClass],attrs:{"aria-hidden":!e.props.title,"aria-label":e.props.title,role:"img"}},"span",e.data.attrs,!1),e.listeners),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.props.fillColor,width:e.props.size,height:e.props.size,viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),e._v(" "),t("path",{attrs:{d:"m5.5156 2l-3.5156 3.5156v4.9684l3.5156 3.516h4.9684l3.516-3.516v-4.9684l-3.516-3.5156h-4.9684zm1.4844 2h2v5h-2v-5zm0 6h2v2h-2v-2z"}})])])}),[],!0,null,null,null).exports;var Pt=a(49954),Nt=a(12497),Lt=a(53334);const Ot={name:"ConfirmationModal",components:{NcButton:i.x1,NcModal:i.FH},props:{title:{type:String,required:!0},confirmText:{type:String,default:(0,Lt.Tl)("mail","Confirm")},confirmUrl:{type:String,default:void 0},disabled:{type:Boolean,default:!1}},methods:{confirm(){this.$emit("confirm")},cancel(){this.$emit("cancel")}}};var qt=a(30135),$t={};$t.styleTagTransform=v(),$t.setAttributes=m(),$t.insert=A().bind(null,"head"),$t.domAPI=c(),$t.insertStyleElement=h(),s()(qt.A,$t),qt.A&&qt.A.locals&&qt.A.locals;const Gt=(0,S.A)(Ot,(function(){var t=this,e=t._self._c;return e("NcModal",{staticClass:"confirm-modal",on:{close:t.cancel}},[e("div",{staticClass:"confirm-modal"},[e("h2",[t._v(t._s(t.title))]),t._v(" "),t._t("default"),t._v(" "),e("div",{staticClass:"confirm-modal__buttons"},[e("NcButton",{attrs:{type:"tertiary",disabled:t.disabled},on:{click:t.cancel}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Cancel"))+"\n\t\t\t")]),t._v(" "),e("NcButton",{attrs:{href:t.confirmUrl,rel:!!t.confirmUrl&&"noopener noreferrer",target:!!t.confirmUrl&&"_blank",disabled:t.disabled,type:"primary"},on:{click:t.confirm}},[t._v("\n\t\t\t\t"+t._s(t.confirmText)+"\n\t\t\t")])],1)],2)])}),[],!1,null,"381b722b",null).exports,jt={name:"DeleteTagModal",components:{ConfirmationModal:Gt},props:{tag:{type:Object,required:!0},envelopes:{required:!0,type:Array},accountId:{type:Number,required:!0}},data:()=>({deleting:!1}),computed:{...(0,_t.n2)(xt.A)},methods:{onClose(){this.$emit("close")},removeTag(t){this.envelopes.forEach((e=>{this.mainStore.removeEnvelopeTag({envelope:e,imapLabel:t})}))},async deleteTag(){this.deleting=!0;try{this.removeTag(this.tag.imapLabel),await this.mainStore.deleteTag({tag:this.tag,accountId:this.accountId}),(0,R.Te)(t("mail","Tag: {name} deleted",{name:this.tag.displayName}))}catch(e){(0,R.cf)(t("mail","An error occurred, unable to delete the tag."))}finally{this.deleting=!1,this.onClose()}}}},Ut=(0,S.A)(jt,(function(){var t=this;return(0,t._self._c)("ConfirmationModal",{attrs:{title:"Delete tag",disabled:t.deleting},on:{confirm:t.deleteTag,cancel:t.onClose}},[t._v("\n\t"+t._s(t.t("mail","The tag will be deleted from all messages."))+"\n")])}),[],!1,null,null,null).exports;var Rt=a(86791),Wt=a(87314);function Vt(t){return t.imapLabel===Wt.AA&&"Follow up"===t.displayName?(0,Lt.Tl)("mail","Follow up"):t.displayName}const Yt={name:"TagItem",components:{NcColorPicker:i.zm,Actions:i.B6,NcActionButton:i.Ko,ActionText:i.HO,ActionInput:i.Az,IconLoading:i.ne,DeleteIcon:nt.A,IconEdit:Rt.A},props:{tag:{type:Object,required:!0},envelopes:{required:!0,type:Array}},data:()=>({isAdded:!1,editing:!1,tagLabel:!0,tagInput:!1,showSaving:!1,renameTagLabel:!0,renameTagInput:!1}),computed:{...(0,_t.n2)(xt.A)},methods:{translateTagDisplayName:Vt,deleteTag(){this.$emit("delete-tag",this.tag)},async updateColor(e){this.editColor=e,this.showSaving=!1;try{await this.mainStore.updateTag({tag:this.tag,displayName:this.tag.displayName,color:e}),this.showSaving=!1}catch(e){(0,R.cf)(t("mail","An error occurred, unable to rename the tag.")),console.error(e),this.showSaving=!0}},openEditTag(){this.renameTagLabel=!1,this.renameTagInput=!0,this.showSaving=!1},async renameTag(e,n){this.renameTagInput=!1,this.showSaving=!1;const a=n.target.querySelector("input[type=text]").value;try{await this.mainStore.updateTag({tag:e,displayName:a,color:e.color}),this.renameTagLabel=!0,this.renameTagInput=!1,this.showSaving=!1}catch(e){(0,R.cf)(t("mail","An error occurred, unable to rename the tag.")),console.error(e),this.renameTagLabel=!1,this.renameTagInput=!1,this.showSaving=!0}},convertHex:(t,e)=>4===t.length?`rgba(${parseInt(t.substring(1,2),16)}, ${parseInt(t.substring(2,3),16)}, ${parseInt(t.substring(3,4),16)}, ${e})`:`rgba(${parseInt(t.substring(1,3),16)}, ${parseInt(t.substring(3,5),16)}, ${parseInt(t.substring(5,7),16)}, ${e})`,isSet(t){return this.envelopes.some((e=>this.mainStore.getEnvelopeTags(e.databaseId).some((e=>e.imapLabel===t))))},addTag(t){this.isAdded=!0,this.envelopes.forEach((e=>{this.mainStore.addEnvelopeTag({envelope:e,imapLabel:t})}))},removeTag(t){this.isAdded=!1,this.envelopes.forEach((e=>{this.mainStore.removeEnvelopeTag({envelope:e,imapLabel:t})}))}}};var Ht=a(8151),Qt={};Qt.styleTagTransform=v(),Qt.setAttributes=m(),Qt.insert=A().bind(null,"head"),Qt.domAPI=c(),Qt.insertStyleElement=h(),s()(Ht.A,Qt),Ht.A&&Ht.A.locals&&Ht.A.locals;const Kt=(0,S.A)(Yt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tag-group"},[e("button",{staticClass:"tag-group__label",style:{color:t.convertHex(t.tag.color,1),"background-color":t.convertHex(t.tag.color,.15)}},[t._v("\n\t\t"+t._s(t.translateTagDisplayName(t.tag))+"\n\t")]),t._v(" "),e("Actions",{attrs:{"force-menu":!0}},[t.renameTagLabel?e("NcActionButton",{on:{click:t.openEditTag},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEdit",{attrs:{size:22}})]},proxy:!0}],null,!1,3188839357)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit name or color"))+"\n\t\t")]):t._e(),t._v(" "),t.renameTagLabel?t._e():e("NcColorPicker",{staticClass:"app-navigation-entry-bullet-wrapper",attrs:{value:`#${t.tag.color}`},on:{input:t.updateColor}},[e("div",{staticClass:"color0 app-navigation-entry-bullet",style:{backgroundColor:t.tag.color}})]),t._v(" "),t.renameTagInput?e("ActionInput",{attrs:{value:t.tag.displayName},on:{submit:function(e){return t.renameTag(t.tag,e)}}}):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:22}})]},proxy:!0}],null,!1,1914415623)},[t._v("\n\t\t\t"+t._s(t.t("mail","Saving new tag name …"))+"\n\t\t")]):t._e(),t._v(" "),t.tag.isDefaultTag&&t.renameTagLabel?t._e():e("NcActionButton",{on:{click:t.deleteTag},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{size:22}})]},proxy:!0}],null,!1,3285467224)},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete tag"))+"\n\t\t")])],1),t._v(" "),t.isSet(t.tag.imapLabel)?e("button",{staticClass:"tag-actions",on:{click:function(e){return t.removeTag(t.tag.imapLabel)}}},[t._v("\n\t\t"+t._s(t.t("mail","Unset tag"))+"\n\t")]):e("button",{staticClass:"tag-actions",on:{click:function(e){return t.addTag(t.tag.imapLabel)}}},[t._v("\n\t\t"+t._s(t.t("mail","Set tag"))+"\n\t")])],1)}),[],!1,null,"3b8b530c",null).exports,Jt={forwarded:"",hasattachment:"",has_cal:"","has cal":"",hasnoattachment:"",notjunk:"",loadremoteimages:"","unsubscribe newsletter":""};function Xt(){let t=((1<<24)*Math.random()|0).toString(16);for(;t.length<6;)t="0"+t;return"#"+t}const Zt={name:"TagModal",components:{Modal:i.FH,ActionText:i.HO,ActionInput:i.Az,DeleteTagModal:Ut,IconTag:Nt.A,IconLoading:i.ne,TagItem:Kt,NcButton:i.x1,IconAdd:Pt.A},props:{envelopes:{required:!0,type:Array}},data:()=>({isAdded:!1,editing:!1,tagLabel:!0,tagInput:!1,showSaving:!1,renameTagLabel:!0,renameTagInput:!1,deleteTagModal:!1,tagToDelete:null,color:Xt(),editColor:""}),computed:{...(0,_t.n2)(xt.A),tags(){return this.mainStore.getTags.filter((t=>"$label1"!==t.imapLabel&&!(t.displayName.toLowerCase()in Jt))).sort(((t,e)=>t.isDefaultTag&&!e.isDefaultTag?-1:e.isDefaultTag&&!t.isDefaultTag?1:t.isDefaultTag&&e.isDefaultTag?t.displayName<e.displayName?1:-1:this.isSet(t.imapLabel)&&!this.isSet(e.imapLabel)?-1:!this.isSet(t.imapLabel)&&this.isSet(e.imapLabel)?1:t.displayName.localeCompare(e.displayName)))}},methods:{onClose(){this.$emit("close")},closeDeleteModal(){this.deleteTagModal=!1},isSet(t){return this.envelopes.some((e=>this.mainStore.getEnvelopeTags(e.databaseId).some((e=>e.imapLabel===t))))},addTagInput(){this.editing=!0,this.showSaving=!1},async createTag(t){if(this.editing=!0,this.showSaving)return;const e=t.target.querySelector("input[type=text]").value;if(e.toLowerCase()in Jt)(0,R.Qg)(this.t("mail","Tag name is a hidden system tag"));else if(this.mainStore.getTags.some((t=>t.displayName===e)))(0,R.Qg)(this.t("mail","Tag already exists"));else if(""!==e.trim())try{await this.mainStore.createTag({displayName:e,color:Xt()})}catch(t){console.debug(t),(0,R.Qg)(this.t("mail","An error occurred, unable to create the tag."))}finally{this.showSaving=!1,this.tagLabel=!0}else(0,R.Qg)(this.t("mail","Tag name cannot be empty"))},convertHex:(t,e)=>4===t.length?`rgba(${parseInt(t.substring(1,2),16)}, ${parseInt(t.substring(2,3),16)}, ${parseInt(t.substring(3,4),16)}, ${e})`:`rgba(${parseInt(t.substring(1,3),16)}, ${parseInt(t.substring(3,5),16)}, ${parseInt(t.substring(5,7),16)}, ${e})`,openEditTag(){this.renameTagLabel=!1,this.renameTagInput=!0,this.showSaving=!1},async renameTag(e,n){this.renameTagInput=!1,this.showSaving=!1;const a=n.target.querySelector("input[type=text]").value;try{await this.mainStore.updateTag({tag:e,displayName:a,color:e.color}),this.renameTagLabel=!0,this.renameTagInput=!1,this.showSaving=!1}catch(e){(0,R.cf)(t("mail","An error occurred, unable to rename the tag.")),console.error(e),this.renameTagLabel=!1,this.renameTagInput=!1,this.showSaving=!0}},deleteTag(t){this.tagToDelete=t,this.deleteTagModal=!0}}};var te=a(16942),ee={};ee.styleTagTransform=v(),ee.setAttributes=m(),ee.insert=A().bind(null,"head"),ee.domAPI=c(),ee.insertStyleElement=h(),s()(te.A,ee),te.A&&te.A.locals&&te.A.locals;const ne=(0,S.A)(Zt,(function(){var t=this,e=t._self._c;return t.deleteTagModal?e("DeleteTagModal",{attrs:{tag:t.tagToDelete,envelopes:t.envelopes,"account-id":t.envelopes[0].accountId},on:{close:t.closeDeleteModal}}):e("Modal",{attrs:{size:"large"},on:{close:t.onClose}},[e("div",{staticClass:"modal-content"},[e("h2",{staticClass:"tag-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Add default tags"))+"\n\t\t")]),t._v(" "),t._l(t.tags,(function(n){return e("TagItem",{key:n.id,attrs:{tag:n,envelopes:t.envelopes},on:{"delete-tag":t.deleteTag}})})),t._v(" "),e("h2",{staticClass:"tag-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Add tag"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"create-tag"},[t.editing?t._e():e("NcButton",{staticClass:"tagButton",on:{click:t.addTagInput},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2388353250)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add tag"))+"\n\t\t\t")]),t._v(" "),t.editing?e("ActionInput",{attrs:{disabled:t.showSaving},on:{submit:t.createTag},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconTag",{attrs:{size:20}})]},proxy:!0}],null,!1,1596509905)}):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Saving tag …"))+"\n\t\t\t")]):t._e()],1)],2)])}),[],!1,null,"839f574c",null).exports;var ae=a(88075),ie=a(62297),oe=a(63032),re=a.n(oe),se=a(68202),le=a(4606),ce=a(70715),de=a(63814),Ae=a(21777),pe=a(83503),me=a.n(pe),ue=a(10734),he=a.n(ue);function ge(t){const e=ve(t);return"#"+he().rgb.hex(e.r,e.g,e.b)}const ve=t=>{let e=t.toLowerCase();null===e.match(/^([0-9a-f]{4}-?){8}$/)&&(e=me()(e)),e=e.replace(/[^0-9a-f]/g,"");return function(t){t||(t=6);const e=new Ce(182,70,157),n=new Ce(221,203,85),a=new Ce(0,130,201),i=fe(t,e,n),o=fe(t,n,a),r=fe(t,a,e);return i.concat(o).concat(r)}(6)[function(t){let e=0;const n=[];for(let e=0;e<t.length;e++)n.push(parseInt(t.charAt(e),16)%16);for(const t in n)e+=n[t];return parseInt(parseInt(e,10)%18,10)}(e)]};function Ce(t,e,n){this.r=t,this.g=e,this.b=n}function fe(t,e,n){const a=[];a.push(e);const i=function(t,e){const n=new Array(3);return n[0]=(e[1].r-e[0].r)/t,n[1]=(e[1].g-e[0].g)/t,n[2]=(e[1].b-e[0].b)/t,n}(t,[e,n]);for(let n=1;n<t;n++){const t=parseInt(e.r+i[0]*n,10),o=parseInt(e.g+i[1]*n,10),r=parseInt(e.b+i[2]*n,10);a.push(new Ce(t,o,r))}return a}const be=t=>{let e=t?.acl?.ace;if(!e)return!1;Array.isArray(e)||(e=[e]);for(const t of e)if(void 0!==t.grant?.privilege?.write)return!0;return!1},ye=t=>({displayname:t.props.displayname,order:t.props["calendar-order"],components:{vevent:!0},writable:be(t.props),url:(0,de.dC)(`dav/calendars/${(0,Ae.HW)().uid}${t.filename}/`),color:t.props["calendar-color"]??ge(t.props.displayname??"")}),xe=async()=>(await(0,le.K)("calendars").getDirectoryContents("/",{data:'<?xml version="1.0"?>\n<d:propfind  xmlns:d="DAV:" xmlns:c="urn:ietf:params:xml:ns:caldav" xmlns:aapl="http://apple.com/ns/ical/" xmlns:oc="http://owncloud.org/ns" xmlns:cs="http://calendarserver.org/ns/">\n  <d:prop>\n    <d:displayname />\n    <c:calendar-description />\n    <c:calendar-timezone />\n    <aapl:calendar-order />\n    <aapl:calendar-color />\n    <c:supported-calendar-component-set />\n    <oc:calendar-enabled />\n    <d:acl />\n    <d:owner />\n    <oc:invite />\n  </d:prop>\n</d:propfind>',details:!0})).data.map(ye).filter((t=>t.components.vevent&&!0===t.writable)),_e=()=>{let t="";for(let e=0;e<7;e++)t+=Math.random().toString(36).substring(7);return t},we=()=>{const t=new se.A.Component(["vcalendar",[],[]]);return t.updatePropertyWithValue("prodid","-//"+OC.theme.name+" Mail"),t},ke=gt()(((t,e)=>{_.A.debug("importing events into calendar",{url:t,data:e});const n=[],a=(t=>{const e=[],n={},a=se.A.parse(t),i=new se.A.Component(a);i.getAllSubcomponents("vtimezone").forEach((t=>e.push(t)));const o=["vevent","vjournal","vtodo"];o.forEach((t=>{const e=i.getAllSubcomponents(t);n[t]={},e.forEach((e=>{const a=e.getFirstPropertyValue("uid");n[t][a]=n[t][a]||[],n[t][a].push(e)}))}));const r=[];return o.forEach((t=>{r[t]=[];for(const a in n[t]){const i=n[t][a],o=we();e.forEach(o.addSubcomponent.bind(o));for(const t in i)o.addSubcomponent(i[t]);r[t].push(o.toString())}})),{name:i.getFirstPropertyValue("x-wr-calname"),color:i.getFirstPropertyValue("x-apple-calendar-color"),split:r}})(e);return["vevent","vjournal","vtodo"].forEach((e=>{for(const i in a.split[e]){const o=a.split[e][i];_.A.info("importing event component",{component:o}),n.push(Promise.resolve(ce.Ay.put(t+_e()+".ics",o,{headers:{"Content-Type":"text/calendar; charset=utf-8"}})))}})),Promise.all(n)})),Ie={name:"CalendarPickerOption",props:{color:{type:String,required:!0},displayname:{type:String,required:!0},displayIcon:{type:Boolean,default:!1}}};var Se=a(62409),Te={};Te.styleTagTransform=v(),Te.setAttributes=m(),Te.insert=A().bind(null,"head"),Te.domAPI=c(),Te.insertStyleElement=h(),s()(Se.A,Te),Se.A&&Se.A.locals&&Se.A.locals;const De=(0,S.A)(Ie,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"calendar-picker-option"},[e("div",{staticClass:"calendar-picker-option__color-indicator",style:{backgroundColor:t.color}}),t._v(" "),e("span",{staticClass:"calendar-picker-option__label"},[t._v("\n\t\t"+t._s(t.displayname)+"\n\t")]),t._v(" "),e("span",{class:t.displayIcon?"icon-caret-dark":""})])}),[],!1,null,"5d8e3696",null).exports;var Be=a(81222),Me=a(73263);const Ee=async t=>{const e=(0,de.Jv)("/apps/mail/api/messages/{messageId}/needsTranslation",{messageId:t});try{const t=await ce.Ay.get(e);if(204===t.status)throw new Error("Checking whether translation is needed failed, error in the llm service");if(501===t.status)throw new Error("Please enable llm services for groupware to use this feature");return t.data.requiresTranslation}catch(t){throw(0,Me.y)(t)}},Fe={name:"EventModal",components:{CalendarPickerOption:De,DatetimePicker:i.t4,Modal:i.FH,NcSelect:i.EQ},props:{envelope:{type:Object,required:!0}},data(){const t=re().determine(),e=t?t.name():"UTC";return{calendars:[],eventTitle:this.envelope.subject,startDate:new Date,endDate:new Date,isAllDay:!1,startTimezoneId:e,endTimezoneId:e,saving:!1,selectedCalendar:void 0,description:this.envelope.previewText,generatingData:!1,llmProcessingEnabled:(0,Be.C)("mail","llm_summaries_available",!1)}},computed:{dateFormat(){return this.isAllDay?"YYYY-MM-DD":"YYYY-MM-DD HH:mm"},datePickerType(){return this.isAllDay?"date":"datetime"}},async created(){_.A.debug("creating event from envelope",{envelope:this.envelope}),await this.generateEventData()},async mounted(){this.calendars=(await xe()).filter((t=>t.writable)),this.calendars.length&&(this.selectedCalendar=this.calendars[0])},methods:{async generateEventData(){if(this.llmProcessingEnabled)try{this.generatingData=!0;const{summary:t,description:e}=await(async t=>{const e=(0,de.Jv)("/apps/mail/api/thread/{threadId}/eventdata",{threadId:t});try{return(await ce.Ay.get(e)).data.data}catch(t){throw(0,Me.y)(t)}})(this.envelope.databaseId);this.eventTitle=t,this.description=e}finally{this.generatingData=!1}},onClose(){this.$emit("close")},async onSave(){this.saving=!0;try{_.A.debug("create event",{calendar:this.selectedCalendar,eventTitle:this.eventTitle,startDate:this.startDate,startTimezone:this.startTimezoneId,endTimezone:this.endTimezoneId,description:this.description});const e=(0,ie.ZR)();e.registerDefaultTimezones();const n=e.getTimezoneForId(this.startTimezoneId),a=ae.Z4.fromJSDate(this.startDate,!0).getInTimezone(n),i=e.getTimezoneForId(this.endTimezoneId),o=ae.Z4.fromJSDate(this.endDate,!0).getInTimezone(i);this.isAllDay&&(a.isDate=!0,o.isDate=!0);const r=(0,ae.lh)(a,o),s=r.getFirstComponent("VEVENT");s.addProperty(new ae.ri("SUMMARY",this.eventTitle)),this.description&&s.addProperty(new ae.ri("DESCRIPTION",this.description));for(const t of r.getVObjectIterator())t.undirtify();_.A.debug("calendar object created",{calendar:r,event:s}),await ke(this.selectedCalendar.url,r.toICS()),(0,R.Te)(t("mail","Event created")),this.onClose()}catch(e){(0,R.Qg)(t("mail","Could not create event")),_.A.error("Creating event from message failed",{error:e})}finally{this.saving=!1}}}};var ze=a(5197),Pe={};Pe.styleTagTransform=v(),Pe.setAttributes=m(),Pe.insert=A().bind(null,"head"),Pe.domAPI=c(),Pe.insertStyleElement=h(),s()(ze.A,Pe),ze.A&&ze.A.locals&&ze.A.locals;const Ne=(0,S.A)(Fe,(function(){var t=this,e=t._self._c;return e("Modal",{on:{close:t.onClose}},[e("div",{staticClass:"modal-content"},[e("h2",[t._v(t._s(t.t("mail","Create event")))]),t._v(" "),e("div",{staticClass:"eventTitle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.eventTitle,expression:"eventTitle"}],attrs:{disabled:t.generatingData,type:"text"},domProps:{value:t.eventTitle},on:{input:function(e){e.target.composing||(t.eventTitle=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"dateTimePicker"},[e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.startTimezoneId},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.endTimezoneId},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),e("div",{staticClass:"all-day"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isAllDay,expression:"isAllDay"}],staticClass:"checkbox",attrs:{id:"allDay",type:"checkbox"},domProps:{checked:Array.isArray(t.isAllDay)?t._i(t.isAllDay,null)>-1:t.isAllDay},on:{change:function(e){var n=t.isAllDay,a=e.target,i=!!a.checked;if(Array.isArray(n)){var o=t._i(n,null);a.checked?o<0&&(t.isAllDay=n.concat([null])):o>-1&&(t.isAllDay=n.slice(0,o).concat(n.slice(o+1)))}else t.isAllDay=i}}}),t._v(" "),e("label",{attrs:{for:"allDay"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","All day"))+"\n\t\t\t")])]),t._v(" "),e("NcSelect",{staticClass:"modal-content__calendar-picker",attrs:{label:"displayname","aria-label-combobox":t.t("mail","Select calendar"),options:t.calendars},scopedSlots:t._u([{key:"option",fn:function(n){return[e("CalendarPickerOption",t._b({},"CalendarPickerOption",n,!1))]}},{key:"singleLabel",fn:function(n){return[e("CalendarPickerOption",t._b({attrs:{"display-icon":!0}},"CalendarPickerOption",n,!1))]}}]),model:{value:t.selectedCalendar,callback:function(e){t.selectedCalendar=e},expression:"selectedCalendar"}}),t._v(" "),e("label",{attrs:{for:"description"}},[t._v(t._s(t.t("mail","Description")))]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"modal-content__description-input",attrs:{id:"description",disabled:t.generatingData,rows:"7"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),e("br"),t._v(" "),e("button",{staticClass:"primary",on:{click:t.onSave}},[t._v("\n\t\t\t"+t._s(t.t("mail","Create"))+"\n\t\t")])],1)])}),[],!1,null,"6ce7251a",null).exports;var Le=a(25279);class Oe{constructor(t,e){if("string"!=typeof t||0===t.length)throw new Error("Invalid vCalendar");const n=se.A.parse(t);if("vcalendar"!==n[0])throw new Error("Only one task is allowed in the vCalendar data");this.jCal=n,this.calendar=e,this.vCalendar=new se.A.Component(this.jCal),this.subTasks={},this.conflict=!1,this.initTodo(),this.syncStatus=null,this.deleteCountdown=null}initTodo(){this.vtodo=this.vCalendar.getFirstSubcomponent("vtodo"),this.vtodo||(this.vtodo=new se.A.Component("vtodo"),this.vCalendar.addSubcomponent(this.vtodo)),this.vtodo.hasProperty("uid")||(console.debug("This task did not have a proper uid. Setting a new one for ",this),this.vtodo.addPropertyWithValue("uid",(0,Le.A)())),this._uid=this.vtodo.getFirstPropertyValue("uid")||"",this._summary=this.vtodo.getFirstPropertyValue("summary")||"",this._priority=this.vtodo.getFirstPropertyValue("priority")||0,this._complete=this.vtodo.getFirstPropertyValue("percent-complete")||0;const t=this.vtodo.getFirstPropertyValue("completed");this._completed=!!t,this._completedDate=t?t.toJSDate():null,this._completedDateMoment=(0,vt.A)(this._completedDate,"YYYYMMDDTHHmmss"),this._status=this.vtodo.getFirstPropertyValue("status"),this._note=this.vtodo.getFirstPropertyValue("description")||"",this._related=this.getParent()?.getFirstValue()||null,this._hideSubtaks=+this.vtodo.getFirstPropertyValue("x-oc-hidesubtasks")||0,this._hideCompletedSubtaks=+this.vtodo.getFirstPropertyValue("x-oc-hidecompletedsubtasks")||0,this._start=this.vtodo.getFirstPropertyValue("dtstart"),this._startMoment=(0,vt.A)(this._start,"YYYYMMDDTHHmmss"),this._due=this.vtodo.getFirstPropertyValue("due"),this._dueMoment=(0,vt.A)(this._due,"YYYYMMDDTHHmmss");const e=this.vtodo.getFirstPropertyValue("dtstart"),n=this.vtodo.getFirstPropertyValue("due")||e;this._allDay=null!==n&&n.isDate,this._loaded=!1,this._tags=this.getTags(),this._modified=this.vtodo.getFirstPropertyValue("last-modified"),this._modifiedMoment=(0,vt.A)(this._modified,"YYYYMMDDTHHmmss"),this._created=this.vtodo.getFirstPropertyValue("created"),this._createdMoment=(0,vt.A)(this._created,"YYYYMMDDTHHmmss"),this._class=this.vtodo.getFirstPropertyValue("class")||"PUBLIC",this._pinned="true"===this.vtodo.getFirstPropertyValue("x-pinned");let a=this.vtodo.getFirstPropertyValue("x-apple-sort-order");null===a&&(a=this.getSortOrder()),this._sortOrder=+a,this._searchQuery="",this._matchesSearchQuery=!0}updateTask(t){this.jCal=t,this.vCalendar=new se.A.Component(this.jCal),this.initTodo()}updateCalendar(t){this.calendar=t}firstIfArray(t){return Array.isArray(t)?t[0]:t}get key(){return this.uid+"~"+this.calendar.id}get url(){return this.dav?this.dav.url:""}get uri(){return this.dav?this.dav.url.slice(this.dav.url.lastIndexOf("/")+1):""}get uid(){return this._uid}set uid(t){this.vtodo.updatePropertyWithValue("uid",t),this._uid=this.vtodo.getFirstPropertyValue("uid")||""}get summary(){return this._summary}set summary(t){this.vtodo.updatePropertyWithValue("summary",t),this.updateLastModified(),this._summary=this.vtodo.getFirstPropertyValue("summary")||""}get priority(){return Number(this._priority)}set priority(t){null===t||0===t?this.vtodo.removeProperty("priority"):this.vtodo.updatePropertyWithValue("priority",t),this.updateLastModified(),this._priority=this.vtodo.getFirstPropertyValue("priority")||0}get closed(){return this._completed||"CANCELLED"===this._status}get complete(){return Number(this._complete)}set complete(t){this.setComplete(t),(t=+t)<100?(this.setCompleted(!1),0===t?this.setStatus("NEEDS-ACTION"):this.setStatus("IN-PROCESS")):(this.setCompleted(!0),this.setStatus("COMPLETED"))}setComplete(t){null===t||0===t?this.vtodo.removeProperty("percent-complete"):this.vtodo.updatePropertyWithValue("percent-complete",t),this.updateLastModified(),this._complete=this.vtodo.getFirstPropertyValue("percent-complete")||0}get completed(){return this._completed}set completed(t){this.setCompleted(t),t?(this.setComplete(100),this.setStatus("COMPLETED")):100===this.complete&&(this.setComplete(99),this.setStatus("IN-PROCESS"))}setCompleted(t){t?this.vtodo.updatePropertyWithValue("completed",se.A.Time.now()):this.vtodo.removeProperty("completed"),this.updateLastModified();const e=this.vtodo.getFirstPropertyValue("completed");this._completed=!!e,this._completedDate=e?e.toJSDate():null,this._completedDateMoment=(0,vt.A)(this._completedDate,"YYYYMMDDTHHmmss")}get completedDate(){return this._completedDate}get completedDateMoment(){return this._completedDateMoment.clone()}get status(){return this._status}set status(t){this.setStatus(t),"COMPLETED"===t?(this.setComplete(100),this.setCompleted(!0)):"IN-PROCESS"===t?(this.setCompleted(!1),100===this.complete?this.setComplete(99):0===this.complete&&this.setComplete(1)):"NEEDS-ACTION"!==t&&null!==t||(this.setComplete(0),this.setCompleted(!1))}setStatus(t){null===t?this.vtodo.removeProperty("status"):this.vtodo.updatePropertyWithValue("status",t),this.updateLastModified(),this._status=this.vtodo.getFirstPropertyValue("status")}get note(){return this._note}set note(t){this.vtodo.removeProperty("x-alt-desc"),this.vtodo.removeProperty("description"),this.vtodo.addPropertyWithValue("description",t),this.updateLastModified(),this._note=this.vtodo.getFirstPropertyValue("description")||""}get related(){return this._related}set related(t){const e=this.getParent();e?t?e.setValue(t):this.vtodo.removeProperty(e):t&&this.vtodo.addPropertyWithValue("related-to",t),this.updateLastModified(),this._related=this.getParent()?.getFirstValue()||null}getParent(){return this.vtodo.getAllProperties("related-to").find((t=>"PARENT"===t.getFirstParameter("reltype")||void 0===t.getFirstParameter("reltype")))}get pinned(){return this._pinned}set pinned(t){!0===t?this.vtodo.updatePropertyWithValue("x-pinned","true"):this.vtodo.removeProperty("x-pinned"),this.updateLastModified(),this._pinned="true"===this.vtodo.getFirstPropertyValue("x-pinned")}get hideSubtasks(){return this._hideSubtaks}set hideSubtasks(t){this.vtodo.updatePropertyWithValue("x-oc-hidesubtasks",+t),this.updateLastModified(),this._hideSubtaks=+this.vtodo.getFirstPropertyValue("x-oc-hidesubtasks")||0}get hideCompletedSubtasks(){return this._hideCompletedSubtaks}set hideCompletedSubtasks(t){this.vtodo.updatePropertyWithValue("x-oc-hidecompletedsubtasks",+t),this.updateLastModified(),this._hideCompletedSubtaks=+this.vtodo.getFirstPropertyValue("x-oc-hidecompletedsubtasks")||0}get start(){return this._start}set start(t){t?this.vtodo.updatePropertyWithValue("dtstart",t):this.vtodo.removeProperty("dtstart"),this.updateLastModified(),this._start=this.vtodo.getFirstPropertyValue("dtstart"),this._startMoment=(0,vt.A)(this._start,"YYYYMMDDTHHmmss");const e=this._due||this._start;this._allDay=null!==e&&e.isDate}get startMoment(){return this._startMoment.clone()}get due(){return this._due}set due(t){t?this.vtodo.updatePropertyWithValue("due",t):this.vtodo.removeProperty("due"),this.updateLastModified(),this._due=this.vtodo.getFirstPropertyValue("due"),this._dueMoment=(0,vt.A)(this._due,"YYYYMMDDTHHmmss");const e=this._due||this._start;this._allDay=null!==e&&e.isDate}get dueMoment(){return this._dueMoment.clone()}get allDay(){return this._allDay}set allDay(t){let e=this.vtodo.getFirstPropertyValue("dtstart");e&&(e.isDate=t,this.vtodo.updatePropertyWithValue("dtstart",e));let n=this.vtodo.getFirstPropertyValue("due");n&&(n.isDate=t,this.vtodo.updatePropertyWithValue("due",n)),this.updateLastModified(),e=this.vtodo.getFirstPropertyValue("dtstart"),n=this.vtodo.getFirstPropertyValue("due");const a=n||e;this._allDay=null!==a&&a.isDate}get comments(){return null}get loadedCompleted(){return this._loaded}set loadedCompleted(t){this._loaded=t}get reminder(){return null}get tags(){return this._tags}getTags(){let t=[];for(const e of this.vtodo.getAllProperties("categories"))e&&(t=t.concat(e.getValues()));return t}set tags(t){if(t.length>0){let e=this.vtodo.getAllProperties("categories");if(e.length<1){const n=new se.A.Property("categories");n.setValues(t),e=this.vtodo.addProperty(n)}else if(e.length<2)e[0].setValues(t);else{const n=this._tags.filter((e=>!t.includes(e))),a=t.filter((t=>!this._tags.includes(t)));for(const t of e){const e=t.getValues().filter((t=>!n.includes(t)));e.length?t.setValues(e):this.vtodo.removeProperty(t)}e[0].setValues(e[0].getValues().concat(a))}}else this.vtodo.removeAllProperties("categories");this.updateLastModified(),this._tags=this.getTags()}updateLastModified(){const t=se.A.Time.now();this.vtodo.updatePropertyWithValue("last-modified",t),this.vtodo.updatePropertyWithValue("dtstamp",t),this._modified=t,this._modifiedMoment=(0,vt.A)(this._modified,"YYYYMMDDTHHmmss")}get modified(){return this._modified}get modifiedMoment(){return this._modifiedMoment.clone()}get created(){return this._created}get createdMoment(){return this._createdMoment.clone()}set created(t){this.vtodo.updatePropertyWithValue("created",t),this.updateLastModified(),this._created=this.vtodo.getFirstPropertyValue("created"),this._createdMoment=(0,vt.A)(this._created,"YYYYMMDDTHHmmss"),null===this.vtodo.getFirstPropertyValue("x-apple-sort-order")&&(this._sortOrder=this.getSortOrder())}get class(){return this._class}set class(t){t?this.vtodo.updatePropertyWithValue("class",t):this.vtodo.removeProperty("class"),this.updateLastModified(),this._class=this.vtodo.getFirstPropertyValue("class")||"PUBLIC"}get sortOrder(){return this._sortOrder}set sortOrder(t){t=parseInt(t),isNaN(t)?(this.vtodo.removeProperty("x-apple-sort-order"),t=this.getSortOrder()):this.vtodo.updatePropertyWithValue("x-apple-sort-order",t),this.updateLastModified(),this._sortOrder=t}getSortOrder(){return null===this._created?0:this._created.subtractDate(new se.A.Time({year:2001,month:1,day:1,hour:0,minute:0,second:0,isDate:!1})).toSeconds()}matches(t){if(this._searchQuery===t)return this._matchesSearchQuery;if(this._searchQuery=t,!t)return this._matchesSearchQuery=!0,this._matchesSearchQuery;const e=["summary","note","tags"];t=t.toLowerCase();for(const n of e)if("tags"===n){for(const e of this[n])if(e.toLowerCase().indexOf(t)>-1)return this._matchesSearchQuery=!0,this._matchesSearchQuery}else if(this[n].toLowerCase().indexOf(t)>-1)return this._matchesSearchQuery=!0,this._matchesSearchQuery;return this._matchesSearchQuery=!1,this._matchesSearchQuery}}const qe={name:"TaskModal",components:{CalendarPickerOption:De,DatetimePicker:i.t4,Modal:i.FH,NcSelect:i.EQ},props:{envelope:{type:Object,required:!0}},data(){const t=re().determine(),e=t?t.name():"UTC";return{taskTitle:this.envelope.subject,startDate:null,endDate:null,isAllDay:!0,startTimezoneId:e,endTimezoneId:e,saving:!1,selectedCalendarChoice:void 0,note:this.envelope.previewText}},computed:{...(0,_t.n2)(xt.A),disabled(){return this.saving||0===this.calendars.length},dateFormat(){return this.isAllDay?"YYYY-MM-DD":"YYYY-MM-DD HH:mm"},datePickerType(){return this.isAllDay?"date":"datetime"},tags(){return this.mainStore.getAllTags},calendars(){return this.mainStore.getTaskCalendarsForCurrentUser},calendarChoices(){return this.calendars.map((t=>({id:t.id,color:t.color,displayname:t.displayname})))},selectedCalendar(){if(this.selectedCalendarChoice)return this.calendars.find((t=>t.id===this.selectedCalendarChoice.id))}},created(){_.A.debug("creating task from envelope",{envelope:this.envelope})},async mounted(){this.calendars.length&&(this.selectedCalendarChoice=this.calendarChoices[0])},methods:{getCalendarById(t){return this.calendars.find((e=>e.id===t))},onClose(){this.$emit("close")},async createTask(t){const e=new Oe("BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Nextcloud Mail v"+this.mainStore.getAppVersion+"\nEND:VCALENDAR",t.calendar);e.created=se.A.Time.now(),e.summary=t.summary,e.hidesubtasks=0,t.priority&&(e.priority=t.priority),t.complete&&(e.complete=t.complete),t.note&&(e.note=t.note),t.due&&(e.due=t.due),t.start&&(e.start=t.start),t.allDay&&(e.allDay=t.allDay);const n=se.A.stringify(e.jCal);return await e.calendar.dav.createVObject(n),e},async onSave(){this.saving=!0;const e={summary:this.taskTitle,calendar:this.selectedCalendar,start:this.startDate?(0,vt.A)(this.startDate).format().toString():null,due:this.endDate?(0,vt.A)(this.endDate).set().format().toString():null,allDay:this.isAllDay,note:this.note};try{_.A.debug("create task",e),await this.createTask(e),(0,R.Te)(t("mail","Task created")),this.onClose()}catch(e){(0,R.Qg)(t("mail","Could not create task")),_.A.error("Creating event from message failed",{error:e})}finally{this.saving=!1}}}};var $e=a(34148),Ge={};Ge.styleTagTransform=v(),Ge.setAttributes=m(),Ge.insert=A().bind(null,"head"),Ge.domAPI=c(),Ge.insertStyleElement=h(),s()($e.A,Ge),$e.A&&$e.A.locals&&$e.A.locals;const je=(0,S.A)(qe,(function(){var t=this,e=t._self._c;return e("Modal",{on:{close:t.onClose}},[e("div",{staticClass:"modal-content"},[e("h2",[t._v(t._s(t.t("mail","Create task")))]),t._v(" "),e("div",{staticClass:"taskTitle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.taskTitle,expression:"taskTitle"}],attrs:{type:"text"},domProps:{value:t.taskTitle},on:{input:function(e){e.target.composing||(t.taskTitle=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"all-day"},[e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.startTimezoneId},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.endTimezoneId},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),e("label",{attrs:{for:"note"}},[t._v(t._s(t.t("mail","Description")))]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],attrs:{id:"note",rows:"7"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}}),t._v(" "),e("div",{staticClass:"all-day"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isAllDay,expression:"isAllDay"}],staticClass:"checkbox",attrs:{id:"allDay",type:"checkbox"},domProps:{checked:Array.isArray(t.isAllDay)?t._i(t.isAllDay,null)>-1:t.isAllDay},on:{change:function(e){var n=t.isAllDay,a=e.target,i=!!a.checked;if(Array.isArray(n)){var o=t._i(n,null);a.checked?o<0&&(t.isAllDay=n.concat([null])):o>-1&&(t.isAllDay=n.slice(0,o).concat(n.slice(o+1)))}else t.isAllDay=i}}}),t._v(" "),e("label",{attrs:{for:"allDay"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","All day"))+"\n\t\t\t")])]),t._v(" "),e("NcSelect",{attrs:{label:"displayname","input-id":"url",placeholder:t.t("mail","Select calendar"),"aria-label-combobox":t.t("mail","Select calendar"),"allow-empty":!1,options:t.calendarChoices},scopedSlots:t._u([{key:"option",fn:function(n){let{id:a}=n;return[e("CalendarPickerOption",{attrs:{color:t.getCalendarById(a).color,displayname:t.getCalendarById(a).displayname}})]}},{key:"selected-option",fn:function(n){let{id:a}=n;return[e("CalendarPickerOption",{attrs:{color:t.getCalendarById(a).color,displayname:t.getCalendarById(a).displayname,"display-icon":t.getCalendarById(a).displayIcon}})]}},{key:"no-options",fn:function(){return[e("span",[t._v(t._s(t.t("mail","No calendars with task list support")))])]},proxy:!0}]),model:{value:t.selectedCalendarChoice,callback:function(e){t.selectedCalendarChoice=e},expression:"selectedCalendarChoice"}}),t._v(" "),e("br"),t._v(" "),e("button",{staticClass:"primary",attrs:{disabled:t.disabled},on:{click:t.onSave}},[t._v("\n\t\t\t"+t._s(t.t("mail","Create"))+"\n\t\t")])],1)])}),[],!1,null,"444bd1f3",null).exports;var Ue=a(24660),Re={};Re.styleTagTransform=v(),Re.setAttributes=m(),Re.insert=A().bind(null,"head"),Re.domAPI=c(),Re.insertStyleElement=h(),s()(Ue.A,Re),Ue.A&&Ue.A.locals&&Ue.A.locals;const We=(0,S.A)({name:"EnvelopePrimaryActions"},(function(){return(0,this._self._c)("ul",{staticClass:"list-item-content__actions--primary"},[this._t("default")],2)}),[],!1,null,null,null).exports;var Ve=a(70580),Ye=a.n(Ve),He=a(84316),Qe=a(28290),Ke=a(23966),Je=a(13606),Xe=a(63508);const Ze={name:"Envelope",components:{AlertOctagonIcon:Q.A,Avatar:K.A,IconCreateEvent:J.A,CheckIcon:tt.A,ChevronLeft:et.A,DeleteIcon:nt.A,ArchiveIcon:at.A,TaskIcon:it.A,DotsHorizontalIcon:ot.A,EnvelopePrimaryActions:We,EventModal:Ne,ImportantIcon:rt.A,ImportantOutlineIcon:st.A,TaskModal:je,EnvelopeSkeleton:H,JunkIcon:zt,ActionButton:i.Ko,MoveModal:kt,OpenInNewIcon:It.A,PlusIcon:Pt.A,TagIcon:Nt.A,TagModal:ne,SparkleIcon:X.A,Star:Tt.A,StarOutline:St.A,EmailRead:Bt.A,EmailUnread:$.A,IconAttachment:Mt.A,IconBullet:Et.A,Reply:Dt.A,ActionLink:i.Ki,ActionText:i.HO,DownloadIcon:Ke.A,ClockOutlineIcon:Z.A,NcActionSeparator:i.z,NcActionInput:i.Az,CalendarClock:Je.A,AlarmIcon:Xe.A},directives:{draggableEnvelope:mt},props:{withReply:{type:Boolean,default:!0},data:{type:Object,required:!0},mailbox:{type:Object,required:!0},selectMode:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},selectedEnvelopes:{type:Array,required:!1,default:()=>[]},hasMultipleAccounts:{type:Boolean,default:!1}},data:()=>({showMoveModal:!1,showEventModal:!1,showTaskModal:!1,showTagModal:!1,moreActionsOpen:!1,snoozeOptions:!1,customSnoozeDateTime:new Date((0,vt.A)().add(2,"hours").minute(0).second(0).valueOf()),overwriteOneLineMobile:!1,hoveringAvatar:!1}),mounted(){this.onWindowResize(),window.addEventListener("resize",this.onWindowResize)},computed:{...(0,_t.n2)(xt.A),...(0,_t.aH)(xt.A,["isSnoozeDisabled"]),messageLongDate(){return t=new Date(this.data.dateInt),(0,vt.A)(1e3*t).format("lll");var t},oneLineLayout(){return!this.overwriteOneLineMobile&&"no-split"===this.mainStore.getPreference("layout-mode","vertical-split")},layoutMessageViewThreaded(){return"threaded"===this.mainStore.getPreference("layout-message-view","threaded")},hasMultipleRecipients(){this.account||console.error("account is undefined",{accountId:this.data.accountId});const t=(0,ut.pz)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},draft(){return this.data.flags.draft},account(){const t=this.data.accountId;return this.mainStore.getAccount(t)},link(){return this.draft?void 0:{name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:this.data.databaseId}}},addresses(){if("sent"===this.mailbox.specialRole||this.account.sentMailboxId===this.mailbox.databaseId){const e=[this.data.to,this.data.cc].flat().map((function(t){return t.label?t.label:t.email}));return e.length>0?e.join(", "):t("mail","Blind copy recipients only")}return this.data.from[0]?.label??this.data.from[0]?.email??"?"},avatarEmail(){if("sent"===this.mailbox.specialRole){const t=[this.data.to,this.data.cc].flat().map((function(t){return t.email}));return t.length>0?t[0]:""}return this.data.from.length>0?this.data.from[0].email:""},showArchiveButton(){return null!==this.account.archiveMailboxId},disableArchiveButton(){return null!==this.account.archiveMailboxId&&this.account.archiveMailboxId===this.mailbox.databaseId},showFavoriteIconVariant(){return!this.data.flags.flagged},showImportantIconVariant(){return this.data.flags.seen},isEncrypted(){return this.data.encrypted||this.data.previewText&&(0,He.Z)(this.data.previewText)},isImportant(){return this.mainStore.getEnvelopeTags(this.data.databaseId).some((t=>"$label1"===t.imapLabel))},tags(){let t=this.mainStore.getEnvelopeTags(this.data.databaseId).filter((t=>t.imapLabel&&"$label1"!==t.imapLabel&&!(t.displayName.toLowerCase()in Jt)));return this.mailbox.isUnified&&(t=t.filter((t=>t.imapLabel!==Wt.AA))),t},draggableLabel(){let t=this.data.subject;const e=this.data.from[0]?.label??this.data.from[0]?.email;return e&&(t+=` (${e})`),t},isDraggable(){return(0,Qe.w)(this.mailbox,"te")},subjectForSubtitle(){const t=this.data.subject||this.t("mail","No subject");return this.draft?this.t("mail","{markup-start}Draft:{markup-end} {subject}",{"markup-start":"<em>","markup-end":"</em>",subject:Ye()(t)},{escape:!1}):t},exportMessageLink(){return(0,de.Jv)("/apps/mail/api/messages/{id}/export",{id:this.data.databaseId})},hasSeenAcl(){return(0,Qe.w)(this.mailbox,"s")},hasArchiveAcl(){return(()=>(0,Qe.w)(this.mailbox,"te"))()&&(()=>(0,Qe.w)(this.archiveMailbox,"i"))()},hasDeleteAcl(){return(0,Qe.w)(this.mailbox,"te")},hasWriteAcl(){return(0,Qe.w)(this.mailbox,"w")},archiveMailbox(){return this.mainStore.getMailbox(this.account.archiveMailboxId)},isSnoozedMailbox(){return this.mailbox.databaseId===this.account.snoozeMailboxId},reminderOptions(){const e=(0,vt.A)(),n=e.hour()<17?(0,vt.A)().hour(18):null,a=(0,vt.A)().add(1,"days").hour(8),i=e.day()>0&&e.day()<5?(0,vt.A)().day(6).hour(8):null,o=0!==e.day()?(0,vt.A)().add(1,"weeks").day(1).hour(8):null;return[{key:"laterToday",timestamp:this.getTimestamp(n),label:t("spreed","Later today – {timeLocale}",{timeLocale:n?.format("LT")}),ariaLabel:t("spreed","Set reminder for later today")},{key:"tomorrow",timestamp:this.getTimestamp(a),label:t("spreed","Tomorrow – {timeLocale}",{timeLocale:a?.format("ddd LT")}),ariaLabel:t("spreed","Set reminder for tomorrow")},{key:"thisWeekend",timestamp:this.getTimestamp(i),label:t("spreed","This weekend – {timeLocale}",{timeLocale:i?.format("ddd LT")}),ariaLabel:t("spreed","Set reminder for this weekend")},{key:"nextWeek",timestamp:this.getTimestamp(o),label:t("spreed","Next week – {timeLocale}",{timeLocale:o?.format("ddd LT")}),ariaLabel:t("spreed","Set reminder for next week")}].filter((t=>null!==t.timestamp))}},methods:{translateTagDisplayName:Vt,setSelected(t){this.selected!==t&&this.$emit("update:selected",t)},formatted(){return Ct(new Date(1e3*this.data.dateInt))},unselect(){this.selected&&this.$emit("update:selected",!1)},toggleSelected(){this.$emit("update:selected",!this.selected)},async onClick(t){t.ctrlKey||!this.draft||t.defaultPrevented||await this.mainStore.startComposerSession({data:{...this.data,draftId:this.data.databaseId},templateMessageId:this.data.databaseId})},onSelectMultiple(){this.$emit("select-multiple")},onToggleImportant(){this.mainStore.toggleEnvelopeImportant(this.data)},onToggleFlagged(){this.mainStore.toggleEnvelopeFlagged(this.data)},onToggleSeen(){this.mainStore.toggleEnvelopeSeen({envelope:this.data})},async onToggleJunk(){const t=await this.mainStore.moveEnvelopeToJunk(this.data);this.isImportant&&await this.mainStore.toggleEnvelopeImportant(this.data),this.data.flags.seen||await this.mainStore.toggleEnvelopeSeen({envelope:this.data}),t&&await this.$emit("delete",this.data.databaseId),await this.mainStore.toggleEnvelopeJunk({envelope:this.data,removeEnvelope:t})},async onDelete(){this.setSelected(!1),this.$emit("delete",this.data.databaseId);try{this.layoutMessageViewThreaded?await this.mainStore.deleteThread({envelope:this.data}):await this.mainStore.deleteMessage({id:this.data.databaseId})}catch(e){(0,R.Qg)(await(0,bt.C)(e,{[ft.A.getName()]:()=>t("mail","No trash folder configured"),default:e=>(_.A.error("could not delete message",e),t("mail","Could not delete message"))}))}},showMoreActionOptions(){this.snoozeOptions=!1,this.moreActionsOpen=!0},showSnoozeOptions(){this.snoozeOptions=!0,this.moreActionsOpen=!1},closeMoreAndSnoozeOptions(){this.snoozeOptions=!1,this.moreActionsOpen=!1},async onArchive(){this.setSelected(!1),this.$emit("archive",this.data.databaseId);try{this.layoutMessageViewThreaded?await this.mainStore.moveThread({envelope:this.data,destMailboxId:this.account.archiveMailboxId}):await this.mainStore.moveMessage({id:this.data.databaseId,destMailboxId:this.account.archiveMailboxId})}catch(e){_.A.error("could not archive message",e),(0,R.Qg)(t("mail","Could not archive message"))}},async onSnooze(e){this.setSelected(!1),this.account.snoozeMailboxId||await this.mainStore.createAndSetSnoozeMailbox(this.account);try{this.layoutMessageViewThreaded?await this.mainStore.snoozeThread({envelope:this.data,unixTimestamp:e/1e3,destMailboxId:this.account.snoozeMailboxId}):await this.mainStore.snoozeMessage({id:this.data.databaseId,unixTimestamp:e/1e3,destMailboxId:this.account.snoozeMailboxId}),(0,R.Te)(t("mail","Thread was snoozed"))}catch(e){_.A.error("could not snooze thread",e),(0,R.Qg)(t("mail","Could not snooze thread"))}},async onUnSnooze(){this.setSelected(!1);try{this.layoutMessageViewThreaded?await this.mainStore.unSnoozeThread({envelope:this.data}):await this.mainStore.unSnoozeMessage({id:this.data.databaseId}),(0,R.Te)(t("mail","Thread was unsnoozed"))}catch(e){_.A.error("Could not unsnooze thread",e),(0,R.Qg)(t("mail","Could not unsnooze thread"))}},async onOpenEditAsNew(){await this.mainStore.startComposerSession({templateMessageId:this.data.databaseId,data:this.data})},onOpenMoveModal(){this.showMoveModal=!0},onOpenEventModal(){this.showEventModal=!0},onMove(){this.$emit("move")},onCloseMoveModal(){this.showMoveModal=!1},onOpenTagModal(){this.showTagModal=!0},onCloseTagModal(){this.showTagModal=!1},getTimestamp:t=>t?.minute(0).second(0).millisecond(0).valueOf()||null,setCustomSnoozeDateTime(t){this.customSnoozeDateTime=new Date(t.target.value)},setCustomSnooze(){this.onSnooze(this.customSnoozeDateTime.valueOf())},onWindowResize(){const t=window.innerWidth;this.overwriteOneLineMobile=t<=700}}};var tn=a(49518),en={};en.styleTagTransform=v(),en.setAttributes=m(),en.insert=A().bind(null,"head"),en.domAPI=c(),en.insertStyleElement=h(),s()(tn.A,en),tn.A&&tn.A.locals&&tn.A.locals;const nn=(0,S.A)(Ze,(function(){var t=this,e=t._self._c;return e("EnvelopeSkeleton",{directives:[{name:"draggable-envelope",rawName:"v-draggable-envelope",value:{accountId:t.data.accountId?t.data.accountId:t.mailbox.accountId,mailboxId:t.data.mailboxId,databaseId:t.data.databaseId,draggableLabel:t.draggableLabel,selectedEnvelopes:t.selectedEnvelopes,isDraggable:t.isDraggable},expression:"{\n\t\taccountId: data.accountId ? data.accountId : mailbox.accountId,\n\t\tmailboxId: data.mailboxId,\n\t\tdatabaseId: data.databaseId,\n\t\tdraggableLabel,\n\t\tselectedEnvelopes,\n\t\tisDraggable,\n\t}"}],staticClass:"list-item-style envelope",class:{seen:t.data.flags.seen,draft:t.draft,selected:t.selected},attrs:{to:t.link,exact:!0,"data-envelope-id":t.data.databaseId,name:t.addresses,details:t.formatted(),"one-line":t.oneLineLayout},on:{click:[function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.onClick.apply(null,arguments)},function(e){return e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.toggleSelected.apply(null,arguments)):null},function(e){return e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.onSelectMultiple.apply(null,arguments)):null}],"update:menuOpen":t.closeMoreAndSnoozeOptions},scopedSlots:t._u([{key:"icon",fn:function(){return[t.data.flags.flagged?e("Star",{staticClass:"app-content-list-item-star favorite-icon-style",class:{"one-line":t.oneLineLayout,"favorite-icon-style":!t.oneLineLayout},attrs:{"fill-color":"#f9cf3d",size:18,"data-starred":t.data.flags.flagged?"true":"false"},on:{click:function(e){e.preventDefault(),t.hasWriteAcl&&t.onToggleFlagged()}}}):t._e(),t._v(" "),t.isImportant?e("ImportantIcon",{staticClass:"app-content-list-item-star icon-important",class:{"important-one-line":t.oneLineLayout,"icon-important":!t.oneLineLayout},attrs:{size:18,"data-starred":"true"},on:{click:function(e){e.preventDefault(),t.hasWriteAcl&&t.onToggleImportant()}}}):t._e(),t._v(" "),t.data.flags.$junk?e("JunkIcon",{staticClass:"app-content-list-item-star junk-icon-style",class:{"one-line":t.oneLineLayout,"junk-icon-style":!t.oneLineLayout},attrs:{size:18,"data-starred":t.data.flags.$junk?"true":"false"},on:{click:function(e){e.preventDefault(),t.hasWriteAcl&&t.onToggleJunk()}}}):t._e(),t._v(" "),e("div",{staticClass:"hovering-status",class:{"hover-active":t.hoveringAvatar&&!t.selected},on:{mouseenter:function(e){t.hoveringAvatar=!0},mouseleave:function(e){t.hoveringAvatar=!1},click:[function(e){return e.stopPropagation(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.toggleSelected.apply(null,arguments))},function(e){return e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.onSelectMultiple.apply(null,arguments)):null}]}},[t.hoveringAvatar||t.selected?[e("CheckIcon",{staticClass:"check-icon",class:{"app-content-list-item-avatar-selected":t.selected},attrs:{size:28}})]:[e("Avatar",{attrs:{"display-name":t.addresses,email:t.avatarEmail,"fetch-avatar":t.data.fetchAvatarFromClient,avatar:t.data.avatar}})]],2)]},proxy:!0},{key:"subname",fn:function(){return[e("div",{staticClass:"line-two",class:{"one-line":t.oneLineLayout}},[e("div",{staticClass:"envelope__subtitle"},[t.data.flags.answered?e("Reply",{staticClass:"seen-icon-style",attrs:{size:18}}):t._e(),t._v(" "),!0===t.data.flags.hasAttachments?e("IconAttachment",{staticClass:"attachment-icon-style",attrs:{size:18}}):t._e(),t._v(" "),e("span",{staticClass:"envelope__subtitle__subject",class:{"one-line":t.oneLineLayout},attrs:{dir:"auto"}},[e("span",{staticClass:"envelope__subtitle__subject__text",class:{"one-line":t.oneLineLayout,draft:t.draft},domProps:{innerHTML:t._s(t.subjectForSubtitle)}})])],1),t._v(" "),t.data.encrypted||t.data.previewText?e("div",{staticClass:"envelope__preview-text",attrs:{title:t.data.summary?t.t("mail","This summary was AI generated"):null}},[t.data.summary?e("SparkleIcon",{attrs:{size:15}}):t._e(),t._v("\n\t\t\t\t"+t._s(t.isEncrypted?t.t("mail","Encrypted message"):t.data.summary?t.data.summary.trim():t.data.previewText.trim())+"\n\t\t\t")],1):t._e()])]},proxy:!0},{key:"indicator",fn:function(){return[t.data.flags.seen?t._e():e("IconBullet",{attrs:{size:20,"aria-hidden":!1,"aria-label":t.t("mail","This message is unread"),"fill-color":"var(--color-primary-element)"}})]},proxy:!0},{key:"actions",fn:function(){return[t.moreActionsOpen||t.snoozeOptions?t._e():e("EnvelopePrimaryActions",[t.hasWriteAcl?e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleFlagged.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showFavoriteIconVariant?e("StarOutline",{attrs:{size:24}}):e("Star",{attrs:{size:24}})]},proxy:!0}],null,!1,2798023345)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.flagged?t.t("mail","Unfavorite"):t.t("mail","Favorite"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasSeenAcl?e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleSeen.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showImportantIconVariant?e("EmailUnread",{attrs:{size:24}}):e("EmailRead",{attrs:{size:24}})]},proxy:!0}],null,!1,3941285336)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.seen?t.t("mail","Unread"):t.t("mail","Read"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasWriteAcl?e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleImportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.isImportant?e("ImportantIcon",{attrs:{size:24}}):e("ImportantOutlineIcon",{attrs:{size:24}})]},proxy:!0}],null,!1,18687750)},[t._v("\n\t\t\t\t"+t._s(t.isImportant?t.t("mail","Unimportant"):t.t("mail","Important"))+"\n\t\t\t")]):t._e()],1),t._v(" "),t.moreActionsOpen||t.snoozeOptions?t._e():[e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("ClockOutlineIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3746947659)},[t._v("\n\t\t\t\t"+t._s(t.messageLongDate)+"\n\t\t\t")]),t._v(" "),e("NcActionSeparator"),t._v(" "),t.hasWriteAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4042396370)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasWriteAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenTagModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TagIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3295128625)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit tags"))+"\n\t\t\t")]):t._e(),t._v(" "),t.isSnoozeDisabled||t.isSnoozedMailbox?t._e():e("ActionButton",{attrs:{"close-after-click":!1},on:{click:t.showSnoozeOptions},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlarmIcon",{attrs:{title:t.t("mail","Snooze"),size:20}})]},proxy:!0}],null,!1,42024148)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Snooze"))+"\n\t\t\t")]),t._v(" "),!t.isSnoozeDisabled&&t.isSnoozedMailbox?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onUnSnooze},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlarmIcon",{attrs:{title:t.t("mail","Unsnooze"),size:20}})]},proxy:!0}],null,!1,2733502479)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Unsnooze"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasDeleteAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1266168172)},[t._v(" "),t.layoutMessageViewThreaded?[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Move thread"))+"\n\t\t\t\t")]:[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Move Message"))+"\n\t\t\t\t")]],2):t._e(),t._v(" "),t.showArchiveButton&&t.hasArchiveAcl?e("ActionButton",{attrs:{"close-after-click":!0,disabled:t.disableArchiveButton},on:{click:function(e){return e.preventDefault(),t.onArchive.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2152228161)},[t._v(" "),t.layoutMessageViewThreaded?[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Archive thread"))+"\n\t\t\t\t")]:[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Archive message"))+"\n\t\t\t\t")]],2):t._e(),t._v(" "),t.hasDeleteAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onDelete.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1311746650)},[t._v(" "),t.layoutMessageViewThreaded?[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Delete thread"))+"\n\t\t\t\t")]:[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Delete message"))+"\n\t\t\t\t")]],2):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!1},on:{click:t.showMoreActionOptions},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1700783217)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")])],t._v(" "),t.snoozeOptions?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.snoozeOptions=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{size:20}})]},proxy:!0}],null,!1,3117353720)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Back"))+"\n\t\t\t")]),t._v(" "),e("NcActionSeparator"),t._v(" "),t._l(t.reminderOptions,(function(n){return e("ActionButton",{key:n.key,attrs:{"aria-label":n.ariaLabel,"close-after-click":""},on:{click:function(e){return e.stopPropagation(),t.onSnooze(n.timestamp)}}},[t._v("\n\t\t\t\t"+t._s(n.label)+"\n\t\t\t")])})),t._v(" "),e("NcActionSeparator"),t._v(" "),e("NcActionInput",{attrs:{type:"datetime-local","is-native-picker":"",value:t.customSnoozeDateTime,min:new Date},on:{change:t.setCustomSnoozeDateTime},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarClock",{attrs:{size:20}})]},proxy:!0}],null,!1,1325980530)}),t._v(" "),e("ActionButton",{attrs:{"aria-label":t.t("mail","Set custom snooze"),"close-after-click":""},on:{click:function(e){return e.stopPropagation(),t.setCustomSnooze(t.customSnoozeDateTime)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2630571749)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Set custom snooze"))+"\n\t\t\t")])]:t._e(),t._v(" "),t.moreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.moreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{size:20}})]},proxy:!0}],null,!1,3117353720)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenEditAsNew.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2953566425)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit as new message"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){e.preventDefault(),t.showEventModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconCreateEvent",{attrs:{size:20}})]},proxy:!0}],null,!1,1015012555)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Create event"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){e.preventDefault(),t.showTaskModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TaskIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1424835118)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Create task"))+"\n\t\t\t")]),t._v(" "),e("ActionLink",{attrs:{"close-after-click":!0,href:t.exportMessageLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DownloadIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2598526839)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Download message"))+"\n\t\t\t")])]:t._e()]},proxy:!0},{key:"tags",fn:function(){return[t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("div",{staticClass:"tag-group__bg",style:{"background-color":n.color}}),t._v(" "),e("span",{staticClass:"tag-group__label",style:{color:n.color}},[t._v("\n\t\t\t\t"+t._s(t.translateTagDisplayName(n))+"\n\t\t\t")])])})),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:[t.data],"move-thread":t.listViewThreaded},on:{move:t.onMove,close:t.onCloseMoveModal}}):t._e(),t._v(" "),t.showEventModal?e("EventModal",{attrs:{envelope:t.data},on:{close:function(e){t.showEventModal=!1}}}):t._e(),t._v(" "),t.showTaskModal?e("TaskModal",{attrs:{envelope:t.data},on:{close:function(e){t.showTaskModal=!1}}}):t._e(),t._v(" "),t.showTagModal?e("TagModal",{attrs:{account:t.account,envelopes:[t.data]},on:{close:t.onCloseTagModal}}):t._e()]},proxy:!0}])})}),[],!1,null,"5b0e59a1",null).exports;var an=a(18710),on=a(91189),rn=a(83298);const sn={name:"EnvelopeList",components:{IconUnFavorite:St.A,EmailUnread:$.A,EmailRead:Bt.A,Actions:i.B6,AddIcon:Pt.A,NcButton:i.x1,ActionButton:i.Ko,Envelope:nn,IconDelete:nt.A,ImportantOutlineIcon:st.A,IconFavorite:Tt.A,IconSelect:an.A,MoveModal:kt,OpenInNewIcon:It.A,ShareIcon:rn.A,AlertOctagonIcon:Q.A,TagIcon:Nt.A,TagModal:ne},props:{account:{type:Object,required:!0},loadMoreLabel:{type:String,default:t("mail","Load more")},mailbox:{type:Object,required:!0},envelopes:{type:Array,required:!0},searchQuery:{type:String,required:!1,default:void 0},loadingMore:{type:Boolean,required:!0},loadMoreButton:{type:Boolean,required:!1,default:!1},skipTransition:{type:Boolean,default:!1}},data:()=>({selection:[],showMoveModal:!1,showTagModal:!1,lastToggledIndex:void 0,defaultView:!1}),computed:{...(0,_t.n2)(xt.A),sortOrder(){return this.mainStore.getPreference("sort-order","newest")},sortedEnvelops(){return"oldest"===this.sortOrder?[...this.envelopes].sort(((t,e)=>t.dateInt<e.dateInt?-1:1)):[...this.envelopes]},selectMode(){return this.selection.length>0},isAtLeastOneSelectedRead(){return this.selectedEnvelopes.some((t=>!0===t.flags.seen))},isAtLeastOneSelectedUnread(){return this.selectedEnvelopes.some((t=>!1===t.flags.seen))},isAtLeastOneSelectedImportant(){return this.selectedEnvelopes.some((t=>this.mainStore.getEnvelopeTags(t.databaseId).some((t=>"$label1"===t.imapLabel))))},isAtLeastOneSelectedUnimportant(){return this.selectedEnvelopes.some((t=>!this.mainStore.getEnvelopeTags(t.databaseId).some((t=>"$label1"===t.imapLabel))))},isAtLeastOneSelectedJunk(){return this.selectedEnvelopes.some((t=>t.flags.$junk))},isAtLeastOneSelectedNotJunk(){return this.selectedEnvelopes.some((t=>!t.flags.$junk))},isAtLeastOneSelectedFavorite(){return this.selectedEnvelopes.some((t=>t.flags.flagged))},isAtLeastOneSelectedUnFavorite(){return this.selectedEnvelopes.some((t=>!t.flags.flagged))},selectedEnvelopes(){return this.sortedEnvelops.filter((t=>this.selection.includes(t.databaseId)))},hasMultipleAccounts(){const t=this.sortedEnvelops.map((t=>t.mailboxId));return Array.from(new Set(t)).length>1},listTransitionName(){return this.skipTransition?"disabled":"list"}},watch:{sortedEnvelops(t,e){const n=t.map((t=>t.databaseId));this.selection=this.selection.filter((t=>n.includes(t))),(0,on.A)(((t,e)=>t.databaseId===e.databaseId),e,t).forEach((t=>{t.flags.selected=!1}))}},mounted(){lt.A.on("envelopes-dropped",this.unselectAll)},beforeDestroy(){lt.A.off("envelopes-dropped",this.unselectAll)},methods:{isEnvelopeSelected(t){return 0!==this.selection.length&&this.selection.includes(t)},markSelectedRead(){this.selectedEnvelopes.forEach((t=>{this.mainStore.toggleEnvelopeSeen({envelope:t,seen:!0})})),this.unselectAll()},markSelectedUnread(){this.selectedEnvelopes.forEach((t=>{this.mainStore.toggleEnvelopeSeen({envelope:t,seen:!1})})),this.unselectAll()},markSelectionImportant(){this.selectedEnvelopes.forEach((t=>{this.mainStore.markEnvelopeImportantOrUnimportant({envelope:t,addTag:!0})})),this.unselectAll()},markSelectionUnimportant(){this.selectedEnvelopes.forEach((t=>{this.mainStore.markEnvelopeImportantOrUnimportant({envelope:t,addTag:!1})})),this.unselectAll()},async markSelectionJunk(){for(const t of this.selectedEnvelopes)t.flags.$junk||await this.mainStore.toggleEnvelopeJunk({envelope:t,removeEnvelope:await this.mainStore.moveEnvelopeToJunk(t)});this.unselectAll()},async markSelectionNotJunk(){for(const t of this.selectedEnvelopes)t.flags.$junk&&await this.mainStore.toggleEnvelopeJunk({envelope:t,removeEnvelope:await this.mainStore.moveEnvelopeToJunk(t)});this.unselectAll()},favoriteAll(){const t=!this.isAtLeastOneSelectedUnFavorite;this.selectedEnvelopes.forEach((e=>{this.mainStore.markEnvelopeFavoriteOrUnfavorite({envelope:e,favFlag:t})})),this.unselectAll()},unFavoriteAll(){const t=!this.isAtLeastOneSelectedFavorite;this.selectedEnvelopes.forEach((e=>{this.mainStore.markEnvelopeFavoriteOrUnfavorite({envelope:e,favFlag:t})})),this.unselectAll()},async deleteAllSelected(){let e,n;if(this.selectedEnvelopes.length===this.sortedEnvelops.length)n=!0;else if(-1!==this.selectedEnvelopes.findIndex((t=>t.databaseId===this.$route.params.threadId))){const t=this.selectedEnvelopes[this.selectedEnvelopes.length-1],n=this.sortedEnvelops.filter((e=>e===t||!this.selectedEnvelopes.includes(e))),a=n.indexOf(t);e=n[0===a?1:a-1]}await Promise.all(this.selectedEnvelopes.map((async t=>{_.A.info(`deleting thread ${t.threadRootId}`),await this.mainStore.deleteThread({envelope:t})}))).catch((async e=>{(0,R.Qg)(await(0,bt.C)(e,{[ft.A.getName()]:()=>t("mail","No trash folder configured"),default:e=>(_.A.error("could not delete message",e),t("mail","Could not delete message"))}))})),e?(await this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,threadId:e.databaseId}}),await this.mainStore.fetchNextEnvelopes({mailboxId:this.mailbox.databaseId,query:this.searchQuery,quantity:this.selectedEnvelopes.length})):n&&await this.$router.push({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId}}),this.unselectAll()},setEnvelopeSelected(t,e){const n=this.selection.includes(t.databaseId);e&&!n?(t.flags.selected=!0,this.selection.push(t.databaseId)):!e&&n&&(t.flags.selected=!1,this.selection.splice(this.selection.indexOf(t.databaseId),1))},onEnvelopeSelectToggle(t,e,n){this.lastToggledIndex=e,this.setEnvelopeSelected(t,n)},onEnvelopeSelectMultiple(t,e){const n=this.lastToggledIndex??this.findSelectionIndex(parseInt(this.$route.params.threadId))??void 0;if(void 0===n)return;const a=Math.min(n,e),i=Math.max(n,e),o=this.selection.includes(t.databaseId);for(let t=a;t<=i;t++)this.setEnvelopeSelected(this.sortedEnvelops[t],!o);this.lastToggledIndex=e},unselectAll(){this.sortedEnvelops.forEach((t=>{t.flags.selected=!1})),this.selection=[]},onOpenMoveModal(){this.showMoveModal=!0},onOpenTagModal(){this.showTagModal=!0},onCloseTagModal(){this.showTagModal=!1},async forwardSelectedAsAttachment(){await this.mainStore.startComposerSession({forwardedMessages:[...this.selection]}),this.unselectAll()},onCloseMoveModal(){this.showMoveModal=!1,this.unselectAll()},findSelectionIndex(t){for(const[e,n]of this.sortedEnvelops.entries())if(n.databaseId===t)return e}}};var ln=a(23612),cn={};cn.styleTagTransform=v(),cn.setAttributes=m(),cn.insert=A().bind(null,"head"),cn.domAPI=c(),cn.insertStyleElement=h(),s()(ln.A,cn),ln.A&&ln.A.locals&&ln.A.locals;const dn=(0,S.A)(sn,(function(){var t=this,e=t._self._c;return e("div",[e("transition",{attrs:{name:"multiselect-header"}},[t.selectMode?e("div",{key:"multiselect-header",staticClass:"multiselect-header"},[e("div",{staticClass:"action-buttons"},[t.isAtLeastOneSelectedUnread?e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Mark {number} read","Mark {number} read",t.selection.length,{number:t.selection.length})},on:{click:function(e){return e.preventDefault(),t.markSelectedRead.apply(null,arguments)}}},[e("EmailRead",{attrs:{size:20}})],1):t._e(),t._v(" "),t.isAtLeastOneSelectedRead?e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Mark {number} unread","Mark {number} unread",t.selection.length,{number:t.selection.length})},on:{click:function(e){return e.preventDefault(),t.markSelectedUnread.apply(null,arguments)}}},[e("EmailUnread",{attrs:{size:20}})],1):t._e(),t._v(" "),t.isAtLeastOneSelectedUnimportant?e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Mark {number} as important","Mark {number} as important",t.selection.length,{number:t.selection.length})},on:{click:function(e){return e.preventDefault(),t.markSelectionImportant.apply(null,arguments)}}},[e("ImportantIcon",{attrs:{size:20}})],1):t._e(),t._v(" "),t.isAtLeastOneSelectedImportant?e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Mark {number} as unimportant","Mark {number} as unimportant",t.selection.length,{number:t.selection.length})},on:{click:function(e){return e.preventDefault(),t.markSelectionUnimportant.apply(null,arguments)}}},[e("ImportantOutlineIcon",{attrs:{size:20}})],1):t._e(),t._v(" "),t.isAtLeastOneSelectedFavorite?e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Unfavorite {number}","Unfavorite {number}",t.selection.length,{number:t.selection.length})},on:{click:function(e){return e.preventDefault(),t.favoriteAll.apply(null,arguments)}}},[e("IconUnFavorite",{attrs:{size:20}})],1):t._e(),t._v(" "),t.isAtLeastOneSelectedUnFavorite?e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Favorite {number}","Favorite {number}",t.selection.length,{number:t.selection.length})},on:{click:function(e){return e.preventDefault(),t.unFavoriteAll.apply(null,arguments)}}},[e("IconFavorite",{attrs:{size:20}})],1):t._e(),t._v(" "),e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Unselect {number}","Unselect {number}",t.selection.length,{number:t.selection.length}),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.unselectAll.apply(null,arguments)}}},[e("IconSelect",{attrs:{size:20}})],1),t._v(" "),e("NcButton",{attrs:{type:"tertiary",title:t.n("mail","Delete {number} thread","Delete {number} threads",t.selection.length,{number:t.selection.length}),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.deleteAllSelected.apply(null,arguments)}}},[e("IconDelete",{attrs:{size:20}})],1)],1),t._v(" "),e("Actions",{staticClass:"app-content-list-item-menu",attrs:{"menu-align":"right"}},[t.isAtLeastOneSelectedNotJunk?e("ActionButton",{on:{click:function(e){return e.preventDefault(),t.markSelectionJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4042396370)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Mark {number} as spam","Mark {number} as spam",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.isAtLeastOneSelectedJunk?e("ActionButton",{on:{click:function(e){return e.preventDefault(),t.markSelectionNotJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4042396370)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Mark {number} as not spam","Mark {number} as not spam",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenTagModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TagIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3295128625)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Edit tags for {number}","Edit tags for {number}",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),t.account.isUnified?t._e():e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1266168172)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Move {number} thread","Move {number} threads",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.forwardSelectedAsAttachment.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1327515214)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Forward {number} as attachment","Forward {number} as attachment",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")])],1),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:t.selectedEnvelopes,"move-thread":!0},on:{close:t.onCloseMoveModal}}):t._e()],1):t._e()]),t._v(" "),e("transition-group",{attrs:{name:t.listTransitionName}},[t._l(t.sortedEnvelops,(function(n,a){return e("Envelope",{key:n.databaseId,attrs:{data:n,mailbox:t.mailbox,selected:t.selection.includes(n.databaseId),"select-mode":t.selectMode,"has-multiple-accounts":t.hasMultipleAccounts,"selected-envelopes":t.selectedEnvelopes},on:{delete:function(e){return t.$emit("delete",n.databaseId)},"update:selected":function(e){return t.onEnvelopeSelectToggle(n,a,e)},"select-multiple":function(e){return t.onEnvelopeSelectMultiple(n,a)}}})})),t._v(" "),t.loadMoreButton&&!t.loadingMore?e("div",{key:"list-collapse-"+t.searchQuery,staticClass:"load-more",on:{click:function(e){return t.$emit("load-more")}}},[e("AddIcon",{attrs:{size:16}}),t._v("\n\t\t\t"+t._s(t.loadMoreLabel)+"\n\t\t")],1):t._e(),t._v(" "),e("div",{key:"loadingMore",class:{"icon-loading-small":t.loadingMore},attrs:{id:"load-more-mail-messages"}})],2),t._v(" "),t.showTagModal?e("TagModal",{attrs:{account:t.account,envelopes:t.selectedEnvelopes},on:{close:t.onCloseTagModal}}):t._e()],1)}),[],!1,null,"3ffd1b9a",null).exports,An={name:"LoadingSkeleton",props:{numberOfLines:{type:Number,default:10},withAvatar:{type:Boolean,default:!0}}};var pn=a(29061),mn={};mn.styleTagTransform=v(),mn.setAttributes=m(),mn.insert=A().bind(null,"head"),mn.domAPI=c(),mn.insertStyleElement=h(),s()(pn.A,mn),pn.A&&pn.A.locals&&pn.A.locals;const un=(0,S.A)(An,(function(){var t=this,e=t._self._c;return e("div",t._l(t.numberOfLines,(function(n){return e("div",{key:n,staticClass:"item-list__entry"},[t.withAvatar?e("div",{staticClass:"item-avatar"}):t._e(),t._v(" "),t._m(0,!0)])})),0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item__details"},[e("h3",[t._v(" ")]),t._v(" "),e("p",{staticClass:"message"},[t._v("\n\t\t\t\t \n\t\t\t")]),t._v(" "),e("p",{staticClass:"message-preview"},[t._v("\n\t\t\t\t \n\t\t\t")])])}],!1,null,"42cebb20",null).exports;var hn=a(61252),gn=a.n(hn);var vn=a(97012),Cn=a(3910);const fn={name:"Error",components:{NcEmptyContent:G.A,NcButton:vn.A,AlertCircleIcon:Cn.A},props:{error:{type:String,required:!0},message:{type:String,required:!0},data:{type:Object,default:()=>{}},autoMargin:{type:Boolean,default:!1}},computed:{reportUrl(){return(t=>{console.error(t);let e=t.message||"An unkown error occurred.";e.endsWith(".")||(e+=".");const n=(new(gn())).addEmptyStepsToReproduce().addExpectedActualBehaviour().addLogs("Error",(t=>{let e="";return t.type&&(e+=t.type+": "),e+=t.message,e+="\n",t.trace&&(e+=t.trace.reduce((function(t,e){let n="";return e.class?n+="  at "+e.class+"::"+e.function:n+="  at "+e.function,e.file&&(n+="\n     "+e.file+", line "+e.line),t+n+"\n"}),"")),t.stack&&(e+=t.stack),e})(t)).render();return"https://github.com/nextcloud/mail/issues/new?title="+encodeURIComponent(e)+"&body="+encodeURIComponent(n)})(this.data)}}};var bn=a(59704),yn={};yn.styleTagTransform=v(),yn.setAttributes=m(),yn.insert=A().bind(null,"head"),yn.domAPI=c(),yn.insertStyleElement=h(),s()(bn.A,yn),bn.A&&bn.A.locals&&bn.A.locals;const xn=(0,S.A)(fn,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{staticClass:"mail-error",class:{"mail-error--auto-margin":t.autoMargin},attrs:{name:t.error,description:t.message},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertCircleIcon")]},proxy:!0},t.data&&t.data.debug?{key:"action",fn:function(){return[e("NcButton",{attrs:{"aria-label":t.t("mail","Report this bug"),href:t.reportUrl}},[t._v("\n\t\t\t"+t._s(t.t("mail","Report this bug"))+"\n\t\t")])]},proxy:!0}:null],null,!0)})}),[],!1,null,"3011b3b6",null).exports;var _n=a(93455),wn=a(95201);const kn={name:"Loading",components:{IconLoading:i.ne,EmptyContent:i.yI},props:{hint:{type:String,default:"",required:!1},slowHint:{type:String,default:"",required:!1}},data:()=>({slow:!1,slowTimer:void 0}),mounted(){clearTimeout(this.slowTimer),this.slowTimer=setTimeout((()=>{this.slow=!0}),3500)},beforeDestroy(){clearTimeout(this.slowTimer)}};var In=a(70670),Sn={};Sn.styleTagTransform=v(),Sn.setAttributes=m(),Sn.insert=A().bind(null,"head"),Sn.domAPI=c(),Sn.insertStyleElement=h(),s()(In.A,Sn),In.A&&In.A.locals&&In.A.locals;const Tn=(0,S.A)(kn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.hint?e("EmptyContent",{staticClass:"empty-content",attrs:{name:t.hint},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading")]},proxy:!0}],null,!1,3686341390)},[t._v(" "),e("transition",{attrs:{name:"fade"}},[t.slowHint&&t.slow?e("em",[t._v(t._s(t.slowHint))]):t._e()])],1):e("IconLoading",{staticClass:"container"})],1)}),[],!1,null,"25fa7340",null).exports;var Dn=a(15493),Bn=a(9546),Mn=a(9341);const En={name:"EmptyMailboxSection",components:{IconMail:$.A,NcEmptyContent:G.A}};var Fn=a(62117),zn={};zn.styleTagTransform=v(),zn.setAttributes=m(),zn.insert=A().bind(null,"head"),zn.domAPI=c(),zn.insertStyleElement=h(),s()(Fn.A,zn),Fn.A&&Fn.A.locals&&Fn.A.locals;const Pn={name:"Mailbox",components:{EmptyMailboxSection:(0,S.A)(En,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{staticClass:"empty-content",attrs:{name:t.t("mail","No messages")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail")]},proxy:!0}])})}),[],!1,null,"0d4d556e",null).exports,EmptyMailbox:U,EnvelopeList:dn,Error:xn,Loading:Tn,LoadingSkeleton:un,SectionTitle:T},mixins:[o.A],props:{groupEnvelopes:{type:Object,required:!1,default:null},loadMoreLabel:{type:String,default:void 0},account:{type:Object,required:!0},mailbox:{type:Object,required:!0},bus:{type:Object,required:!0},paginate:{type:String,default:"scroll"},initialPageSize:{type:Number,default:20},searchQuery:{type:String,required:!1,default:void 0},isPriorityInbox:{type:Boolean,required:!1,default:!1}},data:()=>({error:!1,refreshing:!1,loadingMore:!1,loadingEnvelopes:!1,loadingCacheInitialization:!1,loadMailboxInterval:void 0,expanded:!1,endReached:!1,syncedMailboxes:new Set,skipListTransition:!1}),computed:{...(0,_t.n2)(xt.A),sortOrder(){return this.mainStore.getPreference("sort-order","DESC")},envelopes(){return this.mainStore.getEnvelopes(this.mailbox.databaseId,this.searchQuery)},envelopesToShow(){return"manual"!==this.paginate||this.expanded?this.envelopes:this.envelopes.slice(0,this.initialPageSize)},hasGroupedEnvelopes(){return this.groupEnvelopes&&Object.keys(this.groupEnvelopes).length>0},hasMessages(){return this.hasGroupedEnvelopes?Object.values(this.groupEnvelopes).some((t=>t.length>0)):this.envelopesToShow?.length>0},showLoadMore(){return!this.endReached&&"manual"===this.paginate}},watch:{mailbox(){this.loadEnvelopes().then((()=>{_.A.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.query}) after folder change`),this.sync(!1)}))},searchQuery(){this.loadEnvelopes()},sortOrder(){this.loadEnvelopes()}},created(){this.bus.on("load-more",this.onScroll),this.bus.on("delete",this.onDelete),this.bus.on("archive",this.onArchive),this.bus.on("shortcut",this.handleShortcut),this.loadMailboxInterval=setInterval(this.loadMailbox,6e4)},async mounted(){this.mainStore.hasFetchedInitialEnvelopes||(await this.loadEnvelopes(),_.A.debug(`syncing folder ${this.mailbox.databaseId} (${this.searchQuery}) after mount`),await this.sync(!1),await this.prefetchOtherMailboxes(),this.mainStore.setHasFetchedInitialEnvelopesMutation(!0))},destroyed(){this.bus.off("load-more",this.onScroll),this.bus.off("delete",this.onDelete),this.bus.off("archive",this.onArchive),this.bus.off("shortcut",this.handleShortcut),this.stopInterval()},methods:{initializeCache(){this.loadingCacheInitialization=!0,this.error=!1,_.A.debug(`syncing folder ${this.mailbox.databaseId} (${this.query}) during cache initalization`),this.sync(!0).then((()=>(this.loadingCacheInitialization=!1,this.loadEnvelopes())))},async loadEnvelopes(){_.A.debug(`Fetching envelopes for folder ${this.mailbox.databaseId} (${this.searchQuery})`,this.mailbox),this.syncedMailboxes.has(this.mailbox.databaseId)?(this.skipListTransition=!0,this.$nextTick((()=>{this.skipListTransition=!1}))):this.loadingEnvelopes=!0,this.loadingCacheInitialization=!1,this.error=!1;try{const t=await this.mainStore.fetchEnvelopes({mailboxId:this.mailbox.databaseId,query:this.searchQuery,limit:this.initialPageSize});_.A.debug(t.length+" envelopes fetched",{envelopes:t}),this.syncedMailboxes.add(this.mailbox.databaseId),this.loadingEnvelopes=!1}catch(t){await(0,bt.C)(t,{[Dn.A.getName()]:async t=>{_.A.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) is locked`,{error:t}),await(0,Mn.u)(15e3),await this.loadEnvelopes()},[Bn.A.getName()]:async t=>{_.A.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) not cached. Triggering initialization`,{error:t}),this.loadingEnvelopes=!1;try{await this.initializeCache()}catch(t){_.A.error(`Could not initialize cache of folder ${this.mailbox.databaseId} (${this.searchQuery})`,{error:t}),this.error=t}},default:t=>{_.A.error(`Could not fetch envelopes of folder ${this.mailbox.databaseId} (${this.searchQuery})`,{error:t}),this.loadingEnvelopes=!1,this.error=t}})}},async loadMore(){if(!this.expanded&&this.envelopesToShow.length<this.envelopes.length)return _.A.debug("expanding envelope list"),void(this.expanded=!0);_.A.debug("fetching next envelope page"),this.loadingMore=!0;try{0===(await this.mainStore.fetchNextEnvelopePage({mailboxId:this.mailbox.databaseId,query:this.searchQuery})).length&&(_.A.info("envelope list end reached"),this.endReached=!0)}catch(t){_.A.error("could not fetch next envelope page",{error:t})}finally{this.loadingMore=!1}},async prefetchOtherMailboxes(){for(const t of this.mainStore.getRecursiveMailboxIterator(this.account.id))if(t.databaseId!==this.mailbox.databaseId&&t.isSubscribed)try{const e=await this.mainStore.fetchEnvelopes({mailboxId:t.databaseId,limit:this.initialPageSize,includeCacheBuster:!0});this.syncedMailboxes.add(t.databaseId),_.A.debug(`Prefetched ${e.length} envelopes for folder ${t.displayName} (${t.databaseId})`)}catch(e){if(e instanceof Bn.A)continue;_.A.error(`Failed to prefetch envelopes for folder ${t.displayName} (${t.databaseId}): ${e}`,{error:e})}},hasDeleteAcl(){return(0,Qe.w)(this.mailbox,"x")},hasSeenAcl(){return(0,Qe.w)(this.mailbox,"s")},hasArchiveAcl(){return(0,Qe.w)(this.mailbox,"te")},async handleShortcut(e){const n=this.envelopes,a=parseInt(this.$route.params.threadId,10),i=n.find((t=>t.databaseId===a)),o=n.indexOf(i);let r;switch("refresh"===e.srcKey||i||_.A.debug("envelope is not in the list, ignoring shortcut",{srcKey:e.srcKey}),e.srcKey){case"next":case"prev":if(r="next"===e.srcKey?n[o+1]:n[o-1],!r)return void _.A.debug("ignoring shortcut: head or tail of envelope list reached",{envelopes:n,idx:o,srcKey:e.srcKey});this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:r.databaseId}});break;case"del":if(!this.hasDeleteAcl())return;_.A.debug("deleting",{env:i}),this.onDelete(i.databaseId);try{await this.mainStore.deleteThread({envelope:i})}catch(e){_.A.error("could not delete envelope",{env:i,error:e}),(0,R.Qg)(await(0,bt.C)(e,{[ft.A.getName()]:()=>t("mail","No trash folder configured"),default:()=>t("mail","Could not delete message")}))}break;case"arch":if(_.A.debug("archiving via shortcut"),null===this.account.archiveMailboxId)return void(0,R.I9)(t("mail","To archive a message please configure an archive folder in account settings"));if(!this.hasArchiveAcl())return void(0,R.I9)(t("mail","You are not allowed to move this message to the archive folder and/or delete this message from the current folder"));if(i.mailboxId===this.account.archiveMailboxId)return void _.A.debug("message is already in archive folder");_.A.debug("archiving",{env:i}),this.onDelete(i.databaseId);try{await this.mainStore.moveThread({envelope:i,destMailboxId:this.account.archiveMailboxId})}catch(e){_.A.error("could not archive envelope",{env:i,error:e}),(0,R.Qg)(t("mail","Could not archive message"))}break;case"flag":_.A.debug("flagging envelope via shortkey",{env:i}),this.mainStore.toggleEnvelopeFlagged(i).catch((t=>_.A.error("could not flag envelope via shortkey",{env:i,error:t})));break;case"refresh":_.A.debug(`syncing folder ${this.mailbox.databaseId} (${this.searchQuery}) per shortcut`),this.sync(!1);break;case"unseen":if(_.A.debug("marking as seen/unseen via shortcut"),!this.hasSeenAcl())return void(0,R.I9)(t("mail","Your IMAP server does not support storing the seen/unseen state."));_.A.debug("marking as seen/unseen",{env:i});try{await this.mainStore.toggleEnvelopeSeen({envelope:i})}catch(e){_.A.error("could not mark envelope as seen/unseen via shortkey",{env:i,error:e}),(0,R.Qg)(t("mail","Could not mark message as seen/unseen"))}break;default:_.A.warn("shortcut "+e.srcKey+" is unknown. ignoring.")}},async sync(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.refreshing)_.A.debug(`already sync'ing folder ${this.mailbox.databaseId} (${this.searchQuery}), aborting`,{init:t});else{this.refreshing=!0;try{await this.mainStore.syncEnvelopes({mailboxId:this.mailbox.databaseId,query:this.searchQuery,init:t})}catch(e){throw(0,bt.C)(e,{[Dn.A.getName()](e){_.A.info("Background sync failed because the folder is locked",{error:e,init:t})},default(e){_.A.error("Could not sync envelopes: "+e.message,{error:e,init:t})}}),e}finally{this.refreshing=!1,_.A.debug(`finished sync'ing folder ${this.mailbox.databaseId} (${this.searchQuery})`,{init:t}),this.mainStore.updateSyncTimestamp()}}},onDelete(t){this.mainStore.fetchNextEnvelopes({mailboxId:this.mailbox.databaseId,query:this.searchQuery,quantity:1});const e=(0,_n.A)((0,wn.A)(t,"databaseId"),this.envelopes);if(-1===e)return void _.A.debug("envelope to delete does not exist in envelope list");if(t!==this.$route.params.threadId)return void _.A.debug("other message open, not jumping to the next/previous message");const n=this.envelopes[0===e?1:e-1];n?this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:n.databaseId}}):_.A.debug("no next/previous envelope, not navigating")},onScroll(){"scroll"===this.paginate?this.loadMore():_.A.debug("ignoring scroll pagination")},async loadMailbox(){if(!this.account.isUnified&&"inbox"!==this.mailbox.specialRole)try{_.A.debug(`syncing folder ${this.mailbox.databaseId} (${this.searchQuery}) in background`),await this.sync(!1)}catch(t){_.A.error("Background sync failed: "+t.message,{error:t})}},stopInterval(){clearInterval(this.loadMailboxInterval),this.loadMailboxInterval=void 0},getLabelForGroup(e){switch(e){case"lastHour":return t("mail","Last hour");case"today":return t("mail","Today");case"yesterday":return t("mail","Yesterday");case"lastWeek":return t("mail","Last week");case"lastMonth":return t("mail","Last month")}return t("mail","Older")}}};var Nn=a(25026),Ln={};Ln.styleTagTransform=v(),Ln.setAttributes=m(),Ln.insert=A().bind(null,"head"),Ln.domAPI=c(),Ln.insertStyleElement=h(),s()(Nn.A,Ln),Nn.A&&Nn.A.locals&&Nn.A.locals;const On=(0,S.A)(Pn,(function(){var t=this,e=t._self._c;return e("div",{class:{"empty-content":!t.hasMessages&&!t.loadingEnvelopes||t.error}},[t.error?e("Error",{attrs:{error:t.t("mail","Could not open folder"),message:"",role:"alert"}}):t.loadingEnvelopes?e("LoadingSkeleton",{attrs:{"number-of-lines":20}}):t.loadingCacheInitialization?e("Loading",{attrs:{hint:t.t("mail","Loading messages …"),"slow-hint":t.t("mail","Indexing your messages. This can take a bit longer for larger folders.")}}):t.isPriorityInbox&&!t.hasMessages?e("EmptyMailboxSection",{key:"empty"}):t.hasMessages?t.hasGroupedEnvelopes&&!t.isPriorityInbox?t._l(Object.entries(t.groupEnvelopes),(function(n){let[a,i]=n;return e("div",{key:a},[e("SectionTitle",{staticClass:"section-title",attrs:{name:t.getLabelForGroup(a)}}),t._v(" "),e("EnvelopeList",{attrs:{account:t.account,mailbox:t.mailbox,"search-query":t.searchQuery,envelopes:i,"loading-more":!1,"load-more-button":!1,"skip-transition":t.skipListTransition},on:{delete:t.onDelete}})],1)})):e("EnvelopeList",{attrs:{account:t.account,"load-more-label":t.loadMoreLabel,mailbox:t.mailbox,"search-query":t.searchQuery,envelopes:t.envelopesToShow,"loading-more":t.loadingMore,"load-more-button":t.showLoadMore,"skip-transition":t.skipListTransition},on:{delete:t.onDelete,"load-more":t.loadMore}}):e("EmptyMailbox",{key:"empty"})],2)}),[],!1,null,"86cd4438",null).exports;var qn=a(94219),$n=a(67607),Gn=a(66603),jn=a(32073),Un=a(91955),Rn=a(68752),Wn=a(7071),Vn=a.n(Wn),Yn=a(60382),Hn=a.n(Yn),Qn=a(76459),Kn=a.n(Qn),Jn=a(94674),Xn=a(69655),Zn=a.n(Xn);const ta=Kn()(Jn.F,500),ea={name:"SearchMessages",components:{NcDialog:qn.A,NcSelect:$n.A,NcDateTimePickerNative:Gn.A,NcButton:vn.A,NcCheckboxRadioSwitch:jn.A,FilterVariantIcon:Un.A,Close:Rn.A},props:{mailbox:{type:Object,required:!0},accountId:{type:Number,required:!0}},data(){return{showButtons:!1,match:"allof",query:"",debouncedSearchQuery:Kn()(this.sendQueryEvent,700),autocompleteRecipients:[],selectedTags:[],moreSearchActions:!1,searchInFrom:[],searchInTo:[],searchInCc:[],searchInBcc:[],searchInSubject:null,searchInMessageBody:null,searchFlags:[],mentionsMe:!1,hasAttachmentActive:!1,hasLast7daysActive:!1,hasFromMeActive:!1,startDate:null,endDate:null,dialogButtons:[{label:(0,Lt.Tl)("mail","Clear"),callback:()=>this.resetFilter(),type:"secondary",icon:Vn()},{label:(0,Lt.Tl)("mail","Search"),callback:()=>this.closeSearchModal(),type:"primary",icon:Hn()}]}},computed:{...(0,_t.n2)(xt.A),tags(){return this.mainStore.getTags.filter((t=>!(t.displayName.toLowerCase()in Jt))).sort(((t,e)=>t.isDefaultTag&&!e.isDefaultTag?-1:e.isDefaultTag&&!t.isDefaultTag?1:t.isDefaultTag&&e.isDefaultTag?t.displayName<e.displayName?1:-1:t.displayName.localeCompare(e.displayName)))},filterChanged(){return Object.entries(this.filterData).filter((t=>{let[e,n]=t;return""!==n&&null!==n&&n.length>0})).length>0},searchBody(){return this.mainStore.getAccount(this.accountId)?.searchBody||"priority"===this.mailbox.databaseId&&"true"===this.mainStore.getPreference("search-priority-body","false")},account(){return this.mainStore.getAccount(this.accountId)},filterData(){return{to:this.searchInTo.length>0?this.searchInTo.map((t=>t.email)):null,from:this.searchInFrom.length>0?this.searchInFrom.map((t=>t.email)):null,cc:this.searchInCc.length>0?this.searchInCc.map((t=>t.email)):null,bcc:this.searchInBcc.length>0?this.searchInBcc.map((t=>t.email)):null,subject:null!==this.searchInSubject&&this.searchInSubject.length>1?this.searchInSubject:"",body:null!==this.searchInMessageBody&&this.searchInMessageBody.length>1?this.searchInMessageBody:"",tags:this.selectedTags.length>0?this.selectedTags.map((t=>t.id)):"",flags:this.searchFlags.length>0?this.searchFlags.map((t=>t)):"",mentions:this.mentionsMe,start:this.prepareStart(),end:this.prepareEnd()}},searchQuery(){let t="";return Object.entries(this.filterData).filter((e=>{let[n,a]=e;return["to","from","cc","bcc"].includes(n)?a?.forEach((e=>{t+=`${n}:${encodeURI(e)} `})):"body"===n?a.split(" ").forEach((e=>{""!==e&&null!==a&&(t+=`${n}:${encodeURI(e)} `)})):""!==a&&null!==a&&(t+=`${n}:${encodeURI(a)} `),a})),t+=`match:${encodeURI(this.match)} `,t.trim()}},watch:{query(){0!==this.query.length&&(this.match="anyof",this.searchInMessageBody=this.searchBody?this.query:null,this.searchInSubject=this.query,this.searchInFrom=[{email:this.query,label:this.query}],this.searchInTo=[{email:this.query,label:this.query}],this.debouncedSearchQuery())}},methods:{hideButtonsWithDelay(){setTimeout((()=>{this.showButtons=!1}),100)},toggleGetAttachments(){this.hasAttachmentActive?this.searchFlags.push("attachments"):this.searchFlags=this.searchFlags.filter((t=>"attachments"!==t)),this.$nextTick((()=>{this.sendQueryEvent()}))},toggleCurrentUser(){this.hasFromMeActive?this.searchInFrom=[{email:this.account.emailAddress,label:this.account.emailAddress}]:this.searchInFrom=null,this.$nextTick((()=>{this.sendQueryEvent()}))},toggleLastWeekFilter(){if(this.hasLast7daysActive){const t=new Date,e=new Date;e.setDate(e.getDate()-7),this.startDate=e,this.endDate=t}else this.startDate=null,this.endDate=null;this.$nextTick((()=>{this.sendQueryEvent()}))},prepareStart(){return null!==this.startDate?(null!==this.endDate&&this.startDate>this.endDate&&(this.endDate=this.startDate),(0,vt.A)(this.startDate).unix().toString()):""},prepareEnd(){return null!==this.endDate?(0,vt.A)(this.endDate).add(1,"days").unix().toString():""},closeSearchModal(){this.moreSearchActions=!1,this.match="allof",this.$nextTick((()=>{this.sendQueryEvent()}))},sendQueryEvent(){this.$emit("search-changed",this.searchQuery)},searchRecipients(t){void 0!==t&&""!==t&&ta(t).then((t=>{this.autocompleteRecipients=Zn()("email")(this.autocompleteRecipients.concat(t))}))},resetFilter(){this.match="allof",this.query="",this.selectedTags=[],this.moreSearchActions=!1,this.searchInFrom=[],this.searchInTo=[],this.searchInCc=[],this.searchInBcc=[],this.searchInSubject=null,this.searchInMessageBody=null,this.searchFlags=[],this.startDate=null,this.endDate=null,this.mentionsMe=!1,this.sendQueryEvent()},addTag(t,e){switch("string"==typeof t&&(t={email:t,label:t}),e){case"to":this.searchInTo.push(t);break;case"from":this.searchInFrom.push(t);break;case"cc":this.searchInCc.push(t);break;case"bcc":this.searchInBcc.push(t)}},removeTag(t,e){switch(e){case"to":this.searchInTo=this.removeAddress(t,this.searchInTo);break;case"from":this.searchInFrom=this.removeAddress(t,this.searchInFrom);break;case"cc":this.searchInCc=this.removeAddress(t,this.searchInCc);break;case"bcc":this.searchInBcc=this.removeAddress(t,this.searchInBcc)}},removeAddress:(t,e)=>e.filter((e=>e.email!==t.email))}};var na=a(30003),aa={};aa.styleTagTransform=v(),aa.setAttributes=m(),aa.insert=A().bind(null,"head"),aa.domAPI=c(),aa.insertStyleElement=h(),s()(na.A,aa),na.A&&na.A.locals&&na.A.locals;const ia=(0,S.A)(ea,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-messages"},[e("div",{staticClass:"search-messages__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"search-messages--input",attrs:{type:"text",placeholder:t.t("mail","Search in folder"),"aria-label":t.t("mail","Search in folder")},domProps:{value:t.query},on:{focus:function(e){t.showButtons=!0},blur:t.hideButtonsWithDelay,input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),e("NcButton",{staticClass:"search-messages--filter",attrs:{type:"tertiary","aria-label":t.t("mail","Open search modal")},on:{click:function(e){t.moreSearchActions=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("FilterVariantIcon",{attrs:{size:20}})]},proxy:!0}])}),t._v(" "),t.filterChanged?e("NcButton",{staticClass:"search-messages--close",attrs:{"aria-label":t.t("mail","Close")},on:{click:function(e){return t.resetFilter()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Close",{attrs:{size:24}})]},proxy:!0}],null,!1,1411281818)}):t._e(),t._v(" "),t.filterChanged?e("span",{staticClass:"filter-changed"}):t._e(),t._v(" "),t.moreSearchActions?e("NcDialog",{staticClass:"search-modal",attrs:{name:t.t("mail","Search parameters"),size:"normal",buttons:t.dialogButtons},on:{closing:t.closeSearchModal}},[e("div",{staticClass:"modal-inner--content"},[e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"subjectId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Subject"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInSubject,expression:"searchInSubject"}],staticClass:"search-input",attrs:{id:"subjectId",type:"text",placeholder:t.t("mail","Search subject")},domProps:{value:t.searchInSubject},on:{input:function(e){e.target.composing||(t.searchInSubject=e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"bodyId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Body"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInMessageBody,expression:"searchInMessageBody"}],staticClass:"search-input",attrs:{id:"bodyId",type:"text",placeholder:t.t("mail","Search body")},domProps:{value:t.searchInMessageBody},on:{input:function(e){e.target.composing||(t.searchInMessageBody=e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"fromId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Date"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container range"},[e("div",{staticClass:"modal-inner-inline"},[e("NcDateTimePickerNative",{attrs:{type:"date",label:t.t("mail","Pick a start date"),confirm:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcDateTimePickerNative",{attrs:{type:"date",disabled:null===t.startDate,label:t.t("mail","Pick an end date"),confirm:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)])]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"fromId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","From"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcSelect",{staticClass:"modal-inner--container__select",attrs:{id:"fromId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInFrom,placeholder:t.t("mail","Select senders"),"aria-label-combobox":t.t("mail","Select senders"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0,max:1},on:{"option:selecting":function(e){return t.addTag(e,"from")},"option:deselecting":function(e){return t.removeTag(e,"from")},search:function(e){return t.searchRecipients(e)}}})],1)]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"toId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","To"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcSelect",{staticClass:"modal-inner--container__select",attrs:{id:"toId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInTo,placeholder:t.t("mail","Select recipients"),"aria-label-combobox":t.t("mail","Select recipients"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0},on:{"option:selecting":function(e){return t.addTag(e,"to")},"option:deselecting":function(e){return t.removeTag(e,"to")},search:function(e){return t.searchRecipients(e)}}})],1)]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"ccId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Cc"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcSelect",{staticClass:"modal-inner--container__select",attrs:{id:"ccId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInCc,placeholder:t.t("mail","Select CC recipients"),"aria-label-combobox":t.t("mail","Select CC recipients"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0},on:{"option:selecting":function(e){return t.addTag(e,"cc")},"option:deselecting":function(e){return t.removeTag(e,"cc")},search:function(e){return t.searchRecipients(e)}}})],1)]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"bccId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Bcc"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcSelect",{staticClass:"modal-inner--container__select",attrs:{id:"bccId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInBcc,placeholder:t.t("mail","Select BCC recipients"),"aria-label-combobox":t.t("mail","Select BCC recipients"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0},on:{"option:selecting":function(e){return t.addTag(e,"bcc")},"option:deselecting":function(e){return t.removeTag(e,"bcc")},search:function(e){return t.searchRecipients(e)}}})],1)]),t._v(" "),t.tags.length>0?e("div",{staticClass:"modal-inner--field"},[e("label",{attrs:{for:"tagsId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Tags"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[t.tags.length>0?e("NcSelect",{staticClass:"multiselect-search-tags",attrs:{id:"tagsId",options:t.tags,label:"displayName",value:t.selectedTags,placeholder:t.t("mail","Select tags"),"aria-label-combobox":t.t("mail","Select tags"),"track-by":"displayName",multiple:!0,"auto-limit":!1,"close-on-select":!1},scopedSlots:t._u([{key:"selected-option",fn:function(n){return[e("div",{staticClass:"tag-group__search"},[e("div",{staticClass:"tag-group__bg",style:"background-color:"+("#fff"!==n.color?n.color:"#333")}),t._v(" "),e("div",{staticClass:"tag-group__label",style:"color:"+n.color},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(n.displayName)+"\n\t\t\t\t\t\t\t\t\t")])])]}},{key:"option",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.displayName)+"\n\t\t\t\t\t\t\t")]}}],null,!1,2268980641),model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}}):t._e()],1)]):t._e(),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"fromId"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Marked as"))+"\n\t\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container marked-as"},[e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"is_important",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.t("mail","Important"))+"\n\t\t\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"starred",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.t("mail","Favorite"))+"\n\t\t\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"unread",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.t("mail","Unread"))+"\n\t\t\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"attachments",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.t("mail","Has attachments"))+"\n\t\t\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.mentionsMe},on:{"update:checked":function(e){t.mentionsMe=e}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.t("mail","Mentions me"))+"\n\t\t\t\t\t\t\t")])],1)])])])]):t._e()],1),t._v(" "),t.showButtons?e("div",{staticClass:"filter-buttons"},[e("NcButton",{staticClass:"shortcut",attrs:{type:"secondary","aria-label":t.t("mail","Has attachment"),title:t.t("mail","Has attachment"),pressed:t.hasAttachmentActive},on:{"update:pressed":function(e){t.hasAttachmentActive=!t.hasAttachmentActive},click:t.toggleGetAttachments}},[t._v("\n\t\t\t"+t._s(t.t("mail","Has attachment"))+"\n\t\t")]),t._v(" "),e("NcButton",{staticClass:"shortcut",attrs:{type:"secondary",pressed:t.hasLast7daysActive,"aria-label":t.t("mail","Last 7 days"),title:t.t("mail","Last 7 days")},on:{"update:pressed":function(e){t.hasLast7daysActive=!t.hasLast7daysActive},click:t.toggleLastWeekFilter}},[t._v("\n\t\t\t"+t._s(t.t("mail","Last 7 days"))+"\n\t\t")]),t._v(" "),e("NcButton",{staticClass:"shortcut",attrs:{type:"secondary",pressed:t.hasFromMeActive,"aria-label":t.t("mail","From me"),title:t.t("mail","From me")},on:{"update:pressed":function(e){t.hasFromMeActive=!t.hasFromMeActive},click:t.toggleCurrentUser}},[t._v("\n\t\t\t"+t._s(t.t("mail","From me"))+"\n\t\t")])],1):t._e()])}),[],!1,null,null,null).exports,oa={name:"NoMessageSelected",components:{NewMessageButtonHeader:a(26430).A,AppContentDetails:i.eM,NcEmptyContent:i.yI,IconMail:$.A},computed:{productName:()=>window?.OC?.theme?.name??"Nextcloud"}};var ra=a(82500),sa={};sa.styleTagTransform=v(),sa.setAttributes=m(),sa.insert=A().bind(null,"head"),sa.domAPI=c(),sa.insertStyleElement=h(),s()(ra.A,sa),ra.A&&ra.A.locals&&ra.A.locals;const la=(0,S.A)(oa,(function(){var t=this,e=t._self._c;return e("AppContentDetails",{staticClass:"app-content"},[e("NcEmptyContent",{staticClass:"app-content__empty",attrs:{name:t.t("mail","Welcome to {productName} Mail",{productName:t.productName},null,{escape:!1}),description:t.t("mail","Start writing a message by clicking below or select an existing message to display its contents")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail")]},proxy:!0},{key:"action",fn:function(){return[e("NewMessageButtonHeader")]},proxy:!0}])})],1)}),[],!1,null,"23515788",null).exports;var ca=a(5854),da=a(61637),Aa=a(12572),pa=a.n(Aa);const ma=[":-(",":-/",":-\\",":-|",":'-(",":'-/",":'-\\",":'-|"];var ua=a(44038),ha=a(35453),ga=a(32817),va=a(6791);const Ca=Kn()(va.Zd,500),fa=Object.freeze({new:1,existing:2,select:3}),ba={name:"RecipientBubble",components:{ButtonVue:i.x1,UserBubble:i.Z9,Popover:i.rI,NcSelect:i.EQ,IconReply:Dt.A,IconUser:ha.A,IconAdd:Pt.A,IconClose:Rn.A,IconClipboard:ua.A,IconDetails:q.A,IconCheck:tt.A},props:{email:{type:String,required:!0},label:{type:String,required:!0}},data:()=>({avatarUrl:void 0,loadingContacts:!1,contactsWithEmail:[],autoCompleteContacts:[],selectedContact:null,newContactName:"",ContactSelectionStateEnum:fa,selection:fa.select,isContactPopoverOpen:!1}),computed:{avatarUrlAbsolute(){if(this.avatarUrl)return this.avatarUrl.startsWith("http")?this.avatarUrl:window.location.protocol+"//"+window.location.host+(0,de.Jv)(this.avatarUrl)},selectableContacts(){return this.autoCompleteContacts.map((t=>({...t,label:t.label})))},contactsWithEmailComputed(){let t="";return this.contactsWithEmail&&this.contactsWithEmail.length>3&&(t=" + "+(this.contactsWithEmail.length-3)),this.contactsWithEmail.slice(0,3).map((t=>t.label)).join(", ").concat(t)},addButtonDisabled(){return!(this.selection===fa.existing&&this.selectedContact||this.selection===fa.new&&""!==this.newContactName.trim())}},async mounted(){try{this.avatarUrl=await(0,ga.F)(this.email)}catch(t){console.debug("no avatar for "+this.email,{error:t})}this.newContactName=this.label},methods:{async onClickCopyToClipboard(){try{await navigator.clipboard.writeText(this.email),(0,R.Te)(t("mail","Copied email address to clipboard"))}catch(e){(0,R.Qg)(t("mail","Could not copy email address to clipboard"))}},onClickReply(){this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,threadId:"mailto"},query:{to:this.email}})},onClickOpenContactDialog(){0===this.contactsWithEmail.length&&(0,va.Np)(this.email).then((t=>{t&&t.length>0&&(this.contactsWithEmail=t)}))},onClickAddToContact(){this.selection===fa.new?""!==this.newContactName&&(0,va.LG)(this.newContactName.trim(),this.email).then((t=>console.debug("ContactIntegration",t))):this.selection===fa.existing&&this.selectedContact&&(0,va.bq)(this.selectedContact.id,this.email).then((t=>console.debug("ContactIntegration",t)))},onAutocomplete(t){void 0!==t&&""!==t&&Ca(t).then((t=>{this.autoCompleteContacts=Zn()("id")(this.autoCompleteContacts.concat(t))}))}}};var ya=a(11029),xa={};xa.styleTagTransform=v(),xa.setAttributes=m(),xa.insert=A().bind(null,"head"),xa.domAPI=c(),xa.insertStyleElement=h(),s()(ya.A,xa),ya.A&&ya.A.locals&&ya.A.locals;const _a=(0,S.A)(ba,(function(){var t=this,e=t._self._c;return e("Popover",{staticClass:"contact-popover",attrs:{"popup-role":"dialog"},scopedSlots:t._u([{key:"trigger",fn:function(n){let{attrs:a}=n;return[e("UserBubble",t._b({attrs:{"display-name":t.label,size:26,"avatar-image":t.avatarUrlAbsolute},on:{click:t.onClickOpenContactDialog}},"UserBubble",a,!1))]}}])},[t._v(" "),[e("div",{staticClass:"contact-wrapper"},[e("p",{staticClass:"contact-popover__email"},[t._v("\n\t\t\t\t"+t._s(t.email)+"\n\t\t\t")]),t._v(" "),t.contactsWithEmail&&t.contactsWithEmail.length>0?e("ButtonVue",{staticClass:"contact-existing",attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Contacts with this address")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDetails",{attrs:{size:20}})]},proxy:!0}],null,!1,2417736673)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Contacts with this address"))+": "+t._s(t.contactsWithEmailComputed)+"\n\t\t\t")]):t._e(),t._v(" "),t.selection===t.ContactSelectionStateEnum.select?e("div",{staticClass:"contact-menu"},[e("ButtonVue",{attrs:{"aria-label":t.t("mail","Reply"),type:"tertiary-no-background"},on:{click:t.onClickReply},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconReply",{attrs:{size:20}})]},proxy:!0}],null,!1,806667217)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Reply"))+"\n\t\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Add to Contact")},on:{click:function(e){t.selection=t.ContactSelectionStateEnum.existing}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconUser",{attrs:{size:20}})]},proxy:!0}],null,!1,207893778)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Add to Contact"))+"\n\t\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","New Contact")},on:{click:function(e){t.selection=t.ContactSelectionStateEnum.new}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2388353250)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","New Contact"))+"\n\t\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Copy to clipboard")},on:{click:t.onClickCopyToClipboard},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconClipboard",{attrs:{size:20}})]},proxy:!0}],null,!1,1207266895)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Copy to clipboard"))+"\n\t\t\t\t")])],1):e("div",{staticClass:"contact-input-wrapper"},[t.selection===t.ContactSelectionStateEnum.existing?e("NcSelect",{ref:"contact-selection-label",attrs:{id:"contact-selection",options:t.selectableContacts,taggable:!0,"track-by":"label",multiple:!1,placeholder:t.t("name","Contact name …"),"clear-search-on-select":!0,"show-no-options":!1,"append-to-body":!1},on:{search:t.onAutocomplete},model:{value:t.selectedContact,callback:function(e){t.selectedContact=e},expression:"selectedContact"}}):t.selection===t.ContactSelectionStateEnum.new?e("input",{directives:[{name:"model",rawName:"v-model",value:t.newContactName,expression:"newContactName"}],domProps:{value:t.newContactName},on:{input:function(e){e.target.composing||(t.newContactName=e.target.value)}}}):t._e()],1),t._v(" "),t.selection!==t.ContactSelectionStateEnum.select?e("div",[e("ButtonVue",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Go back")},on:{click:function(e){t.selection=t.ContactSelectionStateEnum.select}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconClose",{attrs:{size:20}})]},proxy:!0}],null,!1,2888946197)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Go back"))+"\n\t\t\t\t")]),t._v(" "),e("ButtonVue",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{disabled:t.addButtonDisabled,type:"tertiary-no-background","aria-label":t.t("mail","Add")},on:{click:t.onClickAddToContact},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,905113861)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Add"))+"\n\t\t\t\t")])],1):t._e()],1)]],2)}),[],!1,null,"ede1b5f6",null).exports;var wa=a(41497),ka=a.n(wa);var Ia=a(10652),Sa={};Sa.styleTagTransform=v(),Sa.setAttributes=m(),Sa.insert=A().bind(null,"head"),Sa.domAPI=c(),Sa.insertStyleElement=h(),s()(Ia.A,Sa),Ia.A&&Ia.A.locals&&Ia.A.locals;const Ta=(0,S.A)({name:"MessageLoadingSkeleton"},(function(){return this._self._c,this._m(0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-loading-skeleton"},[e("div",{staticClass:"message-loading-skeleton__body"},[e("div",{staticClass:"message-loading-skeleton__body__line-one"},[t._v("\n\t\t\t\t \n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-two"},[t._v("\n\t\t\t\t \n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-three"},[t._v("\n\t\t\t\t \n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-four"},[t._v("\n\t\t\t\t \n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-five"},[t._v("\n\t\t\t\t \n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-six"},[t._v("\n\t\t\t\t \n\t\t")])])])}],!1,null,"f20a6902",null).exports;var Da=a(18446),Ba=a(7246),Ma=a.n(Ba);const Ea={name:"CalendarImport",components:{Actions:i.B6,ActionButton:i.Ko,IconAdd:Pt.A,IconLoading:i.ne},props:{calendars:{type:Array,required:!0},handler:{type:Function,required:!0}},computed:{cals(){return this.calendars.map((t=>(this.$set(t,"loading",!1),t)))}},methods:{onImport(t){t.loading=!0,this.handler(t).catch(console.error.bind(this)).then((()=>{t.loading=!1}))}},itineraryDateTime:t=>"string"==typeof t?t:t["@value"],addIcalTimeProperty(t,e,n){const a=(0,vt.A)(this.itineraryDateTime(e)).format(),i=t.updatePropertyWithValue(n,se.A.Time.fromDateTimeString(a));"string"!=typeof e&&i.setParameter("TZID",e.timezone)}},Fa=Ea,za=(0,S.A)(Fa,(function(){var t=this,e=t._self._c;return t.calendars.length?e("Actions",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2388353250)},[t._v(" "),t._l(t.cals,(function(n,a){return e("ActionButton",{key:a,on:{click:function(e){return t.onImport(n)}},scopedSlots:t._u([{key:"icon",fn:function(){return[n.loading?e("IconLoading",{attrs:{size:20}}):e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t"+t._s(t.t("mail","Import into {calendar}",{calendar:n.displayname}))+"\n\t")])}))],2):t._e()}),[],!1,null,null,null).exports,Pa={name:"EventReservation",components:{CalendarImport:za},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{eventName(){return this.data.reservationFor.name},time(){if("startDate"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.startDate)).format("LT")},date(){if("startDate"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.startDate)).format("L")},location(){if("location"in this.data.reservationFor&&"name"in this.data.reservationFor.location)return this.data.reservationFor.location.name},canImport(){return"startDate"in this.data.reservationFor}},methods:{getEndDateTime(t){return"endDate"in this.data.reservationFor?(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.endDate)).format():"startDate"in this.data.reservationFor?(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.startDate)).add(2,"hours").format():void 0},handleImport(e){const n=new se.A.Component("VEVENT");n.updatePropertyWithValue("SUMMARY",this.eventName);const a=(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.startDate)).format();n.updatePropertyWithValue("DTSTART",se.A.Time.fromDateTimeString(a));const i=this.getEndDateTime(this.data.reservationFor);n.updatePropertyWithValue("DTEND",se.A.Time.fromDateTimeString(i)),"location"in this.data.reservationFor&&(n.updatePropertyWithValue("LOCATION",this.data.reservationFor.location.name),"geo"in this.data.reservationFor.location&&n.updatePropertyWithValue("GEO",`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`)),n.updatePropertyWithValue("PRODID","Nextcloud Mail"),n.updatePropertyWithValue("UID",me()(this.messageId+this.eventName));const o=new se.A.Component("VCALENDAR");return o.addSubcomponent(n),_.A.debug("generated calendar event from event reservation data",{ical:o.toString()}),ke(e.url)(o.toString()).then((()=>{_.A.debug("event successfully imported"),(0,R.Te)(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((e=>{_.A.error("Could not import event",{error:e}),(0,R.Qg)(t("mail","Could not create event"))}))}}};var Na=a(31020),La={};La.styleTagTransform=v(),La.setAttributes=m(),La.insert=A().bind(null,"head"),La.domAPI=c(),La.insertStyleElement=h(),s()(Na.A,La),Na.A&&Na.A.locals&&Na.A.locals;const Oa=(0,S.A)(Pa,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"event"},[e("div",{staticClass:"event-name"},[t._v("\n\t\t\t"+t._s(t.eventName)+"\n\t\t")]),t._v(" "),t.location?e("div",{staticClass:"venue"},[t._v("\n\t\t\t"+t._s(t.location)+"\n\t\t")]):t._e(),t._v(" "),t.date?e("div",[t._v("\n\t\t\t"+t._s(t.date)+"\n\t\t")]):t._e(),t._v(" "),t.time?e("div",[t._v("\n\t\t\t"+t._s(t.time)+"\n\t\t")]):t._e()]),t._v(" "),t.canImport?e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"6b4c380e",null).exports;var qa=a(18658),$a=a(6766);const Ga={name:"FlightReservation",components:{AirplaneIcon:qa.A,ArrowIcon:$a.A,CalendarImport:za},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime(){if("departureTime"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.departureTime)).format("LT")},departureDate(){if("departureTime"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.departureTime)).format("L")},arrivalTime(){if("arrivalTime"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("LT")},arrivalDate(){if("arrivalTime"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("L")},flightNumber(){return this.data.reservationFor.airline.iataCode+this.data.reservationFor.flightNumber},reservation(){if("reservationNumber"in this.data)return this.data.reservationNumber},canImport(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor}},methods:{handleImport(e){const n=new se.A.Component("VEVENT");n.updatePropertyWithValue("SUMMARY",t("mail","Flight {flightNr} from {depAirport} to {arrAirport}",{flightNr:this.flightNumber,depAirport:this.data.reservationFor.departureAirport.iataCode,arrAirport:this.data.reservationFor.arrivalAirport.iataCode})),za.addIcalTimeProperty(n,this.data.reservationFor.departureTime,"DTSTART"),za.addIcalTimeProperty(n,this.data.reservationFor.arrivalTime,"DTEND"),n.updatePropertyWithValue("PRODID","Nextcloud Mail"),n.updatePropertyWithValue("UID",me()(this.messageId+this.flightNumber));const a=new se.A.Component("VCALENDAR");return a.addSubcomponent(n),_.A.debug("generated calendar event from flight reservation data",{ical:a.toString()}),ke(e.url)(a.toString()).then((()=>{_.A.debug("event successfully imported"),(0,R.Te)(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((e=>{_.A.error("Could not import event",{error:e}),(0,R.Qg)(t("mail","Could not create event"))}))}}};var ja=a(91646),Ua={};Ua.styleTagTransform=v(),Ua.setAttributes=m(),Ua.insert=A().bind(null,"head"),Ua.domAPI=c(),Ua.insertStyleElement=h(),s()(ja.A,Ua),ja.A&&ja.A.locals&&ja.A.locals;const Ra=(0,S.A)(Ga,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"departure"},[e("div",{staticClass:"iata"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureAirport.iataCode)+"\n\t\t")]),t._v(" "),e("div",{staticClass:"airport"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureAirport.name)+"\n\t\t")]),t._v(" "),t.departureDate?e("div",[t._v("\n\t\t\t"+t._s(t.departureDate)+"\n\t\t")]):t._e(),t._v(" "),t.departureTime?e("div",[t._v("\n\t\t\t"+t._s(t.departureTime)+"\n\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"connection"},[e("div",[e("AirplaneIcon",{attrs:{title:t.t("mail","Airplane")}})],1),t._v(" "),e("div",[t._v(t._s(t.flightNumber))]),t._v(" "),t.reservation?e("div",[t._v("\n\t\t\t"+t._s(t.t("mail","Reservation {id}",{id:t.reservation}))+"\n\t\t")]):e("div",[e("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),e("div",{staticClass:"arrival"},[e("div",{staticClass:"iata"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalAirport.iataCode)+"\n\t\t")]),t._v(" "),e("div",{staticClass:"airport"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalAirport.name)+"\n\t\t")]),t._v(" "),t.arrivalDate?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalDate)+"\n\t\t")]):t._e(),t._v(" "),t.arrivalTime?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalTime)+"\n\t\t")]):t._e()]),t._v(" "),e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}})],1)}),[],!1,null,"43311de6",null).exports;var Wa=a(56220);const Va={name:"TrainReservation",components:{ArrowIcon:$a.A,CalendarImport:za,TrainIcon:Wa.A},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime(){if("departureTime"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.departureTime)).format("LT")},departureDate(){return"departureTime"in this.data.reservationFor?(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.departureTime)).format("L"):"departureDay"in this.data.reservationFor?(0,vt.A)(this.data.reservationFor.departureDay).format("L"):void 0},arrivalTime(){if("arrivalTime"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("LT")},arrivalDate(){if("arrivalTime"in this.data.reservationFor)return(0,vt.A)(za.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("L")},trainNumber(){return this.data.reservationFor.trainNumber},canImport(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor||"departureDay"in this.data.reservationFor}},methods:{handleImport(e){const n=new se.A.Component("VEVENT");if("trainNumber"in this.data.reservationFor?n.updatePropertyWithValue("SUMMARY",t("mail","{trainNr} from {depStation} to {arrStation}",{trainNr:this.data.reservationFor.trainNumber,depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})):n.updatePropertyWithValue("SUMMARY",t("mail","Train from {depStation} to {arrStation}",{depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})),"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor)za.addIcalTimeProperty(n,this.data.reservationFor.departureTime,"DTSTART"),za.addIcalTimeProperty(n,this.data.reservationFor.arrivalTime,"DTEND");else if("departureDay"in this.data.reservationFor){const t=(0,vt.A)(this.data.reservationFor.departureDay).format();n.updatePropertyWithValue("DTSTART",se.A.Time.fromDateTimeString(t))}n.updatePropertyWithValue("PRODID","Nextcloud Mail"),n.updatePropertyWithValue("UID",me()(this.messageId+this.departureTime));const a=new se.A.Component("VCALENDAR");return a.addSubcomponent(n),_.A.debug("generated calendar event from train reservation data",{ical:a.toString()}),ke(e.url)(a.toString()).then((()=>{_.A.debug("event successfully imported"),(0,R.Te)(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((e=>{_.A.error("Could not import event",{error:e}),(0,R.Qg)(t("mail","Could not create event"))}))}}};var Ya=a(76157),Ha={};Ha.styleTagTransform=v(),Ha.setAttributes=m(),Ha.insert=A().bind(null,"head"),Ha.domAPI=c(),Ha.insertStyleElement=h(),s()(Ya.A,Ha),Ya.A&&Ya.A.locals&&Ya.A.locals;const Qa=(0,S.A)(Va,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"departure"},[e("div",{staticClass:"station"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureStation.name)+"\n\t\t")]),t._v(" "),t.departureDate?e("div",[t._v("\n\t\t\t"+t._s(t.departureDate)+"\n\t\t")]):t._e(),t._v(" "),t.departureTime?e("div",[t._v("\n\t\t\t"+t._s(t.departureTime)+"\n\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"connection"},[e("div",[e("TrainIcon",{attrs:{title:t.t("mail","Train")}})],1),t._v(" "),e("div",[t._v(t._s(t.trainNumber))]),t._v(" "),e("div",[e("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),e("div",{staticClass:"arrival"},[e("div",{staticClass:"station"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalStation.name)+"\n\t\t")]),t._v(" "),t.arrivalDate?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalDate)+"\n\t\t")]):t._e(),t._v(" "),t.arrivalTime?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalTime)+"\n\t\t")]):t._e()]),t._v(" "),t.canImport?e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"50bfccc8",null).exports,Ka=Ma()(xe),Ja={name:"Itinerary",components:{EventReservation:Oa,FlightReservation:Ra,TrainReservation:Qa},props:{entries:{type:Array,required:!0},messageId:{type:String,required:!0}},data:()=>({calendars:[]}),mounted(){Ka().then((t=>this.calendars=t)).catch((t=>_.A.error("Could not load calendars",{error:t})))}},Xa=(0,S.A)(Ja,(function(){var t=this,e=t._self._c;return e("div",[t._l(t.entries,(function(n,a){return["EventReservation"===n["@type"]?e("EventReservation",{key:a,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):"FlightReservation"===n["@type"]?e("FlightReservation",{key:a,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):"TrainReservation"===n["@type"]?e("TrainReservation",{key:a,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):e("span",{key:a},[t._v(t._s(t.t("mail","Itinerary for {type} is not supported yet",{type:n["@type"]})))])]}))],2)}),[],!1,null,null,null).exports;var Za=a(71225),ti=a(8184),ei=a(93173),ni=a(64708),ai=a(56684),ii=a(42829),oi=a(71561);const ri={name:"MessageAttachment",components:{FilePicker:ti.Z,Actions:i.B6,ActionButton:i.Ko,IconAdd:Pt.A,IconArrow:ii.A,IconLoading:i.ne,IconSave:oi.A,IconDownload:Ke.A},mixins:[ai.mixin],props:{id:{type:String,required:!0},fileName:{type:String,default:(0,Lt.Tl)("mail","Unnamed"),required:!1},url:{type:String,required:!0},size:{type:Number,required:!0},mime:{type:String,required:!0},mimeUrl:{type:String,required:!0},isImage:{type:Boolean,default:!1},isCalendarEvent:{type:Boolean,default:!1},canPreview:{type:Boolean,default:!1}},data(){return{savingToCloud:!1,loadingCalendars:!1,calendars:[],showCalendarPopover:!1,saveAttachementButtons:[{label:(0,Lt.Tl)("mail","Choose"),callback:this.saveToCloud,type:"primary"}],isFilePickerOpen:!1}},computed:{name(){return"message/rfc822"===this.mime?(0,Lt.Tl)("mail","Embedded message"):this.fileName},label(){return"message/rfc822"===this.mime?(0,Lt.Tl)("mail","Embedded message")+" ("+(0,ni.v7)(this.size)+")":this.fileName+" ("+(0,ni.v7)(this.size)+")"},calendarMenuEntries(){return this.calendars.map((t=>({text:t.displayname,action:this.importCalendar(t.url)})))},boundariesElement:()=>document.querySelector("#content-vue")},methods:{humanReadable:t=>(0,ni.v7)(t),async saveToCloud(t){const e=t[0].path;this.savingToCloud=!0;const n=this.$route.params.threadId;try{await(0,ei.Rn)(n,this.id,e),_.A.info("saved"),(0,R.Te)((0,Lt.Tl)("mail","Attachment saved to Files"))}catch(t){_.A.error("not saved",{error:t}),(0,R.Qg)((0,Lt.Tl)("mail","Attachment could not be saved"))}finally{this.savingToCloud=!1}},download(){window.location=this.url},loadCalendars(){this.loadingCalendars=!0,xe().then((t=>{this.calendars=t,this.showCalendarPopover=!0,this.loadingCalendars=!1}))},closeCalendarPopover(){this.showCalendarPopover=!1},importCalendar(t){return()=>{(0,ei.iQ)(this.url).then(ke(t)).then((()=>{(0,R.Te)((0,Lt.Tl)("mail","calendar imported"))})).catch((t=>{_.A.error("Could not import event",{error:t}),(0,R.Qg)((0,Lt.Tl)("mail","Could not create event"))})).then((()=>this.showCalendarPopover=!1))}}}};var si=a(55258),li={};li.styleTagTransform=v(),li.setAttributes=m(),li.insert=A().bind(null,"head"),li.domAPI=c(),li.insertStyleElement=h(),s()(si.A,li),si.A&&si.A.locals&&si.A.locals;const ci=(0,S.A)(ri,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"attachment",class:{"message-attachment--can-preview":t.canPreview}},[e("div",{staticClass:"mail-attachment-img--wrapper",on:{click:function(e){return t.$emit("open",e)}}},[t.isImage?e("img",{staticClass:"mail-attached-image",attrs:{src:t.url}}):e("img",{staticClass:"attachment-icon",attrs:{src:t.mimeUrl}})]),t._v(" "),e("div",{staticClass:"mail-attached--content",on:{click:function(e){return t.$emit("open",e)}}},[e("span",{staticClass:"attachment-name",attrs:{title:t.label}},[t._v(t._s(t.name)+"\n\t\t")]),t._v(" "),e("span",{staticClass:"attachment-size"},[t._v(t._s(t.humanReadable(t.size)))])]),t._v(" "),t.isFilePickerOpen?e("FilePicker",{attrs:{name:t.t("mail","Choose a folder to store the attachment in"),buttons:t.saveAttachementButtons,"allow-pick-directory":!0,multiselect:!1,"mimetype-filter":["httpd/unix-directory"]},on:{close:()=>t.isFilePickerOpen=!1}}):t._e(),t._v(" "),e("Actions",{attrs:{"boundaries-element":t.boundariesElement}},[t.showCalendarPopover?[e("ActionButton",{on:{click:t.closeCalendarPopover},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconArrow",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Go back"))+"\n\t\t\t")]),t._v(" "),t._l(t.calendarMenuEntries,(function(n){return e("ActionButton",{key:n.text,on:{click:n.action}},[t._v("\n\t\t\t\t"+t._s(n.text)+"\n\t\t\t")])}))]:[t.isCalendarEvent?e("ActionButton",{staticClass:"attachment-import calendar",attrs:{disabled:t.loadingCalendars},on:{click:function(e){return e.stopPropagation(),t.loadCalendars.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loadingCalendars?t.loadingCalendars?e("IconLoading",{attrs:{size:20}}):t._e():e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,3426611203)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Import into calendar"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{staticClass:"attachment-download",on:{click:t.download},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDownload",{attrs:{size:20}})]},proxy:!0}],null,!1,2487097783)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Download attachment"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{staticClass:"attachment-save-to-cloud",attrs:{disabled:t.savingToCloud},on:{click:function(e){return e.stopPropagation(),(()=>t.isFilePickerOpen=!0).apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.savingToCloud?t.savingToCloud?e("IconLoading",{attrs:{size:20}}):t._e():e("IconSave",{attrs:{size:20}})]},proxy:!0}],null,!1,3734485603)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Save to Files"))+"\n\t\t\t")])]],2)],1)}),[],!1,null,"f8592c78",null).exports;var di=a(31629),Ai=a(6961),pi=a(39487);const mi={name:"MessageAttachments",components:{MessageAttachment:ci,IconLoading:i.ne,Download:Ke.A,CloudDownload:di.A,ChevronDown:Ai.A,ChevronUp:pi.A,FilePicker:ti.Z},props:{envelope:{required:!0,type:Object},attachments:{type:Array,required:!0}},data(){return{visible:0,savingToCloud:!1,showPreview:!1,attachmentImageURL:"",hasNextLine:!1,isToggled:!1,saveAttachementButtons:[{label:t("mail","Choose"),callback:this.saveAll,type:"primary"}],isFilePickerOpen:!1}},computed:{fileInfos(){return this.attachments.map((t=>({filename:t.downloadUrl,source:t.downloadUrl,basename:(0,Za.P8)(t.downloadUrl),mime:t.mime,etag:"fixme",hasPreview:!1,fileid:parseInt(t.id,10)})))},previewableFileInfos(){return this.fileInfos.filter((t=>(t.mime.startsWith("image/")||t.mime.startsWith("video/")||t.mime.startsWith("audio/")||"application/pdf"===t.mime)&&OCA.Viewer.mimetypes.includes(t.mime)))},moreThanOne(){return this.attachments.length>1},zipUrl(){return(0,de.Jv)("/apps/mail/api/messages/{id}/attachments",{id:this.envelope.databaseId})}},mounted(){let t=null;this.visible=0,this.$nextTick((function(){this.$refs.attachments&&this.$refs.attachments.some(((e,n)=>{const a=e.$el.getBoundingClientRect().top;return null!==t&&t!==a?(this.isToggled=!0,this.hasNextLine=!0,!0):(t=a,this.visible++,!1)}))}))},methods:{canPreview(t){return this.previewableFileInfos.includes(t)},saveAll(e){const n=e[0].path;this.savingToCloud=!0;const a=this.$route.params.threadId;(0,ei.WN)(a,n).then((()=>{_.A.info("saved"),(0,R.Te)(t("mail","Attachments saved to Files"))})).catch((e=>{_.A.error("not saved",e),(0,R.Qg)(t("mail","Error while saving attachments"))})).finally((()=>{this.savingToCloud=!1}))},downloadZip(){window.location=this.zipUrl},showViewer(t){this.canPreview(t)&&this.previewableFileInfos.includes(t)&&OCA.Viewer.open({fileInfo:t,list:this.previewableFileInfos})}}};var ui=a(75197),hi={};hi.styleTagTransform=v(),hi.setAttributes=m(),hi.insert=A().bind(null,"head"),hi.domAPI=c(),hi.insertStyleElement=h(),s()(ui.A,hi),ui.A&&ui.A.locals&&ui.A.locals;const gi=(0,S.A)(mi,(function(){var t=this,e=t._self._c;return t.attachments.length>0?e("div",{staticClass:"mail-message-attachments",class:t.hasNextLine?"has-next-line":""},[e("div",{staticClass:"mail-message-attachments--wrapper",class:!0===t.hasNextLine&&!0===t.isToggled?"hide":""},[e("div",{staticClass:"attachments"},t._l(t.attachments,(function(n,a){return e("MessageAttachment",{key:n.id,ref:"attachments",refInFor:!0,attrs:{id:n.id,"file-name":n.fileName,size:n.size,url:n.downloadUrl,"is-image":n.isImage,"is-calendar-event":n.isCalendarEvent,mime:n.mime,"mime-url":n.mimeUrl,"can-preview":t.canPreview(t.fileInfos[a])},on:{open:function(e){return t.showViewer(t.fileInfos[a])}}})})),1)]),t._v(" "),t.hasNextLine?e("div",{staticClass:"show-more-attachments",on:{click:function(e){t.isToggled=!t.isToggled}}},[t.isToggled?e("ChevronDown",{attrs:{size:20}}):t._e(),t._v(" "),t.isToggled?t._e():e("ChevronUp",{attrs:{size:20}}),t._v(" "),t.isToggled?e("span",[t._v("\n\t\t\t"+t._s(t.n("mail","View {count} more attachment","View {count} more attachments",t.attachments.length-t.visible,{count:t.attachments.length-t.visible}))+"\n\t\t")]):e("span",[t._v("\n\t\t\t"+t._s(t.t("mail","View fewer attachments"))+"\n\t\t")])],1):t._e(),t._v(" "),t.moreThanOne?e("p",{staticClass:"attachments-button-wrapper"},[t.isFilePickerOpen?e("FilePicker",{attrs:{name:t.t("mail","Choose a folder to store the attachments in"),buttons:t.saveAttachementButtons,"allow-pick-directory":!0,multiselect:!1,"mimetype-filter":["httpd/unix-directory"]},on:{close:()=>t.isFilePickerOpen=!1}}):t._e(),t._v(" "),e("span",{staticClass:"attachment-link",attrs:{disabled:t.savingToCloud},on:{click:()=>t.isFilePickerOpen=!0}},[t.savingToCloud?e("IconLoading",{staticClass:"spin",attrs:{size:18}}):e("CloudDownload",{attrs:{size:18}}),t._v("\n\t\t\t"+t._s(t.t("mail","Save all to Files"))+"\n\t\t")],1),t._v(" "),e("span",{staticClass:"attachment-link",on:{click:t.downloadZip}},[e("Download",{attrs:{size:18}}),t._v("\n\t\t\t"+t._s(t.t("mail","Download Zip"))+"\n\t\t")],1)],1):t._e()]):t._e()}),[],!1,null,null,null).exports,vi={name:"PhishingWarning",components:{IconAlertOutline:a(72522).A,NcButton:i.x1},props:{phishingData:{required:!0,type:Array}},data:()=>({showMore:!1}),computed:{warnings(){return this.phishingData.filter((t=>t.isPhishing))},linkWarning(){return this.phishingData.find((t=>"Link"===t.type&&t.isPhishing))}}};var Ci=a(82629),fi={};fi.styleTagTransform=v(),fi.setAttributes=m(),fi.insert=A().bind(null,"head"),fi.domAPI=c(),fi.insertStyleElement=h(),s()(Ci.A,fi),Ci.A&&Ci.A.locals&&Ci.A.locals;const bi=(0,S.A)(vi,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"phishing-warning"},[e("div",{staticClass:"phishing-warning__title"},[e("IconAlertOutline",{attrs:{size:20,title:t.t("mail","Phishing email")}}),t._v("\n\t\t"+t._s(t.t("mail","This email might be a phishing attempt"))+"\n\t")],1),t._v(" "),t._l(t.warnings,(function(n,a){return e("ul",{key:a,staticClass:"phishing-warning__list"},[e("li",{staticClass:"phishing-warning__list__item"},[t._v("\n\t\t\t"+t._s(n.message)+"\n\t\t")])])})),t._v(" "),void 0!==t.linkWarning?e("div",{staticClass:"phishing-warning__links"},[e("NcButton",{staticClass:"warning__links__button",attrs:{type:"tertiary"},on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n\t\t\t"+t._s(t.showMore?t.t("mail","Hide suspicious links"):t.t("mail","Show suspicious links"))+"\n\t\t")]),t._v(" "),t.showMore?e("div",t._l(t.linkWarning.additionalData,(function(n,a){return e("ul",{key:a,staticClass:"phishing-warning__list"},[e("li",{staticClass:"phishing-warning__list__item",attrs:{dir:"auto"}},[e("b",[t._v("href: ")]),t._v(t._s(n.href)+" "),e("b",[t._v(t._s(t.t("mail","link text"))+":")]),t._v(" "+t._s(n.linkText)+"\n\t\t\t\t")])])})),0):t._e()],1):t._e()],2)}),[],!1,null,"0378b788",null).exports;var yi=a(39679),xi=a(1468);const _i={name:"MdnRequest",components:{NcButton:i.x1},props:{message:{required:!0,type:Object}},data(){return{hasMdnRequest:this.message.dispositionNotificationTo&&this.message.dispositionNotificationTo.length>0,loading:!1}},computed:{...(0,_t.n2)(xt.A),mdnSent(){return this.message.flags.mdnsent}},methods:{async sendMdn(){this.loading=!0,_.A.debug("send return receipt");try{await(0,xi.mY)(this.message.databaseId),this.mainStore.flagEnvelopeMutation({envelope:this.message,flag:"mdnsent",value:!0})}catch(e){_.A.error("could not send mdn",e),(0,R.Qg)(t("mail","Could not send mdn"))}this.loading=!1}}};var wi=a(29570),ki={};ki.styleTagTransform=v(),ki.setAttributes=m(),ki.insert=A().bind(null,"head"),ki.domAPI=c(),ki.insertStyleElement=h(),s()(wi.A,ki),wi.A&&wi.A.locals&&wi.A.locals;const Ii=(0,S.A)(_i,(function(){var t=this,e=t._self._c;return t.hasMdnRequest&&!t.mdnSent?e("div",{staticClass:"mail-message-has-mdn-request"},[t._v("\n\t"+t._s(t.t("mail","The sender of this message has asked to be notified when you read this message."))+"\n\t"),e("div",{staticClass:"notify-button"},[e("NcButton",{attrs:{type:"secondary",disabled:t.loading},on:{click:t.sendMdn}},[t._v("\n\t\t\t"+t._s(t.t("mail","Notify the sender"))+"\n\t\t")])],1)]):t.mdnSent?e("div",{staticClass:"mail-message-has-mdn-request"},[t._v("\n\t"+t._s(t.t("mail","You sent a read confirmation to the sender of this message."))+"\n")]):t._e()}),[],!1,null,"240bd3b7",null).exports,Si={name:"MessageEncryptedBody",components:{MdnRequest:Ii},props:{body:{type:String,required:!0},from:{type:String,required:!1,default:void 0},message:{required:!0,type:Object}},data:()=>({mailvelope:!1}),async mounted(){this.mailvelope=await(0,yi.J)(),this.mailvelope.createDisplayContainer("#mail-content",this.body,void 0,{senderAddress:this.from})}};var Ti=a(22812),Di={};Di.styleTagTransform=v(),Di.setAttributes=m(),Di.insert=A().bind(null,"head"),Di.domAPI=c(),Di.insertStyleElement=h(),s()(Ti.A,Di),Ti.A&&Ti.A.locals&&Ti.A.locals;const Bi=(0,S.A)(Si,(function(){var t=this,e=t._self._c;return e("div",[t.mailvelope?e("div",{attrs:{id:"mail-content"}},[e("MdnRequest",{attrs:{message:t.message}})],1):e("span",[t._v(t._s(t.t("mail","This message is encrypted with PGP. Install Mailvelope to decrypt it.")))])])}),[],!1,null,"4cdc070e",null).exports;var Mi=a(55113),Ei=a.n(Mi),Fi=a(7458),zi=a(37528);const Pi={name:"NeedsTranslationInfo",components:{NcButton:i.x1},props:{isHtml:{type:Boolean,required:!0}},computed:{...(0,_t.aH)(xt.A,{availableOutputLanguages:"translationOutputLanguages"}),localLanguage(){return this.availableOutputLanguages.find((t=>t.value===(0,Lt.Z0)()))?.name||"English"}}};var Ni=a(45111),Li={};Li.styleTagTransform=v(),Li.setAttributes=m(),Li.insert=A().bind(null,"head"),Li.domAPI=c(),Li.insertStyleElement=h(),s()(Ni.A,Li),Ni.A&&Ni.A.locals&&Ni.A.locals;const Oi=(0,S.A)(Pi,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"needs-translation-info",class:{"needs-translation-info--html":t.isHtml}},[t._v("\n\t"+t._s(t.t("mail","Translate this message to {language}",{language:t.localLanguage}))+"\n\t"),e("NcButton",{attrs:{type:"tertiary"},on:{click:function(e){return t.$emit("translate")}}},[t._v("\n\t\t"+t._s(t.t("mail","Translate"))+"\n\t")])],1)}),[],!1,null,"648f74b8",null).exports;var qi=a(44251),$i=a(92316);const Gi=new Fi.A,ji={name:"MessageHTMLBody",components:{MdnRequest:Ii,NeedsTranslationInfo:Oi,Actions:i.B6,ActionButton:i.Ko,IconImage:qi.A,IconMail:$.A,IconDomain:$i.A},props:{url:{type:String,required:!0},fullHeight:{type:Boolean,required:!1,default:!1},message:{required:!0,type:Object}},data(){return{hasBlockedContent:!1,isSenderTrusted:this.message.isSenderTrusted,needsTranslation:!1,enabledFreePrompt:(0,Be.C)("mail","llm_freeprompt_available",!1)}},computed:{sender(){return this.message.from[0]?.email},domain(){return this.sender?.split("@").pop()}},beforeMount(){Gi.on("beforeprint",this.onBeforePrint)},async mounted(){Ei()({license:"GPLv3",log:!1,scrolling:!1},this.$refs.iframe),this.enabledFreePrompt&&this.message&&(this.needsTranslation=await Ee(this.message.databaseId))},beforeDestroy(){Gi.off("beforeprint",this.onBeforePrint),this.$refs.iframe.iFrameResizer.close()},methods:{getIframeDoc(){const t=this.$refs.iframe;return t.contentDocument||t.contentWindow.document},onMessageFrameLoad(){const t=this.getIframeDoc();this.hasBlockedContent=t.querySelectorAll("[data-original-src]").length>0||t.querySelectorAll("[data-original-style]").length>0||t.querySelectorAll("style[data-original-content]").length>0,this.$emit("load"),this.isSenderTrusted&&this.displayIframe()},onBeforePrint(){},displayIframe(){const t=this.getIframeDoc();_.A.debug("showing external images"),t.querySelectorAll("[data-original-src]").forEach((t=>{t.style.display=null,t.setAttribute("src",t.getAttribute("data-original-src"))})),t.querySelectorAll("[data-original-style]").forEach((t=>t.setAttribute("style",t.getAttribute("data-original-style")))),t.querySelectorAll("style[data-original-content]").forEach((t=>{t.innerHTML=t.getAttribute("data-original-content")})),this.hasBlockedContent=!1},async onShowBlockedContent(){this.displayIframe(),await(0,zi.I)(this.message.from[0].email,"individual",!0)},async onShowBlockedContentForDomain(){this.displayIframe(),await(0,zi.I)(this.domain,"domain",!0)}}};var Ui=a(56524),Ri={};Ri.styleTagTransform=v(),Ri.setAttributes=m(),Ri.insert=A().bind(null,"head"),Ri.domAPI=c(),Ri.insertStyleElement=h(),s()(Ui.A,Ri),Ui.A&&Ui.A.locals&&Ui.A.locals;const Wi=(0,S.A)(ji,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"html-message-body"},[e("MdnRequest",{attrs:{message:t.message}}),t._v(" "),t.needsTranslation?e("NeedsTranslationInfo",{attrs:{"is-html":!0},on:{translate:function(e){return t.$emit("translate")}}}):t._e(),t._v(" "),t.hasBlockedContent?e("div",{staticStyle:{color:"#000000"},attrs:{id:"mail-message-has-blocked-content"}},[t._v("\n\t\t"+t._s(t.t("mail","The images have been blocked to protect your privacy."))+"\n\t\t"),e("Actions",{attrs:{type:"tertiary","menu-name":t.t("mail","Show images")}},[e("ActionButton",{on:{click:t.displayIframe},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconImage",{attrs:{size:20}})]},proxy:!0}],null,!1,1558549604)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Show images temporarily"))+"\n\t\t\t")]),t._v(" "),t.sender?e("ActionButton",{on:{click:t.onShowBlockedContent},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail",{attrs:{size:20}})]},proxy:!0}],null,!1,212336778)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Always show images from {sender}",{sender:t.sender}))+"\n\t\t\t")]):t._e(),t._v(" "),t.domain?e("ActionButton",{on:{click:t.onShowBlockedContentForDomain},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDomain",{attrs:{size:20}})]},proxy:!0}],null,!1,1878072675)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Always show images from {domain}",{domain:t.domain}))+"\n\t\t\t")]):t._e()],1)],1):t._e(),t._v(" "),e("div",{class:{scroll:!t.fullHeight},attrs:{id:"message-container"}},[e("iframe",{ref:"iframe",staticClass:"message-frame",attrs:{title:t.t("mail","Message frame"),src:t.url,seamless:""},on:{load:t.onMessageFrameLoad}})])],1)}),[],!1,null,"1d99693e",null).exports,Vi=/(.+\n\r?)+(\n\r?)+/,Yi={name:"MessagePlainTextBody",components:{MdnRequest:Ii,NeedsTranslationInfo:Oi},props:{body:{type:String,required:!0},signature:{type:String,default:()=>{}},message:{required:!0,type:Object}},data:()=>({needsTranslation:!1,enabledFreePrompt:(0,Be.C)("mail","llm_freeprompt_available",!1)}),computed:{enhancedBody(){return this.body.replace(/(^&gt;.*\n)+/gm,(e=>`<details class="quoted-text"><summary>${t("mail","Quoted text")}</summary>${e}</details>`))},signatureSummaryAndBody(){const t=this.signature.trim().match(Vi);if(t&&t[0])return{summary:t[0],body:this.signature.substring(t[0].length)};const e=this.signature.trim().split(/\r?\n/);return{summary:e[0],body:e.slice(1).join("\n")}},signatureSummary(){return console.info(this.signature.match(Vi)),this.signatureSummaryAndBody.summary}},async mounted(){this.enabledFreePrompt&&this.message&&(this.needsTranslation=await Ee(this.message.databaseId))},methods:{nl2br:t=>t.replace(/(\r\n|\n\r|\n|\r)/g,"<br />")}},Hi=Yi;var Qi=a(65901),Ki={};Ki.styleTagTransform=v(),Ki.setAttributes=m(),Ki.insert=A().bind(null,"head"),Ki.domAPI=c(),Ki.insertStyleElement=h(),s()(Qi.A,Ki),Qi.A&&Qi.A.locals&&Qi.A.locals;var Ji=a(57677),Xi={};Xi.styleTagTransform=v(),Xi.setAttributes=m(),Xi.insert=A().bind(null,"head"),Xi.domAPI=c(),Xi.insertStyleElement=h(),s()(Ji.A,Xi),Ji.A&&Ji.A.locals&&Ji.A.locals;const Zi=(0,S.A)(Hi,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"mail-content"}},[t.needsTranslation?e("NeedsTranslationInfo",{attrs:{"is-html":!1},on:{translate:function(e){return t.$emit("translate")}}}):t._e(),t._v(" "),e("MdnRequest",{attrs:{message:t.message}}),t._v(" "),e("div",{attrs:{id:"message-container"},domProps:{innerHTML:t._s(t.nl2br(t.enhancedBody))}}),t._v(" "),t.signature?e("details",{staticClass:"mail-signature"},[e("summary",{domProps:{innerHTML:t._s(t.nl2br(t.signatureSummaryAndBody.summary))}}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.nl2br(t.signatureSummaryAndBody.body))}})]):t._e()],1)}),[],!1,null,"55ac0e45",null).exports;var to=a(76541),eo=a(7301);function no(t){return t.startsWith("mailto:")||t.startsWith("MAILTO:")?t.substring(7):t}function ao(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function io(t){const e=t.timezoneId;if(e&&"floating"!==e)return(0,ie.b4)(e)}const oo={name:"EventData",components:{AccountMultipleIcon:to.A,CalendarIcon:J.A,MapMarkerIcon:eo.A},props:{event:{type:Object,required:!0}},computed:{title(){return this.event.title||this.t("mail","Untitled event")},startDate(){return this.event.isAllDay()?(0,vt.A)(this.event.startDate.jsDate).format("ll"):(0,vt.A)(this.event.startDate.jsDate).format("ll LT")},endDate(){const t=this.event.startDate.jsDate,e=this.event.endDate.jsDate;let n;if(this.event.isAllDay()){if(e.setDate(e.getDate()-1),ao(t,e))return;n=(0,vt.A)(e).format("ll")}else n=ao(t,e)?(0,vt.A)(e).format("LT"):(0,vt.A)(e).format("ll LT");return n},startTimezone(){return io(this.event.startDate)},endTimezone(){return io(this.event.endDate)},location(){return this.event.location},attendees(){const t=[];for(const e of[...this.event.getPropertyIterator("ORGANIZER"),...this.event.getAttendeeIterator()]){const n=e.commonName??no(e.email),a=e.isOrganizer(),i=(a?"organizer_":"attendee_")+n;t.push({name:n,isOrganizer:a,key:i})}return t}}};var ro=a(85863),so={};so.styleTagTransform=v(),so.setAttributes=m(),so.insert=A().bind(null,"head"),so.domAPI=c(),so.insertStyleElement=h(),s()(ro.A,so),ro.A&&ro.A.locals&&ro.A.locals;const lo=(0,S.A)(oo,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"event-data"},[e("h2",{staticClass:"event-data__heading"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]),t._v(" "),e("div",{staticClass:"event-data__row event-data__row--date"},[e("CalendarIcon",{staticClass:"event-data__row__icon",attrs:{size:20}}),t._v(" "),e("div",[t._v("\n\t\t\t"+t._s(t.startDate)+"\n\t\t\t"),t.startTimezone&&t.startTimezone!==t.endTimezone?e("span",{staticClass:"muted"},[t._v("\n\t\t\t\t"+t._s(t.startTimezone)+"\n\t\t\t")]):t._e(),t._v(" "),t.endDate?[e("span",[t._v(" - ")]),t._v("\n\t\t\t\t"+t._s(t.endDate)+"\n\t\t\t\t"),t.endTimezone?e("span",{staticClass:"muted"},[t._v(t._s(t.endTimezone))]):t._e()]:t._e()],2)],1),t._v(" "),t.location?e("div",{staticClass:"event-data__row event-data__row--location"},[e("MapMarkerIcon",{staticClass:"event-data__row__icon",attrs:{size:20}}),t._v(" "),e("span",[t._v(t._s(t.location))])],1):t._e(),t._v(" "),e("div",{staticClass:"event-data__row event-data__row--participants"},[e("AccountMultipleIcon",{staticClass:"event-data__row__icon",attrs:{size:20}}),t._v(" "),e("ul",t._l(t.attendees,(function(n){let{name:a,isOrganizer:i,key:o}=n;return e("li",{key:o},[t._v("\n\t\t\t\t"+t._s(a)+"\n\t\t\t\t"),i?e("span",{staticClass:"muted"},[t._v(t._s(t.t("mail","(organizer)")))]):t._e()])})),0)],1)])}),[],!1,null,"b537fd88",null).exports;var co=a(32273),Ao=a(10362),po=a(9078),mo=a(3665);const uo="NEEDS-ACTION",ho="ACCEPTED",go="TENTATIVE",vo="DECLINED";function Co(t,e){if(t){e=no(e);for(const n of[...t.getPropertyIterator("ORGANIZER"),...t.getAttendeeIterator()])if(no(n.email)===e)return n}}const fo={name:"Imip",components:{CalendarIcon:J.A,CalendarPickerOption:De,CloseIcon:Rn.A,EventData:lo,NcButton:i.x1,NcLoadingIcon:i.ne,NcSelect:i.EQ},props:{scheduling:{type:Object,required:!0}},data:()=>({NEEDS_ACTION:uo,ACCEPTED:ho,TENTATIVE:go,DECLINED:vo,commentFieldId:(0,Ao.z)(),targetCalendarPickerId:(0,Ao.z)(),showMoreOptions:!1,loading:!1,existingEvent:void 0,existingEventFetched:!1,targetCalendar:void 0,comment:""}),computed:{...(0,_t.aH)(xt.A,{currentUserPrincipalEmail:"getCurrentUserPrincipalEmail",clonedWriteableCalendars:"getClonedWriteableCalendars",currentUserPrincipal:"getCurrentUserPrincipal"}),method(){return this.scheduling.method},isRequest(){return"REQUEST"===this.method},isReply(){return"REPLY"===this.method},isCancel(){return"CANCEL"===this.method},isExistingEvent(){return!!this.existingEvent},wasProcessed(){return!!this.existingParticipationStatus&&this.existingParticipationStatus!==uo},attachedVCalendar(){const t=(0,ae.zc)().getParserForFileType("text/calendar");return t.parse(this.scheduling.contents),t.getItemIterator().next().value??void 0},attachedVEvent(){return this.attachedVCalendar?.getFirstComponent("VEVENT")??void 0},existingVCalendar(){if(!this.existingEvent)return;const t=(0,ae.zc)().getParserForFileType("text/calendar");return t.parse(this.existingEvent.data),t.getItemIterator().next().value??void 0},existingVEvent(){return this.existingVCalendar?.getFirstComponent("VEVENT")??void 0},eventIsInFuture(){if(this.attachedVEvent.isRecurring()){const t=this.attachedVEvent.recurrenceManager.getClosestOccurrence(ae.Z4.fromJSDate(new Date));return void 0!==t&&t.startDate.jsDate.getTime()>(new Date).getTime()}return this.attachedVEvent.startDate.jsDate.getTime()>(new Date).getTime()},userIsAttendee(){return!!Co(this.attachedVEvent,this.currentUserPrincipalEmail)},existingParticipationStatus(){const t=Co(this.existingVEvent,this.currentUserPrincipalEmail);return t?.participationStatus??void 0},replyStatusMessage(){const t=this.attachedVEvent?.getAttendeeList();if(!t||1!==t.length)return this.t("mail","This event was updated");const e=t[0],n=e.participationStatus,a=e.commonName??e.email;return n===ho?this.t("mail","{attendeeName} accepted your invitation",{attendeeName:a}):n===go?this.t("mail","{attendeeName} tentatively accepted your invitation",{attendeeName:a}):n===vo?this.t("mail","{attendeeName} declined your invitation",{attendeeName:a}):this.t("mail","{attendeeName} reacted to your invitation",{attendeeName:a})},calendarsForPicker(){return this.clonedWriteableCalendars.map((t=>({displayname:t.displayname,color:t.color??ge(t.displayname??""),order:t.order,components:{vevent:!0},writable:-1!==t.currentUserPrivilegeSet.indexOf("{DAV:}write"),url:t.url}))).filter((t=>t.components.vevent&&!0===t.writable))},targetCalendarDavObject(){return this.clonedWriteableCalendars.find((t=>t.url===this.targetCalendar.url))}},watch:{attachedVEvent:{immediate:!0,async handler(){await this.fetchExistingEvent(this.attachedVEvent.uid)}},calendarsForPicker:{immediate:!0,handler(t){if(this.targetCalendar)return;const e=t.find((t=>t.url===this.currentUserPrincipal.scheduleDefaultCalendarUrl));e?this.targetCalendar=e:t.length>0&&(this.targetCalendar=t[0])}}},methods:{async accept(){await this.saveEventWithParticipationStatus(ho)},async acceptTentatively(){await this.saveEventWithParticipationStatus(go)},async decline(){await this.saveEventWithParticipationStatus(vo)},async saveEventWithParticipationStatus(t){let e;e=this.isExistingEvent?this.existingVCalendar:this.attachedVCalendar;const n=e.getFirstComponent("VEVENT"),a=Co(n,this.currentUserPrincipalEmail);if(!a)return;const i=this.targetCalendarDavObject;if(i){if(this.loading=!0,!this.isExistingEvent)try{await i.createVObject(e.toICS()),await this.fetchExistingEvent(n.uid,!0)}catch(t){(0,R.Qg)(this.t("mail","Failed to save your participation status")),_.A.error("Failed to save event to calendar",{error:t,attendee:a,calendar:i,vEvent:n,vCalendar:e,existingEvent:this.existingEvent})}if(this.isExistingEvent){a.participationStatus=t,this.comment&&(a.setParameter(new ae.kH("X-RESPONSE-COMMENT",this.comment)),n.addProperty(new ae.mA("COMMENT",this.comment)));try{this.existingEvent.data=e.toICS(),await this.existingEvent.update(),this.showMoreOptions=!1}catch(t){(0,R.Qg)(this.t("mail","Failed to save your participation status")),_.A.error("Failed to save event to calendar",{error:t,attendee:a,calendar:i,vEvent:n,vCalendar:e,existingEvent:this.existingEvent})}}await this.fetchExistingEvent(n.uid,!0),this.loading=!1}},async fetchExistingEvent(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.existingEventFetched)return;const e=(0,po.A)(5),n=this.clonedWriteableCalendars.map((async n=>e((()=>n.calendarQuery([{name:[co.r$.IETF_CALDAV,"comp-filter"],attributes:[["name","VCALENDAR"]],children:[{name:[co.r$.IETF_CALDAV,"comp-filter"],attributes:[["name","VEVENT"]],children:[{name:[co.r$.IETF_CALDAV,"prop-filter"],attributes:[["name","UID"]],children:[{name:[co.r$.IETF_CALDAV,"text-match"],value:t}]}]}]}]))))),a=(0,mo.A)(await Promise.all(n));a.length>1&&_.A.warn("Fetched more than one event for iMIP invitation",{results:a}),this.existingEvent=a[0],this.existingEventFetched=!0}}};var bo=a(30748),yo={};yo.styleTagTransform=v(),yo.setAttributes=m(),yo.insert=A().bind(null,"head"),yo.domAPI=c(),yo.insertStyleElement=h(),s()(bo.A,yo),bo.A&&bo.A.locals&&bo.A.locals;const xo=(0,S.A)(fo,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"imip"},[t.isRequest?e("div",{staticClass:"imip__type"},[t.existingEventFetched?[t.wasProcessed&&t.existingParticipationStatus===t.ACCEPTED?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You accepted this invitation"))+"\n\t\t\t")]):t.wasProcessed&&t.existingParticipationStatus===t.TENTATIVE?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You tentatively accepted this invitation"))+"\n\t\t\t")]):t.wasProcessed&&t.existingParticipationStatus===t.DECLINED?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You declined this invitation"))+"\n\t\t\t")]):t.wasProcessed&&t.existingParticipationStatus!==t.NEEDS_ACTION?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You already reacted to this invitation"))+"\n\t\t\t")]):t.userIsAttendee?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You have been invited to an event"))+"\n\t\t\t")]):t._e()]:t._e()],2):t.isReply?e("div",{staticClass:"imip__type"},[e("CalendarIcon",{attrs:{size:20}}),t._v(" "),e("span",[t._v(t._s(t.replyStatusMessage))])],1):t.isCancel?e("div",{staticClass:"imip__type"},[e("CloseIcon",{attrs:{size:20,"fill-color":"red"}}),t._v(" "),e("span",[t._v(t._s(t.t("mail","This event was cancelled")))])],1):t._e(),t._v(" "),e("EventData",{attrs:{event:t.attachedVEvent}}),t._v(" "),t.showMoreOptions?e("div",{staticClass:"imip__more-options"},[t.isExistingEvent?t._e():e("div",{staticClass:"imip__more-options__row imip__more-options__row--calendar"},[e("label",{attrs:{for:"targetCalendarPickerId"}},[t._v(t._s(t.t("mail","Save to")))]),t._v(" "),e("div",{staticClass:"imip__more-options__row"},[t.calendarsForPicker.length>1?e("NcSelect",{attrs:{id:t.targetCalendarPickerId,"aria-label-combobox":t.t("mail","Select"),label:"displayname",options:t.calendarsForPicker},scopedSlots:t._u([{key:"option",fn:function(n){return[e("CalendarPickerOption",t._b({},"CalendarPickerOption",n,!1))]}},{key:"selected-option",fn:function(n){return[e("CalendarPickerOption",t._b({},"CalendarPickerOption",n,!1))]}}],null,!1,690529869),model:{value:t.targetCalendar,callback:function(e){t.targetCalendar=e},expression:"targetCalendar"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"imip__more-options__row imip__more-options__row--comment"},[e("label",{attrs:{for:"commentFieldId"}},[t._v(t._s(t.t("mail","Comment")))]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{id:t.commentFieldId,rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])]):t._e(),t._v(" "),t.isRequest&&t.userIsAttendee?[!t.wasProcessed&&t.eventIsInFuture&&t.existingEventFetched?e("div",{staticClass:"imip__actions imip__actions--buttons"},[e("NcButton",{attrs:{type:"secondary",disabled:t.loading,"aria-label":t.t("mail","Accept")},on:{click:t.accept}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Accept"))+"\n\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"tertiary",disabled:t.loading,"aria-label":t.t("mail","Decline")},on:{click:t.decline}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Decline"))+"\n\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"tertiary",disabled:t.loading,"aria-label":t.t("mail","Tentatively accept")},on:{click:t.acceptTentatively}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Tentatively accept"))+"\n\t\t\t")]),t._v(" "),t.showMoreOptions?t._e():e("NcButton",{attrs:{type:"tertiary",disabled:t.loading,"aria-label":t.t("mail","More options")},on:{click:function(e){t.showMoreOptions=!0}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More options"))+"\n\t\t\t")]),t._v(" "),t.loading?e("NcLoadingIcon"):t._e()],1):t.eventIsInFuture?t._e():e("p",{staticClass:"imip__actions imip__actions--hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","This message has an attached invitation but the invitation dates are in the past"))+"\n\t\t")])]:t._e(),t._v(" "),t.userIsAttendee?t._e():e("div",{staticClass:"imip__actions imip__actions--hint"},[t._v("\n\t\t"+t._s(t.t("mail","This message has an attached invitation but the invitation does not contain a participant that matches any configured mail account address"))+"\n\t")])],2)}),[],!1,null,"69100434",null).exports;var _o=a(91675);const wo={name:"Message",components:{Itinerary:Xa,MessageAttachments:gi,MessageEncryptedBody:Bi,MessageHTMLBody:Wi,MessagePlainTextBody:Zi,PhishingWarning:bi,Imip:xo,LockOffIcon:_o.A,ReplyIcon:Dt.A,NcButton:i.x1},props:{envelope:{required:!0,type:Object},message:{required:!0,type:Object},fullHeight:{required:!1,type:Boolean,default:!1},smartReplies:{required:!1,type:Array,default:()=>[]},replyButtonLabel:{required:!0,type:String}},computed:{...(0,_t.n2)(xt.A),from(){return 0===this.message.from.length?"?":this.message.from[0].label||this.message.from[0].email},htmlUrl(){return(0,de.Jv)("/apps/mail/api/messages/{id}/html",{id:this.envelope.databaseId})},isEncrypted(){return(0,He.y)(this.message.hasHtmlBody?(0,Da.qy)(this.message.body):(0,Da.pj)(this.message.body))},isPgpMimeEncrypted(){return this.message.isPgpMimeEncrypted},itineraries(){return this.message.itineraries??[]},hasCurrentUserPrincipalAndCollections(){return this.mainStore.hasCurrentUserPrincipalAndCollections}},methods:{onReply(t){this.$emit("reply",t)}}};var ko=a(56186),Io={};Io.styleTagTransform=v(),Io.setAttributes=m(),Io.insert=A().bind(null,"head"),Io.domAPI=c(),Io.insertStyleElement=h(),s()(ko.A,Io),ko.A&&ko.A.locals&&ko.A.locals;const So=(0,S.A)(wo,(function(){var t=this,e=t._self._c;return e("div",{class:[t.message.hasHtmlBody?"mail-message-body mail-message-body-html":"mail-message-body"],attrs:{role:"region","aria-label":t.t("mail","Message body")}},[t.message.phishingDetails.warning?e("PhishingWarning",{attrs:{"phishing-data":t.message.phishingDetails.checks}}):t._e(),t._v(" "),t.message.smime.isSigned&&!t.message.smime.signatureIsValid?e("div",{staticClass:"invalid-signature-warning"},[e("LockOffIcon",{staticClass:"invalid-signature-warning__icon",attrs:{size:20,"fill-color":"red"}}),t._v(" "),e("p",[t._v("\n\t\t\t"+t._s(t.t("mail","Warning: The S/MIME signature of this message is  unverified. The sender might be impersonating someone!"))+"\n\t\t")])],1):t._e(),t._v(" "),t.itineraries.length>0?e("div",{staticClass:"message-itinerary"},[e("Itinerary",{attrs:{entries:t.itineraries,"message-id":t.message.messageId}})],1):t._e(),t._v(" "),t.hasCurrentUserPrincipalAndCollections&&t.message.scheduling.length>0?e("div",{staticClass:"message-imip"},t._l(t.message.scheduling,(function(t){return e("Imip",{key:t.id,attrs:{scheduling:t}})})),1):t._e(),t._v(" "),t.message.hasHtmlBody?e("MessageHTMLBody",{attrs:{url:t.htmlUrl,message:t.message,"full-height":t.fullHeight},on:{load:function(e){return t.$emit("load",e)},translate:function(e){return t.$emit("translate")}}}):t.isEncrypted||t.isPgpMimeEncrypted?e("MessageEncryptedBody",{attrs:{body:t.message.body,from:t.from,message:t.message}}):e("MessagePlainTextBody",{attrs:{body:t.message.body,signature:t.message.signature,message:t.message},on:{translate:function(e){return t.$emit("translate")}}}),t._v(" "),e("MessageAttachments",{attrs:{attachments:t.message.attachments,envelope:t.envelope}}),t._v(" "),e("div",{attrs:{id:"reply-composer"}}),t._v(" "),e("div",{staticClass:"reply-buttons"},[t.smartReplies.length>0?e("div",{staticClass:"reply-buttons__suggested"},t._l(t.smartReplies,(function(n,a){return e("NcButton",{key:a,staticClass:"reply-buttons__suggested__button",attrs:{type:"secondary"},on:{click:function(e){return t.onReply(n)}}},[t._v("\n\t\t\t\t"+t._s(n)+"\n\t\t\t")])})),1):t._e(),t._v(" "),e("NcButton",{staticClass:"reply-buttons__notsuggested",attrs:{type:"primary"},on:{click:function(e){return t.onReply("")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ReplyIcon")]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.replyButtonLabel)+"\n\t\t")])],1)],1)}),[],!1,null,"663f27a0",null).exports;var To=a(13293),Do=a(66948),Bo=a(84453),Mo=a(31874),Eo=a(15502),Fo=a(44131),zo=a(80272);const Po={name:"MenuEnvelope",components:{NcActionButton:i.Ko,NcActionInput:Fo.A,NcActionSeparator:Eo.A,CalendarClock:Je.A,ActionButton:i.Ko,ActionLink:i.Ki,AlertOctagonIcon:Q.A,CalendarBlankIcon:Do.A,ChevronLeft:et.A,CheckIcon:tt.A,DotsHorizontalIcon:ot.A,TranslationIcon:Mo.A,DownloadIcon:Ke.A,InformationIcon:q.A,OpenInNewIcon:It.A,PlusIcon:Pt.A,ShareIcon:rn.A,TagIcon:Nt.A,ImportantIcon:rt.A,ImportantOutlineIcon:st.A,TaskIcon:it.A,AlarmIcon:Xe.A,PrinterIcon:Bo.A,FilterIcon:zo.A},props:{envelope:{type:Object,required:!0},mailbox:{type:Object,required:!0},moreActionsOpen:{type:Boolean,required:!1},withSelect:{type:Boolean,default:!0},withShowSource:{type:Boolean,default:!0},isTranslationAvailable:{type:Boolean,required:!1,default:!1}},data(){return{debug:window?.OC?.debug||!1,localMoreActionsOpen:!1,snoozeActionsOpen:!1,forwardMessages:this.envelope.databaseId,customSnoozeDateTime:new Date((0,vt.A)().add(2,"hours").minute(0).second(0).valueOf())}},computed:{...(0,_t.n2)(xt.A),...(0,_t.aH)(xt.A,["isSnoozeDisabled","isTranslationEnabled"]),account(){const t=this.envelope.accountId??this.mailbox.accountId;return this.mainStore.getAccount(t)},hasMultipleRecipients(){this.account||console.error("account is undefined",{accountId:this.envelope.accountId});const t=(0,ut.pz)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},threadingFile(){return`data:text/plain;base64,${To.o4.encode(JSON.stringify({subject:this.envelope.subject,messageId:this.envelope.messageId,inReplyTo:this.envelope.inReplyTo,references:this.envelope.references,threadRootId:this.envelope.threadRootId},null,2))}`},threadingFileName(){return`${this.envelope.databaseId}.json`},showFavoriteIconVariant(){return this.envelope.flags.flagged},showImportantIconVariant(){return this.envelope.flags.seen},isImportant(){return this.mainStore.getEnvelopeTags(this.envelope.databaseId).some((t=>"$label1"===t.imapLabel))},exportMessageLink(){return(0,de.Jv)("/apps/mail/api/messages/{id}/export",{id:this.envelope.databaseId})},hasWriteAcl(){return(0,Qe.w)(this.mailbox,"w")},hasDeleteAcl(){return(0,Qe.w)(this.mailbox,"te")},isSnoozedMailbox(){return this.mailbox.databaseId===this.account.snoozeMailboxId},reminderOptions(){const e=(0,vt.A)(),n=e.hour()<18?(0,vt.A)().hour(18):null,a=(0,vt.A)().add(1,"days").hour(8),i=6!==e.day()&&0!==e.day()?(0,vt.A)().day(6).hour(8):null,o=(0,vt.A)().add(1,"weeks").day(1).hour(8);return[{key:"laterToday",timestamp:this.getTimestamp(n),label:t("spreed","Later today – {timeLocale}",{timeLocale:n?.format("LT")}),ariaLabel:t("spreed","Set reminder for later today")},{key:"tomorrow",timestamp:this.getTimestamp(a),label:t("spreed","Tomorrow – {timeLocale}",{timeLocale:a?.format("ddd LT")}),ariaLabel:t("spreed","Set reminder for tomorrow")},{key:"thisWeekend",timestamp:this.getTimestamp(i),label:t("spreed","This weekend – {timeLocale}",{timeLocale:i?.format("ddd LT")}),ariaLabel:t("spreed","Set reminder for this weekend")},{key:"nextWeek",timestamp:this.getTimestamp(o),label:t("spreed","Next week – {timeLocale}",{timeLocale:o?.format("ddd LT")}),ariaLabel:t("spreed","Set reminder for next week")}].filter((t=>null!==t.timestamp))}},watch:{localMoreActionsOpen(t){this.$emit("update:moreActionsOpen",t)}},methods:{onForward(){this.mainStore.startComposerSession({reply:{mode:"forward",data:this.envelope}})},async onSnooze(e){this.withSelect&&this.$emit("unselect"),_.A.info(`snoozing message ${this.envelope.databaseId}`),this.account.snoozeMailboxId||await this.mainStore.createAndSetSnoozeMailbox(this.account);try{await this.mainStore.snoozeMessage({id:this.envelope.databaseId,unixTimestamp:e/1e3,destMailboxId:this.account.snoozeMailboxId}),(0,R.Te)(t("mail","Message was snoozed"))}catch(e){_.A.error("Could not snooze message",e),(0,R.Qg)(t("mail","Could not snooze message"))}},async onUnSnooze(){this.withSelect&&this.$emit("unselect"),_.A.info(`unSnoozing message ${this.envelope.databaseId}`);try{await this.mainStore.unSnoozeMessage({id:this.envelope.databaseId}),(0,R.Te)(t("mail","Message was unsnoozed"))}catch(e){_.A.error("Could not unsnooze message",e),(0,R.Qg)(t("mail","Could not unsnooze message"))}},onToggleFlagged(){this.mainStore.toggleEnvelopeFlagged(this.envelope)},onToggleImportant(){this.mainStore.toggleEnvelopeImportant(this.envelope)},onToggleSeen(){this.mainStore.toggleEnvelopeSeen({envelope:this.envelope})},async onToggleJunk(){const t=await this.mainStore.moveEnvelopeToJunk(this.envelope);t&&await this.$emit("delete",this.envelope.databaseId),await this.mainStore.toggleEnvelopeJunk({envelope:this.envelope,removeEnvelope:t})},toggleSelected(){this.$emit("update:selected")},async forwardSelectedAsAttachment(){await this.mainStore.startComposerSession({forwardedMessages:[this.envelope.databaseId]})},onReply(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.mainStore.startComposerSession({reply:{mode:t?"reply":"replyAll",data:this.envelope}})},async onOpenEditAsNew(){await this.mainStore.startComposerSession({templateMessageId:this.envelope.databaseId,data:this.envelope})},getTimestamp:t=>t?.minute(0).second(0).millisecond(0).valueOf()||null,setCustomSnoozeDateTime(t){this.customSnoozeDateTime=new Date(t.target.value)},setCustomSnooze(){this.onSnooze(this.customSnoozeDateTime.valueOf())},onPrint(){this.$emit("print")},isSieveEnabled(){return this.account.sieveEnabled}}};var No=a(97470),Lo={};Lo.styleTagTransform=v(),Lo.setAttributes=m(),Lo.insert=A().bind(null,"head"),Lo.domAPI=c(),Lo.insertStyleElement=h(),s()(No.A,Lo),No.A&&No.A.locals&&No.A.locals;const Oo=(0,S.A)(Po,(function(){var t=this,e=t._self._c;return e("div",[t.localMoreActionsOpen||t.snoozeActionsOpen?t._e():[t.hasWriteAcl?e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleImportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.isImportant?e("ImportantIcon",{attrs:{size:20}}):e("ImportantOutlineIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1676296838)},[t._v("\n\t\t\t"+t._s(t.isImportant?t.t("mail","Unimportant"):t.t("mail","Important"))+"\n\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onForward},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{title:t.t("mail","Forward"),size:20}})]},proxy:!0}],null,!1,3681882419)},[t._v("\n\t\t\t"+t._s(t.t("mail","Forward"))+"\n\t\t")]),t._v(" "),t.hasWriteAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{title:t.envelope.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"),size:20}})]},proxy:!0}],null,!1,3018406441)},[t._v("\n\t\t\t"+t._s(t.envelope.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"))+"\n\t\t")]):t._e(),t._v(" "),t.hasWriteAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.$emit("open-tag-modal")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TagIcon",{attrs:{title:t.t("mail","Edit tags"),size:20}})]},proxy:!0}],null,!1,1760434282)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit tags"))+"\n\t\t")]):t._e(),t._v(" "),t.hasDeleteAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.$emit("open-move-modal")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{title:t.t("mail","Move message"),size:20}})]},proxy:!0}],null,!1,3082800176)},[t._v("\n\t\t\t"+t._s(t.t("mail","Move message"))+"\n\t\t")]):t._e(),t._v(" "),t.isSnoozeDisabled||t.isSnoozedMailbox?t._e():e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.snoozeActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlarmIcon",{attrs:{title:t.t("mail","Snooze"),size:20}})]},proxy:!0}],null,!1,42024148)},[t._v("\n\t\t\t"+t._s(t.t("mail","Snooze"))+"\n\t\t")]),t._v(" "),!t.isSnoozeDisabled&&t.isSnoozedMailbox?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onUnSnooze},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlarmIcon",{attrs:{title:t.t("mail","Unsnooze"),size:20}})]},proxy:!0}],null,!1,2733502479)},[t._v("\n\t\t\t"+t._s(t.t("mail","Unsnooze"))+"\n\t\t")]):t._e(),t._v(" "),t.isTranslationEnabled?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.$emit("open-translation-modal")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TranslationIcon",{attrs:{title:t.t("mail","Translate"),size:20}})]},proxy:!0}],null,!1,2338376456)},[t._v("\n\t\t\t"+t._s(t.t("mail","Translate"))+"\n\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.localMoreActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{title:t.t("mail","More actions"),size:20}})]},proxy:!0}],null,!1,2458825807)},[t._v("\n\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t")])],t._v(" "),t.localMoreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.localMoreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{title:t.t("mail","More actions"),size:20}}),t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")]},proxy:!0}],null,!1,2840017423)}),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.forwardSelectedAsAttachment.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{title:t.t("mail","Forward message as attachment"),size:20}})]},proxy:!0}],null,!1,1446130195)},[t._v("\n\t\t\t"+t._s(t.t("mail","Forward message as attachment"))+"\n\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onOpenEditAsNew},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon",{attrs:{title:t.t("mail","Edit as new message"),size:20}})]},proxy:!0}],null,!1,2673016614)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit as new message"))+"\n\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.$emit("open-event-modal")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarBlankIcon",{attrs:{title:t.t("mail","Create event"),size:20}})]},proxy:!0}],null,!1,3283461621)},[t._v("\n\t\t\t"+t._s(t.t("mail","Create event"))+"\n\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.$emit("open-task-modal")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TaskIcon",{attrs:{title:t.t("mail","Create task"),size:20}})]},proxy:!0}],null,!1,844163649)},[t._v("\n\t\t\t"+t._s(t.t("mail","Create task"))+"\n\t\t")]),t._v(" "),t.withShowSource?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.$emit("show-source-modal")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("InformationIcon",{attrs:{title:t.t("mail","View source"),size:20}})]},proxy:!0}],null,!1,3604652729)},[t._v("\n\t\t\t"+t._s(t.t("mail","View source"))+"\n\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onPrint},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PrinterIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1028229861)},[t._v("\n\t\t\t"+t._s(t.t("mail","Print message"))+"\n\t\t")]),t._v(" "),e("ActionLink",{attrs:{"close-after-click":!0,href:t.exportMessageLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DownloadIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2598526839)},[t._v("\n\t\t\t"+t._s(t.t("mail","Download message"))+"\n\t\t")]),t._v(" "),t.isSieveEnabled?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.$emit("open-mail-filter-from-envelope")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("FilterIcon",{attrs:{title:t.t("mail","Create mail filter"),size:20}})]},proxy:!0}],null,!1,2817250184)},[t._v("\n\t\t\t"+t._s(t.t("mail","Create mail filter"))+"\n\t\t")]):t._e(),t._v(" "),t.debug?e("ActionLink",{attrs:{download:t.threadingFileName,href:t.threadingFile,"close-after-click":!0},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DownloadIcon",{attrs:{title:t.t("mail","Download thread data for debugging"),size:20}})]},proxy:!0}],null,!1,1608243158)},[t._v("\n\t\t\t"+t._s(t.t("mail","Download thread data for debugging"))+"\n\t\t")]):t._e()]:t._e(),t._v(" "),t.snoozeActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.snoozeActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{size:20}})]},proxy:!0}],null,!1,3117353720)},[t._v("\n\t\t\t"+t._s(t.t("mail","Back"))+"\n\t\t")]),t._v(" "),t._l(t.reminderOptions,(function(n){return e("ActionButton",{key:n.key,attrs:{"aria-label":n.ariaLabel,"close-after-click":""},on:{click:function(e){return e.stopPropagation(),t.onSnooze(n.timestamp)}}},[t._v("\n\t\t\t"+t._s(n.label)+"\n\t\t")])})),t._v(" "),e("NcActionSeparator"),t._v(" "),e("NcActionInput",{attrs:{type:"datetime-local","is-native-picker":"",value:t.customSnoozeDateTime,min:new Date},on:{change:t.setCustomSnoozeDateTime},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarClock",{attrs:{size:20}})]},proxy:!0}],null,!1,1325980530)}),t._v(" "),e("NcActionButton",{attrs:{"aria-label":t.t("spreed","Set custom snooze"),"close-after-click":""},on:{click:function(e){return e.stopPropagation(),t.setCustomSnooze(t.customSnoozeDateTime)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2630571749)},[t._v("\n\t\t\t"+t._s(t.t("spreed","Set custom snooze"))+"\n\t\t")])]:t._e()],2)}),[],!1,null,"8cf2daa6",null).exports,qo={name:"Moment",props:{timestamp:{type:Number,required:!0},format:{type:String,default:"LLL"}},computed:{title(){return vt.A.unix(this.timestamp).format(this.format)},formatted(){return Ct(new Date(1e3*this.timestamp))}}},$o=(0,S.A)(qo,(function(){var t=this;return(0,t._self._c)("span",{attrs:{"data-timestamp":1e3*t.timestamp,title:t.title}},[t._v(t._s(t.formatted))])}),[],!1,null,null,null).exports;var Go=a(81972),jo=a(73110),Uo=a(24764),Ro=a(55925),Wo=a(38210),Vo=a(57601),Yo=a(8763);const Ho={name:"TranslationModal",components:{NcButton:i.x1,NcDialog:i.i$,NcLoadingIcon:i.ne,NcRichText:i.z4,NcSelect:i.EQ,ArrowRight:$a.A,ContentCopy:Vo.A},props:{message:{type:String,required:!0},richParameters:{type:Object,required:!0}},emits:["close"],data:()=>({isMounted:!1,selectedFrom:null,selectedTo:null,isLoading:!1,translatedMessage:""}),computed:{...(0,_t.aH)(xt.A,{availableInputLanguages:"translationInputLanguages",availableOutputLanguages:"translationOutputLanguages"}),userLanguage:()=>(0,Lt.Z0)()},watch:{selectedTo(){this.translatedMessage=""},selectedFrom(){this.translatedMessage=""}},async mounted(){this.selectedTo=this.availableOutputLanguages.find((t=>t.value===this.userLanguage))||null,this.selectedFrom=this.availableInputLanguages.find((t=>"detect_language"===t.value)),this.$nextTick((()=>{this.isMounted=!!this.$refs.translateDialog.navigationId}))},methods:{handleTranslate(){this.selectedFrom&&this.selectedTo?this.translateMessage():(0,R.Qg)(t("mail","Please select languages to translate to and from"))},async translateMessage(){try{this.isLoading=!0;const t=await(0,Yo.s)(this.message.trim(),this.selectedFrom.value,this.selectedTo.value);this.translatedMessage=t}catch(e){console.error(e),(0,R.Qg)(e.response?.data?.ocs?.data?.message??t("mail","The message could not be translated"))}finally{this.isLoading=!1}},async handleCopyTranslation(){try{await navigator.clipboard.writeText(this.translatedMessage),(0,R.Te)(t("mail","Translation copied to clipboard"))}catch(e){(0,R.Qg)(t("mail","Translation could not be copied"))}}}};var Qo=a(32684),Ko={};Ko.styleTagTransform=v(),Ko.setAttributes=m(),Ko.insert=A().bind(null,"head"),Ko.domAPI=c(),Ko.insertStyleElement=h(),s()(Qo.A,Ko),Qo.A&&Qo.A.locals&&Qo.A.locals;const Jo=(0,S.A)(Ho,(function(){var t=this,e=t._self._c;return e("NcDialog",{ref:"translateDialog",staticClass:"translate-dialog",attrs:{name:t.t("mail","Translate message"),size:"large","close-on-click-outside":""},on:{"update:open":function(e){return t.$emit("close")}},scopedSlots:t._u([t.isMounted?{key:"default",fn:function(){return[e("div",{staticClass:"translate-dialog__wrapper"},[e("NcSelect",{staticClass:"translate-dialog__select",attrs:{"input-id":"from",label:"name","aria-label-combobox":t.t("mail","Source language to translate from"),placeholder:t.t("mail","Translate from"),options:t.availableInputLanguages,"no-wrap":""},model:{value:t.selectedFrom,callback:function(e){t.selectedFrom=e},expression:"selectedFrom"}}),t._v(" "),e("ArrowRight"),t._v(" "),e("NcSelect",{staticClass:"translate-dialog__select",attrs:{"input-id":"to",label:"name","aria-label-combobox":t.t("spreed","Target language to translate into"),placeholder:t.t("mail","Translate to"),options:t.availableOutputLanguages,"no-wrap":""},model:{value:t.selectedTo,callback:function(e){t.selectedTo=e},expression:"selectedTo"}}),t._v(" "),e("NcButton",{staticClass:"translate-dialog__button",attrs:{type:"primary",disabled:t.isLoading},on:{click:t.handleTranslate},scopedSlots:t._u([t.isLoading?{key:"icon",fn:function(){return[e("NcLoadingIcon")]},proxy:!0}:null],null,!0)},[t._v("\n\t\t\t\t"+t._s(t.isLoading?t.t("mail","Translating"):t.t("mail","Translate"))+"\n\t\t\t")])],1),t._v(" "),e("NcRichText",{staticClass:"translate-dialog__message translate-dialog__message-source",attrs:{text:t.message,arguments:t.richParameters,"use-markdown":!0,"reference-limit":0}}),t._v(" "),t.translatedMessage?e("NcRichText",{staticClass:"translate-dialog__message translate-dialog__message-translation",attrs:{text:t.translatedMessage,arguments:t.richParameters,"use-markdown":!0,"reference-limit":0}}):t._e()]},proxy:!0}:null,t.translatedMessage?{key:"actions",fn:function(){return[e("NcButton",{on:{click:t.handleCopyTranslation},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ContentCopy")]},proxy:!0}],null,!1,1967269327)},[t._v("\n\t\t\t"+t._s(t.t("mail","Copy translated text"))+"\n\t\t")])]},proxy:!0}:null],null,!0)})}),[],!1,null,"7b7cbb5d",null).exports;var Xo=a(56872),Zo=a(66214),tr=a(83957),er=a(42702);const nr={name:"CreateModal",components:{NcModal:i.FH,NcCheckboxRadioSwitch:i.AO,IconCheck:tt.A,NcLoadingIcon:i.ne,NcButton:i.x1},props:{account:{type:Object,required:!0},envelope:{type:Object,required:!0},loading:{type:Boolean,required:!1}},data:()=>({currentFilter:null,headers:[]}),computed:{...(0,_t.n2)(tr.A,xt.A)},async mounted(){this.prepareHeaders()},methods:{prepareHeaders(){this.headers=[],this.headers.push({field:er.xj.Subject,value:this.envelope.subject,label:t("mail","Subject")+": "+this.envelope.subject,enable:!0,key:btoa("subject"+this.envelope.subject)});for(const e of this.envelope.from)this.headers.push({field:er.xj.From,value:e.email,label:t("mail","Sender")+": "+e.email,enable:!0,key:btoa("from"+e.email)});for(const e of this.envelope.to)this.headers.push({field:er.xj.To,value:e.email,label:t("mail","Recipient")+": "+e.email,enable:!0,key:btoa("to"+e.email)})},createFilter(){const t=structuredClone(this.headers).filter((t=>t.enable));this.$emit("create-filter",t)},closeModal(){this.headers=[],this.$emit("close")}}};var ar=a(62110),ir={};ir.styleTagTransform=v(),ir.setAttributes=m(),ir.insert=A().bind(null,"head"),ir.domAPI=c(),ir.insertStyleElement=h(),s()(ar.A,ir),ar.A&&ar.A.locals&&ar.A.locals;const or={name:"MailFilterFromEnvelope",components:{CreateModal:(0,S.A)(nr,(function(){var t=this,e=t._self._c;return e("NcModal",{attrs:{size:"normal","close-on-click-outside":!1},on:{close:t.closeModal}},[e("form",{staticClass:"modal__content",on:{submit:function(e){return e.preventDefault(),t.createFilter.apply(null,arguments)}}},[e("h2",[t._v(t._s(t.t("mail","Create a new mail filter")))]),t._v(" "),e("p",{staticClass:"intro-text"},[t._v("\n\t\t\t"+t._s(t.t("mail","Choose the headers you want to use to create your filter. In the next step, you will be able to refine the filter conditions and specify the actions to be taken on messages that match your criteria."))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"headers-list"},t._l(t.headers,(function(n){return e("NcCheckboxRadioSwitch",{key:n.key,attrs:{type:"switch"},model:{value:n.enable,callback:function(e){t.$set(n,"enable",e)},expression:"header.enable"}},[t._v("\n\t\t\t\t"+t._s(n.label)+"\n\t\t\t")])})),1),t._v(" "),e("NcButton",{attrs:{type:"primary","native-type":"submit"},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("NcLoadingIcon",{attrs:{size:20}}):e("IconCheck",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Create mail filter"))+"\n\t\t")])],1)])}),[],!1,null,"ede4a664",null).exports,UpdateModal:Zo.A},props:{account:{type:Object,required:!0},envelope:{type:Object,required:!0}},data:()=>({currentFilter:null,loading:!1}),computed:{...(0,_t.n2)(tr.A,xt.A),filters(){return this.mailFilterStore.filters}},async mounted(){await this.mailFilterStore.fetch(this.account.id)},methods:{createFilter(e){this.loading=!0;const n=Math.max(0,...this.filters.map((t=>t.priority??0)))+10,a=new er.fJ;a.field=er.xj.Subject,a.operator=er.R2.Contains,a.values=[];const i=new er.fJ;i.field=er.xj.From,i.operator=er.R2.Contains,i.values=[];const o=new er.fJ;o.field=er.xj.To,o.operator=er.R2.Contains,o.values=[];for(const t of e)t.field===er.xj.Subject&&(a.values=[t.value]),t.field===er.xj.From&&i.values.push(t.value),t.field===er.xj.To&&o.values.push(t.value);const r=new er.sm;r.mailbox="INBOX";const s=new er.cc,l=new er.cj;l.name=t("mail","New filter"),l.operator=er.kv.All,l.tests=[],l.actions=[r,s],l.priority=n,l.enable=!0,a.hasValues()&&l.tests.push(a),i.hasValues()&&l.tests.push(i),o.hasValues()&&l.tests.push(o),this.currentFilter=l,this.loading=!1},async updateFilter(e){this.loading=!0,this.mailFilterStore.update(e);try{await this.mailFilterStore.store(this.account.id).then((()=>{(0,R.Te)(t("mail","Filter saved"))})),await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})}catch(e){_.A.error(e),(0,R.Qg)(t("mail","Could not save filter"))}finally{this.loading=!1}},closeModal(){this.$emit("close"),this.currentFilter=null}}},rr=(0,S.A)(or,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[null===t.currentFilter?e("CreateModal",{attrs:{account:t.account,envelope:t.envelope,loading:t.loading},on:{"create-filter":t.createFilter,close:t.closeModal}}):e("UpdateModal",{attrs:{filter:t.currentFilter,account:t.account,loading:t.loading},on:{"update-filter":t.updateFilter,close:t.closeModal}})],1)}),[],!1,null,null,null).exports,sr={name:"SourceModal",components:{NcModal:i.FH},props:{rawMessage:{type:String,required:!0}},methods:{onClose(){this.$emit("close")}}};var lr=a(50713),cr={};cr.styleTagTransform=v(),cr.setAttributes=m(),cr.insert=A().bind(null,"head"),cr.domAPI=c(),cr.insertStyleElement=h(),s()(lr.A,cr),lr.A&&lr.A.locals&&lr.A.locals;const dr=(0,S.A)(sr,(function(){var t=this,e=t._self._c;return e("NcModal",{attrs:{size:"full"},on:{close:t.onClose}},[e("div",{staticClass:"message-source"},[e("h2",[t._v(t._s(t.t("mail","Message source")))]),t._v(" "),e("pre",[t._v(t._s(t.rawMessage))])])])}),[],!1,null,"58097824",null).exports,Ar=Object.seal({Done:0,Silent:1,Skeleton:2}),pr={name:"ThreadEnvelope",components:{MailFilterFromEnvelope:rr,EventModal:Ne,TaskModal:je,MoveModal:kt,TagModal:ne,TranslationModal:Jo,ConfirmModal:Gt,Avatar:K.A,NcActionButton:i.Ko,NcButton:i.x1,Error:xn,IconFavorite:Tt.A,JunkIcon:zt,MessageLoadingSkeleton:Ta,MenuEnvelope:Oo,Moment:$o,Message:So,StarOutline:St.A,EmailRead:Bt.A,EmailUnread:$.A,DeleteIcon:nt.A,ArchiveIcon:at.A,LockIcon:Go.A,LockOffIcon:_o.A,LockPlusIcon:jo.A,NcActions:Uo.A,NcActionText:Ro.A,ReplyIcon:Dt.A,ReplyAllIcon:Wo.A,SourceModal:dr},props:{envelope:{required:!0,type:Object},mailboxId:{required:!1,type:[String,Number],default:void 0},expanded:{required:!1,type:Boolean,default:!1},fullHeight:{required:!1,type:Boolean,default:!1},withSelect:{type:Boolean,default:!0},threadSubject:{required:!0,type:String},threadIndex:{required:!0,type:Number}},data:()=>({loading:Ar.Done,showListUnsubscribeConfirmation:!1,error:void 0,message:void 0,importantSvg:ka(),unsubscribing:!1,seenTimer:void 0,Loading:Ar,recomputeMenuSize:0,moreActionsOpen:!1,smartReplies:[],showSourceModal:!1,showMoveModal:!1,showEventModal:!1,showTaskModal:!1,showTagModal:!1,showTranslationModal:!1,plainTextBody:"",rawMessage:"",isInternal:!0,enabledFreePrompt:(0,Be.C)("mail","llm_freeprompt_available",!1),loadingBodyTimeout:void 0,showMailFilterFromEnvelope:!1}),computed:{...(0,_t.n2)(Xo.A,xt.A),inlineMenuSize(){const{envelope:t}=this.$refs,e=(t&&t.clientWidth||250)-500+this.recomputeMenuSize;return Math.floor(e/44)},account(){return this.mainStore.getAccount(this.envelope.accountId)},from(){return this.message&&this.message.from.length?this.message.from[0].label?this.message.from[0].label:this.message.from[0].email:"?"},hasMultipleRecipients(){this.account||console.error("account is undefined",{accountId:this.envelope.accountId});const t=(0,ut.pz)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},route(){return{name:"message",params:{mailboxId:this.mailboxId||this.envelope.mailboxId,threadId:this.envelope.databaseId}}},isEncrypted(){return this.envelope.previewText&&(0,He.Z)(this.envelope.previewText)},isImportant(){return this.mainStore.getEnvelopeTags(this.envelope.databaseId).find((t=>"$label1"===t.imapLabel))},tags(){return this.mainStore.getEnvelopeTags(this.envelope.databaseId).filter((t=>"$label1"!==t.imapLabel&&!(t.displayName.toLowerCase()in Jt)))},hasChangedSubject(){return this.cleanSubject!==this.cleanThreadSubject},cleanSubject(){return this.filterSubject(this.envelope.subject)},cleanThreadSubject(){return this.filterSubject(this.threadSubject)},showSubline(){return!this.expanded&&!!this.envelope.previewText},showArchiveButton(){return null!==this.account.archiveMailboxId},disableArchiveButton(){return null!==this.account.archiveMailboxId&&this.account.archiveMailboxId===this.mailbox.databaseId},junkFavoritePosition(){return this.showSubline&&this.tags.length>0},showFavoriteIconVariant(){return this.envelope.flags.flagged},showImportantIconVariant(){return this.envelope.flags.seen},hasSeenAcl(){return(0,Qe.w)(this.mailbox,"s")},hasArchiveAcl(){return(()=>(0,Qe.w)(this.mailbox,"te"))()&&(()=>(0,Qe.w)(this.archiveMailbox,"i"))()},hasDeleteAcl(){return(0,Qe.w)(this.mailbox,"te")},hasWriteAcl(){return(0,Qe.w)(this.mailbox,"w")},mailbox(){return this.mainStore.getMailbox(this.mailboxId)},archiveMailbox(){return this.mainStore.getMailbox(this.account.archiveMailboxId)},smimeData(){return this.message?.smime??{}},smimeHeading(){return this.smimeData.isEncrypted?t("mail","Encrypted & verified "):this.smimeData.signatureIsValid?t("mail","Signature verified"):t("mail","Signature unverified ")},smimeMessage(){return this.smimeData.isEncrypted?t("mail","This message was encrypted by the sender before it was sent."):this.smimeData.signatureIsValid?t("mail","This message contains a verified digital S/MIME signature. The message wasn't changed since it was sent."):t("mail","This message contains an unverified digital S/MIME signature. The message might have been changed since it was sent or the certificate of the signer is untrusted.")},formattedSentAt(){return(0,vt.A)(1e3*this.envelope.dateInt).format("LL")},showFollowUpHeader(){return this.mainStore.getEnvelopeTags(this.envelope.databaseId).some((t=>t.imapLabel===Wt.AA))},replyButtonLabel(){return this.showFollowUpHeader?t("mail","Follow up"):this.hasMultipleRecipients?t("mail","Reply all"):t("mail","Reply")}},watch:{expanded(t){t?this.fetchMessage():(this.message=void 0,this.loading=Ar.Done)},loading(t){t===Ar.Done&&this.$emit("loaded")}},async mounted(){window.addEventListener("resize",this.redrawMenuBar),this.expanded&&(await this.fetchMessage(),this.$nextTick((()=>this.handleThreadScrolling()))),"true"===this.mainStore.getPreference("internal-addresses","false")&&(this.isInternal=this.mainStore.isInternalAddress(this.envelope.from[0].email)),this.$checkInterval=setInterval((()=>{const{envelope:t}=this.$refs;t&&t.clientWidth>0&&(this.redrawMenuBar(),clearInterval(this.$checkInterval))}),100)},beforeDestroy(){void 0!==this.seenTimer&&(_.A.info("Navigating away before seenTimer delay, will not mark message as seen/read"),clearTimeout(this.seenTimer)),window.removeEventListener("resize",this.redrawMenuBar)},methods:{translateTagDisplayName:Vt,redrawMenuBar(){this.$nextTick((()=>{this.recomputeMenuSize++}))},filterSubject:t=>t.replace(/((?:[\t ]*(?:R|RE|F|FW|FWD):[\t ]*)*)/i,""),onMessageLoaded(){this.loadingBodyTimeout&&(clearTimeout(this.loadingBodyTimeout),this.loadingBodyTimeout=void 0),this.loading=Ar.Done},async fetchMessage(){let t;!!this.mainStore.getMessage(this.envelope.databaseId)||(t=setTimeout((()=>{this.loading=Ar.Skeleton}),200)),this.loading=Ar.Silent,this.error=void 0,_.A.debug(`fetching thread message ${this.envelope.databaseId}`);try{this.message=await this.mainStore.fetchMessage(this.envelope.databaseId),_.A.debug(`message ${this.envelope.databaseId} fetched`,{message:this.message}),t&&clearTimeout(t),!this.envelope.flags.seen&&this.hasSeenAcl&&(_.A.info("Starting timer to mark message as seen/read"),this.seenTimer=setTimeout((()=>{this.mainStore.toggleEnvelopeSeen({envelope:this.envelope}),this.seenTimer=void 0}),2e3)),this.message.hasHtmlBody?this.loadingBodyTimeout=setTimeout((()=>{this.loading=Ar.Skeleton}),200):this.loading=Ar.Done,this.$nextTick((()=>{this.handleThreadScrolling()}))}catch(t){this.error=t,this.loading=Ar.Done,_.A.error("Could not fetch message",{error:t})}this.message&&!this.message.itineraries&&this.fetchItineraries(),this.message&&void 0===this.message.dkimValid&&this.fetchDkim(),this.enabledFreePrompt&&this.message&&!["trash","junk"].includes(this.mailbox.specialRole)&&!this.showFollowUpHeader&&(this.smartReplies=await(async t=>{const e=(0,de.Jv)("/apps/mail/api/messages/{messageId}/smartreply",{messageId:t});try{const t=await ce.Ay.get(e);if(204===t.status)throw new Error("Smart replies failed, error in the llm service");return t.data}catch(t){throw(0,Me.y)(t)}})(this.envelope.databaseId))},handleThreadScrolling(){const t=this.envelope.threadId;t&&this.$parent.toggleExpand?this.$parent.expandedThreads.includes(t)?this.scrollToThread(t):(this.$parent.toggleExpand(t),this.$nextTick((()=>this.scrollToThread(t)))):this.scrollToEnvelope()},scrollToThread(t){this.$nextTick((()=>{const e=document.querySelector(`[data-thread-id="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}))},scrollToEnvelope(){this.$nextTick((()=>{const t=this.$refs.envelope;t&&t.scrollIntoView({behavior:"smooth",block:"center"})}))},async fetchItineraries(){if(this.message.hasHtmlBody||0!==this.message.attachments.length){_.A.debug(`Fetching itineraries for message ${this.envelope.databaseId}`);try{const t=await this.mainStore.fetchItineraries(this.envelope.databaseId);_.A.debug(`Itineraries of message ${this.envelope.databaseId} fetched`,{itineraries:t})}catch(t){_.A.error(`Could not fetch itineraries of message ${this.envelope.databaseId}`,{error:t})}}},async fetchDkim(){if(!1!==this.message.hasDkimSignature){_.A.debug(`Fetching DKIM for message ${this.envelope.databaseId}`);try{const t=await this.mainStore.fetchDkim(this.envelope.databaseId);_.A.debug(`DKIM of message ${this.envelope.databaseId} fetched`,{dkim:t})}catch(t){_.A.error(`Could not fetch DKIM of message ${this.envelope.databaseId}`,{error:t})}}},onReply(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mainStore.startComposerSession({reply:{mode:this.hasMultipleRecipients&&!n?"replyAll":"reply",data:this.envelope,smartReply:t,followUp:e}})},onToggleImportant(){this.mainStore.toggleEnvelopeImportant(this.envelope)},onToggleFlagged(){this.mainStore.toggleEnvelopeFlagged(this.envelope)},onToggleJunk(){this.mainStore.toggleEnvelopeJunk(this.envelope)},onToggleSeen(){this.mainStore.toggleEnvelopeSeen({envelope:this.envelope})},async onDelete(){this.withSelect&&this.$emit("unselect"),this.$emit("delete",this.envelope.databaseId),_.A.info(`deleting message ${this.envelope.databaseId}`);try{await this.mainStore.deleteMessage({id:this.envelope.databaseId})}catch(e){(0,R.Qg)(await(0,bt.C)(e,{[ft.A.getName()]:()=>t("mail","No trash folder configured"),default:e=>(_.A.error("could not delete message",e),t("mail","Could not delete message"))}))}},async onArchive(){this.withSelect&&this.$emit("unselect"),this.$emit("archive",this.envelope.databaseId),_.A.info(`archiving message ${this.envelope.databaseId}`);try{await this.mainStore.moveMessage({id:this.envelope.databaseId,destMailboxId:this.account.archiveMailboxId})}catch(e){return _.A.error("could not archive message",e),t("mail","Could not archive message")}},async onDisableFollowUpReminder(){await this.mainStore.clearFollowUpReminder({envelope:this.envelope})},async unsubscribeViaOneClick(){try{this.unsubscribing=!0,await async function(t){const e=(0,de.Jv)("/apps/mail/api/list/unsubscribe/{id}",{id:t});ce.Ay.post(e)}(this.envelope.databaseId),(0,R.Te)(t("mail","Unsubscribe request sent"))}catch(e){_.A.error("Could not one-click unsubscribe",{error:e}),(0,R.Qg)(t("mail","Could not unsubscribe from mailing list"))}finally{this.unsubscribing=!1,this.showListUnsubscribeConfirmation=!1}},async unsubscribeViaMailto(){const e=this.message.unsubscribeMailto,[n,a]=e.replace(/^mailto:/,"").split("?");let i={};const o=(new Date).getTime()/1e3;a&&(i=a.split("&").map((t=>({key:t.split("=")[0].toLowerCase(),value:decodeURIComponent(t.split("=")[1])}))));try{this.unsubscribing=!0;const e=await this.outboxStore.enqueueMessage({message:{accountId:this.message.accountId,subject:i.subject||"Unsubscribe",body:i.body||"",editorBody:i.body||"",isHtml:!1,to:[{label:n,email:n}],cc:[],bcc:[],attachments:[],aliasId:null,inReplyToMessageId:null,sendAt:o,draftId:null,smimeEncrypt:!1,smimeSign:!1}});_.A.debug("Unsubscribe email to "+n+" enqueued"),await this.outboxStore.sendMessage({id:e.id}),_.A.debug("Unsubscribe email sent to "+n),(0,R.Te)(t("mail","Unsubscribe request sent"))}catch(e){_.A.error("Could not enqueue or send unsubscribe email",{error:e}),(0,R.Qg)(t("mail","Could not unsubscribe from mailing list"))}finally{this.unsubscribing=!1,this.showListUnsubscribeConfirmation=!1}},onMove(){this.$emit("move")},onOpenMoveModal(){this.showMoveModal=!0},onCloseMoveModal(){this.showMoveModal=!1},onOpenEventModal(){this.showEventModal=!0},onCloseEventModal(){this.showEventModal=!1},onOpenTaskModal(){this.showTaskModal=!0},onCloseTaskModal(){this.showTaskModal=!1},onOpenTagModal(){this.showTagModal=!0},onCloseTagModal(){this.showTagModal=!1},onOpenTranslationModal(){try{if(this.message.hasHtmlBody){let t=new Da.EY("html",this.message.body);t=(0,Da.Ul)(t),this.plainTextBody=t.value}else this.plainTextBody=this.message.body;this.showTranslationModal=!0}catch(e){(0,R.Qg)(t("mail","Please wait for the message to load"))}},onCloseTranslationModal(){this.showTranslationModal=!1},async onShowSourceModal(){if(0===this.rawMessage.length){const t=await ce.Ay.get((0,de.Jv)("/apps/mail/api/messages/{id}/source",{id:this.envelope.databaseId}));this.rawMessage=t.data.source}this.showSourceModal=!0},onCloseSourceModal(){this.showSourceModal=!1},onPrint(){this.$emit("print",this.threadIndex)}}};var mr=a(40653),ur={};ur.styleTagTransform=v(),ur.setAttributes=m(),ur.insert=A().bind(null,"head"),ur.domAPI=c(),ur.insertStyleElement=h(),s()(mr.A,ur),mr.A&&mr.A.locals&&mr.A.locals;const hr=(0,S.A)(pr,(function(){var t=this,e=t._self._c;return e("div",{ref:"envelope",staticClass:"envelope",class:{"envelope--expanded":t.expanded}},[t.showFollowUpHeader?e("div",{staticClass:"envelope__follow-up-header"},[e("span",{staticClass:"envelope__follow-up-header__date"},[t._v("\n\t\t\t"+t._s(t.t("mail","You've sent this message on {date}",{date:t.formattedSentAt}))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"envelope__follow-up-header__actions"},[e("NcButton",{on:{click:t.onDisableFollowUpReminder}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Disable reminder"))+"\n\t\t\t")])],1)]):t._e(),t._v(" "),e("div",{staticClass:"envelope__header"},[e("div",{staticClass:"envelope__header__avatar"},[t.envelope.from&&t.envelope.from[0]?e("Avatar",{staticClass:"envelope__header__avatar-avatar",attrs:{email:t.envelope.from[0].email,"display-name":t.envelope.from[0].label,"disable-tooltip":!0,size:40,"fetch-avatar":t.envelope.fetchAvatarFromClient,avatar:t.envelope.avatar}}):t._e(),t._v(" "),t.isImportant?e("div",{staticClass:"app-content-list-item-star icon-important",attrs:{"data-starred":t.isImportant?"true":"false"},domProps:{innerHTML:t._s(t.importantSvg)},on:{click:function(e){e.preventDefault(),t.hasWriteAcl&&t.onToggleImportant()}}}):t._e(),t._v(" "),t.envelope.flags.flagged?e("IconFavorite",{staticClass:"app-content-list-item-star favorite-icon-style",attrs:{"fill-color":"#f9cf3d",size:18,"data-starred":t.envelope.flags.flagged?"true":"false"},on:{click:function(e){e.preventDefault(),t.hasWriteAcl&&t.onToggleFlagged()}}}):t._e(),t._v(" "),t.envelope.flags.$junk?e("JunkIcon",{staticClass:"app-content-list-item-star junk-icon-style",attrs:{size:18,"data-starred":t.envelope.flags.$junk?"true":"false"},on:{click:function(e){e.preventDefault(),t.hasWriteAcl&&t.onToggleJunk()}}}):t._e()],1),t._v(" "),e("router-link",{staticClass:"left",class:{seen:t.envelope.flags.seen},attrs:{to:t.route,event:""},nativeOn:{click:function(e){return e.preventDefault(),t.$emit("toggle-expand",e)}}},[e("div",{staticClass:"envelope__header__left__sender-subject-tags"},[e("div",{staticClass:"sender"},[t._v("\n\t\t\t\t\t"+t._s(t.envelope.from&&t.envelope.from[0]?t.envelope.from[0].label:"")+"\n\t\t\t\t\t"),e("p",{class:t.isInternal?"sender__email":"sender__email sender__external"},[t._v("\n\t\t\t\t\t\t"+t._s(t.envelope.from&&t.envelope.from[0]?t.envelope.from[0].email:"")+"\n\t\t\t\t\t")])]),t._v(" "),t.hasChangedSubject?e("div",{staticClass:"subline"},[t._v("\n\t\t\t\t\t"+t._s(t.cleanSubject)+"\n\t\t\t\t")]):t._e(),t._v(" "),t.showSubline?e("div",{staticClass:"subline"},[e("span",{staticClass:"preview"},[t._v("\n\t\t\t\t\t\t"+t._s(t.isEncrypted?t.t("mail","Encrypted message"):t.envelope.previewText)+"\n\t\t\t\t\t")])]):t._e(),t._v(" "),e("div",{staticClass:"tagline"},t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("div",{staticClass:"tag-group__bg",style:{"background-color":n.color}}),t._v(" "),e("span",{staticClass:"tag-group__label",style:{color:n.color}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.translateTagDisplayName(n))+"\n\t\t\t\t\t\t")])])})),0)]),t._v(" "),e("div",{staticClass:"envelope__header__left__unsubscribe"},[t.message&&t.message.dkimValid&&(t.message.unsubscribeUrl||t.message.unsubscribeMailto)?e("NcButton",{staticClass:"envelope__header__unsubscribe",attrs:{type:"tertiary"},on:{click:function(e){t.showListUnsubscribeConfirmation=!0}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Unsubscribe"))+"\n\t\t\t\t")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"right"},[e("Moment",{staticClass:"timestamp",attrs:{timestamp:t.envelope.dateInt}}),t._v(" "),t.expanded?[t.smimeData.isSigned||t.smimeData.isEncrypted?e("NcActions",{scopedSlots:t._u([{key:"icon",fn:function(){return[t.smimeData.isEncrypted?e("LockPlusIcon",{attrs:{size:20,"fill-color":"#008000"}}):t.smimeData.signatureIsValid?e("LockIcon",{attrs:{size:20,"fill-color":"#008000"}}):e("LockOffIcon",{attrs:{size:20,"fill-color":"red"}})]},proxy:!0}],null,!1,3711721427)},[t._v(" "),e("NcActionText",{staticClass:"smime-text",attrs:{name:t.smimeHeading}},[t._v("\n\t\t\t\t\t\t"+t._s(t.smimeMessage)+"\n\t\t\t\t\t")])],1):t._e(),t._v(" "),e("NcActions",{attrs:{inline:t.inlineMenuSize}},[e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return t.onReply("",!1)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.hasMultipleRecipients?e("ReplyAllIcon",{attrs:{title:t.t("mail","Reply all"),size:20}}):e("ReplyIcon",{attrs:{title:t.t("mail","Reply"),size:20}})]},proxy:!0}],null,!1,1812719128)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Reply"))+"\n\t\t\t\t\t")]),t._v(" "),t.hasMultipleRecipients?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return t.onReply("",!1,!0)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ReplyIcon",{attrs:{title:t.t("mail","Reply to sender only"),size:20}})]},proxy:!0}],null,!1,1847095553)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Reply to sender only"))+"\n\t\t\t\t\t")]):t._e(),t._v(" "),t.hasWriteAcl&&(t.inlineMenuSize>=2||!t.moreActionsOpen)?e("NcActionButton",{staticClass:"action--primary",attrs:{type:"tertiary-no-background","aria-label":t.envelope.flags.flagged?t.t("mail","Mark as unfavorite"):t.t("mail","Mark as favorite"),name:t.envelope.flags.flagged?t.t("mail","Mark as unfavorite"):t.t("mail","Mark as favorite"),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleFlagged.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showFavoriteIconVariant?e("IconFavorite",{attrs:{size:20}}):e("StarOutline",{attrs:{size:20}})]},proxy:!0}],null,!1,2036330618)}):t._e(),t._v(" "),t.hasSeenAcl&&(t.inlineMenuSize>=3||!t.moreActionsOpen)?e("NcActionButton",{staticClass:"action--primary",attrs:{type:"tertiary-no-background","aria-label":t.envelope.flags.seen?t.t("mail","Mark as unread"):t.t("mail","Mark as read"),name:t.envelope.flags.seen?t.t("mail","Mark as unread"):t.t("mail","Mark as read"),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleSeen.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showImportantIconVariant?e("EmailRead",{attrs:{size:20}}):e("EmailUnread",{attrs:{size:20}})]},proxy:!0}],null,!1,939729496)}):t._e(),t._v(" "),t.showArchiveButton&&t.hasArchiveAcl&&(t.inlineMenuSize>=4||!t.moreActionsOpen)?e("NcActionButton",{attrs:{"close-after-click":!0,name:t.t("mail","Archive message"),disabled:t.disableArchiveButton,"aria-label":t.t("mail","Archive message"),type:"tertiary-no-background"},on:{click:function(e){return e.preventDefault(),t.onArchive.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{title:t.t("mail","Archive message"),size:20}})]},proxy:!0}],null,!1,3586051918)}):t._e(),t._v(" "),t.hasDeleteAcl&&(t.inlineMenuSize>=5||!t.moreActionsOpen)?e("NcActionButton",{attrs:{"close-after-click":!0,name:t.t("mail","Delete message"),"aria-label":t.t("mail","Delete message"),type:"tertiary-no-background"},on:{click:function(e){return e.preventDefault(),t.onDelete.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete message"),size:20}})]},proxy:!0}],null,!1,698101614)}):t._e(),t._v(" "),e("MenuEnvelope",{staticClass:"app-content-list-item-menu",attrs:{envelope:t.envelope,mailbox:t.mailbox,"with-select":!1,"with-show-source":!0,"more-actions-open":t.moreActionsOpen},on:{"update:moreActionsOpen":function(e){t.moreActionsOpen=e},"update:more-actions-open":function(e){t.moreActionsOpen=e},reply:function(e){return t.onReply("",!1,!1)},delete:function(e){return t.$emit("delete",t.envelope.databaseId)},"show-source-modal":t.onShowSourceModal,"open-tag-modal":t.onOpenTagModal,"open-move-modal":t.onOpenMoveModal,"open-event-modal":t.onOpenEventModal,"open-task-modal":t.onOpenTaskModal,"open-translation-modal":t.onOpenTranslationModal,"open-mail-filter-from-envelope":function(e){t.showMailFilterFromEnvelope=!0},print:t.onPrint}})],1),t._v(" "),t.showSourceModal?e("SourceModal",{attrs:{"raw-message":t.rawMessage},on:{close:t.onCloseSourceModal}}):t._e(),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:[t.envelope]},on:{move:t.onMove,close:t.onCloseMoveModal}}):t._e(),t._v(" "),t.showEventModal?e("EventModal",{attrs:{envelope:t.envelope},on:{close:t.onCloseEventModal}}):t._e(),t._v(" "),t.showTaskModal?e("TaskModal",{attrs:{envelope:t.envelope},on:{close:t.onCloseTaskModal}}):t._e(),t._v(" "),t.showTagModal?e("TagModal",{attrs:{account:t.account,envelopes:[t.envelope]},on:{close:t.onCloseTagModal}}):t._e(),t._v(" "),t.showTranslationModal?e("TranslationModal",{attrs:{"rich-parameters":{},message:t.plainTextBody},on:{close:t.onCloseTranslationModal}}):t._e(),t._v(" "),t.showMailFilterFromEnvelope?e("MailFilterFromEnvelope",{attrs:{account:t.account,envelope:t.envelope},on:{close:function(e){t.showMailFilterFromEnvelope=!1}}}):t._e()]:t._e()],2)],1),t._v(" "),t.loading===t.Loading.Skeleton?e("MessageLoadingSkeleton"):t._e(),t._v(" "),t.message?e("Message",{directives:[{name:"show",rawName:"v-show",value:t.loading===t.Loading.Done,expression:"loading === Loading.Done"}],attrs:{envelope:t.envelope,message:t.message,"full-height":t.fullHeight,"smart-replies":t.showFollowUpHeader?[]:t.smartReplies,"reply-button-label":t.replyButtonLabel},on:{load:t.onMessageLoaded,translate:t.onOpenTranslationModal,reply:e=>t.onReply(e,t.showFollowUpHeader)}}):t.error?e("Error",{attrs:{error:t.error.message||t.t("mail","Not found"),message:"",data:t.error,"auto-margin":!0,role:"alert"}}):t._e(),t._v(" "),t.message&&t.message.unsubscribeUrl&&t.message.isOneClickUnsubscribe&&t.showListUnsubscribeConfirmation?e("ConfirmModal",{attrs:{"confirm-text":t.t("mail","Unsubscribe"),title:t.t("mail","Unsubscribe via link")},on:{cancel:function(e){t.showListUnsubscribeConfirmation=!1},confirm:t.unsubscribeViaOneClick}},[t._v("\n\t\t"+t._s(t.t("mail","Unsubscribing will stop all messages from the mailing list {sender}",{sender:t.from}))+"\n\t")]):t.message&&t.message.unsubscribeUrl&&t.showListUnsubscribeConfirmation?e("ConfirmModal",{attrs:{"confirm-text":t.t("mail","Unsubscribe"),"confirm-url":t.message.unsubscribeUrl,title:t.t("mail","Unsubscribe via link")},on:{cancel:function(e){t.showListUnsubscribeConfirmation=!1},confirm:function(e){t.showListUnsubscribeConfirmation=!1}}},[t._v("\n\t\t"+t._s(t.t("mail","Unsubscribing will stop all messages from the mailing list {sender}",{sender:t.from}))+"\n\t")]):t.message&&t.message.unsubscribeMailto&&t.showListUnsubscribeConfirmation?e("ConfirmModal",{attrs:{"confirm-text":t.t("mail","Send unsubscribe email"),title:t.t("mail","Unsubscribe via email"),disabled:t.unsubscribing},on:{cancel:function(e){t.showListUnsubscribeConfirmation=!1},confirm:t.unsubscribeViaMailto}},[t._v("\n\t\t"+t._s(t.t("mail","Unsubscribing will stop all messages from the mailing list {sender}",{sender:t.from}))+"\n\t")]):t._e()],1)}),[],!1,null,"74b4b5fc",null).exports;var gr=a(78173),vr=a(17443),Cr=a.n(vr),fr=a(42678);const br={name:"ThreadSummary",components:{LoadingSkeleton:un,NcButton:vn.A,NcChip:fr.A,ArrowDownIcon:gr.A},props:{summary:{type:String,required:!0},loading:{type:Boolean,required:!0}},data:()=>({creation:Cr()}),computed:{brand:()=>OCA.Theming?t("mail","{name} Assistant",{name:OCA.Theming.name}):t("mail","{name} Assistant",{name:"Nextcloud"})},methods:{onScroll(){let t=document.querySelector(".splitpanes__pane-details");t||(t=document.querySelector(".app-content-wrapper--mobile")),t.scrollTo({top:t.scrollHeight,left:0,behavior:"smooth"})}}};var yr=a(87916),xr={};xr.styleTagTransform=v(),xr.setAttributes=m(),xr.insert=A().bind(null,"head"),xr.domAPI=c(),xr.insertStyleElement=h(),s()(yr.A,xr),yr.A&&yr.A.locals&&yr.A.locals;const _r={name:"Thread",components:{RecipientBubble:_a,ThreadSummary:(0,S.A)(br,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"summary"},[e("div",{staticClass:"summary__header"},[e("div",{staticClass:"summary__header__actions"},[e("NcChip",{attrs:{"icon-svg":t.creation,"no-close":""}},[t._v("\n\t\t\t\t"+t._s(t.brand)+"\n\t\t\t")]),t._v(" "),e("NcButton",{attrs:{"aria-label":t.t("mail","Go to latest message"),type:"secondary"},on:{click:t.onScroll},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArrowDownIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Go to newest message"))+"\n\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"summary__header__title"},[e("h2",[t._v(t._s(t.t("mail","Thread summary")))])])]),t._v(" "),e("div",{staticClass:"summary__body"},[t.loading?e("LoadingSkeleton",{attrs:{"number-of-lines":1,"with-avatar":!1}}):e("p",[t._v("\n\t\t\t"+t._s(t.summary)+"\n\t\t")])],1)])}),[],!1,null,"3e1d4fa6",null).exports,AppContentDetails:i.eM,Error:xn,Loading:Tn,ThreadEnvelope:hr,Popover:i.rI},data(){return{summaryLoading:!1,loading:!0,message:void 0,errorMessage:"",error:void 0,expandedThreads:[],participantsToDisplay:999,resizeDebounced:pa()(500,this.updateParticipantsToDisplay),enabledThreadSummary:(0,Be.C)("mail","llm_summaries_available",!1),summaryText:"",summaryError:!1,loadedThreads:0}},computed:{...(0,_t.n2)(xt.A),moreParticipantsString(){return"+"+(this.threadParticipants.length-this.participantsToDisplay)},threadId(){return parseInt(this.$route.params.threadId,10)},thread(){const t=this.mainStore.getEnvelope(this.threadId);if(void 0===t)return[];if("singleton"===this.mainStore.getPreference("layout-message-view","threaded"))return[t];const e=this.mainStore.getEnvelopesByThreadRootId(t.accountId,t.threadRootId);if(0===e.length)return[];const n=this.mainStore.getMailbox(t.mailboxId),a=this.mainStore.getMailboxes(t.accountId).find((t=>"trash"===t.specialRole)),i=this.mainStore.getMailboxes(t.accountId).find((t=>"junk"===t.specialRole));let o=!1;const r=[];return void 0!==a&&(n.databaseId===a.databaseId&&(o=!0),r.push(a.databaseId)),void 0!==i&&(n.databaseId===i.databaseId&&(o=!0),r.push(i.databaseId)),o?e.filter((t=>t.mailboxId===n.databaseId)):e.filter((t=>!r.includes(t.mailboxId)))},threadParticipants(){const t=this.thread.flatMap((t=>t.from.concat(t.to).concat(t.cc)));return(0,ca.A)((0,da.A)("email"),t)},threadSubject(){const t=this.thread;return 0===t.length?(console.warn("thread is empty"),""):t[0].subject||this.t("mail","No subject")},showSummaryBox(){return this.thread.length>2&&this.enabledThreadSummary&&!this.summaryError}},watch:{$route(t,e){e.name!==t.name||e.params.mailboxId!==t.params.mailboxId||e.params.threadId!==t.params.threadId||e.params.filter!==t.params.filter?(_.A.debug("navigated to another thread",{to:t,from:e}),this.resetThread()):_.A.debug("navigated but the thread is still the same")}},created(){this.resetThread(),window.addEventListener("resize",this.resizeDebounced),window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy(){window.removeEventListener("resize",this.resizeDebounced),window.removeEventListener("keydown",this.handleKeyDown)},methods:{async updateSummary(){if(!(this.thread.length<=2)&&this.enabledThreadSummary){this.summaryLoading=!0;try{this.summaryText=await(async t=>{const e=(0,de.Jv)("/apps/mail/api/thread/{threadId}/summary",{threadId:t});try{const t=await ce.Ay.get(e);if(204===t.status)throw new Error("Thread summary failed, error in the llm service");return t.data.data}catch(t){throw(0,Me.y)(t)}})(this.thread[0].databaseId)}catch(e){this.summaryError=!0,(0,R.Qg)(t("mail","Summarizing thread failed.")),_.A.error("Summarizing thread failed",{error:e})}finally{this.summaryLoading=!1}}},updateParticipantsToDisplay(){if(!this.$refs.avatarHeader||!this.threadParticipants)return;const t=this.$refs.avatarHeader,e=t.clientWidth-100;let n=0,a=0,i=0;for(;n<e&&a<this.threadParticipants.length;)void 0!==t.childNodes[i].clientWidth?(n+=t.childNodes[i].clientWidth,a++,i++):i+=3;this.participantsToDisplay=n>e?a>1?a-1:0===a?1:a:this.threadParticipants.length},toggleExpand(t){1!==this.thread.length&&(this.expandedThreads.includes(t)?(console.debug(`collapse thread ${t}`),this.expandedThreads=this.expandedThreads.filter((e=>e!==t))):(console.debug(`expand thread ${t}`),this.expandedThreads.push(t)))},onMove(t){t===this.threadId?this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId}}):(this.expandedThreads=this.expandedThreads.filter((e=>e!==t)),this.fetchThread())},async resetThread(){this.expandedThreads=[this.threadId],this.errorMessage="",this.error=void 0,"threaded"===this.mainStore.getPreference("layout-message-view","threaded")&&await this.fetchThread(),this.updateParticipantsToDisplay(),this.updateSummary(),this.loadedThreads=0},async fetchThread(){this.loading=!0,this.errorMessage="",this.error=void 0;const e=this.threadId;try{const t=await this.mainStore.fetchThread(e);if(_.A.debug(`thread for envelope ${e} fetched`,{thread:t}),e!==parseInt(this.$route.params.threadId,10))return void _.A.debug("User navigated away, loaded envelope won't be shown nor flagged as seen",{oldId:e,newId:this.$route.params.threadId});if(0===t.length)return _.A.info("thread could not be found and is empty",{threadId:e}),this.errorMessage=(()=>{const t=[(0,Lt.Tl)("mail","Could not load your message"),(0,Lt.Tl)("mail","Could not load the desired message"),(0,Lt.Tl)("mail","Could not load the message")];return t[Math.floor(Math.random()*t.length)]+" "+ma[Math.floor(Math.random()*ma.length)]})(),void(this.loading=!1);this.loading=!1}catch(n){_.A.error("could not load envelope thread",{threadId:e,error:n}),403===n?.response?.status?(this.error=t("mail","Could not load your message thread"),this.errorMessage=t("mail","The thread doesn't exist or has been deleted"),this.loading=!1):500===n?.response?.status?(this.error={message:t("mail","Email was not able to be opened")},this.loading=!1):this.errorMessage=t("mail","Could not load your message thread")}},async handleKeyDown(e){if((e.ctrlKey||e.metaKey)&&"p"===e.key){for(e.preventDefault(),this.thread.forEach((t=>{this.expandedThreads.includes(t.databaseId)||this.expandedThreads.push(t.databaseId)}));this.loadedThreads!==this.thread.length;)await new Promise((t=>setTimeout(t,100)));const n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n);const a=n.contentDocument||n.contentWindow.document;a.open(),a.write(`<html><head><title>${t("mail","Print")}</title></head><body></body></html>`),a.close(),a.body.appendChild(this.addThreadInfo(a));const i=document.querySelectorAll("#message-container");for(const[t,e]of i.entries()){const n=e.querySelector("iframe");if(this.addMessageInfo(a,t),!n){const t=a.createElement("div");t.innerHTML=e.innerHTML,a.body.appendChild(t);continue}n.setAttribute("data-iframe-size","true"),"complete"===!n.contentWindow.document.readyState&&await new Promise((t=>{n.contentWindow.onload=t}));const i=(n.contentDocument||n.contentWindow.document).body.innerHTML,o=a.createElement("div");o.innerHTML=i,a.body.appendChild(o)}const o=a.querySelectorAll("img");let r=0;o.forEach((t=>{t.addEventListener("load",(()=>{r++,r===o.length&&(n.contentWindow.print(),this.removeIframe(n))})),t.addEventListener("error",(()=>{r++,r===o.length&&(n.contentWindow.print(),this.removeIframe(n))}))})),0===o.length&&(n.contentWindow.print(),this.removeIframe(n))}},removeIframe(t){setTimeout((()=>{document.body.removeChild(t)}),500)},addMessageInfo(e,n){const a=e.createElement("hr");a.style.border="1px solid black";const i=e.createElement("p");i.style.fontWeight="bold",i.textContent=t("mail","Subject")+": "+this.thread[n].subject;const o=e.createElement("p");o.style.fontWeight="bold",o.textContent=t("mail","From")+": "+this.thread[n].from[0].label+" <"+this.thread[n].from[0].email+">";const r=e.createElement("p");r.style.fontWeight="bold",r.textContent=t("mail","Date")+": "+vt.A.unix(this.thread[n].dateInt).format("LLL");const s=e.createElement("p");s.style.fontWeight="bold",s.textContent=t("mail","To")+": "+this.thread[n].to[0].label+this.thread[n].to[0].email,e.body.appendChild(a),e.body.appendChild(i),e.body.appendChild(o),e.body.appendChild(r),e.body.appendChild(s)},addThreadInfo(t){const e=t.createElement("div");e.style.marginTop="20px",e.style.marginBottom="20px",e.className="mail-thread-info";const n=t.createElement("h2");n.textContent=`${this.threadSubject}`,e.appendChild(n);const a=t.createElement("p");return a.textContent=this.threadParticipants.map((t=>`${t.label} <${t.email}>`)).join(", "),e.appendChild(a),e},addLoadedThread(){this.loadedThreads++},print(e){setTimeout((()=>{try{const t=Array.from(document.querySelectorAll(".html-message-body, .mail-message-body"));let n;n=void 0!==e?t[2*e]??t.pop():t.pop();const a=n.querySelector("iframe");if(null===a){const t=n.querySelector("#message-container");if(t){const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const n=e.contentDocument||e.contentWindow.document;n.open(),n.write(`\n\t\t\t\t\t\t\t\t<html>\n\t\t\t\t\t\t\t\t\t<head>\n\t\t\t\t\t\t\t\t\t\t<title>${this.threadSubject}</title>\n\t\t\t\t\t\t\t\t\t</head>\n\t\t\t\t\t\t\t\t\t<body>\n\t\t\t\t\t\t\t\t\t\t<div class="message-container">${t.innerHTML}</div>\n\t\t\t\t\t\t\t\t\t</body>\n\t\t\t\t\t\t\t\t</html>\n\t\t\t\t\t\t\t`);const a=this.addThreadInfo(n);n.body.insertBefore(a,n.body.firstChild),setTimeout((()=>{a.remove()}),5e3),n.close(),e.contentWindow.print(),setTimeout((()=>{document.body.removeChild(e)}),500)}return}const i=a.contentDocument||a.contentWindow.document,o=this.addThreadInfo(i);i.body.insertBefore(o,i.body.firstChild),setTimeout((()=>{o.remove()}),200),a.contentWindow.print()}catch(e){(0,R.Qg)(t("mail","Could not print message"))}}),100)}}};var wr=a(53993),kr={};kr.styleTagTransform=v(),kr.setAttributes=m(),kr.insert=A().bind(null,"head"),kr.domAPI=c(),kr.insertStyleElement=h(),s()(wr.A,kr),wr.A&&wr.A.locals&&wr.A.locals;const Ir=(0,S.A)(_r,(function(){var t=this,e=t._self._c;return e("AppContentDetails",{attrs:{id:"mail-message"}},[t.loading&&0===t.thread.length?e("Loading",{attrs:{hint:t.t("mail","Loading thread")}}):t.error?e("Error",{attrs:{error:t.error&&t.error.message?t.error.message:t.t("mail","Not found"),message:t.errorMessage}}):[e("div",{attrs:{id:"mail-thread-header"}},[e("div",{attrs:{id:"mail-thread-header-fields"}},[e("h2",{attrs:{dir:"auto",title:t.threadSubject}},[t._v("\n\t\t\t\t\t"+t._s(t.threadSubject)+"\n\t\t\t\t")]),t._v(" "),t.thread.length?e("div",{ref:"avatarHeader",staticClass:"avatar-header"},[t._l(t.threadParticipants.slice(0,t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,attrs:{email:t.email,label:t.label}})})),t._v(" "),t.threadParticipants.length>t.participantsToDisplay?e("Popover",{staticClass:"avatar-more",scopedSlots:t._u([{key:"trigger",fn:function(){return[e("span",{staticClass:"avatar-more"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.moreParticipantsString)+"\n\t\t\t\t\t\t\t")])]},proxy:!0}],null,!1,184353592)},[t._v(" "),t._l(t.threadParticipants.slice(t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,attrs:{title:t.email,email:t.email,label:t.label}})}))],2):t._e(),t._v(" "),t._l(t.threadParticipants.slice(t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,staticClass:"avatar-hidden",attrs:{email:t.email,label:t.label}})}))],2):t._e()])]),t._v(" "),t.showSummaryBox?e("ThreadSummary",{attrs:{loading:t.summaryLoading,summary:t.summaryText}}):t._e(),t._v(" "),t._l(t.thread,(function(n,a){return e("ThreadEnvelope",{key:n.databaseId,attrs:{envelope:n,"mailbox-id":t.$route.params.mailboxId,"thread-subject":t.threadSubject,expanded:t.expandedThreads.includes(n.databaseId),"full-height":1===t.thread.length,"thread-index":a},on:{delete:function(e){return t.$emit("delete",n.databaseId)},loaded:t.addLoadedThread,move:function(e){return t.onMove(n.databaseId)},"toggle-expand":function(e){return t.toggleExpand(n.databaseId)},print:t.print}})}))]],2)}),[],!1,null,null,null).exports;var Sr=a(28338);const Tr={name:"MailboxThread",directives:{infiniteScroll:O},components:{AppContent:i.ir,AppContentList:i.Qm,ButtonVue:i.x1,IconInfo:q.A,Mailbox:On,NoMessageSelected:la,Popover:i.rI,SectionTitle:T,SearchMessages:ia,Thread:Ir},mixins:[o.A],props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0}},data:()=>({importantInfo:t("mail","Messages will automatically be marked as important based on which messages you interacted with or marked as important. In the beginning you might have to manually change the importance to teach the system, but it will improve over time."),followupInfo:t("mail","Messages sent by you that require a reply but did not receive one after a couple of days will be shown here."),bus:(0,D.A)(),searchQuery:void 0,shortkeys:{del:["del"],arch:["a"],flag:["s"],next:["arrowright"],prev:["arrowleft"],refresh:["r"],unseen:["u"]},priorityImportantQuery:Sr.Rd,priorityOtherQuery:Sr.Hc,startMailboxTimer:void 0,hasContent:!1}),computed:{...(0,_t.n2)(xt.A),layoutMode(){return this.mainStore.getPreference("layout-mode","vertical-split")},horizontalListMinWidth(){return"horizontal-split"===this.layoutMode?40:30},horizontalListMaxWidth(){return"horizontal-split"===this.layoutMode?60:50},unifiedAccount(){return this.mainStore.getAccount(Wt.Hc)},unifiedInbox(){return this.mainStore.getMailbox(Wt.mH)},followUpMailbox(){return this.mainStore.getMailbox(Wt.bl)},followUpQuery(){const t=this.mainStore.getFollowUpTag;if(!t)return void _.A.warn("No follow-up tag available");const e=new Date;return e.setDate(e.getDate()-4),`tags:${t.id} end:${n=e,Math.round(n.getTime()/1e3)}`;var n},hasEnvelopes(){return this.mailbox.isPriorityInbox?this.mainStore.getEnvelopes(this.mailbox.databaseId,this.appendToSearch(Sr.Rd)).length>0||this.mainStore.getEnvelopes(this.mailbox.databaseId,this.appendToSearch(Sr.Hc)).length>0:this.mainStore.getEnvelopes(this.mailbox.databaseId,this.searchQuery).length>0},hasImportantEnvelopes(){const t=this.mainStore.getEnvelopes(this.unifiedInbox.databaseId,this.appendToSearch(this.priorityImportantQuery));return(Array.isArray(t)?t:Array.from(t?.values()||[])).length>0},hasFollowUpEnvelopes(){if(!this.followUpQuery)return!1;const t=this.mainStore.getEnvelopes(Wt.bl,this.followUpQuery);return(Array.isArray(t)?t:Array.from(t?.values()||[])).length>0},importantMessagesInitialPageSize:()=>window.innerHeight>1024?7:window.innerHeight>750?5:3,messagesOrderBydate:()=>10,followUpMessagesInitialPageSize:()=>5,showThread(){return"message"===this.$route.name&&"mailto"!==this.$route.params.threadId},query(){return"starred"===this.$route.params.filter?this.searchQuery?this.appendToSearch("is:starred"):"is:starred":this.searchQuery},isThreadShown(){return!!this.$route.params.threadId},groupEnvelopes(){const t=this.mainStore.getEnvelopes(this.mailbox.databaseId,this.searchQuery);return this.groupEnvelopesByDate(t,this.mainStore.syncTimestamp)}},watch:{async $route(t){this.handleMailto(),"mailbox"===t.name&&t.params.mailboxId===Wt.U8?await this.onPriorityMailboxOpened():this.isThreadShown&&await this.fetchEnvelopes()},async hasFollowUpEnvelopes(t){t&&await this.onPriorityMailboxOpened()},mailbox(){clearTimeout(this.startMailboxTimer),setTimeout(this.saveStartMailbox,5e3),this.fetchEnvelopes()}},created(){this.handleMailto()},async mounted(){setTimeout(this.saveStartMailbox,5e3),this.isThreadShown&&await this.fetchEnvelopes()},beforeUnmount(){clearTimeout(this.startMailboxTimer)},methods:{groupEnvelopesByDate(t,e){const n=new Date(e),a=new Date(n.getTime()-36e5),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(i);o.setDate(o.getDate()-1);const r=new Date(n);r.setDate(r.getDate()-7);const s=new Date(n);s.setMonth(s.getMonth()-1);const l={lastHour:[],today:[],yesterday:[],lastWeek:[],lastMonth:[],older:[]};for(const e of t){const t=new Date(1e3*e.dateInt);t>=a?l.lastHour.push(e):t>=i?l.today.push(e):t>=o&&t<i?l.yesterday.push(e):t>=r?l.lastWeek.push(e):t>=s?l.lastMonth.push(e):l.older.push(e)}return Object.fromEntries(Object.entries(l).filter((t=>{let[e,n]=t;return n.length>0})))},async fetchEnvelopes(){this.mainStore.getEnvelopes(this.mailbox.databaseId,this.searchQuery||"").length||await this.mainStore.fetchEnvelopes({mailboxId:this.mailbox.databaseId,query:this.searchQuery||""})},async onPriorityMailboxOpened(){_.A.debug("Priority inbox was opened"),await this.mainStore.checkFollowUpReminders({query:this.followUpQuery})},deleteMessage(t){this.bus.emit("delete",t)},onScroll(t){_.A.debug("scroll",{event:t}),this.bus.emit("load-more")},onShortcut(t){this.bus.emit("shortcut",t)},appendToSearch(t){return void 0===this.searchQuery?t:this.searchQuery+" "+t},hideMessage(){this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params?.filter}})},handleMailto(){if("message"===this.$route.name&&"mailto"===this.$route.params.threadId){let t;0!==this.$route.params.accountId&&"0"!==this.$route.params.accountId&&(t=parseInt(this.$route.params.accountId,10)),this.mainStore.startComposerSession({data:{accountId:t,to:this.stringToRecipients(this.$route.query.to),cc:this.stringToRecipients(this.$route.query.cc),bcc:this.stringToRecipients(this.$route.query.bcc),subject:this.$route.query.subject||"",body:this.$route.query.body?(0,Da.o0)(this.$route.query.body):(0,Da.qy)("")}})}},async saveStartMailbox(){if(this.mainStore.getPreference("start-mailbox-id")!==this.mailbox.databaseId){_.A.debug(`Saving folder ${this.mailbox.databaseId} as start folder`);try{await this.mainStore.savePreference({key:"start-mailbox-id",value:this.mailbox.databaseId})}catch(t){_.A.warn("Could not update start folder id",{error:t})}}},stringToRecipients(t){if(void 0===t)return[];let e=[];try{e=B.parse(t)}catch(e){_.A.debug("could not parse string into email addresses",{str:t,error:e})}return e.map((t=>{const e={label:t.name(),email:t.address};return""===e.label&&(e.label=e.email),e}))},onUpdateSearchQuery(t){this.searchQuery=t}}};var Dr=a(73809),Br={};Br.styleTagTransform=v(),Br.setAttributes=m(),Br.insert=A().bind(null,"head"),Br.domAPI=c(),Br.insertStyleElement=h(),s()(Dr.A,Br),Dr.A&&Dr.A.locals&&Dr.A.locals;const Mr=(0,S.A)(Tr,(function(){var t=this,e=t._self._c;return e("AppContent",{attrs:{"pane-config-key":"mail",layout:t.layoutMode,"show-details":t.isThreadShown,"list-min-width":t.horizontalListMinWidth,"list-max-width":t.horizontalListMaxWidth},on:{"update:showDetails":t.hideMessage},scopedSlots:t._u([{key:"list",fn:function(){return[e("div",{class:{list__wrapper:!t.showThread||!t.isMobile}},[t.showThread&&t.isMobile?t._e():e("div",{staticClass:"sticky-header"},[e("SearchMessages",{attrs:{mailbox:t.mailbox,"account-id":t.account.accountId},on:{"search-changed":t.onUpdateSearchQuery}})],1),t._v(" "),e("AppContentList",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.onScroll,expression:"onScroll"},{name:"shortkey",rawName:"v-shortkey.once",value:t.shortkeys,expression:"shortkeys",modifiers:{once:!0}}],staticClass:"envelope-list",attrs:{"infinite-scroll-immediate-check":"false","show-details":t.showThread,"infinite-scroll-disabled":!1,"infinite-scroll-distance":300,role:"heading","aria-level":2},nativeOn:{shortkey:function(e){return t.onShortcut.apply(null,arguments)}}},[t.mailbox.isPriorityInbox?[e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasFollowUpEnvelopes,expression:"hasFollowUpEnvelopes"}],staticClass:"app-content-list-item"},[e("SectionTitle",{staticClass:"section-title",attrs:{name:t.t("mail","Follow up")}}),t._v(" "),e("Popover",{attrs:{trigger:"hover focus"},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Follow up info")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}])})]},proxy:!0}])},[t._v(" "),e("p",{staticClass:"section-header-info"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.followupInfo)+"\n\t\t\t\t\t\t\t")])])],1),t._v(" "),e("Mailbox",{directives:[{name:"show",rawName:"v-show",value:t.hasFollowUpEnvelopes,expression:"hasFollowUpEnvelopes"}],attrs:{"load-more-label":t.t("mail","Load more follow ups"),account:t.unifiedAccount,mailbox:t.followUpMailbox,"search-query":t.appendToSearch(t.followUpQuery),paginate:"manual","is-priority-inbox":!0,"initial-page-size":t.followUpMessagesInitialPageSize,collapsible:!0,bus:t.bus}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImportantEnvelopes,expression:"hasImportantEnvelopes"}],staticClass:"app-content-list-item"},[e("SectionTitle",{staticClass:"section-title important",attrs:{name:t.t("mail","Important")}}),t._v(" "),e("Popover",{attrs:{trigger:"hover focus"},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Important info")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}])})]},proxy:!0}])},[t._v(" "),e("p",{staticClass:"section-header-info"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.importantInfo)+"\n\t\t\t\t\t\t\t")])])],1),t._v(" "),e("Mailbox",{directives:[{name:"show",rawName:"v-show",value:t.hasImportantEnvelopes,expression:"hasImportantEnvelopes"}],staticClass:"nameimportant",attrs:{"load-more-label":t.t("mail","Load more important messages"),account:t.unifiedAccount,mailbox:t.unifiedInbox,"search-query":t.appendToSearch(t.priorityImportantQuery),paginate:"manual","is-priority-inbox":!0,"initial-page-size":t.importantMessagesInitialPageSize,collapsible:!0,bus:t.bus}}),t._v(" "),e("SectionTitle",{directives:[{name:"show",rawName:"v-show",value:t.hasImportantEnvelopes,expression:"hasImportantEnvelopes"}],staticClass:"app-content-list-item section-title other",attrs:{name:t.t("mail","Other")}}),t._v(" "),e("Mailbox",{staticClass:"nameother",attrs:{"load-more-label":t.t("mail","Load more other messages"),account:t.unifiedAccount,mailbox:t.unifiedInbox,"search-query":t.appendToSearch(t.priorityOtherQuery),"is-priority-inbox":!0,bus:t.bus}})]:e("Mailbox",{attrs:{account:t.account,mailbox:t.mailbox,"search-query":t.query,bus:t.bus,"open-first":"drafts"!==t.mailbox.specialRole,"group-envelopes":t.groupEnvelopes,"initial-page-size":t.messagesOrderBydate,collapsible:!0}})],2)],1)]},proxy:!0}])},[t._v(" "),t.showThread?e("Thread",{on:{delete:t.deleteMessage}}):t.hasEnvelopes?e("NoMessageSelected"):t._e()],1)}),[],!1,null,"3fc27864",null).exports;var Er=a(61069);const Fr={name:"OutboxMessageContent",components:{IconMail:$.A,NcEmptyContent:G.A}};var zr=a(52319),Pr={};Pr.styleTagTransform=v(),Pr.setAttributes=m(),Pr.insert=A().bind(null,"head"),Pr.domAPI=c(),Pr.insertStyleElement=h(),s()(zr.A,Pr),zr.A&&zr.A.locals&&zr.A.locals;const Nr=(0,S.A)(Fr,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{staticClass:"empty-content",attrs:{name:t.t("mail","Pending or not sent messages will show up here")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail")]},proxy:!0}])})}),[],!1,null,"2a79703f",null).exports,Lr={computed:{recipients(){return[...this.message.to??[],...this.message.cc??[]]},avatarDisplayName(){return this.recipients[0]?.label??this.recipients[0]?.email??"?"},avatarEmail(){return this.recipients[0]?.email??""}}};var Or=a(18896);const qr={name:"OutboxMessageListItem",components:{ListItem:i.l,Avatar:K.A,ActionButton:i.Ko,IconDelete:nt.A,Send:Or.A,Copy:Vo.A},mixins:[Lr],props:{message:{type:Object,required:!0}},computed:{...(0,_t.n2)(Xo.A,xt.A),selected(){return this.$route.params.messageId===this.message.id},title(){const t=t=>t.label,e=this.message.to.map(t).concat(this.message.cc.map(t)).concat(this.message.bcc.map(t));return new Intl.ListFormat((0,Lt.Z0)(),{type:"conjunction"}).format(e)},details(){return this.message.status===Wt.mx?this.t("mail",'Could not copy to "Sent" folder'):this.message.status===Wt.NI?this.t("mail","Mail server error"):this.message.status!==Wt.Gl?this.t("mail","Message could not be sent"):this.message.sendAt?vt.A.unix(this.message.sendAt).fromNow():""},subjectForSubtitle(){return this.message.subject||this.t("mail","No subject")}},methods:{statusImapSentMailboxFail:()=>Wt.mx,statusSmtpError:()=>Wt.NI,async deleteMessage(){try{await this.outboxStore.deleteMessage({id:this.message.id}),(0,R.Te)((0,Lt.Tl)("mail","Message deleted"))}catch(t){(0,R.Qg)(await(0,bt.C)(t,{default:t=>(_.A.error("could not delete message",t),(0,Lt.Tl)("mail","Could not delete message"))}))}},async sendMessageNow(){const t={...this.message,failed:!1,sendAt:((new Date).getTime()+Wt.Po)/1e3};await this.outboxStore.updateMessage({message:t,id:t.id});try{this.message.status!==Wt.mx?await this.outboxStore.sendMessageWithUndo({id:t.id}):await this.outboxStore.copyMessageToSentMailbox({id:t.id})}catch(e){_.A.error("Could not send or copy message",{error:e}),void 0!==e.data&&await this.outboxStore.updateMessage({message:e.data[0],id:t.id})}},async openModal(){this.message.status!==Wt.mx&&await this.mainStore.startComposerSession({type:"outbox",data:{...this.message}})}}};var $r=a(94696),Gr={};Gr.styleTagTransform=v(),Gr.setAttributes=m(),Gr.insert=A().bind(null,"head"),Gr.domAPI=c(),Gr.insertStyleElement=h(),s()($r.A,Gr),$r.A&&$r.A.locals&&$r.A.locals;const jr=(0,S.A)(qr,(function(){var t=this,e=t._self._c;return e("ListItem",{staticClass:"outbox-message",class:{selected:t.selected},attrs:{name:t.title,details:t.details},on:{click:t.openModal},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Avatar",{attrs:{"display-name":t.avatarDisplayName,email:t.avatarEmail,"fetch-avatar":!1,avatar:t.message.avatar}})]},proxy:!0},{key:"subname",fn:function(){return[t._v("\n\t\t"+t._s(t.subjectForSubtitle)+"\n\t")]},proxy:!0},{key:"actions",fn:function(){return[t.message.status===t.statusImapSentMailboxFail()?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.sendMessageNow},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Copy",{attrs:{title:t.t("mail","Copy to Sent Folder"),size:20}})]},proxy:!0}],null,!1,576377615)},[t._v("\n\t\t\t"+t._s(t.t("mail",'Copy to "Sent" Folder'))+"\n\t\t\t")]):t._e(),t._v(" "),t.message.status!==t.statusImapSentMailboxFail()&&t.message.status!==t.statusSmtpError()?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.sendMessageNow},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Send",{attrs:{title:t.t("mail","Send now"),size:20}})]},proxy:!0}],null,!1,3526798808)},[t._v("\n\t\t\t"+t._s(t.t("mail","Send now"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.deleteMessage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:24}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete"))+"\n\t\t")])]},proxy:!0}])})}),[],!1,null,"e9c40798",null).exports,Ur={name:"Outbox",components:{AppContent:i.ir,AppContentList:i.Qm,Error:xn,LoadingSkeleton:un,EmptyMailbox:U,OutboxMessageListItem:jr,OutboxMessageContent:Nr},data:()=>({error:!1,loading:!1,refreshInterval:void 0}),computed:{...(0,_t.n2)(Xo.A),isMessageShown(){return!!this.$route.params.messageId},currentMessage(){return this.isMessageShown?this.outboxStore.getMessage(this.$route.params.messageId):null},messages(){return this.outboxStore.getAllMessages}},created(){this.refreshInterval=setInterval((async()=>{await this.fetchMessages()}),6e4)},async mounted(){await this.fetchMessages()},destroyed(){clearInterval(this.refreshInterval)},methods:{hideMessage(){this.$router.push({name:"outbox"})},async fetchMessages(){this.loading=!0,this.error=!1;try{await this.outboxStore.fetchMessages()}catch(t){this.error=!0,_.A.error("Failed to fetch outbox messages",{error:t})}this.loading=!1}}};var Rr=a(28629),Wr={};Wr.styleTagTransform=v(),Wr.setAttributes=m(),Wr.insert=A().bind(null,"head"),Wr.domAPI=c(),Wr.insertStyleElement=h(),s()(Rr.A,Wr),Rr.A&&Rr.A.locals&&Rr.A.locals;const Vr=(0,S.A)(Ur,(function(){var t=this,e=t._self._c;return e("AppContent",{attrs:{"pane-config-key":"mail","show-details":t.isMessageShown},on:{"update:showDetails":t.hideMessage},scopedSlots:t._u([{key:"list",fn:function(){return[e("AppContentList",[t.error?e("Error",{attrs:{error:t.t("mail","Could not open outbox"),message:"",role:"alert"}}):t.loading?e("LoadingSkeleton"):0===t.messages.length?e("EmptyMailbox"):t._l(t.messages,(function(t){return e("OutboxMessageListItem",{key:t.id,attrs:{message:t}})}))],2)]},proxy:!0}])},[e("OutboxMessageContent")],1)}),[],!1,null,"764c6f5c",null).exports;var Yr=a(4152),Hr=a(56702);const Qr={name:"ComposerSessionIndicator",components:{NcActions:i.B6,NcActionButton:i.Ko,PencilIcon:Rt.A,ArrowExpandIcon:Yr.A,CloseIcon:Hr.A},data:()=>({}),computed:{...(0,_t.n2)(xt.A),...(0,_t.aH)(xt.A,["composerMessage"]),title(){return this.composerMessage?.data.subject||t("mail","Untitled message")},disabled(){return this.composerMessage?.indicatorDisabled??!1}},methods:{async onShowComposer(){this.disabled||await this.mainStore.showMessageComposerMutation()},onClose(){this.disabled||this.$emit("close")}}};var Kr=a(77342),Jr={};Jr.styleTagTransform=v(),Jr.setAttributes=m(),Jr.insert=A().bind(null,"head"),Jr.domAPI=c(),Jr.insertStyleElement=h(),s()(Kr.A,Jr),Kr.A&&Kr.A.locals&&Kr.A.locals;const Xr=(0,S.A)(Qr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"composer-session",class:{"composer-session--disabled":t.disabled},on:{click:t.onShowComposer}},[e("div",{staticClass:"composer-session__icon"},[e("PencilIcon",{attrs:{size:20}})],1),t._v(" "),e("div",{staticClass:"composer-session__text"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]),t._v(" "),e("div",{staticClass:"composer-session__actions"},[e("NcActions",[e("NcActionButton",{attrs:{"aria-label":t.t("mail","Expand composer"),disabled:t.disabled},on:{click:function(e){return e.stopPropagation(),t.onShowComposer.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArrowExpandIcon",{attrs:{size:20}})]},proxy:!0}])})],1),t._v(" "),e("NcActions",[e("NcActionButton",{attrs:{"aria-label":t.t("mail","Close composer"),disabled:t.disabled},on:{click:function(e){return e.stopPropagation(),t.onClose.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CloseIcon",{attrs:{size:20}})]},proxy:!0}])})],1)],1)])}),[],!1,null,"9f4f667e",null).exports,Zr={name:"Home",components:{NcContent:i.bw,MailboxThread:Mr,Navigation:Er.A,NewMessageModal:()=>Promise.all([a.e(125),a.e(73)]).then(a.bind(a,88277)),Outbox:Vr,ComposerSessionIndicator:Xr},mixins:[o.A],data:()=>({hasComposerSession:!1}),computed:{...(0,_t.n2)(xt.A),...(0,_t.aH)(xt.A,["composerSessionId"]),accounts(){return this.mainStore.getAccounts.filter((t=>!t.isUnified))},activeAccount(){return this.mainStore.getAccount(this.activeMailbox?.accountId)},activeMailbox(){return this.mainStore.getMailbox(this.$route.params.mailboxId)}},watch:{async composerSessionId(t){t?(this.hasComposerSession&&(this.hasComposerSession=!1,await this.$nextTick()),this.hasComposerSession=!0):this.hasComposerSession=!1}},async beforeMount(){for(const t of this.accounts)await this.mainStore.patchAccountMutation({account:t,data:{connectionStatus:await(0,x.qM)(t.accountId)}})},created(){const t=this.mainStore.getAccounts;let e=this.mainStore.getPreference("start-mailbox-id");if(e&&!this.mainStore.getMailbox(e)&&(e=null),"home"===this.$route.name&&t.length>1&&e)_.A.debug("Loading start folder",{id:e}),this.$router.replace({name:"mailbox",params:{mailboxId:e}});else if("home"===this.$route.name&&t.length>1){const e=t[0],n=this.mainStore.getMailboxes(e.id)[0];console.debug("loading first mailbox of first account",e.id,n.databaseId),this.$router.replace({name:"mailbox",params:{mailboxId:n.databaseId}})}else if("home"===this.$route.name&&1===t.length)_.A.debug("the only account we have is the unified one -> show the setup page"),this.$router.replace({name:"setup"});else if("mailto"===this.$route.name){if(0===t.length)return void console.error("cannot handle mailto:, no accounts configured");const e=t[0],n=this.mainStore.getMailboxes(e.id)[0];console.debug("loading composer with first account and folder",e.id,n.id),this.$router.replace({name:"message",params:{mailboxId:n.databaseId,threadId:"mailto"},query:{to:this.$route.query.to,cc:this.$route.query.cc,bcc:this.$route.query.bcc,subject:this.$route.query.subject,body:this.$route.query.body}})}},methods:{hideMessage(){this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params?.filter}})},async onCloseMessageModal(){await this.$refs.newMessageModal.onClose()}}};var ts=a(92902),es={};es.styleTagTransform=v(),es.setAttributes=m(),es.insert=A().bind(null,"head"),es.domAPI=c(),es.insertStyleElement=h(),s()(ts.A,es),ts.A&&ts.A.locals&&ts.A.locals;var ns=a(52014),as={};as.styleTagTransform=v(),as.setAttributes=m(),as.insert=A().bind(null,"head"),as.domAPI=c(),as.insertStyleElement=h(),s()(ns.A,as),ns.A&&ns.A.locals&&ns.A.locals;const is=(0,S.A)(Zr,(function(){var t=this,e=t._self._c;return e("NcContent",{staticClass:"mail-content",attrs:{"app-name":"mail"}},[e("Navigation"),t._v(" "),"outbox"===t.$route.name?e("Outbox"):t.activeAccount?e("MailboxThread",{attrs:{account:t.activeAccount,mailbox:t.activeMailbox}}):t._e(),t._v(" "),t.hasComposerSession&&null!==t.accounts?[e("ComposerSessionIndicator",{on:{close:t.onCloseMessageModal}}),t._v(" "),e("NewMessageModal",{ref:"newMessageModal",attrs:{accounts:t.accounts}})]:t._e()],2)}),[],!1,null,"fea0252e",null).exports},87916:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".summary[data-v-3e1d4fa6]{border:2px solid var(--color-primary-element);border-radius:var(--border-radius-large);margin:0 10px 20px 10px;padding:10px;display:flex;flex-direction:column}.summary__header[data-v-3e1d4fa6]{display:flex;flex-direction:column}.summary__header__actions[data-v-3e1d4fa6]{display:flex;justify-content:space-between}.summary__header__actions__brand[data-v-3e1d4fa6]{display:flex;align-items:center;background-color:var(--color-primary-light);border-radius:var(--border-radius-pill);width:fit-content;padding-inline:4px 10px;margin:8px 0 8px 0}.summary__header__actions__brand__icon[data-v-3e1d4fa6]{color:var(--color-primary-element);margin-inline:5px}@media only screen and (max-width: 600px){.summary .summary__header[data-v-3e1d4fa6]{flex-direction:column}.summary .summary__header__actions[data-v-3e1d4fa6]{flex-direction:column}}","",{version:3,sources:["webpack://./src/components/ThreadSummary.vue"],names:[],mappings:"AACA,0BACI,6CAAA,CACA,wCAAA,CACA,uBAAA,CACA,YAAA,CACA,YAAA,CACA,qBAAA,CAEA,kCACI,YAAA,CACA,qBAAA,CACA,2CACL,YAAA,CACA,6BAAA,CACS,kDACI,YAAA,CACA,kBAAA,CACA,2CAAA,CACA,uCAAA,CACA,iBAAA,CACA,uBAAA,CACZ,kBAAA,CAEY,wDACI,kCAAA,CACA,iBAAA,CAMnB,0CAEE,2CACC,qBAAA,CACA,oDACC,qBAAA,CAAA",sourcesContent:["\n.summary{\n    border: 2px solid var(--color-primary-element);\n    border-radius:var( --border-radius-large) ;\n    margin: 0 10px 20px 10px;\n    padding: 10px;\n    display: flex;\n    flex-direction: column;\n\n    &__header{\n        display: flex;\n        flex-direction: column;\n        &__actions{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n            &__brand{\n                display: flex;\n                align-items: center;\n                background-color: var(--color-primary-light);\n                border-radius: var(--border-radius-pill);\n                width: fit-content;\n                padding-inline: 4px 10px;\n\t\t\t\tmargin: 8px 0 8px 0;\n\n                &__icon{\n                    color:var(--color-primary-element);\n                    margin-inline: 5px\n                }\n            }\n        }\n\n    }\n\t@media only screen and (max-width: 600px) {\n\t\t.summary{\n\t\t\t&__header{\n\t\t\t\tflex-direction: column;\n\t\t\t\t&__actions{\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n"],sourceRoot:""}]);const s=r},91646:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"\n.reservation[data-v-43311de6] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-43311de6],\n.arrival[data-v-43311de6] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-43311de6],\n.arrival[data-v-43311de6],\n.connection[data-v-43311de6] {\n\tjustify-content: center;\n}\n.iata[data-v-43311de6] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.airport[data-v-43311de6] {\n\tfont-size: large;\n}\n.departure[data-v-43311de6] {\n\ttext-align: end;\n}\n.connection[data-v-43311de6] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/FlightReservation.vue"],names:[],mappings:";AA+JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,eAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.departureAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.departureAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">\n\t\t\t\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<ArrowIcon decorative />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane.vue'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight.vue'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport.vue'\nimport { importCalendarEvent } from '../../service/DAVService.js'\nimport logger from '../../logger.js'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t}),\n\t\t\t)\n\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: end;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n"],sourceRoot:""}]);const s=r},92902:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,"@media print{body{position:relative;height:initial}}","",{version:3,sources:["webpack://./src/views/Home.vue"],names:[],mappings:"AACA,aACC,KAKC,iBAAA,CACA,cAAA,CAAA",sourcesContent:["\n@media print {\n\tbody {\n\t\t/*\n\t\t * Nextcloud uses an inner scrolling but we need the\n\t\t * full page to scroll for print\n\t\t */\n\t\tposition: relative;\n\t\theight: initial;\n\t}\n}\n"],sourceRoot:""}]);const s=r},93173:(t,e,n)=>{"use strict";n.d(e,{Rn:()=>o,WN:()=>r,iQ:()=>s,ul:()=>l});var a=n(70715),i=n(63814);async function o(t,e,n){const o=(0,i.Jv)("/apps/mail/api/messages/{id}/attachment/{attachmentId}",{id:t,attachmentId:e});return await a.Ay.post(o,{targetPath:n})}async function r(t,e){return await o(t,0,e)}function s(t){return a.Ay.get(t).then((t=>t.data))}const l=(t,e,n)=>{const o=(0,i.Jv)("/apps/mail/api/attachments"),r=new FormData,s={onUploadProgress:t=>e(t,t.loaded,t.total)};return n&&(s.signal=n.signal),r.append("attachment",t),a.Ay.post(o,r,s).then((t=>t.data)).then((e=>{let{id:n}=e;return{file:t,id:n}}))}},94674:(t,e,n)=>{"use strict";n.d(e,{F:()=>o});var a=n(70715),i=n(63814);const o=t=>{const e=(0,i.Jv)("/apps/mail/api/autoComplete?term={term}",{term:t});return a.Ay.get(e).then((t=>t.data))}},94696:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".outbox-message[data-v-e9c40798]{list-style:none}.outbox-message.active[data-v-e9c40798]{background-color:var(--color-background-dark);border-radius:16px}.outbox-message .account-color[data-v-e9c40798]{position:absolute;inset-inline-start:0;width:2px;height:69px;z-index:1}","",{version:3,sources:["webpack://./src/components/OutboxMessageListItem.vue"],names:[],mappings:"AACA,iCACC,eAAA,CACA,wCACC,6CAAA,CACA,kBAAA,CAGD,gDACC,iBAAA,CACA,oBAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA",sourcesContent:["\n.outbox-message {\n\tlist-style: none;\n\t&.active {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: 16px;\n\t}\n\n\t.account-color {\n\t\tposition: absolute;\n\t\tinset-inline-start: 0;\n\t\twidth: 2px;\n\t\theight: 69px;\n\t\tz-index: 1;\n\t}\n}\n"],sourceRoot:""}]);const s=r},97470:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),o=n(76314),r=n.n(o)()(i());r.push([t.id,".source-modal[data-v-8cf2daa6] .modal-container{height:800px}.source-modal .source-modal-content[data-v-8cf2daa6]{width:100%;height:100%;overflow-y:scroll !important}","",{version:3,sources:["webpack://./src/components/MenuEnvelope.vue"],names:[],mappings:"AAEC,gDACC,YAAA,CAGD,qDACC,UAAA,CACA,WAAA,CACA,4BAAA",sourcesContent:["\n.source-modal {\n\t:deep(.modal-container) {\n\t\theight: 800px;\n\t}\n\n\t.source-modal-content {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toverflow-y: scroll !important;\n\t}\n}\n\n"],sourceRoot:""}]);const s=r},99580:()=>{}}]);
//# sourceMappingURL=mail.962.b3f95294bd0d5b913068.js.map