{"version":3,"file":"mail.new-message-modal.a606707e7fbbf1ecdc51.js","mappings":"kKAGIA,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,26BAA46B,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,kDAAkD,MAAQ,GAAG,SAAW,8XAA8X,eAAiB,CAAC,0iCAA0iC,WAAa,MAE//E,S,mFCJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,whJAAyhJ,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,2CAA2C,MAAQ,GAAG,SAAW,s0CAAs0C,eAAiB,CAAC,qpJAAspJ,WAAa,MAEzpV,S,mFCJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,ksBAAmsB,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,gDAAgD,MAAQ,GAAG,SAAW,iQAAiQ,eAAiB,CAAC,gpBAAgpB,WAAa,MAE7vD,S,mFCJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,4lBAA6lB,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,sDAAsD,MAAQ,GAAG,SAAW,sMAAsM,eAAiB,CAAC,0oBAA0oB,WAAa,MAE5lD,S,mFCJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,8wBAA+wB,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,oDAAoD,MAAQ,GAAG,SAAW,wSAAwS,eAAiB,CAAC,4yBAA4yB,WAAa,MAEhhE,S,YCPAD,EAAOE,QAAU,sU,mFCGbJ,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,mFAKtC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,mDAAmD,MAAQ,GAAG,SAAW,kCAAkC,eAAiB,CAAC,qgDAA8/C,WAAa,MAEtqD,S,mFCTIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,uGAAwG,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,4DAA4D,MAAQ,GAAG,SAAW,8BAA8B,eAAiB,CAAC,6GAA6G,WAAa,MAExa,S,mFCJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,6lEAA8lE,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,qDAAqD,MAAQ,GAAG,SAAW,4zBAA4zB,eAAiB,CAAC,09EAA09E,WAAa,MAEliL,S,8DCPA,I,4QCsBOE,eAAeC,EAAYC,GACjC,MAAMC,QAAiBC,EAAAA,EAAAA,GAAU,SAASC,KAAKH,EAAM,CACpDI,KAAM,6RAWNC,SAAS,IAGV,OAAOJ,GAAUG,MAAME,KACxB,C,sECCA,MCxCkL,EDwClL,CACAC,KAAA,qBACAC,WAAA,CACAC,MAAA,IACAC,MAAA,IACAC,oBAAAA,EAAAA,GAEAL,MAAA,CACAM,WAAA,CACAC,KAAAC,OACAC,UAAA,GAEAC,UAAA,CACAH,KAAAI,QACAC,SAAA,IAGAd,KAAAA,KACA,CACAe,SAAA,EACAC,WAAA,GACAC,UAAA,IAGAC,SAAA,CACAC,UAAAA,GACA,YAAAX,WAAAY,YAAA,KAAAZ,WAAAhB,GAAA,GACA6B,EAAAA,EAAAA,IAAA,6BAAAb,WAAAhB,sBAEA,EACA,EACA8B,OAAAA,GACA,OAAAC,GAAAC,SAAAC,WAAA,KAAAjB,WAAAkB,SACA,EACAC,SAAAA,GACA,YAAAnB,WAAAoB,SAAAC,MAAA,KAAAC,KACA,GAEAC,QAAA,CACAC,QAAAA,CAAAxB,GACA,KAAAyB,MAAA,uBAAAzB,EACA,I,uIEtEI0B,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IACxBF,EAAQG,OAAS,SAAc,KAAM,QACrCH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,IAAQM,QAAS,IAAQA,O,eCL1D,SAXgB,OACd,GCTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,KAAK,CAACE,YAAY,sBAAsBC,MAAM,CAAC,kCAAoCL,EAAIjC,WAAWuC,QAAS,CAACJ,EAAG,MAAM,CAACE,YAAY,sBAAsB,EAAkC,IAAhCJ,EAAIjC,WAAWwC,aAAwBL,EAAG,MAAM,CAACE,YAAY,2BAA2BI,MAAM,CAAC,IAAMR,EAAIjC,WAAWwC,gBAAiBP,EAAIjC,WAAWY,WAAYuB,EAAG,MAAM,CAACE,YAAY,2BAA2BI,MAAM,CAAC,IAAMR,EAAItB,cAAcwB,EAAG,MAAM,CAACE,YAAY,2BAA2BI,MAAM,CAAC,IAAMR,EAAInB,WAAWmB,EAAIS,GAAG,KAA8B,UAAxBT,EAAIjC,WAAWC,KAAkBkC,EAAG,OAAO,CAACE,YAAY,yBAAyB,CAACF,EAAG,QAAQ,CAACM,MAAM,CAAC,KAAO,OAAO,GAA4B,YAAxBR,EAAIjC,WAAWC,KAAoBkC,EAAG,OAAO,CAACA,EAAG,wBAAwB,GAAGF,EAAIU,OAAOV,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACE,YAAY,+BAA+B,CAACJ,EAAIS,GAAG,WAAWT,EAAIW,GAAGX,EAAIjC,WAAW6C,YAAcZ,EAAIjC,WAAW6C,YAAcZ,EAAIjC,WAAWoB,UAAU,YAAYa,EAAIS,GAAG,KAAOT,EAAIjC,WAAWS,SAAgLwB,EAAIjC,WAAWQ,WAAY2B,EAAG,OAAO,CAACE,YAAY,+BAA+B,CAACJ,EAAIS,GAAG,WAAWT,EAAIW,GAAGX,EAAIjC,WAAWQ,YAAY,YAAYyB,EAAIU,KAA5TR,EAAG,OAAO,CAACE,YAAY,+BAA+B,CAACF,EAAG,OAAO,CAACE,YAAY,mCAAmCS,MAAO,SAAWb,EAAIjC,WAAW+C,QAAU,UAAuKd,EAAIS,GAAG,KAAKP,EAAG,SAAS,CAACa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIT,SAASS,EAAIjC,WAAW,IAAI,CAACmC,EAAG,QAAQ,CAACM,MAAM,CAAC,KAAO,OAAO,IACv8C,GACsB,IDUpB,EACA,KACA,WACA,M,mCEyDF,MAAAS,GAAA,CACA,YACA,aACA,cACA,YACA,cC7EmL,GDgFnL,CACAvD,KAAA,sBACAC,WAAA,CACAuD,WAAA,IACAC,mBAAA,EACAC,YAAA,KACAC,UAAAA,GAAAA,GAEA5D,MAAA,CACA6D,MAAA,CACAtD,KAAAuD,MACArD,UAAA,GAEAsD,IAAA,CACAxD,KAAAC,OACAC,UAAA,GAEAuD,gBAAA,CACAzD,KAAA0D,OACArD,QAAA,IAGAd,IAAAA,GACA,OACAY,WAAA,EACAwD,QAAA,GAEAC,YAAA,GACAC,UAAA,EACAC,aAAA,EACAC,yBAAA,EACAC,kBAAA,EACAC,yBAAA,CACA,CACAC,OAAAC,EAAAA,EAAAA,IAAA,iBACAC,SAAA,KAAAC,qBACArE,KAAA,YAGAsE,kBAAA,CACA,CACAJ,OAAAC,EAAAA,EAAAA,IAAA,iBACAC,SAAA,KAAAG,yBACAvE,KAAA,YAKA,EACAS,SAAA,CACA+D,mBAAAA,GACA,YAAAZ,YAAAa,MAAA1E,GAAAA,EAAAuC,OACA,EACAoC,cAAAA,GACA,IAAAC,EAAA,EACAC,EAAA,EACA,UAAA7F,KAAA,KAAA4E,QACAgB,GAAA,KAAAhB,QAAA5E,GAAA4F,SACAC,GAAA,KAAAjB,QAAA5E,GAAA6F,MAEA,OAAAD,EAAAC,EAAA,KAAAC,QAAA,EACA,EACAD,KAAAA,GACA,IAAAA,EAAA,EACA,UAAA7F,KAAA,KAAA4E,QACAiB,GAAA,KAAAjB,QAAA5E,GAAA6F,MAEA,OAAAA,CACA,GAEAE,MAAA,CACAlB,WAAAA,GACA,KAAAmB,WAAA,WACA,IAAAC,EAAA,KACA,KAAAC,MAAArB,YAAAa,MAAA,CAAA1E,EAAAmF,KACA,MAAAC,EAAApF,EAAAqF,IAAAC,wBAAAF,IACA,cAAAH,GAAAA,IAAAG,GACA,KAAArB,cACA,KAAAD,UAAA,EACA,KAAAC,aAAA,IAEA,IAEAkB,EAAAG,EACA,KAAAF,MAAArB,YAAA0B,SAAAJ,EAAA,IACA,KAAApB,aAAA,EACA,KAAAD,UAAA,GACA,GAGA,GAEA,GACA,GAEA0B,OAAAA,GACA,KAAA/B,IAAAT,GAAA,+BAAAyC,sBACA,KAAAhC,IAAAT,GAAA,+BAAA0C,uBACA,KAAAjC,IAAAT,GAAA,oCAAA2C,gBACA,KAAAlC,IAAAT,GAAA,oCAAA4C,0BACA,KAAArC,MAAAsC,KAAA7F,IACA,KAAA6D,YAAA/E,KAAA,CACAE,GAAAgB,EAAAhB,GACAoC,SAAApB,EAAAoB,SACAyB,YAAAiD,IAAA,IAAA9F,EAAAoB,UACAyD,MAAA7E,EAAA+F,KACAtF,UAAA,EACAD,WAAA,KAAAwF,YAAAhG,EAAA+F,MACAvD,aAAAxC,EAAAiG,QAAAjG,EAAAkG,YAAAlG,EAAAmG,UAEAnG,IAEA,EACAuB,QAAA,CACA6E,kBAAAA,CAAAC,GACA,MAAAC,EAAAD,EAAAE,WAAA,oBAAAC,KAAAC,MAAAJ,EAAAE,WAAA,sBAAAG,MAAAC,GAAA,aAAAA,EAAAC,WAAAC,EACAC,OAAAD,IAAAP,GAAAA,EAAA/C,MACA,OAAA8C,EAAAU,YAAAhG,GAAAiG,iBAAAF,CACA,EACApB,qBAAAA,GACA,KAAA1B,yBAAA,CACA,EACA2B,cAAAA,GACA,KAAA1B,kBAAA,CACA,EACAwB,oBAAAA,GACA,KAAAP,MAAA+B,iBAAAC,OACA,EACAC,kBAAAA,CAAAtD,GACA,KAAApC,MAAA,aAAA8B,MAAA6D,OAAAvD,GACA,EACAwD,iBAAAA,GACA,OAAAnH,OAAAoH,OAAA,KAAA/D,OAAAgE,QAAA,CAAAC,EAAAC,IACA,WAAAA,EAAAxH,KAEAuH,EAGAA,EAAAC,EAAA1B,MACA,EACA,EACA2B,yBAAAA,CAAAC,GACA,KAAAvH,WAAA,EAEAwH,EAAAA,GAAAA,IAAA,mBAEA,MAAAC,EAAAC,IAAAC,IAAA,QAAA7H,OAAAoH,OAAAK,EAAAK,OAAAC,QACAC,EAAAL,EAAA,KAAAR,oBAOA,GANAc,EAAAA,EAAAC,MAAA,8BACAC,gBAAA,KAAAhB,oBACAQ,WACAS,MAAA,KAAA5E,gBACAwE,aAEA,KAAAxE,iBAAAwE,EAAA,KAAAxE,gBAGA,OAFA,KAAA6E,8BAAAZ,EAAAK,OAAAC,MAAA1C,aACA,KAAAnF,WAAA,GAIA,MAAAG,EAAAvB,GAAA,CAAAwJ,EAAA5D,KACA,KAAAhB,QAAA5E,GAAA4F,SAAAA,EACA,KAAAf,YAAAgC,KAAA,CAAA4C,EAAAtD,KACAsD,EAAA5F,cAAA7D,IACA,KAAA6E,YAAAsB,GAAA5E,SAAAqE,EACA,KAAA8D,eAAAD,EAAA7D,IAEA6D,IACA,EAIAE,EAAA9C,KAAA+C,IACA,MAAAC,EAAA,IAAAC,gBACA9I,EAAA,CACAoB,SAAAwH,EAAAjJ,KACAuB,SAAA0H,EAAA3I,KACAuC,aAAA,KAAAuG,gBAAAH,GACA/F,YAAAiD,IAAA,IAAA8C,EAAAjJ,MACAY,SAAA,KACAwC,QAAA,EACA8B,MAAA+D,EAAA7C,KACAtF,UAAA,EACA8B,OAAA,EACA3B,YAAA,EACAiI,cAEA,KAAAhF,YAAA/E,KAAAkB,GAEA4H,EAAAA,GAAAA,IAAA,KAAAhE,QAAAgF,EAAAjJ,KAAA,CACAkF,MAAA+D,EAAA7C,KACAnB,SAAA,IAEA,IACA,OAAAoE,EAAAA,EAAAA,IAAAJ,EAAArI,EAAAqI,EAAAjJ,MAAAkJ,GACAI,OAAA,KACA,KAAApF,YAAAa,MAAA1E,GACAA,EAAA6C,cAAA+F,EAAAjJ,OAAAK,EAAAuC,QACA,KAAA2G,KAAAlJ,EAAA,aACA,IAGA,IAEAmJ,MAAAC,IAAA,SAAAR,EAAA,GAAA5J,GAAAoK,EACAjB,EAAAA,EAAAkB,KAAA,6BAAAT,OAAA5J,OAEAgB,EAAAhB,GAAAA,EAEA,KAAAmI,mBAAA,EACA/F,SAAAwH,EAAAjJ,KACAkD,YAAAiD,IAAA,IAAA8C,EAAAjJ,MACAX,KACA+G,KAAA6C,EAAA7C,KACA9F,KAAA,UACA,GAEA,OAAAsC,GACA4F,EAAAA,EAAA5F,MAAA,yBAAAqG,OAAArG,SACA,IACAoF,EAAAK,OAAAC,OAEAqB,EAAAC,QAAAC,IAAAb,GACAM,OAAA1G,GAAA4F,EAAAA,EAAA5F,MAAA,oCAAAA,YACA4G,MAAA,SAAA/I,WAAA,IAIA,OAFA,KAAAqB,MAAA,SAAA6H,GAEAA,CACA,EACA,0BAAAhF,CAAAmF,GACA,IACA,MAAAC,EAAAD,EAAA5D,KAAAQ,GAAAA,EAAAjH,OACA,KAAAuK,kBAAA,EAEA,MAAAC,QAAAL,QAAAC,IAAAE,EAAA7D,IAAA1G,IAMA+I,EAJA0B,EAAArC,QAAA,CAAAsC,EAAApB,IACAoB,EAAApB,EAAA1C,MACA,GAEA,KAAAsB,oBAEA,QAAA3D,iBAAAwE,EAAA,KAAAxE,gBAGA,YAFA,KAAA6E,8BAAAmB,EAAAnE,QAKA,KAAA4B,mBAAAuC,EAAA7D,KAAA,CAAAlG,EAAAwF,KACA,MAAA2E,EAAA,CACA1I,SAAAzB,EACAkD,YAAAiD,IAAA,IAAAnG,GACAM,KAAA,QACA8F,KAAA6D,EAAAzE,GAAAY,MAGAgE,EAAA,CACAtJ,UAAA,EACA+B,aAAA,KAAAuG,gBAAAe,GACAjF,MAAA+E,EAAAzE,GAAAY,KACAvF,WAAA,KAAAwF,YAAA4D,EAAAzE,GAAAY,MACAnF,WAAAgJ,EAAAzE,GAAA,eAEAnG,GAAA4K,EAAAzE,GAAA6E,OACApF,SAAA,GAKA,OAFA,KAAAf,YAAA/E,KAAAoB,OAAA+J,OAAAF,EAAAD,IAEAA,CAAA,IAEA,OAAAvH,GACA4F,EAAAA,EAAA5F,MAAA,yCAAAA,SACA,CACA,EACA,8BAAAiC,CAAAiF,GACA,IACA,KAAAS,sBAAA,EACA,MAAAC,QEpVkBjL,eAAeE,EAAMgL,GACtC,IAMC,aALkBC,EAAAA,GAAMC,MAAKC,EAAAA,EAAAA,IAAe,6BAA8B,GAAK,SAAU,CACxFC,UAAW,EACXpL,OACAqL,UAAWL,KAED5K,KAAKkL,IAAIlL,KAAK2K,GAC1B,CAAE,MAAO5H,GACR,MACCA,EAAMlD,UACHkD,EAAMlD,SAASG,MACf+C,EAAMlD,SAASG,KAAKkL,KACpBnI,EAAMlD,SAASG,KAAKkL,IAAIC,MACxBpI,EAAMlD,SAASG,KAAKkL,IAAIC,KAAKC,SAEhCC,QAAQtI,MAAM,6BAA6BA,EAAMlD,SAASG,KAAKkL,IAAIC,KAAKC,SAAW,oBACnFE,EAAAA,EAAAA,IAAUvI,EAAMlD,SAASG,KAAKkL,IAAIC,KAAKC,SACjCrI,IAENsI,QAAQtI,MAAM,4CACduI,EAAAA,EAAAA,IAAU1G,EAAE,OAAQ,6BACd7B,EAER,CACD,CF2TAwI,CAAAtB,EAAA,GAAArK,MAAA4L,EAAAA,EAAAA,OAEA,KAAAC,qBAAA,YAAAd,MAAAA,QACA,OAAA5H,GACA4F,EAAAA,EAAA5F,MAAA,8CAAAA,SACA,CACA,EAQAqD,wBAAAA,CAAAsF,GAAA,OAAAlM,EAAA,SAAAoC,GAAA8J,EACA,MAAAlL,EAAA,CACAC,KAAA,UACAjB,KACAoC,YAEA,KAAAyC,YAAA/E,KAAA,IACAkB,EACAS,UAAA,IAEA,KAAA0G,mBAAA,CAAAnH,GACA,EACAuI,6BAAAA,CAAA4C,IACAC,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IACA,OACA,wGACA,0GACAF,EACA,CACApF,MAAAuF,EAAAA,EAAAA,IAAA,KAAA5H,mBAGA,EACAlC,QAAAA,CAAAxB,IAEAA,EAAAS,UAAAT,EAAA6I,YACA7I,EAAA6I,WAAA0C,QAGA,MAAAC,EACAxL,EAAAoB,SADAoK,GAEAxL,EAAA6C,YACA7C,EAAAhB,IAHAwM,GAIAxL,EAAA6E,MACA7E,EAAAC,MAGA,KAAA4D,YAAA,KAAAA,YAAA4H,QAAAC,GAAAA,IAAA1L,IAEA,KAAAyB,MACA,QACA,KAAA8B,MAAAkI,QAAAC,GACA,UAAAF,EACAE,EAAAtK,WAAAoK,EAEAE,EAAA1M,KAAAwM,KAKA,MAAAG,EAAAzL,OAAA0L,KAAA,KAAAhI,SACA6H,QAAArK,GAAAA,IAAApB,EAAAoB,WACAmG,QAAA,CAAAC,EAAApG,KACAoG,EAAApG,GAAA,KAAAwC,QAAAxC,GACAoG,IACA,IAEA,KAAA5D,QAAA+H,EAEA,KAAAlK,MAAA,uBAAAzB,EACA,EACAiL,oBAAAA,CAAAY,GACA,KAAApI,IAAAqI,KAAA,2BAAAD,EACA,EACA7F,WAAAA,CAAA+F,GAAA,IAAAC,EAAAC,UAAA1G,OAAA,QAAAsB,IAAAoF,UAAA,GAAAA,UAAA,KACA,OAAAF,EAAA,YACA,MACAG,EAAAF,EAAA,IAAAA,EAEA7G,EAAAgH,KAAAC,MAAAD,KAAAE,IAAAN,GAAAI,KAAAE,IAHA,OAIA,OAAAC,YAAAP,EAAAI,KAAAI,IAJA,KAIApH,IAAAL,QAAAoH,IAAA,IAFA,8CAEA/G,EACA,EACAuD,cAAAA,CAAAD,EAAAlI,GACA,KAAAsD,YAAAgC,KAAA,CAAA7F,EAAAmF,KACA,GAAAsD,EAAArH,WAAApB,EAAAoB,WACApB,EAAAS,SAAA,CACA,MAAA+L,EAAAjM,GAAAP,EAAA6E,MAAAtE,EAAAP,EAAA6E,MACA,KAAAqE,KAAAlJ,EAAA,WAAAwM,GACA,KAAAtD,KAAAlJ,EAAA,kBAAAgG,YAAAwG,IACA,KAAAtD,KAAAlJ,EAAA,UAAAwM,EAAAxM,EAAA6E,MAAA,KAAAC,QAAA,GACA2D,EAAA5D,OAAA2H,GACA,KAAAtD,KAAAlJ,EAAA,cAEA,CAEA,OAAAA,CAAA,GAEA,EACA+I,eAAAA,CAAAH,GACA,aAAA3C,QAAA2C,IACA6D,IAAAC,gBAAA9D,EAIA,EACA3C,QAAA2C,GACAA,EAAA3I,OAAA,IAAAiD,GAAAyJ,QAAA/D,EAAA3I,Q,gBG1cI,GAAU,CAAC,EAEf,GAAQ0B,kBAAoB,IAC5B,GAAQC,cAAgB,IACxB,GAAQC,OAAS,SAAc,KAAM,QACrC,GAAQC,OAAS,IACjB,GAAQC,mBAAqB,IAEhB,IAAI,KAAS,IAKJ,MAAW,KAAQC,QAAS,KAAQA,OCL1D,UAXgB,OACd,ICTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAAEJ,EAAI8B,YAAa5B,EAAG,MAAM,CAACE,YAAY,mCAAmCC,MAAM,CAAE,gDAAiDL,EAAIwC,qBAAsBzB,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAI6B,UAAY7B,EAAI6B,QAAQ,IAAI,CAAC3B,EAAG,OAAO,CAACF,EAAIS,GAAG,WAAWT,EAAIW,GAAGX,EAAIoJ,EAAE,OAAQ,qBAAsB,sBAAuBpJ,EAAI4B,YAAY0B,OAAQ,CAAEqH,MAAO3K,EAAI4B,YAAY0B,UAAW,KAAKtD,EAAIW,GAAGX,EAAI+D,YAAY/D,EAAIoF,sBAAsB,aAAapF,EAAIS,GAAG,KAAMT,EAAI6B,SAAU3B,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,MAAMR,EAAIU,KAAKV,EAAIS,GAAG,KAAOT,EAAI6B,SAAgD7B,EAAIU,KAA1CR,EAAG,cAAc,CAACM,MAAM,CAAC,KAAO,OAAgB,GAAGR,EAAIU,KAAKV,EAAIS,GAAG,KAAKP,EAAG,KAAK,CAACE,YAAY,gCAAgCC,MAAM,CACnxBuK,KAAM5K,EAAI6B,SACVgJ,QAAS7K,EAAI6B,UAAY7B,EAAI8B,cAC3B9B,EAAI8K,GAAI9K,EAAI4B,aAAa,SAAS7D,GAAY,OAAOmC,EAAG,qBAAqB,CAACyE,IAAI5G,EAAWhB,GAAGgO,IAAI,cAAcC,UAAS,EAAKxK,MAAM,CAAC,WAAazC,EAAW,UAAYiC,EAAI7B,WAAW4C,GAAG,CAAC,uBAAuB,SAASC,GAAQ,OAAOhB,EAAIT,SAASxB,EAAW,IAAI,IAAG,GAAGiC,EAAIS,GAAG,KAAKP,EAAG,QAAQ,CAAC6K,IAAI,mBAAmBE,YAAY,CAAC,QAAU,QAAQzK,MAAM,CAAC,KAAO,OAAO,SAAW,IAAIO,GAAG,CAAC,OAASf,EAAIyF,6BAA6BzF,EAAIS,GAAG,KAAMT,EAAI+B,wBAAyB7B,EAAG,aAAa,CAACM,MAAM,CAAC,KAAOR,EAAImC,EAAE,OAAO,sCAAsC,QAAUnC,EAAIiC,yBAAyB,YAAYjC,EAAImE,oBAAoBpD,GAAG,CAAC,MAAQmK,IAAIlL,EAAI+B,yBAA0B,KAAS/B,EAAIU,KAAKV,EAAIS,GAAG,KAAMT,EAAIgC,iBAAkB9B,EAAG,aAAa,CAACM,MAAM,CAAC,KAAOR,EAAImC,EAAE,OAAO,oCAAoC,aAAc,EAAM,QAAUnC,EAAIsC,kBAAkB,YAAYtC,EAAImE,oBAAoBpD,GAAG,CAAC,MAAQmK,IAAIlL,EAAIgC,kBAAmB,KAAShC,EAAIU,MAAM,EACh8B,GACsB,IDOpB,EACA,KACA,WACA,M,QEfF,I,gDCqCA,MCrCoL,GDqCpL,CACAhD,KAAA,iBACAC,WAAA,CACAwN,SAAA,KACAC,SAAA,KACAC,SAAA,KACAC,UAAAA,GAAAA,GAEA/N,KAAAA,KACA,CACAgO,OAAA,OAGA9M,SAAA,KACA+M,EAAAA,GAAAA,IAAAC,GAAAA,EAAA,4CAEAnM,QAAA,CACAoM,WAAAA,CAAAC,GACA,KAAAJ,OAAAI,CAEA,EACAC,WAAAA,GACA,KAAApM,MAAA,QACA,I,gBEjDI,GAAU,CAAC,EAEf,GAAQE,kBAAoB,IAC5B,GAAQC,cAAgB,IACxB,GAAQC,OAAS,SAAc,KAAM,QACrC,GAAQC,OAAS,IACjB,GAAQC,mBAAqB,IAEhB,IAAI,KAAS,IAKJ,MAAW,KAAQC,QAAS,KAAQA,OCL1D,UAXgB,OACd,IJTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,WAAW,CAACM,MAAM,CAAC,GAAK,oBAAoB,KAAOR,EAAImC,EAAE,OAAO,gBAAgBpB,GAAG,CAAC,QAAUf,EAAI4L,cAAc,CAAC1L,EAAG,IAAI,CAACF,EAAIS,GAAGT,EAAIW,GAAGX,EAAImC,EAAE,OAAO,mDAAmDnC,EAAIS,GAAG,KAAKT,EAAI8K,GAAI9K,EAAI6L,mBAAmB,SAASF,GAAW,OAAOzL,EAAG,WAAW,CAACyE,IAAIgH,EAAU5O,GAAGyD,MAAM,CAAC,aAAamL,EAAU,gBAAe,EAAK,OAASA,EAAU5O,KAAOiD,EAAIuL,QAAQxO,IAAIgE,GAAG,CAAC,MAAQf,EAAI0L,cAAc,IAAG1L,EAAIS,GAAG,KAAKT,EAAI8K,GAAI9K,EAAI8L,uBAAuB,SAASH,GAAW,OAAOzL,EAAG,WAAW,CAACyE,IAAIgH,EAAU5O,GAAGyD,MAAM,CAAC,aAAamL,EAAU,QAAS,EAAK,gBAAe,EAAK,OAASA,EAAU5O,KAAOiD,EAAIuL,QAAQxO,IAAIgE,GAAG,CAAC,MAAQf,EAAI0L,cAAc,IAAG1L,EAAIS,GAAG,KAAKP,EAAG,WAAW,CAACE,YAAY,gBAAgBI,MAAM,CAAC,UAAYR,EAAIuL,QAAQxK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIR,MAAM,SAAUQ,EAAIuL,OAAO,GAAGQ,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,GAAG,KAAOR,EAAImC,EAAE,OAAO,wBAAwB,EAAE+J,OAAM,MAAS,CAAClM,EAAIS,GAAG,SAAST,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,WAAW,aAAa,EACnlC,GACsB,IIUpB,EACA,KACA,WACA,M,oFCOF,MCtBiL,GDsBjL,CACAzE,KAAA,oBACAC,WAAA,CACAwO,aAAA,KACAvO,MAAAA,GAAAA,GAEAH,MAAA,CACA2O,OAAA,CACApO,KAAAC,OACAC,UAAA,IAGAX,KAAAA,KACA,CACA8O,YAAA,IAGA5N,SAAA,KACA6N,EAAAA,GAAAA,IAAAb,GAAAA,IAEA,aAAAc,GACA,cAAAC,UAAAC,cAAA,gCACA,KAAAJ,WAAA,KAAAG,UAAAE,kBAAA,KAAAN,OAAAO,OAEA,EACArN,QAAA,CACAsN,eAAAA,CAAAR,EAAAS,GACA,KAAArN,MAAA,mBAAA4M,EAAAS,EACA,I,gBEvCI,GAAU,CAAC,EAEf,GAAQnN,kBAAoB,IAC5B,GAAQC,cAAgB,IACxB,GAAQC,OAAS,SAAc,KAAM,QACrC,GAAQC,OAAS,IACjB,GAAQC,mBAAqB,IAEhB,IAAI,KAAS,IAKJ,MAAW,KAAQC,QAAS,KAAQA,OCL1D,UAXgB,OACd,ICTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,MAAML,EAAIqM,WAAW,2BAA4B,oCAAoC7L,MAAM,CAAC,MAAQR,EAAIoM,OAAOO,QAAQ,CAACzM,EAAG,eAAe,CAACM,MAAM,CAAC,aAAY,EAAK,KAAOR,EAAIoM,OAAOlK,MAAM,IAAMlC,EAAIoM,OAAOU,MAAM,cAAc,MAAM9M,EAAIS,GAAG,KAAKP,EAAG,QAAQ,CAACE,YAAY,mBAAmBI,MAAM,CAAC,KAAO,IAAIO,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAO+L,iBAAwB/M,EAAI4M,gBAAgB5M,EAAIoM,OAAO,MAAM,EAC7d,GACsB,IDUpB,EACA,KACA,WACA,M,mIEFF,MCbgL,GDahL,CACA1O,KAAA,mBACAD,MAAA,CACA6D,MAAA,CACAtD,KAAAgP,OACA9O,UAAA,GAEA+O,WAAA,CACAjP,KAAAuD,MACArD,UAAA,GAEAgP,WAAA,CACAlP,KAAAC,OACAC,UAAA,EACAG,QAAAA,KACA,GACA8O,iBAAA,CACAnP,KAAAI,QACAC,SAAA,IAGAd,KAAAA,KACA,CACA6P,YAAAxI,IAGA,aAAA2H,GACA,MAAAc,IAAA,KAAAH,aAAAI,EAAAA,GAAAA,GAAA,KAAAJ,YACAK,EAAA,KAAAJ,iBAAA,KAAAD,YAAA5L,WAAAsD,EAEA,KAAAwI,aAAAI,OAAAC,WAAAC,sBAAA,4BAAA9I,EAAA,CACA2I,WAAAF,EAAAE,OAAA3I,GAEA,EACAtF,QAAA,CACA,UAAAqO,GACA,MAAAV,EAAA,KAAAA,WAAArJ,KAAAgK,GAAAA,EAAAjB,QACAzG,EAAAA,EAAAkB,KAAA,sBAAA6F,eACA,MAAAY,QAAA,KAAAT,OAAAU,QAAAb,GACA/G,EAAAA,EAAAkB,KAAA,oBAAAyG,YAEA,KAAArO,MAAA,QAAAqO,EACA,I,gBE5CI,GAAU,CAAC,EAEf,GAAQnO,kBAAoB,IAC5B,GAAQC,cAAgB,IACxB,GAAQC,OAAS,SAAc,KAAM,QACrC,GAAQC,OAAS,IACjB,GAAQC,mBAAqB,IAEhB,IAAI,KAAS,IAKJ,MAAW,KAAQC,QAAS,KAAQA,OCL1D,UAXgB,OACd,ICTW,WAA+C,OAAOG,EAA5BD,KAAYE,MAAMD,IAAa,MAAM,CAACM,MAAM,CAAC,GAAK,wBACzF,GACsB,IDUpB,EACA,KACA,WACA,M,2GEofF,MAAAuN,GAAAC,IAAAC,GAAAA,EAAA,KAIAtI,EAAAA,GAAAuI,IAAAC,GAEA,UACAzQ,KAAA,WACAC,WAAA,CACAyQ,iBAAA,GACAC,QAAA,KACAC,aAAA,KACAC,eAAA,KACAC,YAAA,KACAC,YAAA,KACAC,UAAA,KACAC,oBAAA,GACAC,eAAA,GACAC,YAAA,IACAC,OAAA,IACAC,SAAA,KACAC,WAAA,KACAC,WAAA,KACAC,WAAA,KACAC,eAAA,KACAC,SAAA,KACAC,iBAAA,KACAC,UAAA,KACAC,WAAA,KACApD,aAAA,KACAqD,kBAAA,GACAC,KAAA,KACAC,UAAA,KACAC,WAAA,KACAC,uBAAAA,GAAAA,IAEAnS,MAAA,CACAoS,YAAA,CACA7R,KAAA0D,OACArD,QAAAA,KACA,GACAyR,UAAA,CACA9R,KAAA0D,OACArD,aAAAuG,GAEAmL,GAAA,CACA/R,KAAAuD,MACAlD,QAAAA,IAAA,IAEA2R,GAAA,CACAhS,KAAAuD,MACAlD,QAAAA,IAAA,IAEA4R,IAAA,CACAjS,KAAAuD,MACAlD,QAAAA,IAAA,IAEA6R,QAAA,CACAlS,KAAAgP,OACA3O,QAAA,IAEA8R,KAAA,CACAnS,KAAAC,OACAI,QAAAA,KAAA+R,EAAAA,GAAAA,IAAA,KAEAC,WAAA,CACArS,KAAAgP,OACA3O,QAAA,IAEAiS,mBAAA,CACAtS,KAAAgP,OACA3O,aAAAuG,GAEA2L,QAAA,CACAvS,KAAAC,OACAC,UAAA,EACAG,QAAAA,KACA,GACAmS,YAAA,CACAxS,KAAAC,OACAC,UAAA,EACAG,QAAAA,KACA,GACAoS,kBAAA,CACAzS,KAAAuD,MACArD,UAAA,EACAG,QAAAA,IAAA,IAEAqS,WAAA,CACA1S,KAAAgP,OACA9O,UAAA,EACAG,aAAAuG,GAEA+L,OAAA,CACA3S,KAAA0D,OACArD,aAAAuG,GAEAgM,gBAAA,CACA5S,KAAAuD,MACAlD,QAAAA,IAAA,IAEAiC,MAAA,CACAtC,KAAAgP,OACA3O,aAAAuG,GAEAiM,aAAA,CACA7S,KAAAI,QACAC,SAAA,GAEAyS,qBAAA,CACA9S,KAAAI,QACAC,SAAA,GAEA0S,YAAA,CACA/S,KAAAI,QACAC,SAAA,GAEA2S,WAAA,CACAhT,KAAAI,QACAC,SAAA,GAEA4S,UAAA,CACAjT,KAAAI,QACAC,SAAA,GAEA6S,aAAA,CACAlT,KAAAI,QACAC,SAAA,GAEA8S,YAAA,CACAnT,KAAAI,QACAF,UAAA,GAEAkT,WAAA,CACApT,KAAAI,QACAC,SAAA,GAEAgT,SAAA,CACArT,KAAAuD,MACArD,UAAA,IAGAX,IAAAA,GAEA,MAAA+T,EAAA,IAAAC,KAGA,OAFAD,EAAAE,SAAAF,EAAAG,WAAA,GAEA,CACAC,SAAA,EACAC,aAAA,KACAC,OAAA,KAAA5B,GAAA1M,OAAA,EACAuO,QAAA,KAAA5B,IAAA3M,OAAA,EACAwO,eAtJA,EAuJAC,uBAAA,KAAAhC,GAAA5K,OAAA,KAAA6K,IAAA7K,OAAA,KAAA8K,KACA+B,cAAA,GACAC,WAAA,KAAA/B,QACAgC,QAAA,KAAA7B,WACAzO,YAAA,KAAAgP,gBACAuB,QAAA,KAAApC,GAAAtN,MAAAsN,GAAAA,EAAApD,OAAAyF,WAAA,aAAArC,EAAApD,OAAAyF,WAAA,eACAC,mBAAAC,IAAA,SAAAC,WACAC,SAAA,KAAAzC,GACA0C,SAAA,KAAAzC,GACA0C,UAAA,KAAAzC,IACAzO,KAAAmR,EAAAA,GAAAA,KACA7E,SAAA,EACAL,WAAA,CACAmF,WAAA,EACAC,aAAAjO,EACAkO,YAAA,IAEAC,WAAA,cAAA5C,MAAA6C,OAAAC,GAAAA,GAAAC,GAAAA,GACAC,cAAA,KAAA/B,WACAgC,iBAAA,EACAC,oBAAA,EACAC,oBAAA,EACAC,qBAAA,EACAC,sBAAA,EACAC,eAAA,EACAC,mBAAA,EACApC,eACAqC,UAAA,KAAAhD,OACAiD,uBAAA,KAAAC,EAAAA,EAAAA,MAAA,GAAAA,EAAAA,EAAAA,MACAC,UAAA,CACAC,UAAAC,GACAA,GAAAC,EAAAA,GAAAA,GAAAD,GAAAhB,OAAA,UAEAxO,MAAAlD,GACAA,GAAA2S,EAAAA,GAAAA,GAAA3S,EAAA,OAAA4S,SAAA,MAGAC,WAAA,EACAC,eAAA,KAAAnD,UACAoD,kBAAA,KAAAnD,aACAoD,cAAA,EACAC,uBAAA,EACAC,qBAAA,GACAC,iBAAA,GAEA,EACAhW,SAAA,KACA6N,EAAAA,GAAAA,IAAAb,GAAAA,OACAD,EAAAA,GAAAA,IAAAC,GAAAA,EAAA,gCACAiJ,iBAAAA,GACA,OAAAC,SAAA,KAAAnI,UAAAoI,eAAA,EACA,EACAC,OAAAA,GACA,IAAAC,EAAA,EA8BA,OA7BA,KAAAzD,SAAA7H,QAAAC,IAAAA,EAAAsL,YACAC,SAAAC,GAAA,CACA,CACAlY,GAAAkY,EAAAlY,GACAmY,QAAA,KACAC,SAAAL,IACA/B,WAAAkC,EAAAlC,WACAqC,UAAAH,EAAAG,UACA1X,KAAAuX,EAAAvX,KACA2X,aAAAJ,EAAAI,aACAC,oBAAAL,EAAAK,oBACAC,mBAAAN,EAAAM,mBACAC,WAAAP,EAAAQ,kBAEAR,EAAAJ,QAAAjR,KAAA8R,IACA,CACA3Y,GAAAkY,EAAAlY,GACAmY,QAAAQ,EAAA3Y,GACAoY,SAAAL,IACA/B,WAAAkC,EAAAlC,WACAqC,UAAAM,EAAAN,UACA1X,KAAAgY,EAAAhY,KACA2X,aAAAK,EAAAA,MACAJ,oBAAAL,EAAAK,oBACAC,mBAAAG,EAAAH,mBACAC,WAAAP,EAAAQ,wBAIAE,MACA,EACAC,aAAAA,GACA,YAAApD,SAAArN,OAAA,KAAAsN,UAAAtN,OAAA,KAAAuN,UACA,EACAmD,UAAAA,IACA,IAAAtE,MAAA,IAAAA,MAAAuE,SAAA,IAAAvE,MAAAwE,YAEAC,mBAAAA,GACA,YAAAxJ,UAAAC,cAAA,wBACA,EACAwJ,oBAAAA,GACA,OAAAC,IAAA,QAAAA,CAAA,KAAAlE,cACA7M,OAAA,KAAA4M,wBACAnO,KAAAuS,IAAA,IAAAA,EAAAjU,MAAAiU,EAAAjU,OAAAiU,EAAAxJ,UACA,EACAyJ,SAAAA,GACA,YAAAxR,IAAA,KAAA4L,WACA,EACA6F,OAAAA,GACA,YAAAzR,IAAA,KAAA2L,OACA,EACA+F,OAAAA,GACA,aAAAjC,qBAAA,KAAAkC,iCAAA,KAAAC,sCAAAlT,SAIA,KAAAwK,SAAA,KAAAL,WAAAqF,YAAAxP,UAIA,KAAAkP,SAAAlP,OAAA,QAAAmP,SAAAnP,OAAA,QAAAoP,UAAApP,OAAA,GACA,EACAmT,eAAAA,GACA,YAAA1D,aAAAE,GAAAA,EACA,EACAyD,iBAAAA,GACA,YAAArC,kBACA,KAAAV,WACAxR,EAAAA,EAAAA,IAAA,sDAAAwU,mBAAA,KAAAhD,cAEAxR,EAAAA,EAAAA,IAAA,uCAGA,KAAAsL,WAAAmF,WAAA,KAAA9E,QACA,KAAA6F,WACAxR,EAAAA,EAAAA,IAAA,0DAAAwU,mBAAA,KAAAhD,cAEAxR,EAAAA,EAAAA,IAAA,2CAGA,KAAAwR,WACAxR,EAAAA,EAAAA,IAAA,8BAAAwU,mBAAA,KAAAhD,cAEAxR,EAAAA,EAAAA,IAAA,cACA,EACAyU,mBAAAA,GACA,MAAAC,EAAA,IAAAtF,KAEA,OADAsF,EAAAC,QAAAD,EAAAE,UAAA,OACAF,EAAArF,SAAA,QAEA,EACAwF,qBAAAA,GACA,MAAAH,EAAA,IAAAtF,KAEA,OADAsF,EAAAC,QAAAD,EAAAE,UAAA,OACAF,EAAArF,SAAA,SACA,EACAyF,iBAAAA,GACA,MAAAJ,EAAA,IAAAtF,KAEA,OADAsF,EAAArF,SAAA,SACAqF,EAAAf,QAAAe,EAAAd,WAAA,EAAAc,EAAAK,UAAA,IACA,EACAC,cAAAA,GACA,WAAA5F,KAAA,KAAAD,cAAAyF,SACA,EACAK,SAAAA,KAIA,KAHAnD,EAAAA,GAAAA,KAAAoD,QAAAC,EAAAA,EAAAA,OAAAC,aACAC,eAAA,MAAAC,cAEA/M,QAAA,KAEAgN,uBAAAA,GACA,cAAA/D,WAAAzJ,KAAAC,MAAA,KAAAyM,oBAAA,OAAA1M,KAAAC,MAAA,KAAAwJ,UAAA,KAKA,EACAgE,yBAAAA,GACA,cAAAhE,WAAAzJ,KAAAC,MAAA,KAAA6M,sBAAA,OAAA9M,KAAAC,MAAA,KAAAwJ,UAAA,KAKA,EACAiE,qBAAAA,GACA,cAAAjE,WAAAzJ,KAAAC,MAAA,KAAA8M,kBAAA,OAAA/M,KAAAC,MAAA,KAAAwJ,UAAA,KAKA,EACAkE,cAAAA,GACA,cAAAlE,WAAA,KAAA+D,yBAAA,KAAAC,2BAAA,KAAAC,sBAKA,EAOArB,+BAAAA,GACA,IA9VA,IA8VA,KAAAzE,cAIA,YAAAgG,yBAAA,KAAAhG,cACA,EAOAiG,eAAAA,GACA,YAAA3D,kBAAA,KAAAmC,+BACA,EAOAyB,kBAAAA,GACA,YAAA3D,qBAAA,KAAAkC,iCAAA,SAAAC,sCAAAlT,MACA,EAOAkT,qCAAAA,GACA,MAAAyB,EAAA,GASA,OAPA,KAAArC,cAAAsC,SAAA/B,IACA,KAAA3J,UAAA2L,2BAAAhC,EAAAxJ,QAEAsL,EAAApb,KAAAsZ,EAAAxJ,MACA,IAGAsL,CACA,EAEAG,UAAAA,GACA,YAAA5L,UAAAV,uBAAAlI,KAAA+H,IAAA,CAAA0M,MAAA1M,EAAA0M,MAAAC,QAAA3M,EAAA2M,YACAnT,OAAA,KAAAqH,UAAAX,kBAAAjI,KAAA+H,IAAA,CAAA0M,MAAA1M,EAAA0M,MAAAC,QAAA3M,EAAA2M,YACA,GAEAxV,MAAA,CACA,2BACA,KAAAyV,OACA,EACA3C,aAAAA,GACA,KAAA4C,qBACA,EACA3D,OAAAA,CAAA4D,GAEA,GADA7P,QAAAzC,MAAA,oBAtZA,IAuZA,KAAA2L,cACA,OAGA,MAAA4G,EAAAD,EAAAhU,MAAAiR,GAAAA,EAAA3Y,KAAA,KAAA+U,cAAA/U,IAAA2Y,EAAAR,UAAA,KAAApD,cAAAoD,eACAtQ,IAAA8T,EAEA,KAAAC,cAAAF,EAAA,IAGA,KAAAE,cAAAD,EAEA,EACAlG,QAAAA,CAAAjJ,GACA,KAAA/J,MAAA,YAAA+J,EACA,EACAkJ,QAAAA,CAAAlJ,GACA,KAAA/J,MAAA,YAAA+J,EACA,EACAmJ,SAAAA,CAAAnJ,GACA,KAAA/J,MAAA,aAAA+J,EACA,EACA0I,UAAAA,CAAA1I,GACA,KAAA/J,MAAA,iBAAA+J,EACA,EACA2I,OAAAA,CAAA3I,GACA,KAAA/J,MAAA,qBAAA+J,EACA,EACA3H,WAAAA,CAAA2H,GACA,KAAA/J,MAAA,0BAAA+J,EACA,EACAoK,SAAAA,CAAApK,GACA,KAAA/J,MAAA,iBAAA+J,EACA,EACA6K,cAAAA,CAAA7K,GACA,KAAA/J,MAAA,oBAAA+J,EACA,EACA8K,iBAAAA,CAAA9K,GACA,KAAA/J,MAAA,uBAAA+J,EACA,EACA4J,aAAAA,CAAA5J,GACA,KAAA/J,MAAA,qBAAA+J,EACA,EACAuI,cAAA,CACA8G,OAAAA,GACA,MAAAC,EAAA,KAAA/G,cAAAuD,aACA,KAAAjB,gBAAA,SAAAK,iBAAA/J,QAAAmO,EACA,EACAC,WAAA,IAGA,iBAAAC,GACA,KAAAC,WACA,KAAAC,iBACA,KAAAC,yBAAAC,EAAAA,GAAAA,KACA,EACA5M,OAAAA,IACA,KAAA8J,SAAA,KAAAlF,aACA,KAAApO,WAAA,SAAAE,MAAAmW,QAAAhW,IAAAiW,eAIAzU,IAAA,KAAA4L,aAAA5O,aACA,KAAA4O,YAAA5O,YAAAsW,SAAAoB,IACA,KAAA1X,YAAA/E,KAAA,CACAsC,SAAAma,EAAAna,SACAyB,YAAAiD,IAAA,IAAAyV,EAAAna,UACApC,GAAAuc,EAAAvc,GACAwc,UAAA,KAAA/I,YAAAgJ,WACAxb,KAAA,sBACA,IAKA,UAAAjB,KAAA,KAAA0T,kBAAA,CACA,MAAAgJ,EAAA,KAAAjN,UAAAkN,YAAA3c,GACA0c,EAQA,KAAAjY,IAAAqI,KAAA,gCACA9M,KACAoC,SAAAsa,EAAAvJ,QAAA,UARArH,EAAAA,EAAAA,KAAA1G,EAAAA,EAAAA,IAAA,0CACApF,OASA,CAGA,KAAA4T,QAAA,KAAAkH,iBACA,KAAAvG,aAAA,IAAAC,KAAA,KAAAZ,SAGA,KAAA8D,iBAAA,KAAAjI,UAAAC,cAAA,yBACA,KAAAD,UAAAmN,uBACA,KAAAnN,UAAAoN,wBACA,KAAApN,UAAAqN,oBAEA,EACAC,aAAAA,GACAtM,OAAAuM,oBAAA,kBAAAb,mBACA,EACA5Z,QAAA,CACA0a,WAAAA,CAAAC,GACA,aAAAzF,qBAAAyF,IACA,KAAAzF,qBAAAyF,GAAAC,SAAA,IAGA,EACAC,UAAAA,CAAAF,GACA,KAAAza,MAAA,eAAAya,EACA,EACAG,UAAAA,GACA,KAAA9F,cAAA,CACA,EACA+F,mBAAAA,GACA,KAAA9F,uBAAA,CACA,EACA+F,WAAAA,GACA,KAAAhG,cAAA,CACA,EACAiG,YAAAA,CAAAnO,EAAAlK,EAAAsY,EAAAC,GACA,IAAAC,EAAA,GAUA,MATA,OAAAD,EACAC,EAAA,KAAAlI,SACA,OAAAiI,EACAC,EAAA,KAAAjI,SAEA,QAAAgI,IACAC,EAAA,KAAAhI,YAGAxQ,GAAA,IAAAyY,oBAAAjQ,QAAA8P,EAAAG,sBAAA,IAAAD,EAAAjY,MAAA+D,GAAAA,EAAAmG,QAAAP,EAAAO,OACA,EACAqM,QAAAA,GACA,MAAA4B,EAAA,KAAA9I,cACA,QAAAjC,aAAA,KAAAC,UACA,KAAAgC,cAAA,KAAA+C,QAAApQ,MAAAiR,GACAA,EAAA3Y,KAAA,KAAA8S,aAAA6F,EAAAR,UAAA,KAAApF,iBAEA,QAAAD,YAEA,KAAAiC,cAAA,KAAA+C,QAAApQ,MAAAiR,GACAA,EAAA3Y,KAAA,KAAA8S,cAAA6F,EAAAR,cAEA,CACA,MAAA2F,EAAA,KAAArO,UAAAsO,WAAA,KAAAC,OAAAC,OAAAC,YAAAC,UAEA,KAAApJ,cADA+I,EACA,KAAAhG,QAAApQ,MAAAiR,GACAA,EAAA3Y,KAAA8d,IAGA,KAAAhG,QAAA,EAEA,EApjBA,IAsjBA+F,GAAA,KAAAzK,MAAA,UAAAA,KAAA7O,QACA,KAAAyR,WAAA,KAAAjB,cAAAiB,WAEA,EACA,yBAAAyF,GACA,SAAA1K,UAAA,KAAAL,WAAAmF,UACA,OAGA,MAAA3F,EAAA,KAAA2I,cAAAhS,KAAAgK,GAAAA,EAAAjB,QACAwO,QAAA,KAAA1N,WAAAoF,QAAAuI,mBAAAnO,GACA/G,EAAAA,EAAAC,MAAA,6BAAA8G,aAAAkO,cACA,KAAA1N,WAAAqF,YAAA7F,EAAAzD,QAAAoE,IAAA,IAAAuN,EAAAvN,IACA,EACAqL,QAAAA,GAEA,IAAA9I,EAEAA,EADA,KAAAI,SAAA,KAAAY,aACAkK,EAAAA,GAAAA,IACA,KAAA5E,iBAAA6E,EAAAA,GAAAA,IAAA,KAAAnL,OAAAoL,EAAAA,GAAAA,IAAA,KAAApL,MACA,KAAAI,QAAAiL,KAAA,GACA,KAAAjL,QAAAkL,QACA,aAAAjP,UAAAC,cAAA,qBACAnL,MACA,KAAAkP,aAAA,KAAAW,aACAkK,EAAAA,GAAAA,IACA,KAAA5E,iBAAA6E,EAAAA,GAAAA,IAAA,KAAAnL,OAAAoL,EAAAA,GAAAA,IAAA,KAAApL,MACA,KAAAK,YAAAgL,KAAA,GACA,KAAAhL,YAAAiL,QACA,aAAAjP,UAAAC,cAAA,qBACAnL,MAEA,KAAA4Q,QAEA,KAAAA,SAAA9B,EAAAA,GAAAA,IAAAD,GAAA7O,KACA,EACAoa,cAAAA,GACA,MAAAne,EAAA,CAEA0X,QAAA,KAAAnD,cAAA/U,GACAme,UAAA,KAAApJ,cAAA/U,GACAmY,QAAA,KAAApD,cAAAoD,QACAnF,GAAA,KAAAyC,SACAxC,GAAA,KAAAyC,SACAxC,IAAA,KAAAyC,UACAxC,QAAA,KAAA+B,WACArQ,YAAA,KAAAA,YACA0O,mBAAA,KAAAA,qBAAA,KAAAC,QAAA,KAAAA,QAAAgJ,eAAA3U,GACA+W,QAAA,KAAA7N,UAAA,KAAA2I,gBACArF,WAAA,KAAA+B,cACAxC,OAAA,KAAAgD,UAAAzJ,KAAAC,MAAA,KAAAwJ,UAAA,UAAA/O,EACAqM,UAAA,KAAA8G,gBACA7G,aAAA,KAAA8G,mBACAzC,mBAAA,KAAAgB,iCAAAxZ,GACA6e,UAAA,KAAA9N,SASA,OANAvQ,EAAAoe,OACApe,EAAAse,SAAA,KAAA3J,QAEA3U,EAAAue,WAAAR,EAAAA,GAAAA,KAAAlL,EAAAA,GAAAA,IAAA,KAAA8B,UAAA5Q,MAGA/D,CACA,EACAgV,SAAAA,GACA,MAAAwJ,EAAA,KAAAL,iBACA,KAAAK,EAAA7L,SACA,KAAA6L,EAAA5L,MAAA7O,OACA,IAAAya,EAAA/L,GAAA1M,QACA,IAAAyY,EAAA9L,IAAA3M,QACA,IAAAyY,EAAAhM,GAAAzM,aACAsB,IAAAmX,EAAApL,OAQA,KAAAnR,MAAA,QAAAuc,GAJA7V,EAAAA,EAAAC,MAAA,mDAKA,EACA6V,eAAAA,GACA,IAAAC,EAGAA,EADA,KAAA7I,gBACA8I,GAAAA,GAEAC,GAAAA,GAGA,KAAAlZ,MAAAmK,OAAAgP,cAAA,kBACAH,GACAV,EAAAA,GAAAA,KAAAc,EAAAA,GAAAA,IAAA,KAAAvK,cAAAsD,YAAA9T,MACA,KAAAwQ,cAAAwD,qBAGA,KAAAlC,iBAAA,CACA,EACAkJ,QAAAA,CAAAhE,GACA,KAAAgC,cACA,KAAA9Y,IAAAqI,KAAA,2BAAAyO,EACA,EACAiE,iBAAAA,CAAAjE,GACA,KAAA/D,uBAAA,EACA,KAAA/S,IAAAqI,KAAA,oBAAAyO,EACA,EACAkE,aAAAA,CAAAC,GACA,KAAAvK,QAAAuK,EACA,KAAApK,oBACA,EACAqK,aAAAA,CAAAtP,GACA,KAAA8E,QAAA9E,EAAAuP,UACA,KAAAX,kBACA,KAAAtL,YACA,KAAAlP,IAAAqI,KAAA,gCAAA6G,WAEA,EACAkM,iBAAAA,CAAAtb,GACA,KAAAqS,UAAArS,EAAAI,OAAAiT,SAAArT,EAAA,SAAAsD,CACA,EACA+R,mBAAAkG,GAOA,IAAAtL,KAAAsL,GAAAC,gBAAAC,EAAAA,EAAAA,MANA,CACAC,MAAA,QACAC,IAAA,UACAC,KAAA,UACAC,OAAA,YAIAxE,aAAAA,CAAAjD,GACAxP,EAAAA,EAAAC,MAAA,iBAAAuP,UACA,KAAA5D,cAAA4D,EACA,KAAAtC,iBAAA,EAEA,KAAA5T,MAAA,sBAAAkW,EAAA3Y,IACA2Y,EAAAR,SACA,KAAA1V,MAAA,oBAAAkW,EAAAR,UAGA,KAAAd,gBAAA,KAAAC,qBACA,KAAAyD,yBAAApC,KACA,KAAAtB,gBAAA,EACA,KAAAC,mBAAA,GACAlL,EAAAA,EAAAA,KAAAhH,EAAAA,EAAAA,IAAA,4JAYA,KAAA4Q,aAAAE,GAAAA,IAAAyC,EAAA3C,aAAAG,GAAAA,GACA,KAAAH,WAAAG,GAAAA,GAEA,KAAA8I,iBAEA,EACAxY,oBAAAA,GACA,KAAAhC,IAAAqI,KAAA,2BACA,KAAAwI,oBACA,EACAhQ,oBAAAA,GACA,KAAAb,IAAAqI,KAAA,2BACA,KAAAwI,oBACA,EACA9P,wBAAAA,GACA,KAAAf,IAAAqI,KAAA,+BACA,EACAuT,cAAAA,CAAAC,EAAAC,GACA,QAAA1Y,IAAAyY,GAAA,KAAAA,EACA,OAEA,KAAAhK,mBAAA,OAAAiK,EACA,KAAAhK,mBAAA,OAAAgK,EACA,KAAA/J,oBAAA,QAAA+J,EACA,KAAA9I,qBAAA8I,GAAAD,EAGA,MACAE,EADA,KAAAlM,SAAA7H,QAAAC,IAAAA,EAAAsL,YAEAvL,QACAyL,IAAA,IAAAA,EAAAI,aAAAoC,cAAA/M,QAAA2S,EAAA5F,iBACA,IAAAxC,EAAAvX,KAAA+Z,cAAA/M,QAAA2S,EAAA5F,iBAEA7T,KAAAqR,IAAA,CACAtI,MAAAsI,EAAAI,aACAnT,MAAA+S,EAAAvX,SAEA,KAAAqU,uBAAAmE,IAAA,QAAAA,CAAA,KAAAnE,uBAAA5M,OAAAoY,IAEAxP,GAAAsP,GAAAnW,MAAAsW,IACA,OAAAF,EACA,KAAAjK,oBAAA,EACA,OAAAiK,EACA,KAAAhK,oBAAA,EACA,QAAAgK,IACA,KAAA/J,qBAAA,GAIA,UAAAkK,KAAAD,EACAC,EAAAvb,QACAub,EAAAvb,MAAAub,EAAA9Q,OAIA,KAAAoF,uBAAAmE,IAAA,QAAAA,CAAA,KAAAnE,uBAAA5M,OAAAqY,GAAA,GAEA,EACA,wBAAAtE,CAAAzL,GACA,KAAAK,SAAAR,EAAAA,GAAAA,GAAA,KAAA6C,MACA,KAAA1C,WAAAmF,WAAA,EACA1M,EAAAA,EAAAkB,KAAA,qBACA0G,QAAA,KAAAA,QACAR,eAAAA,EAAAA,GAAAA,GAAA,KAAA6C,MACA0C,QAAA,KAAApF,WAAAoF,UAEA,KAAApF,WAAAoF,cAAApF,EAAAiQ,mBACA,KAAAlF,qBACA,EACAmF,aAAAA,CAAAvR,GACA,KAAA2G,WAAAG,GAAAA,GACA,KAAA0K,YAAAxR,EACA,EACAwR,WAAAA,CAAAxR,GACA,KAAAyR,UAAAzR,EAAA,KAAAoG,SAAA,KACA,EACAsL,WAAAA,CAAA1R,GACA,KAAAyR,UAAAzR,EAAA,KAAAqG,SAAA,KACA,EACAsL,YAAAA,CAAA3R,GACA,KAAAyR,UAAAzR,EAAA,KAAAsG,UAAA,MACA,EACAmL,SAAAA,CAAAzR,EAAAqO,EAAAzc,GACA,GACA,MAAAoO,QACAxH,IAAA,KAAA4P,qBAAAxW,IACA,UAAAwW,qBAAAxW,GACA,CACA,SAAAwW,qBAAAxW,GAAAkc,SAAA,KACA,QAEA9N,EAAA,IACAO,MAAA,KAAA6H,qBAAAxW,GACAoO,EAAAlK,MAAA,KAAAsS,qBAAAxW,GACA,KAAAwW,qBAAAxW,GAAA,EACA,CAEA,GAAAyc,EAAAhY,MAAA0T,GAAAA,EAAAxJ,QAAAP,GAAAO,UAAAP,EACA,OAEA,MAAA+J,EAAA,IAAA/J,GACA,KAAA4F,cAAAnV,KAAAsZ,GACAsE,EAAA5d,KAAAsZ,GACA,KAAA9D,oBACA,EACA,YAAA2L,CAAAC,GAAA,IAAAC,EAAAlU,UAAA1G,OAAA,QAAAsB,IAAAoF,UAAA,IAAAA,UAAA,GACA,KAAA8D,UACA5H,EAAAA,EAAAC,MAAA,+CACA,KAAAlD,MAAAkb,iBAAAxQ,QAGA,KAAAnO,MAAA,WACA,KAAAkc,iBACAwC,SAEA,EACA3F,KAAAA,GACA,KAAA/F,SAAA,GACA,KAAAC,SAAA,GACA,KAAAC,UAAA,GACA,KAAAT,WAAA,GACA,KAAAC,QAAA,iBACA,KAAAtQ,YAAA,GACA,KAAAmQ,uBAAA,GACA,KAAAC,cAAA,GACA,KAAAmB,eAAA,EACA,KAAAC,iBAAA,EACA,KAAAO,eAAA/O,EAEA,KAAAoU,WACA,KAAAC,UACA,EAOAmF,cAAA1I,GACAA,EAAAhY,KAIA,GAAAgY,EAAAhY,SAAAgY,EAAAL,gBAHAK,EAAAL,aAWAgJ,0BAAAA,CAAArK,GACA,MAAAsK,EAAA,IAAA/M,KAKA,OAHA+M,EAAA9M,SAAA,OACA8M,EAAAC,WAAAD,EAAAE,aAAA,GAEAxK,EAAA+C,WAAAuH,CACA,EAQAG,0BAAAA,CAAAzK,GACA,MAAA0K,EAAA,IAAAnN,KACA+M,EAAA,IAAA/M,KAAAmN,EAAA3H,WACA,OAAA/C,EAAA+C,WAAAuH,CACA,EAOAK,iBAAAA,CAAAvS,EAAAS,GACA,OAAAA,GACA,SACA,KAAA+R,kBAAAxS,GACA,MACA,SACA,KAAAyS,kBAAAzS,GACA,MACA,UACA,KAAA0S,mBAAA1S,GAGA,EACAQ,gBAAAA,CAAAR,EAAAqO,IACAA,EAAAjR,QAAA2M,GAAAA,EAAAxJ,QAAAP,EAAAO,QAEAiS,iBAAAA,CAAAxS,GACA,KAAAoG,SAAA,KAAA5F,gBAAAR,EAAA,KAAAoG,SACA,EACAqM,iBAAAA,CAAAzS,GACA,KAAAqG,SAAA,KAAA7F,gBAAAR,EAAA,KAAAqG,SACA,EACAqM,kBAAAA,CAAA1S,GACA,KAAAsG,UAAA,KAAA9F,gBAAAR,EAAA,KAAAsG,UACA,EACAqM,cAAAA,GACA,KAAA5K,WAAA,KAAAA,UACA,KAAAvC,SAAA,KAAAA,QAAA,SAAAa,SAAAnP,QAAA,KAAA6Q,WACA,KAAAtC,UAAA,KAAAA,SAAA,SAAAa,UAAApP,QAAA,KAAA6Q,UACA,EACA6K,iBAAAA,GACA,KAAAjM,WAAAG,GAAAA,EACA,EACA+L,iBAAAA,GACAngB,GAAAogB,QAAAC,oBACAhd,EAAAA,EAAAA,IAAA,2GACAA,EAAAA,EAAAA,IAAA,8BACA,CACAnE,KAAAc,GAAAogB,QAAAE,eACAC,SAAAld,EAAAA,EAAAA,IAAA,yCACAmd,eAAA,QACAC,QAAApd,EAAAA,EAAAA,IAAA,4BAEAqd,IACAA,IACA,KAAAzM,WAAAE,GAAAA,GACA,GAGA,EAOA6E,wBAAAA,CAAApC,GACA,MAAA+J,EAAA/J,EAAAH,mBACA,GAAAkK,EAGA,YAAAjT,UAAAkT,oBAAAD,EACA,EAEAE,cAAAA,CAAAre,GACA,KAAA8S,eAAA9S,EACAA,EACA,KAAAmT,iBAAA5X,KAAA,KAAAiV,cAAAuD,cAEA,KAAAZ,iBAAA,KAAAA,iBACAjL,QAAAkM,GAAAA,IAAA,KAAA5D,cAAAuD,gBAEAuK,EAAAA,GAAAA,GAAA,qBAAArb,KAAAwP,UAAA,KAAAU,kBACA,EAQAoL,sBAAAve,IACA,CAAAqL,MAAArL,EAAAY,MAAAZ,IAYAwe,uBAAA1T,GACAA,EAAA2T,QAAA,WAAA3T,EAAA2T,QAIA3T,EAAAlK,QAAAkK,EAAAO,MAHA,GAOAP,EAAAO,QC/+CwK,M,gBCWpK,GAAU,CAAC,EAEf,GAAQjN,kBAAoB,IAC5B,GAAQC,cAAgB,IACxB,GAAQC,OAAS,SAAc,KAAM,QACrC,GAAQC,OAAS,IACjB,GAAQC,mBAAqB,IAEhB,IAAI,KAAS,IAKJ,MAAW,KAAQC,QAAS,KAAQA,OCL1D,UAXgB,OACd,ICTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAAEJ,EAAI0U,mBAAqB1U,EAAIsU,aAAcpU,EAAG,yBAAyB,CAACM,MAAM,CAAC,GAAK,oBAAoBO,GAAG,CAAC,OAASf,EAAIsc,SAAS,OAAStc,EAAIsa,eAAeta,EAAIU,KAAKV,EAAIS,GAAG,KAAMT,EAAIuU,sBAAuBrU,EAAG,iBAAiB,CAACa,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIuU,uBAAwB,CAAK,EAAE,OAASvU,EAAIuc,qBAAqBvc,EAAIU,KAAKV,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,sDAAsD,CAACF,EAAG,QAAQ,CAACE,YAAY,aAAaI,MAAM,CAAC,IAAM,SAAS,CAACR,EAAIS,GAAG,WAAWT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,SAAS,YAAYnC,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,WAAW,CAACM,MAAM,CAAC,GAAK,OAAO,MAAQR,EAAI8R,cAAc,QAAU9R,EAAI6U,QAAQ,MAAQ,OAAO,iBAAkBzI,GAASA,EAAO+I,SAAS,YAAa,EAAM,YAAcnV,EAAImC,EAAE,OAAQ,kBAAkB,sBAAsBnC,EAAImC,EAAE,OAAQ,kBAAkB,mBAAkB,EAAM,kBAAiB,EAAM,WAAciK,GAASA,EAAOoJ,YAAYzU,GAAG,CAAC,kBAAkBf,EAAI2Y,eAAe5M,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,SAASsH,GAAG,SAASG,GAAQ,MAAO,CAACpM,EAAIS,GAAG,eAAeT,EAAIW,GAAGX,EAAIoe,cAAchS,IAAS,cAAc,GAAG,CAACzH,IAAI,kBAAkBsH,GAAG,SAASG,GAAQ,MAAO,CAACpM,EAAIS,GAAG,eAAeT,EAAIW,GAAGX,EAAIoe,cAAchS,IAAS,cAAc,QAAQ,KAAKpM,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,QAAQ,CAACE,YAAY,WAAWI,MAAM,CAAC,IAAM,OAAO,CAACR,EAAIS,GAAG,aAAaT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,OAAO,cAAcnC,EAAIS,GAAG,KAAKP,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,QAAQ,KAAO,0BAA0BO,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAO+L,iBAAwB/M,EAAI+e,eAAeiB,MAAM,KAAMhW,UAAU,IAAI,CAAChK,EAAIS,GAAG,aAAaT,EAAIW,GAAGX,EAAImC,EAAE,OAAO,WAAW,eAAe,GAAGnC,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,WAAW,CAAC6K,IAAI,UAAUvK,MAAM,CAAC,GAAK,KAAK,MAAQR,EAAIwS,SAAS,QAAUxS,EAAIiW,qBAAqBzM,QAAO2M,IAAYnW,EAAIwS,SAAS/P,MAAKsN,GAAIA,EAAGpD,QAAQwJ,EAAUxJ,UAAQ,iBAAkBP,GAAWA,EAAOO,MAAM,UAAW,EAAK,sBAAsB3M,EAAImC,EAAE,OAAQ,oBAAoB,YAAY8d,CAAC7T,EAAQlK,EAAOsY,IAASxa,EAAIua,aAAanO,EAAQlK,EAAOsY,EAAO,MAAM,UAAW,EAAK,mBAAkB,EAAK,0BAAyB,EAAK,QAAUxa,EAAIqT,mBAAmB,WAAY,EAAK,WAAY,EAAK,WAAU,EAAM,kBAAiB,EAAM,gBAAgBrT,EAAI6f,sBAAsB,uBAAuBK,IAAMlgB,EAAIga,YAAY,OAAOjZ,GAAG,CAAC,MAAQf,EAAIqS,mBAAmB,mBAAmBrS,EAAI4d,YAAY,cAAc5d,EAAI4d,YAAY,OAAS,SAAS5c,GAAQ,OAAOhB,EAAIod,eAAepc,EAAQ,KAAK,GAAG+K,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,SAASsH,GAAG,SAAA9E,GAAgC,IAAvB,OAAEgZ,EAAM,WAAE7b,GAAY6C,EAAE,MAAO,CAACjH,EAAG,QAAQF,EAAIogB,GAAGpgB,EAAIqgB,GAAG,CAACjgB,YAAY,aAAaI,MAAM,CAAC,YAAcR,EAAImC,EAAE,OAAQ,8BAA8B,KAAO,WAAW,QAAQmC,GAAW,GAAO6b,IAAS,GAAG,CAACxb,IAAI,4BAA4BsH,GAAG,SAAAhD,GAAkB,IAAT,OAACmD,GAAOnD,EAAE,MAAO,CAAC/I,EAAG,oBAAoB,CAACE,YAAY,wBAAwBI,MAAM,CAAC,OAAS4L,GAAQrL,GAAG,CAAC,mBAAmB,SAASC,GAAQ,OAAOhB,EAAI2e,kBAAkBvS,EAAQ,KAAK,KAAK,GAAG,CAACzH,IAAI,SAASsH,GAAG,SAASG,GAAQ,MAAO,CAAClM,EAAG,MAAM,CAACA,EAAG,eAAe,CAACM,MAAM,CAAC,aAAY,EAAK,KAAO4L,EAAOlK,MAAM,QAAUlC,EAAI8f,uBAAuB1T,GAAQ,aAAcA,EAAOrP,GAAmB,KAAd,YAAmB,IAAMqP,EAAOU,UAAU,GAAG,QAAQ,KAAK9M,EAAIS,GAAG,KAAMT,EAAI4R,OAAQ1R,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,QAAQ,CAACE,YAAY,WAAWI,MAAM,CAAC,IAAM,OAAO,CAACR,EAAIS,GAAG,WAAWT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,OAAO,YAAYnC,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,WAAW,CAAC6K,IAAI,UAAU1K,MAAM,CAAC,QAAWL,EAAImU,UAAU,QAAS,GAAM3T,MAAM,CAAC,GAAK,KAAK,MAAQR,EAAIyS,SAAS,QAAUzS,EAAIiW,qBAAqBzM,QAAO2M,IAAYnW,EAAIyS,SAAShQ,MAAKuN,GAAIA,EAAGrD,QAAQwJ,EAAUxJ,UAAQ,iBAAkBP,GAAWA,EAAOO,MAAM,WAAU,EAAM,YAAYsT,CAAC7T,EAAQlK,EAAOsY,IAASxa,EAAIua,aAAanO,EAAQlK,EAAOsY,EAAO,MAAM,UAAW,EAAK,mBAAkB,EAAK,uBAAuB0F,IAAMlgB,EAAIga,YAAY,MAAM,kBAAiB,EAAM,UAAW,EAAK,YAAcha,EAAImC,EAAE,OAAQ,8BAA8B,sBAAsBnC,EAAImC,EAAE,OAAQ,8BAA8B,0BAAyB,EAAK,QAAUnC,EAAIsT,mBAAmB,WAAY,EAAK,WAAY,EAAK,gBAAgBtT,EAAI6f,uBAAuB9e,GAAG,CAAC,MAAQf,EAAIqS,mBAAmB,mBAAmBrS,EAAI8d,YAAY,cAAc9d,EAAI8d,YAAY,OAAS,SAAS9c,GAAQ,OAAOhB,EAAIod,eAAepc,EAAQ,KAAK,GAAG+K,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,SAASsH,GAAG,SAAAqU,GAAgC,IAAvB,OAAEH,EAAM,WAAE7b,GAAYgc,EAAE,MAAO,CAACpgB,EAAG,QAAQF,EAAIogB,GAAGpgB,EAAIqgB,GAAG,CAACjgB,YAAY,aAAaI,MAAM,CAAC,YAAcR,EAAImC,EAAE,OAAQ,8BAA8B,KAAO,WAAW,QAAQmC,GAAW,GAAO6b,IAAS,GAAG,CAACxb,IAAI,4BAA4BsH,GAAG,SAAAsU,GAAkB,IAAT,OAACnU,GAAOmU,EAAE,MAAO,CAACrgB,EAAG,oBAAoB,CAACE,YAAY,eAAeI,MAAM,CAAC,OAAS4L,GAAQrL,GAAG,CAAC,mBAAmB,SAASC,GAAQ,OAAOhB,EAAI2e,kBAAkBvS,EAAQ,KAAK,KAAK,GAAG,CAACzH,IAAI,SAASsH,GAAG,SAASG,GAAQ,MAAO,CAAClM,EAAG,MAAM,CAACA,EAAG,eAAe,CAACM,MAAM,CAAC,aAAY,EAAK,KAAO4L,EAAOlK,MAAM,QAAUlC,EAAI8f,uBAAuB1T,GAAQ,IAAMA,EAAOU,MAAM,aAAcV,EAAOrP,GAAmB,KAAd,gBAAuB,GAAG,IAAI,MAAK,EAAM,eAAe,KAAKiD,EAAIU,KAAKV,EAAIS,GAAG,KAAMT,EAAI6R,QAAS3R,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,QAAQ,CAACE,YAAY,YAAYI,MAAM,CAAC,IAAM,QAAQ,CAACR,EAAIS,GAAG,WAAWT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,QAAQ,YAAYnC,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,WAAW,CAAC6K,IAAI,UAAU1K,MAAM,CAAC,QAAWL,EAAImU,UAAU,QAAS,GAAM3T,MAAM,CAAC,GAAK,MAAM,MAAQR,EAAI0S,UAAU,WAAU,EAAM,YAAYuN,CAAC7T,EAAQlK,EAAOsY,IAASxa,EAAIua,aAAanO,EAAQlK,EAAOsY,EAAO,OAAO,QAAUxa,EAAIiW,qBAAqBzM,QAAO2M,IAAYnW,EAAI0S,UAAUjQ,MAAKwN,GAAKA,EAAItD,QAAQwJ,EAAUxJ,UAAQ,iBAAkBP,GAAWA,EAAOO,MAAM,UAAW,EAAK,mBAAkB,EAAK,uBAAuBuT,IAAMlgB,EAAIga,YAAY,OAAO,kBAAiB,EAAM,UAAW,EAAK,YAAcha,EAAImC,EAAE,OAAQ,8BAA8B,sBAAsBnC,EAAImC,EAAE,OAAQ,8BAA8B,0BAAyB,EAAK,2BAA0B,EAAK,QAAUnC,EAAIuT,oBAAoB,WAAY,EAAK,gBAAgBvT,EAAI6f,uBAAuB9e,GAAG,CAAC,MAAQf,EAAIqS,mBAAmB,mBAAmBrS,EAAI+d,aAAa,cAAc/d,EAAI+d,aAAa,OAAS,SAAS/c,GAAQ,OAAOhB,EAAIod,eAAepc,EAAQ,MAAM,GAAG+K,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,SAASsH,GAAG,SAAAuU,GAAgC,IAAvB,OAAEL,EAAM,WAAE7b,GAAYkc,EAAE,MAAO,CAACtgB,EAAG,QAAQF,EAAIogB,GAAGpgB,EAAIqgB,GAAG,CAACjgB,YAAY,aAAaI,MAAM,CAAC,YAAcR,EAAImC,EAAE,OAAQ,8BAA8B,KAAO,SAAS,IAAM,SAAS,QAAQmC,GAAW,GAAO6b,IAAS,GAAG,CAACxb,IAAI,4BAA4BsH,GAAG,SAAAwU,GAAkB,IAAT,OAACrU,GAAOqU,EAAE,MAAO,CAACvgB,EAAG,oBAAoB,CAACE,YAAY,eAAeI,MAAM,CAAC,OAAS4L,GAAQrL,GAAG,CAAC,mBAAmB,SAASC,GAAQ,OAAOhB,EAAI2e,kBAAkBvS,EAAQ,MAAM,KAAK,GAAG,CAACzH,IAAI,SAASsH,GAAG,SAASG,GAAQ,MAAO,CAAClM,EAAG,MAAM,CAACA,EAAG,eAAe,CAACM,MAAM,CAAC,aAAY,EAAK,KAAO4L,EAAOlK,MAAM,QAAUlC,EAAI8f,uBAAuB1T,GAAQ,IAAMA,EAAOU,MAAM,aAAcV,EAAOrP,GAAmB,KAAd,gBAAuB,GAAG,IAAI,MAAK,EAAM,eAAe,KAAKiD,EAAIU,KAAKV,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,QAAQ,CAACE,YAAY,gCAAgCI,MAAM,CAAC,IAAM,YAAY,CAACR,EAAIS,GAAG,WAAWT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,YAAY,YAAYnC,EAAIS,GAAG,KAAKP,EAAG,QAAQ,CAACwgB,WAAW,CAAC,CAAChjB,KAAK,QAAQijB,QAAQ,UAAUrf,MAAOtB,EAAIiS,WAAY2O,WAAW,eAAexgB,YAAY,UAAUI,MAAM,CAAC,GAAK,UAAU,KAAO,OAAO,KAAO,UAAU,aAAe,MAAM,YAAcR,EAAImC,EAAE,OAAQ,cAAc0e,SAAS,CAAC,MAAS7gB,EAAIiS,YAAalR,GAAG,CAAC,MAAQ,CAAC,SAASC,GAAWA,EAAO+E,OAAO+a,YAAiB9gB,EAAIiS,WAAWjR,EAAO+E,OAAOzE,MAAK,EAAEtB,EAAIqS,yBAAyBrS,EAAIS,GAAG,KAAMT,EAAImS,QAASjS,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACJ,EAAIS,GAAG,SAAST,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,sFAAsF,UAAUnC,EAAIU,KAAKV,EAAIS,GAAG,KAAMT,EAAIqU,mBAAqBrU,EAAIwW,sCAAsClT,OAAQpD,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACJ,EAAIS,GAAG,SAAST,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,2EAA4E,CAC3tQ8K,WAAYjN,EAAIwW,sCAAsCuK,KAAK,SACxD,UAAU/gB,EAAIU,KAAKV,EAAIS,GAAG,KAAMT,EAAI8N,SAAW9N,EAAIyN,WAAWqF,YAAYxP,OAAQpD,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACJ,EAAIS,GAAG,SAAST,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,gEAAiE,CAC7O8K,WAAYjN,EAAIyN,WAAWqF,YAAYiO,KAAK,SACzC,UAAU/gB,EAAIU,KAAKV,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAAGJ,EAAI8N,QAAkZ5N,EAAG,mBAAmB,CAAC6K,IAAI,mBAAmBvK,MAAM,CAAC,MAAQR,EAAIkS,QAAQ,WAAalS,EAAI4V,cAAc,cAAc5V,EAAImQ,KAAK,sBAAsBnQ,EAAIqW,SAAWrW,EAAIoW,WAAWrV,GAAG,CAAC,MAAQf,EAAIwc,iBAA5kBtc,EAAG,aAAa,CAACyE,IAAI3E,EAAI+S,WAAWhI,IAAI,SAAS3K,YAAY,eAAeI,MAAM,CAAC,MAAQR,EAAIkS,QAAQ,MAAQlS,EAAIyW,gBAAgB,KAAO,OAAO,YAAczW,EAAImC,EAAE,OAAQ,mBAAmB,MAAQnC,EAAIqW,UAAYrW,EAAImR,YAAY,IAAMnR,EAAIwB,IAAI,cAAcxB,EAAIoY,YAAYrX,GAAG,CAAC,MAAQf,EAAIwc,cAAc,MAAQxc,EAAI0c,cAAc,QAAU1c,EAAI2d,cAAc,eAAe3d,EAAIma,eAAmO,GAAGna,EAAIS,GAAG,KAAKP,EAAG,sBAAsB,CAACM,MAAM,CAAC,IAAMR,EAAIwB,IAAI,oBAAoBxB,EAAIgW,qBAAqBjV,GAAG,CAAC,OAAS,SAASC,GAAQhB,EAAIR,MAAM,oBAAqBwB,EAAQhB,EAAI0b,iBAAiB,GAAGsF,MAAM,CAAC1f,MAAOtB,EAAI4B,YAAaQ,SAAS,SAAU6e,GAAMjhB,EAAI4B,YAAYqf,CAAG,EAAEL,WAAW,iBAAiB5gB,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,2CAA2C,CAACF,EAAG,MAAM,CAACE,YAAY,qCAAqC,CAACF,EAAG,IAAI,CAACE,YAAY,iCAAiC,CAAEJ,EAAI+Q,YAAa7Q,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACJ,EAAIS,GAAGT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,sBAAwBnC,EAAI6Q,aAA6G7Q,EAAIgR,WAAY9Q,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACJ,EAAIS,GAAGT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,mBAAmBnC,EAAIU,KAA1MR,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACJ,EAAIS,GAAGT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,4BAA6InC,EAAIS,GAAG,KAAOT,EAAI+Q,aAAgB/Q,EAAI6Q,aAAsT7Q,EAAIU,KAA5SR,EAAG,YAAY,CAACE,YAAY,SAASI,MAAM,CAAC,KAAO,WAAW,aAAaR,EAAImC,EAAE,OAAQ,eAAepB,GAAG,CAAC,MAAQf,EAAIuS,WAAWxG,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,WAAW,CAACM,MAAM,CAAC,KAAO,GAAG,MAAQR,EAAImC,EAAE,OAAQ,iBAAiB,EAAE+J,OAAM,IAAO,MAAK,EAAM,cAAuBlM,EAAIS,GAAG,MAAOT,EAAI+Q,aAAe/Q,EAAIgR,WAAY9Q,EAAG,YAAY,CAACE,YAAY,SAASI,MAAM,CAAC,KAAO,WAAW,aAAaR,EAAImC,EAAE,OAAQ,0BAA0BpB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIR,MAAM,gBAAgB,GAAGuM,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,SAAS,CAACM,MAAM,CAAC,KAAO,GAAG,MAAQR,EAAImC,EAAE,OAAQ,4BAA4B,EAAE+J,OAAM,IAAO,MAAK,EAAM,cAAclM,EAAIU,MAAM,GAAGV,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,uCAAuC,EAAGJ,EAAI8N,SAAW9N,EAAIyW,gBAAiBvW,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,WAAW,aAAaR,EAAImC,EAAE,OAAQ,sBAAsBpB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIgf,mBAAmB,GAAGjT,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,aAAa,CAACM,MAAM,CAAC,KAAO,GAAG,MAAQR,EAAImC,EAAE,OAAQ,wBAAwB,EAAE+J,OAAM,IAAO,MAAK,EAAM,cAAclM,EAAIU,KAAKV,EAAIS,GAAG,KAAOT,EAAI8N,SAAY9N,EAAIyW,gBAAuWzW,EAAIU,KAA1VR,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,WAAW,SAAU,EAAK,aAAaR,EAAImC,EAAE,OAAQ,uBAAuBpB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIif,mBAAmB,GAAGlT,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,aAAa,CAACM,MAAM,CAAC,KAAO,GAAG,MAAQR,EAAImC,EAAE,OAAQ,yBAAyB,EAAE+J,OAAM,IAAO,MAAK,EAAM,aAAsBlM,EAAIS,GAAG,KAAKP,EAAG,UAAU,CAACM,MAAM,CAAC,KAAOR,EAAIwT,sBAAsBzS,GAAG,CAAC,cAAc,SAASC,GAAQhB,EAAIwT,qBAAqBxS,CAAM,GAAG+K,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,MAAM,EAAE0L,OAAM,MAAS,CAAClM,EAAIS,GAAG,KAAKP,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAoB,GAAMO,GAAG,CAAC,MAAQf,EAAIwD,sBAAsBuI,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,aAAa,CAACM,MAAM,CAAC,KAAO,MAAM,EAAE0L,OAAM,MAAS,CAAClM,EAAIS,GAAG,eAAeT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,sBAAsB,gBAAgBnC,EAAIS,GAAG,KAAKP,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAoB,GAAMO,GAAG,CAAC,MAAQf,EAAIqC,sBAAsB0J,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,aAAa,CAACM,MAAM,CAAC,KAAO,MAAM,EAAE0L,OAAM,MAAS,CAAClM,EAAIS,GAAG,eAAeT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,8BAA8B,gBAAgBnC,EAAIS,GAAG,KAAKP,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAoB,EAAK,SAAWR,EAAI8N,SAAS/M,GAAG,CAAC,MAAQf,EAAIuC,0BAA0BwJ,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,aAAa,CAACM,MAAM,CAAC,KAAO,MAAM,EAAE0L,OAAM,MAAS,CAAClM,EAAIS,GAAG,eAAeT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,8BAA8B,iBAAiB,GAAGnC,EAAIS,GAAG,KAAKP,EAAG,UAAU,CAACM,MAAM,CAAC,KAAOR,EAAIyT,eAAe1S,GAAG,CAAC,cAAc,SAASC,GAAQhB,EAAIyT,cAAczS,CAAM,EAAE,MAAQ,SAASA,GAAQhB,EAAI0T,mBAAoB,CAAK,IAAI,CAAG1T,EAAI0T,kBAAo7E1T,EAAIU,KAAr6E,CAAEV,EAAI0U,kBAAmBxU,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAoB,GAAMO,GAAG,CAAC,MAAQf,EAAIoa,YAAYrO,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,iBAAiB,CAACM,MAAM,CAAC,KAAO,MAAM,EAAE0L,OAAM,IAAO,MAAK,EAAM,aAAa,CAAClM,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,iBAAiB,kBAAkBnC,EAAIU,KAAKV,EAAIS,GAAG,KAAKP,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAoB,GAAMO,GAAG,CAAC,MAAQf,EAAIqa,qBAAqBtO,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,mBAAmB,CAACM,MAAM,CAAC,KAAO,GAAG,MAAQR,EAAImC,EAAE,OAAQ,eAAe,IAAMnC,EAAI2R,gBAAgB,EAAEzF,OAAM,IAAO,MAAK,EAAM,aAAa,CAAClM,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,gBAAgB,kBAAkBnC,EAAIS,GAAG,KAAOT,EAAIkhB,2BAA+XlhB,EAAIU,KAAvWR,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAoB,GAAOO,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAI0T,mBAAkB,CAAI,GAAG3H,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,GAAG,MAAQR,EAAImC,EAAE,OAAQ,iBAAiB,EAAE+J,OAAM,IAAO,MAAK,EAAM,aAAa,CAAClM,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,eAAe,kBAA2BnC,EAAIS,GAAG,KAAKP,EAAG,iBAAiB,CAACM,MAAM,CAAC,QAAUR,EAAImT,eAAepS,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAImT,eAAgB,CAAI,EAAE,QAAU,SAASnS,GAAQhB,EAAImT,eAAgB,CAAK,IAAI,CAACnT,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,2BAA2B,kBAAkBnC,EAAIS,GAAG,KAAMT,EAAIuW,gCAAiCrW,EAAG,iBAAiB,CAACM,MAAM,CAAC,QAAUR,EAAIoU,gBAAgBrT,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAI2f,gBAAe,EAAK,EAAE,QAAU,SAAS3e,GAAQ,OAAOhB,EAAI2f,gBAAe,EAAM,IAAI,CAAC3f,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,6BAA6B,kBAAkBnC,EAAIU,KAAKV,EAAIS,GAAG,KAAMT,EAAIuW,gCAAiCrW,EAAG,iBAAiB,CAACM,MAAM,CAAC,QAAUR,EAAIqU,kBAAkB,SAAWrU,EAAI8N,SAAS/M,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIqU,mBAAoB,CAAI,EAAE,QAAU,SAASrT,GAAQhB,EAAIqU,mBAAoB,CAAK,IAAI,CAACrU,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,gCAAgC,kBAAkBnC,EAAIU,KAAKV,EAAIS,GAAG,KAAMT,EAAIyN,WAAWmF,UAAW1S,EAAG,iBAAiB,CAACM,MAAM,CAAC,QAAUR,EAAI8N,QAAQ,SAAW9N,EAAIqU,mBAAmBtT,GAAG,CAAC,OAAS,SAASC,GAAQhB,EAAIyT,eAAgB,CAAK,EAAE,MAAQ,SAASzS,GAAQhB,EAAI8N,SAAU,CAAI,EAAE,QAAU,SAAS9M,GAAQhB,EAAI8N,SAAU,CAAK,IAAI,CAAC9N,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,oCAAoC,kBAAkBnC,EAAIU,MAAeV,EAAIS,GAAG,KAAMT,EAAI0T,kBAAmB,CAACxT,EAAG,eAAe,CAACM,MAAM,CAAC,qBAAoB,GAAOO,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAI0T,mBAAkB,CAAK,GAAG3H,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,cAAc,CAACM,MAAM,CAAC,MAAQR,EAAImC,EAAE,OAAQ,cAAc,KAAO,MAAMnC,EAAIS,GAAG,mBAAmBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,eAAe,kBAAkB,EAAE+J,OAAM,IAAO,MAAK,EAAM,cAAclM,EAAIS,GAAG,KAAKP,EAAG,cAAc,CAACE,YAAY,oBAAoBI,MAAM,CAAC,WAAQoE,EAAU,KAAO,YAAY,SAAW5E,EAAI2T,WAAW5S,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOhB,EAAI4c,uBAAkBhY,EAAU,IAAI,CAAC5E,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,aAAa,kBAAkBnC,EAAIS,GAAG,KAAKP,EAAG,cAAc,CAACE,YAAY,iDAAiDI,MAAM,CAAC,MAAQR,EAAI4W,oBAAoB,KAAO,YAAY,QAAU5W,EAAI0X,yBAAyB3W,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOhB,EAAI4c,kBAAkB5c,EAAI4W,oBAAoB,IAAI,CAAC5W,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,qBAAqB,MAAMnC,EAAIW,GAAGX,EAAI2W,mBAAmB3W,EAAI4W,sBAAsB,kBAAkB5W,EAAIS,GAAG,KAAKP,EAAG,cAAc,CAACE,YAAY,iDAAiDI,MAAM,CAAC,MAAQR,EAAIgX,sBAAsB,KAAO,YAAY,QAAUhX,EAAI2X,2BAA2B5W,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOhB,EAAI4c,kBAAkB5c,EAAIgX,sBAAsB,IAAI,CAAChX,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,uBAAuB,MAAMnC,EAAIW,GAAGX,EAAI2W,mBAAmB3W,EAAIgX,wBAAwB,kBAAkBhX,EAAIS,GAAG,KAAKP,EAAG,cAAc,CAACE,YAAY,iDAAiDI,MAAM,CAAC,MAAQR,EAAIiX,kBAAkB,KAAO,YAAY,QAAUjX,EAAI4X,uBAAuB7W,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOhB,EAAI4c,kBAAkB5c,EAAIiX,kBAAkB,IAAI,CAACjX,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,mBAAmB,MAAMnC,EAAIW,GAAGX,EAAI2W,mBAAmB3W,EAAIiX,oBAAoB,kBAAkBjX,EAAIS,GAAG,KAAKP,EAAG,cAAc,CAACE,YAAY,oBAAoBI,MAAM,CAAC,KAAO,YAAY,QAAUR,EAAI6X,eAAe,MAAQ7X,EAAImX,gBAAgBpW,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOhB,EAAI4c,kBAAkB5c,EAAImX,eAAe,IAAI,CAACnX,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,yBAAyB,kBAAkBnC,EAAIS,GAAG,KAAKP,EAAG,cAAc,CAACM,MAAM,CAAC,oBAAmB,EAAK,IAAMR,EAAI6V,UAAU,KAAO,iBAAiB,oBAAoB7V,EAAI4T,uBAAuB,OAAS5T,EAAIoX,SAAS,UAAYpX,EAAI8T,UAAU,OAAS,mBAAmB,KAAO,GAAG,cAAc,GAAG/S,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOhB,EAAI4c,kBAAkB5c,EAAImX,eAAe,GAAG6J,MAAM,CAAC1f,MAAOtB,EAAIsR,aAAclP,SAAS,SAAU6e,GAAMjhB,EAAIsR,aAAa2P,CAAG,EAAEL,WAAW,iBAAiB,CAAC5gB,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,iBAAiB,mBAAmBnC,EAAIU,MAAM,GAAGV,EAAIS,GAAG,KAAKP,EAAG,YAAY,CAACM,MAAM,CAAC,UAAYR,EAAIsW,SAAWtW,EAAI0R,QAAQ,cAAc,SAAS,KAAO,UAAU,aAAa1R,EAAI0W,mBAAmB3V,GAAG,CAAC,MAAQf,EAAIge,QAAQjS,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,OAAO,CAACM,MAAM,CAAC,MAAQR,EAAI0W,kBAAkB,KAAO,MAAM,EAAExK,OAAM,MAAS,CAAClM,EAAIS,GAAG,aAAaT,EAAIW,GAAGX,EAAI0W,mBAAmB,eAAe,MAAM,EACj9T,GACsB,IDMpB,EACA,KACA,WACA,M,gDEXa,MAAMyK,WAA+BC,MAEnDC,WAAAA,CAAY1Y,GACX2Y,MAAM3Y,GACN1I,KAAKvC,KAAOyjB,GAAuBI,UACnCthB,KAAK0I,QAAUA,CAChB,CAEA,cAAO4Y,GACN,MAAO,wBACR,ECVc,MAAMC,WAA4BJ,MAEhDC,WAAAA,CAAY1Y,GACX2Y,MAAM3Y,GACN1I,KAAKvC,KAAO8jB,GAAoBD,UAChCthB,KAAK0I,QAAUA,CAEhB,CAEA,cAAO4Y,GACN,MAAO,qBACR,E,mGCHD,MCZqL,GDYrL,CACA9jB,MAAA,CACAkP,MAAA,CACA3O,KAAAgP,OACA9O,UAAA,IAGAX,KAAAA,KACA,CACAkkB,GAAA,OAGA,aAAAlV,GACA,MAAAmV,EAAAlU,OAAAmU,KAAAC,UAAAF,oBACA,GAAAA,EACA,IACA,KAAAD,SAAAC,EAAA,KAAAze,MAAA4e,eAAA,KAAAlV,MACA,OAAArM,GACA4F,EAAAA,EAAA5F,MAAA,oCAAAA,IACA,CAEA,EACA,mBAAAwZ,GACA,KAAA2H,IACA,KAAAA,GAAAK,UAEA,GEpBA,IAXgB,OACd,ICRW,WAA+C,OAAO5hB,EAA5BD,KAAYE,MAAMD,IAAa,MAAM,CAAC6K,IAAI,kBACjF,GACsB,IDSpB,EACA,KACA,KACA,M,QEd2K,GCiE7K,CACApN,WAAA,CACAokB,OAAA,KACAC,cAAA,KACAC,YAAA,KACAC,sBAAAA,IAEA3kB,KAAAA,KACA,CACA4kB,mBAAA,KAGA1jB,SAAA,KACA2jB,EAAAA,GAAAA,IAAA3W,GAAAA,EAAA,qBACAwB,UAAAA,GACA,OAAA1L,MAAA8gB,QAAA,KAAAC,gBAAA/kB,KAAAwS,IAAA,KAAAuS,gBAAA/kB,KAAAwS,GAAA,EACA,GAEAjN,MAAA,CACAmK,WAAA,CACA6L,WAAA,EACAF,OAAAA,GACA,KAAAuJ,mBAAA,KAAAlV,WAAArJ,KAAA,QACA,IAGAtE,QAAA,CACAijB,YAAAA,CAAAC,GACA,KAAAvb,KAAA,KAAAkb,mBAAAK,GAAA,KAAAL,mBAAAK,GACA,EACAC,UAAAA,CAAAD,GACA,YAAAL,mBAAAK,EACA,I,gBCtFI,GAAU,CAAC,EAEf,GAAQ9iB,kBAAoB,IAC5B,GAAQC,cAAgB,IACxB,GAAQC,OAAS,SAAc,KAAM,QACrC,GAAQC,OAAS,IACjB,GAAQC,mBAAqB,IAEhB,IAAI,KAAS,IAKJ,MAAW,KAAQC,QAAS,KAAQA,OCL1D,UAXgB,OACd,ICTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAAEJ,EAAIiN,YAAwC,IAA1BjN,EAAIiN,WAAW3J,OAAcpD,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,SAAS,CAACM,MAAM,CAAC,eAAeR,EAAIiN,WAAW,GAAG/K,MAAM,MAAQlC,EAAIiN,WAAW,GAAGN,MAAM,KAAO,GAAG,mBAAkB,EAAK,gBAAe,MAAS,GAAG3M,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,wBAAwB,CAACM,MAAM,CAAC,MAAQR,EAAIiN,WAAW,GAAGN,UAAU,OAAQ3M,EAAIiN,YAAcjN,EAAIiN,WAAW3J,OAAS,EAAGpD,EAAG,MAAM,CAACE,YAAY,4BAA4BJ,EAAI8K,GAAI9K,EAAIiN,YAAY,SAASkJ,EAAUqM,GAAO,OAAOtiB,EAAG,MAAM,CAACyE,IAAIwR,EAAUxJ,MAAMvM,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,SAAS,CAACM,MAAM,CAAC,eAAe2V,EAAUjU,MAAM,MAAQiU,EAAUxJ,MAAM,KAAO,GAAG,mBAAkB,EAAK,gBAAe,MAAS,GAAG3M,EAAIS,GAAG,KAAOT,EAAImiB,mBAAmBK,GAAoGxiB,EAAIU,KAAhGR,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,KAAK,CAACF,EAAIS,GAAGT,EAAIW,GAAGwV,EAAUxJ,YAAqB3M,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACE,YAAY,gCAAgCW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIuiB,aAAaC,EAAM,IAAI,CAAExiB,EAAIyiB,WAAWD,GAAQ,CAACtiB,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,cAAc,CAACM,MAAM,CAAC,KAAO,MAAMR,EAAIS,GAAG,KAAKP,EAAG,OAAO,CAACF,EAAIS,GAAGT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,kBAAkB,IAAI,CAACjC,EAAG,gBAAgB,CAACM,MAAM,CAAC,KAAO,MAAMR,EAAIS,GAAG,KAAKP,EAAG,OAAO,CAACF,EAAIS,GAAGT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,mBAAmB,KAAKnC,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACwgB,WAAW,CAAC,CAAChjB,KAAK,OAAOijB,QAAQ,SAASrf,MAAOtB,EAAImiB,mBAAmBK,GAAQ5B,WAAW,8BAA8BxgB,YAAY,2BAA2B,CAACF,EAAG,wBAAwB,CAACM,MAAM,CAAC,MAAQ2V,EAAUxJ,UAAU,IAAI,IAAG,GAAG3M,EAAIU,MAC/1D,GACsB,IDUpB,EACA,KACA,WACA,M,QEFK,SAASgiB,GAA0B/Z,GACzC,OAAIA,EAAQgT,QACJvL,EAAAA,GAAAA,IAAKzH,EAAQkT,UAAY,KAG1B8G,EAAAA,GAAAA,IAAMha,EAAQmT,WAAa,GACnC,CC2HA,MC9I+K,GD8I/K,CACApe,KAAA,kBACAC,WAAA,CACA0N,SAAA,KACAuX,SAAA,GACAC,aAAA,KACAC,MAAA,KACAC,aAAA,KACAC,aAAA,KACAC,oBAAA,KACAC,cAAAA,IAEAzlB,MAAA,CACA4T,SAAA,CACArT,KAAAuD,MACArD,UAAA,IAGAX,KAAAA,KACA,CACA4lB,uBAAA,2CACAC,cAAAxe,EACAye,cAAA/b,QAAAgc,UACAC,mBAAAjc,QAAAgc,UACAzS,cAAA,EACAE,aAAA,EACAC,YAAA,EACAF,sBAAA,EACAY,SAAA,EACApR,WAAAsE,EACA4e,aAAA5e,EACA6e,gBAAA,EACAC,wBAAA9e,EACA+e,SAAA,EACAC,aAAA,EACAC,cAAArW,OAAAsW,YAAA,KACAC,aAAA,EACA5N,UAAA,CACAzY,KAAA,GACAiP,MAAA,MAIAlO,SAAA,KACA6N,EAAAA,GAAAA,IAAA0X,GAAAA,EAAAvY,GAAAA,OACAD,EAAAA,GAAAA,IAAAC,GAAAA,EAAA,6BACAwY,EAAAA,GAAAA,IAAAxY,GAAAA,EAAA,mBACAyY,8BAAAA,GACA,OAAAxB,GAAA,KAAAyB,aACA,EACAC,UAAAA,GACA,sBAAA9B,gBAAAtkB,MACAmE,EAAAA,EAAAA,IAAA,4BAEAyC,IAAA,KAAAuf,aAAAE,SACAliB,EAAAA,EAAAA,IAAA,gBAEA,KAAAgiB,aAAA5T,SACApO,EAAAA,EAAAA,IAAA,gBAEA,KAAAgiB,aAAA3T,aACArO,EAAAA,EAAAA,IAAA,mBAEAA,EAAAA,EAAAA,IAAA,qBACA,EACAmiB,qBAAAA,MACA9W,OAAAmU,KAAAC,UAAAF,oBAEA6C,iBAAAA,GACA,YAAAD,sBACA,KAAAH,aAAApU,IACA,KAAAoU,aAAApU,GAAAzM,OAAA,IACA,KAAAsgB,WACA,EACAtB,eAAAA,GACA,YAAA9V,UAAA8V,eACA,EACA6B,YAAAA,GACA,YAAA3X,UAAA8V,iBAAA/kB,MAAA,EACA,EACAkT,iBAAAA,GACA,YAAA6R,iBAAA7iB,SAAAgR,mBAAA,EACA,EACAC,UAAAA,GACA,YAAAyT,cAAAzT,YAAA,IACA,EACA8T,SAAAA,GACA,YAAAX,eAAA,KAAAS,sBAAA,KAAAH,aAAApU,IAAA,KAAAoU,aAAApU,GAAAzM,OAAA,GAEA,KAAAsgB,YADA,QACA,QACA,GAEArgB,OAAAA,GACA,MAAAxG,EAAA,KAAAonB,cAAApnB,GACAA,IACA,KAAAsmB,cAAA/b,QAAAgc,QAAAvmB,IAEAyQ,OAAAiX,iBAAA,oBAAAC,eACA,EACA,aAAAnY,SACA,KAAAxJ,YACA,KAAA4hB,iCACA,KAAAC,gBACApX,OAAAiX,iBAAA,cAAAI,gBACA,EACA/K,aAAAA,GACAtM,OAAAuM,oBAAA,oBAAA2K,gBACAlX,OAAAuM,oBAAA,cAAA8K,gBACA,EACAvlB,QAAA,CACAulB,eAAAA,GACA,KAAAhB,cAAArW,OAAAsW,YAAA,IACA,EACA,mBAAAc,GACA,IACA,MAAAE,EAAA,KAAAtY,UAAAC,cAAA,aACA,KAAAmX,YAAA,UAAAkB,CACA,OAAAxkB,GACAsI,QAAAtI,MAAA,sCAAAA,EACA,CACA,EACA,gBAAAykB,GACA,KAAAhB,aAAA,KAAAA,YACA,KAAAH,aAAA,KAAAA,YACA,UACA,KAAApX,UAAAoT,eAAA,CACAjb,IAAA,YACArD,MAAA,KAAAsiB,YAAA,kBAEA,OAAAtjB,GACAsI,QAAAtI,MAAA,4BAAAA,EACA,CACA,EACA,gBAAA0kB,GACA,KAAAjB,aAAA,EACA,KAAAN,gBAAA,QAEA,KAAAjX,UAAAyY,+BACA,KAAAzY,UAAA0Y,wBAAA,KAAAvB,eACA,KAAAwB,QAAA,KAAAzB,mBAAA,CAAA0B,WAAA,GAGA,EACAjL,UAAAA,CAAAkL,GACA,KAAAlC,uBAAAtmB,KAAAwoB,EACA,EAQAF,OAAAA,CAAA5nB,GAAA,cAAA6nB,GAAA,GAAApb,UAAA1G,OAAA,QAAAsB,IAAAoF,UAAA,GAAAA,UAAA,MACA,YAAAsY,iBAIA,KAAAqB,SAAA,EAEA,KAAAN,cAAA,KAAAA,cAAAnc,MAAA,UACA,KAAA6J,aAAA,EACA,KAAAC,YAAA,EACA,IACA,IAAAsU,EACA,MAAAC,EAAA,KAAAC,iBAAAjoB,GAAA,GACA,GAAAR,EASAwoB,EAAAxoB,GAAAA,QACA0oB,EAAAA,GAAAA,IAAAF,GACA,KAAA1U,cAAA,EACA,KAAAG,YAAA,EACAsU,EAAAvoB,MAbA,CACA,SAAAA,SAAAwV,EAAAA,GAAAA,IAAAgT,GACAA,EAAAxoB,GAAAA,QACA,KAAAyP,UAAAkZ,kBAAA,CAAA3oB,KAAAsnB,QAAAkB,EAAAlB,UACA,KAAAxT,cAAA,EACA,KAAAG,YAAA,EAEAsU,EAAAvoB,CACA,CAkBA,GAVA,KAAAyP,UAAAmZ,iCAAA,GAEAP,IACA,gBAAA9C,gBAAAtkB,MACA4nB,EAAAA,EAAAA,KAAAzjB,EAAAA,EAAAA,IAAA,0BAEAyjB,EAAAA,EAAAA,KAAAzjB,EAAAA,EAAAA,IAAA,6BAIAyC,IAAA0gB,EACA,OAAAA,CAEA,OAAAhlB,GACA4F,EAAAA,EAAA5F,MAAA,wBAAAA,UACA,KAAAuQ,cAAA,EACA,KAAArE,UAAAqZ,sCAAA,GAEAT,IACA,gBAAA9C,gBAAAtkB,MACA6K,EAAAA,EAAAA,KAAA1G,EAAAA,EAAAA,IAAA,mCAEA0G,EAAAA,EAAAA,KAAA1G,EAAAA,EAAAA,IAAA,gCAGA,SACA,KAAA4O,aAAA,CACA,KAGA,KAAAsS,gBAzDAnd,EAAAA,EAAAkB,KAAA,sDAAA7J,SACA,KAAA8lB,cAyDA,EACAmC,gBAAAA,CAAAjoB,GACA,MAAAgoB,EAAA,IACAhoB,EACAR,GAAAQ,EAAAR,GACAme,UAAA3d,EAAA2d,UACAnL,GAAAxS,EAAAwS,GACAC,GAAAzS,EAAAyS,GACAC,IAAA1S,EAAA0S,IACArO,YAAArE,EAAAqE,YACAsT,QAAA3X,EAAA2X,QACA5E,mBAAA/S,EAAA+S,mBACAK,OAAApT,EAAAoT,OACA0T,QAAA,KAAAF,cAAAE,SASA,OANA9mB,EAAAoe,cACA4J,EAAAzJ,iBAEAyJ,EAAA1J,SAGA0J,CACA,EACAO,qBAAAA,CAAAze,EAAA9J,GACA,KAAAgmB,mBAAA,KAAAA,mBACArc,KAAAG,GACAH,MAAA,SAAAie,QAAA5nB,KACA2J,MAAA,IAAAhB,EAAAA,EAAAC,MAAA,0BACAa,OAAA1G,GAAA4F,EAAAA,EAAA5F,MAAA,gCAAAA,WACA,EACA,YAAA0d,CAAAzgB,GAAA,IAAA2gB,EAAAlU,UAAA1G,OAAA,QAAAsB,IAAAoF,UAAA,IAAAA,UAAA,GAGA,GAFA9D,EAAAA,EAAAC,MAAA,mBAAA5I,SAEA,KAAAmU,QACA,aAEA,KAAA6R,mBACA,KAAAzS,sBAAA,EACA,KAAAY,SAAA,EACA,KAAAlS,MAAA,SACA,IACA,MAAAkf,GAAA,IAAAnN,MAAAwF,UACA,UAAAhZ,KAAAR,EAAAqE,YACA7D,EAAAC,OAEAD,EAAAC,KAAA,SAGA,MAAAunB,EAAA,KAAAC,iBAAA,IACAjoB,EACAR,SAAA,KAAAsmB,cACA1S,OAAApT,EAAAoT,OAAApT,EAAAoT,OAAAzG,KAAAC,OAAAuU,EAAAqH,GAAAA,IAAA,OAKA,GAHAR,EAAA5U,OAAAzG,KAAAC,OAAAuU,EAAAqH,GAAAA,IAAA,OACAR,EAAA5U,OAAAzG,KAAAC,OAAAuU,EAAAqH,GAAAA,IAAA,OAEA7H,IAAA3gB,EAAA2S,SAAA8V,OACA,UAAAxE,GAGA,IAAAtD,GAAA,IAAA3gB,EAAAqE,YAAA0B,OAAA,CACA,MAAA2iB,GAAA3K,EAAAA,GAAAA,IAAAoH,GAAAnlB,IAAA+D,MAAAmW,cAAArY,MAAA,MACA8mB,GAAA/jB,EAAAA,EAAAA,IAAA,qBAAAsV,cACA0O,GAAAhkB,EAAAA,EAAAA,IAAA,mBAAAsV,cACA,UAAA2O,KAAAH,EAAA,CACA,GAAAG,EAAAhU,WAAA,MAAAgU,EAAAhU,WAAA,MACA,MAEA,GAAAgU,EAAAlM,SAAAgM,IAAAE,EAAAlM,SAAAiM,GACA,UAAAhF,EAEA,CACA,CAEA,QAAAgD,aAAApnB,GAQA,SAAAonB,aAAAnmB,MAEAunB,EAAAxoB,GAAA,KAAAonB,aAAApnB,SACA,KAAAspB,YAAAC,cAAA,CACA3d,QAAA4c,EACAxoB,GAAA,KAAAonB,aAAApnB,aAIA0oB,EAAAA,GAAAA,IAAAF,GACAA,EAAAxoB,GAAA,KAAAonB,aAAApnB,SACA,KAAAspB,YAAAE,iBAAA,CACAC,aAAAjB,EACAxoB,GAAA,KAAAonB,aAAApnB,UArBA,CAEA,SAAAA,SAAAwV,EAAAA,GAAAA,IAAAgT,GACAA,EAAAxoB,GAAAA,QACA,KAAAspB,YAAAE,iBAAA,CACAC,aAAAjB,EACAxoB,MAEA,GAiBAQ,EAAAoT,QAAApT,EAAAoT,OAAAzG,KAAAC,OAAAuU,EAAAqH,GAAAA,IAAA,OAEA,KAAAM,YAAAI,oBAAA,CAAA1pB,GAAAwoB,EAAAxoB,KAAAiK,OAAA1G,IACA4F,EAAAA,EAAAC,MAAA,0BAAA7F,SAAA,IAGAilB,EAAAxoB,IAEA,KAAAyP,UAAAka,sBAAA,CAAA3pB,GAAAwoB,EAAAxoB,WAEA,KAAAyP,UAAAma,qBACA,OAAArmB,GACA,KAAAA,YAAAsmB,EAAAA,GAAAA,GAAAtmB,EAAA,CACA,CAAAumB,GAAAA,EAAAtF,WAAA,KACArb,EAAAA,EAAA5F,MAAA,0BAAAA,WACA6B,EAAAA,EAAAA,IAAA,+EAEA,CAAA2kB,GAAAA,EAAAvF,WAAA,KACArb,EAAAA,EAAA5F,MAAA,0BAAAA,WACA6B,EAAAA,EAAAA,IAAA,sHAGA9D,QAAAiC,GACA4F,EAAAA,EAAA5F,MAAA,0BAAAA,SACA,IAEA,KAAAkjB,cAAAoD,EAAAA,GAAAA,GAAAtmB,EAAA,CACA,CAAAkhB,GAAAD,WAAA,KACArb,EAAAA,EAAAkB,KAAA,uCAAA9G,WACA6B,EAAAA,EAAAA,IAAA,uEAEA,CAAAgf,GAAAI,WAAA,KACArb,EAAAA,EAAAkB,KAAA,oDAAA9G,WACA6B,EAAAA,EAAAA,IAAA,kEAGA9D,QAAAiC,GACA4F,EAAAA,EAAA6gB,KAAA,0BAAAzmB,SACA,GAEA,SACA,KAAAoR,SAAA,CACA,CAGA,MAAAuD,EAAA,KAAAzI,UAAAwa,WAAAzpB,EAAA2d,WACAjG,GAAAN,SAAA,KAAAoG,OAAAC,OAAAC,UAAA,MAAAhG,EAAAgS,eACAC,YAAA,KACA,KAAA1a,UAAA2a,cAAA,CACAlM,UAAAhG,EAAAgS,cACAG,MAAA,GACAC,MAAA,GACA,GACA,IAEA,EAEA,iBAAAC,SACA,KAAAtJ,OAAA,KAAA0F,oBAAA,EACA,EACA6D,kBAAApR,GACAA,EAAAxJ,QAAAwJ,EAAAjU,OAGA,KAAAiU,EAAAjU,OAGA,IAAAiU,EAAAxJ,MAAA6N,OAAA,eAJArE,EAAAxJ,MASA,IAAAwJ,EAAAjU,WAAAiU,EAAAxJ,SAGA,kBAAA6a,GACA,IAAAzqB,QAAA,KAAAsmB,cACA,MAAAoE,EAAA,gBAAAnF,gBAAAtkB,KACAypB,IACA1qB,EAAA,KAAAulB,gBAAA/kB,KAAAR,UAKA,KAAAyP,UAAAma,sBAEA,IACAc,QACA,KAAApB,YAAAqB,cAAA,CAAA3qB,QAEA4qB,EAAAA,GAAAA,IAAA5qB,IAEA6oB,EAAAA,EAAAA,KAAAzjB,EAAAA,EAAAA,IAAA,4BACA,OAAA7B,GACA4F,EAAAA,EAAA5F,MAAA,2BAAAA,WACAuI,EAAAA,EAAAA,KAAA1G,EAAAA,EAAAA,IAAA,oCACA,CACA,EACAylB,kBAAAzD,GACAA,EAAAxI,OACAwI,EAAAtI,SAGAsI,EAAArI,UAEA+L,eAAAA,CAAAxX,GACA,KAAA8T,aAAAxI,OACA,KAAA+J,kBAAA,CAAA7J,SAAAxL,IAEA,KAAAqV,kBAAA,CAAA5J,UAAAzL,GAEA,EACAsU,wBAAAA,GACA,KAAA1hB,MAAA6kB,WAOA,KAAApE,mBAAA,KAAAzgB,MAAA6kB,SAAApM,iBACA,EACA,uBAAAgK,CAAAnoB,GACA,KAAAomB,SAAA,EACA,KAAAgB,iCACA,KAAAnY,UAAAkZ,kBAAAnoB,EACA,EACAmnB,cAAAA,CAAAhf,GACA,KAAAmL,cAAA,KAAA8S,SACAje,EAAAqH,iBACArH,EAAAqiB,aAAA,EACA,KAAAvb,UAAAwb,+BAEApf,QAAAxB,KAAA,+BAEA,EACA,aAAA6gB,GACA,KAAAzb,UAAAqZ,sCAAA,SACA,KAAAb,aAGA,KAAAnU,eAAA,KAAA8S,SAAA,KAAA3S,aAAA,KAAA2S,WACAzd,EAAAA,EAAAC,MAAA,4DACA,KAAAqG,UAAAma,oBAAA,CACAuB,uBAAA,EACAC,WAAA,KAAAxE,QACA5mB,GAAA,KAAAonB,aAAApnB,KAIA,I,eEllBI,GAAU,CAAC,EAEf,GAAQ2C,kBAAoB,IAC5B,GAAQC,cAAgB,IACxB,GAAQC,OAAS,SAAc,KAAM,QACrC,GAAQC,OAAS,IACjB,GAAQC,mBAAqB,IAEhB,IAAI,KAAS,IAKJ,MAAW,KAAQC,QAAS,KAAQA,OCL1D,UAXgB,OACd,IhDTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAIooB,oBAAqBloB,EAAG,QAAQ,CAACM,MAAM,CAAC,KAAOR,EAAIwkB,UAAU,KAAOxkB,EAAIokB,WAAW,2BAA2BpkB,EAAImjB,wBAAwBpiB,GAAG,CAAC,MAAQ,SAASC,GAAwB,UAAhBA,EAAOhD,KAAmBgC,EAAIioB,UAAYjoB,EAAIglB,YAAY,IAAI,CAAC9kB,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,WAAW,CAACE,YAAY,kBAAkBI,MAAM,CAAC,KAAO,yBAAyB,aAAaR,EAAImC,EAAE,OAAQ,qBAAqB,MAAQnC,EAAI4jB,YAAc5jB,EAAImC,EAAE,OAAQ,0BAA4BnC,EAAImC,EAAE,OAAQ,2BAA2BpB,GAAG,CAAC,MAAQf,EAAI+kB,YAAYhZ,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAGjM,EAAI4jB,YAAoD1jB,EAAG,sBAAsB,CAACM,MAAM,CAAC,KAAO,MAA/EN,EAAG,eAAe,CAACM,MAAM,CAAC,KAAO,MAAoD,EAAE0L,OAAM,IAAO,MAAK,EAAM,cAAclM,EAAIS,GAAG,KAAKP,EAAG,WAAW,CAACE,YAAY,kBAAkBI,MAAM,CAAC,KAAO,yBAAyB,aAAaR,EAAImC,EAAE,OAAQ,qBAAqB,MAAQnC,EAAImC,EAAE,OAAQ,sBAAsBpB,GAAG,CAAC,MAAQf,EAAIglB,YAAYjZ,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,OAAOsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,eAAe,CAACM,MAAM,CAAC,KAAO,MAAM,EAAE0L,OAAM,IAAO,MAAK,EAAM,cAAclM,EAAIS,GAAG,KAAKP,EAAG,YAAY,CAAEF,EAAIM,MAAOJ,EAAG,eAAe,CAACE,YAAY,gBAAgBI,MAAM,CAAC,KAAOR,EAAImC,EAAE,OAAQ,8BAA8B,KAAO,SAAS4J,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,SAASsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,WAAW,CAACM,MAAM,CAAC,KAAO,WAAW,aAAaR,EAAImC,EAAE,OAAQ,YAAYpB,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIM,WAAQsE,CAAS,IAAI,CAAC5E,EAAIS,GAAG,mBAAmBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,YAAY,oBAAoBnC,EAAIS,GAAG,KAAKP,EAAG,WAAW,CAACM,MAAM,CAAC,KAAO,WAAW,aAAaR,EAAImC,EAAE,OAAQ,UAAUpB,GAAG,CAAC,MAAQf,EAAIge,SAAS,CAAChe,EAAIS,GAAG,mBAAmBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,UAAU,oBAAoB,EAAE+J,OAAM,IAAO,MAAK,EAAM,aAAa,CAAChM,EAAG,IAAI,CAACF,EAAIS,GAAGT,EAAIW,GAAGX,EAAIM,YAAaN,EAAIwjB,QAAStjB,EAAG,eAAe,CAACE,YAAY,gBAAgBI,MAAM,CAAC,KAAOR,EAAImC,EAAE,OAAQ,gCAAgC,KAAO,SAAS4J,YAAY/L,EAAIgM,GAAG,CAAC,CAACrH,IAAI,cAAcsH,GAAG,WAAW,MAAO,CAACjM,EAAIS,GAAG,iBAAiBT,EAAIW,GAAGX,EAAIwjB,SAAS,gBAAgB,EAAEtX,OAAM,GAAM,CAACvH,IAAI,SAASsH,GAAG,WAAW,MAAO,CAAC/L,EAAG,WAAW,CAACM,MAAM,CAAC,KAAO,WAAW,aAAaR,EAAImC,EAAE,OAAQ,YAAYpB,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIwjB,aAAU5e,CAAS,IAAI,CAAC5E,EAAIS,GAAG,mBAAmBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,YAAY,oBAAoBnC,EAAIS,GAAG,KAAKP,EAAG,WAAW,CAACM,MAAM,CAAC,KAAO,WAAW,aAAaR,EAAImC,EAAE,OAAQ,gBAAgBpB,GAAG,CAAC,MAAQf,EAAIsnB,cAAc,CAACtnB,EAAIS,GAAG,mBAAmBT,EAAIW,GAAGX,EAAImC,EAAE,OAAQ,gBAAgB,oBAAoB,EAAE+J,OAAM,IAAO,MAAK,EAAM,cAAclM,EAAIU,KAAKV,EAAIS,GAAG,KAAKP,EAAG,WAAW,CAAC6K,IAAI,WAAWvK,MAAM,CAAC,eAAeR,EAAImkB,aAAajJ,UAAU,aAAalb,EAAImkB,aAAajP,QAAQ,GAAKlV,EAAImkB,aAAapU,GAAG,GAAK/P,EAAImkB,aAAanU,GAAG,IAAMhQ,EAAImkB,aAAalU,IAAI,QAAUjQ,EAAImkB,aAAajU,QAAQ,mBAAmBlQ,EAAImkB,aAAaviB,YAAY,KAAO5B,EAAIkkB,+BAA+B,cAAclkB,EAAI4nB,kBAAkB5nB,EAAImkB,cAAc,yBAAyBnkB,EAAImkB,aAAa7T,mBAAmB,WAAWtQ,EAAImkB,aAAa5T,QAAQ,eAAevQ,EAAImkB,aAAa3T,YAAY,UAAoC,IAA1BxQ,EAAImkB,aAAaxT,OAAc,qBAAqB3Q,EAAIyQ,kBAAkB,cAAczQ,EAAI0Q,WAAW,iBAAiB1Q,EAAI6Q,aAAa,eAAe7Q,EAAI+Q,YAAY,cAAc/Q,EAAIgR,WAAW,aAAahR,EAAImkB,aAAalT,UAAU,gBAAgBjR,EAAImkB,aAAajT,aAAa,gBAAgBlR,EAAIyjB,eAAe,cAAczjB,EAAImkB,aAAa/S,WAAW,SAAWpR,EAAIqR,UAAUtQ,GAAG,CAAC,sBAAsB,SAASC,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAExK,UAAWla,GAAS,EAAE,oBAAoB,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAExQ,QAASlU,GAAS,EAAE,YAAY,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAE3V,GAAI/O,GAAS,EAAE,YAAY,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAE1V,GAAIhP,GAAS,EAAE,aAAa,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAEzV,IAAKjP,GAAS,EAAE,iBAAiB,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAExV,QAASlP,GAAS,EAAE,0BAA0B,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAE9jB,YAAaZ,GAAS,EAAE,qBAAqBhB,EAAI6nB,gBAAgB,iBAAiB,SAAS7mB,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAE/U,OAAQ3P,EAAS,KAAO,EAAE,oBAAoB,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAEzU,UAAWjQ,GAAS,EAAE,uBAAuB,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAEzU,UAAWjQ,GAAS,EAAE,qBAAqB,SAASA,GAAQ,OAAOhB,EAAI0lB,kBAAkB,CAAEtU,WAAYpQ,GAAS,EAAE,MAAQhB,EAAImlB,QAAQ,gBAAgBnlB,EAAIwnB,aAAa,oBAAoBxnB,EAAI8lB,sBAAsB,KAAO9lB,EAAIge,OAAO,eAAehe,EAAIma,eAAe,IAAI,GAAGna,EAAIS,GAAG,KAAKP,EAAG,MAAM,CAACwgB,WAAW,CAAC,CAAChjB,KAAK,OAAOijB,QAAQ,SAASrf,MAAOtB,EAAIukB,oBAAsBvkB,EAAIwjB,UAAYxjB,EAAIM,MAAOsgB,WAAW,4CAA4CxgB,YAAY,cAAc,CAACF,EAAG,kBAAkB,OAAOF,EAAIU,IACj4J,GACsB,IgDUpB,EACA,KACA,WACA,M","sources":["webpack://nextcloud-mail/./src/components/NewMessageModal.vue?74f0","webpack://nextcloud-mail/./src/components/Composer.vue?561d","webpack://nextcloud-mail/./src/components/RecipientInfo.vue?a3c2","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?b7b1","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?4f50","webpack://nextcloud-mail/./img/text_snippet.svg","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?c6dd","webpack://nextcloud-mail/./src/components/textBlocks/TextBlockModal.vue?e944","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?0a10","webpack://nextcloud-mail/./src/components/NewMessageModal.vue","webpack://nextcloud-mail/./src/service/FileService.js","webpack://nextcloud-mail/src/components/ComposerAttachment.vue","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?ac2a","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?e5d0","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?6ee2","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue","webpack://nextcloud-mail/src/components/ComposerAttachments.vue","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?0e38","webpack://nextcloud-mail/./src/service/FileSharingService.js","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?a5a9","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?a84b","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue","webpack://nextcloud-mail/./src/components/textBlocks/TextBlockModal.vue","webpack://nextcloud-mail/src/components/textBlocks/TextBlockModal.vue","webpack://nextcloud-mail/./src/components/textBlocks/TextBlockModal.vue?f07d","webpack://nextcloud-mail/./src/components/textBlocks/TextBlockModal.vue?77cb","webpack://nextcloud-mail/./src/components/textBlocks/TextBlockModal.vue?3e4d","webpack://nextcloud-mail/src/components/RecipientListItem.vue","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?aa65","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?25fe","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?c56a","webpack://nextcloud-mail/./src/components/RecipientListItem.vue","webpack://nextcloud-mail/src/components/MailvelopeEditor.vue","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?e2fa","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?860b","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?c2f5","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue","webpack://nextcloud-mail/src/components/Composer.vue","webpack://nextcloud-mail/./src/components/Composer.vue?86bd","webpack://nextcloud-mail/./src/components/Composer.vue?e959","webpack://nextcloud-mail/./src/components/Composer.vue?e45c","webpack://nextcloud-mail/./src/components/Composer.vue","webpack://nextcloud-mail/./src/errors/AttachmentMissingError.js","webpack://nextcloud-mail/./src/errors/SubjectMissingError.js","webpack://nextcloud-mail/src/components/DisplayContactDetails.vue","webpack://nextcloud-mail/./src/components/DisplayContactDetails.vue?16b6","webpack://nextcloud-mail/./src/components/DisplayContactDetails.vue?d5b2","webpack://nextcloud-mail/./src/components/DisplayContactDetails.vue","webpack://nextcloud-mail/./src/components/RecipientInfo.vue?b775","webpack://nextcloud-mail/src/components/RecipientInfo.vue","webpack://nextcloud-mail/./src/components/RecipientInfo.vue?6f9c","webpack://nextcloud-mail/./src/components/RecipientInfo.vue?635c","webpack://nextcloud-mail/./src/components/RecipientInfo.vue","webpack://nextcloud-mail/./src/util/message.js","webpack://nextcloud-mail/src/components/NewMessageModal.vue","webpack://nextcloud-mail/./src/components/NewMessageModal.vue?2c0e","webpack://nextcloud-mail/./src/components/NewMessageModal.vue?629e","webpack://nextcloud-mail/./src/components/NewMessageModal.vue?9e47"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@media only screen and (max-width: 600px){[data-v-2f09f45c] .modal-container{max-width:80%}}[data-v-2f09f45c] .modal-wrapper .modal-container{overflow-y:auto !important;overflow-x:auto !important;height:90%;max-height:700px !important}.minimize-button[data-v-2f09f45c]{float:inline-end;position:absolute;top:4px;inset-inline-end:63px}.maximize-button[data-v-2f09f45c]{float:inline-end;position:absolute;top:4px;inset-inline-end:33px}.empty-content[data-v-2f09f45c]{height:100%;display:flex}.modal-content[data-v-2f09f45c]{display:flex;height:100%;flex-direction:row;width:100%}.left-pane[data-v-2f09f45c]{flex:1;overflow-y:auto}.right-pane[data-v-2f09f45c]{flex:0 0 370px;overflow-y:auto;padding-inline-start:5px;border-inline-start:1px solid #ccc}@media(max-width: 1024px){.right-pane[data-v-2f09f45c]{display:none}}.modal-content.with-recipient .left-pane[data-v-2f09f45c]{flex:1}.modal-content .left-pane[data-v-2f09f45c]{width:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NewMessageModal.vue\"],\"names\":[],\"mappings\":\"AACA,0CACC,mCACC,aAAA,CAAA,CAIF,kDACC,0BAAA,CACA,0BAAA,CAEA,UAAA,CAEA,2BAAA,CAGD,kCACC,gBAAA,CACA,iBAAA,CACA,OAAA,CACA,qBAAA,CAGD,kCACC,gBAAA,CACA,iBAAA,CACA,OAAA,CACA,qBAAA,CAID,gCACC,WAAA,CACA,YAAA,CAGD,gCACC,YAAA,CACA,WAAA,CACA,kBAAA,CACA,UAAA,CAGD,4BACC,MAAA,CACA,eAAA,CAGD,6BACC,cAAA,CACA,eAAA,CACA,wBAAA,CACA,kCAAA,CACA,0BALD,6BAME,YAAA,CAAA,CAIF,0DACC,MAAA,CAGD,2CACC,UAAA\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 600px) {\\n\\t:deep(.modal-container) {\\n\\t\\tmax-width: 80%;\\n\\t}\\n}\\n\\n:deep(.modal-wrapper .modal-container) {\\n\\toverflow-y: auto !important;\\n\\toverflow-x: auto !important;\\n\\t// from original Modal max-height\\n\\theight: 90%;\\n\\t// Max editor + modal height\\n\\tmax-height: 700px !important;\\n}\\n\\n.minimize-button {\\n\\tfloat: inline-end;\\n\\tposition: absolute;\\n\\ttop: 4px;\\n\\tinset-inline-end: 63px;\\n}\\n\\n.maximize-button {\\n\\tfloat: inline-end;\\n\\tposition: absolute;\\n\\ttop: 4px;\\n\\tinset-inline-end: 33px;\\n\\n}\\n\\n.empty-content{\\n\\theight: 100%;\\n\\tdisplay: flex;\\n}\\n\\n.modal-content {\\n\\tdisplay: flex;\\n\\theight: 100%;\\n\\tflex-direction: row;\\n\\twidth: 100%;\\n}\\n\\n.left-pane {\\n\\tflex: 1;\\n\\toverflow-y: auto;\\n}\\n\\n.right-pane {\\n\\tflex: 0 0 370px;\\n\\toverflow-y: auto;\\n\\tpadding-inline-start: 5px;\\n\\tborder-inline-start: 1px solid #ccc;\\n\\t@media (max-width: 1024px) {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n\\n.modal-content.with-recipient .left-pane {\\n\\tflex: 1;\\n}\\n\\n.modal-content .left-pane {\\n\\twidth: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.message-composer[data-v-3657ba82]{z-index:100;display:flex;flex-direction:column;height:100%;max-height:100%}.composer-actions[data-v-3657ba82]{position:sticky;background:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%)}.composer-fields[data-v-3657ba82]{padding:var(--default-grid-baseline) calc(var(--default-grid-baseline)*2) 0 calc(var(--default-grid-baseline)*2)}.composer-fields__label[data-v-3657ba82]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end}.composer-fields__label[data-v-3657ba82] .button-vue__text{font-weight:normal}.composer-fields.mail-account[data-v-3657ba82]{border-top:none;padding-top:calc(var(--default-grid-baseline)*2)}.composer-fields input[data-v-3657ba82],.composer-fields TextEditor[data-v-3657ba82]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .composer-fields--custom[data-v-3657ba82]{display:flex;align-items:flex-start;justify-content:space-between;padding-top:calc(var(--default-grid-baseline)*.5)}.composer-fields .composer-fields--custom button[data-v-3657ba82]{margin-top:0;margin-bottom:0;background-color:rgba(0,0,0,0);border:none;opacity:.5;padding:calc(var(--default-grid-baseline)*2) calc(var(--default-grid-baseline)*4)}.composer-fields .composer-fields--custom .select[data-v-3657ba82]{width:100%}.composer-fields .composer-fields--custom .vs__search[data-v-3657ba82]{width:100%}.composer-fields .composer-fields--custom .v-select[data-v-3657ba82]{flex-grow:.95}.composer-fields .subject[data-v-3657ba82]{font-size:15px;font-weight:bold;margin:var(--default-grid-baseline) 0 !important;padding:0 !important;width:100%}.composer-fields .subject[data-v-3657ba82]:focus-visible{box-shadow:none !important}.composer-fields .message-body[data-v-3657ba82]{height:100%;width:100%;margin:0;border:none !important;outline:none !important;box-shadow:none !important;-webkit-user-select:text;user-select:text}.message-editor[data-v-3657ba82]{flex:1 1 100%;min-height:0;border-top:1px solid var(--color-border)}.draft-status[data-v-3657ba82]{padding:calc(var(--default-grid-baseline)*.5);opacity:.5;font-size:small;display:block}.from-label[data-v-3657ba82],.to-label[data-v-3657ba82],.copy-toggle[data-v-3657ba82],.cc-label[data-v-3657ba82],.bcc-label[data-v-3657ba82]{color:var(--color-text-maxcontrast);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bcc-label[data-v-3657ba82]{top:initial;bottom:0}.copy-toggle[data-v-3657ba82]{cursor:pointer;width:initial}.copy-toggle[data-v-3657ba82]:hover,.copy-toggle[data-v-3657ba82]:focus{color:var(--color-main-text)}.reply[data-v-3657ba82]{min-height:100px}.subject[data-v-3657ba82]{border:none !important}[data-v-3657ba82] [data-select=\"create\"] .avatardiv--unknown{background:var(--color-text-maxcontrast) !important}#from[data-v-3657ba82]{width:100%;cursor:pointer}[data-v-3657ba82] .vs__actions{display:none}[data-v-3657ba82] .v-select.select{inset-inline-start:0 !important}[data-v-3657ba82] .vs__dropdown-menu{padding:0 !important}[data-v-3657ba82] .vs__dropdown-option{border-radius:0 !important}.submit-message.send.primary.icon-confirm-white[data-v-3657ba82]{color:var(--color-main-background)}.button[data-v-3657ba82]{background-color:rgba(0,0,0,0);border:none}.send-button[data-v-3657ba82]{display:flex;align-items:center;padding:calc(var(--default-grid-baseline)*2) calc(var(--default-grid-baseline)*4);margin-inline-start:var(--default-grid-baseline)}.send-button .send-icon[data-v-3657ba82]{padding-inline-end:var(--default-grid-baseline)}.centered-content[data-v-3657ba82]{margin-top:0 !important}.composer-actions-right[data-v-3657ba82]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;bottom:var(--default-grid-baseline)}.composer-actions--primary-actions[data-v-3657ba82]{display:flex;flex-direction:row;padding-inline-start:calc(var(--default-grid-baseline)*2);align-items:center}.composer-actions--secondary-actions[data-v-3657ba82]{display:flex;flex-direction:row;padding:12px;gap:5px}.composer-actions--primary-actions .button[data-v-3657ba82]{padding:2px}.composer-actions--secondary-actions .button[data-v-3657ba82]{flex-shrink:0}.composer-actions-draft-status[data-v-3657ba82]{padding-inline-start:10px}[data-v-3657ba82] .vs__selected-options .vs__dropdown-toggle .vs--multiple{width:100%}@media only screen and (max-width: 580px){.composer-actions-right[data-v-3657ba82]{align-items:end;flex-direction:column-reverse}.composer-actions-draft-status[data-v-3657ba82]{text-align:end;padding-inline-end:15px}.composer-actions--primary-actions[data-v-3657ba82]{padding-inline-end:5px}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Composer.vue\"],\"names\":[],\"mappings\":\"AACA,mCACC,WAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CAGD,mCACC,eAAA,CACA,gGAAA,CAGD,kCACC,gHAAA,CAEA,yCACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,oBAAA,CAGA,2DACC,kBAAA,CAIF,+CACC,eAAA,CACA,gDAAA,CAGD,qFAEC,WAAA,CACA,cAAA,CACA,WAAA,CACA,eAAA,CAGD,2DACC,YAAA,CACA,sBAAA,CACA,6BAAA,CACA,iDAAA,CAEA,kEACC,YAAA,CACA,eAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CACA,iFAAA,CAGD,mEACC,UAAA,CAED,uEACC,UAAA,CAED,qEACC,aAAA,CAIF,2CACC,cAAA,CACA,gBAAA,CACA,gDAAA,CACA,oBAAA,CACA,UAAA,CAEA,yDACC,0BAAA,CAIF,gDACC,WAAA,CACA,UAAA,CACA,QAAA,CACA,sBAAA,CACA,uBAAA,CACA,0BAAA,CAIA,wBAAA,CACA,gBAAA,CAKF,iCACC,aAAA,CACA,YAAA,CACA,wCAAA,CAGD,+BACC,6CAAA,CACA,UAAA,CACA,eAAA,CACA,aAAA,CAGD,6IAKC,mCAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAGD,4BACC,WAAA,CACA,QAAA,CAGD,8BACC,cAAA,CACA,aAAA,CAEA,wEAEC,4BAAA,CAIF,wBACC,gBAAA,CAGD,0BACC,sBAAA,CAGD,6DACC,mDAAA,CAGD,uBACC,UAAA,CACA,cAAA,CAGD,+BACC,YAAA,CAGD,mCACC,+BAAA,CAGD,qCACC,oBAAA,CAGD,uCACC,0BAAA,CAGD,iEACC,kCAAA,CAGD,yBACC,8BAAA,CACA,WAAA,CAGD,8BACC,YAAA,CACA,kBAAA,CACA,iFAAA,CACA,gDAAA,CAGD,yCACC,+CAAA,CAGD,mCACC,uBAAA,CAGD,yCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,6BAAA,CACA,mCAAA,CAGD,oDACC,YAAA,CACA,kBAAA,CACA,yDAAA,CACA,kBAAA,CAGD,sDACC,YAAA,CACA,kBAAA,CACA,YAAA,CACA,OAAA,CAGD,4DACC,WAAA,CAGD,8DACC,aAAA,CAGD,gDACC,yBAAA,CAGD,2EACC,UAAA,CAGD,0CACC,yCACC,eAAA,CACA,6BAAA,CAED,gDACC,cAAA,CACA,uBAAA,CAED,oDACC,sBAAA,CAAA\",\"sourcesContent\":[\"\\n.message-composer {\\n\\tz-index: 100;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tmax-height: 100%;\\n}\\n\\n.composer-actions {\\n\\tposition: sticky;\\n\\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\\n}\\n\\n.composer-fields {\\n\\tpadding: var(--default-grid-baseline) calc(var(--default-grid-baseline) * 2) 0 calc(var(--default-grid-baseline) * 2);\\n\\n\\t&__label {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: row;\\n\\t\\tjustify-content: space-between;\\n\\t\\talign-items: flex-end;\\n\\n\\t\\t/** NcButton does not allow font weight styling */\\n\\t\\t:deep(.button-vue__text) {\\n\\t\\t\\tfont-weight: normal;\\n\\t\\t}\\n\\t}\\n\\n\\t&.mail-account {\\n\\t\\tborder-top: none;\\n\\t\\tpadding-top: calc(var(--default-grid-baseline) * 2);\\n\\t}\\n\\n\\tinput,\\n\\tTextEditor {\\n\\t\\tflex-grow: 1;\\n\\t\\tmax-width: none;\\n\\t\\tborder: none;\\n\\t\\tborder-radius: 0;\\n\\t}\\n\\n\\t.composer-fields--custom {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: flex-start;\\n\\t\\tjustify-content: space-between;\\n\\t\\tpadding-top: calc(var(--default-grid-baseline) * 0.5);\\n\\n\\t\\tbutton {\\n\\t\\t\\tmargin-top: 0;\\n\\t\\t\\tmargin-bottom: 0;\\n\\t\\t\\tbackground-color: transparent;\\n\\t\\t\\tborder: none;\\n\\t\\t\\topacity: 0.5;\\n\\t\\t\\tpadding: calc(var(--default-grid-baseline) * 2) calc(var(--default-grid-baseline) * 4);\\n\\t\\t}\\n\\n\\t\\t.select {\\n\\t\\t\\twidth: 100%;\\n\\t\\t}\\n\\t\\t.vs__search{\\n\\t\\t\\twidth: 100%;\\n\\t\\t}\\n\\t\\t.v-select{\\n\\t\\t\\tflex-grow: 0.95;\\n\\t\\t}\\n\\t}\\n\\n\\t.subject {\\n\\t\\tfont-size: 15px;\\n\\t\\tfont-weight: bold;\\n\\t\\tmargin: var(--default-grid-baseline) 0 !important;\\n\\t\\tpadding: 0 !important;\\n\\t\\twidth: 100%;\\n\\n\\t\\t&:focus-visible {\\n\\t\\t\\tbox-shadow: none !important;\\n\\t\\t}\\n\\t}\\n\\n\\t.message-body {\\n\\t\\theight: 100%;\\n\\t\\twidth: 100%;\\n\\t\\tmargin: 0;\\n\\t\\tborder: none !important;\\n\\t\\toutline: none !important;\\n\\t\\tbox-shadow: none !important;\\n\\n\\t\\t// Fix contenteditable not becoming focused upon clichint within it's\\n\\t\\t// boundaries in safari\\n\\t\\t-webkit-user-select: text;\\n\\t\\tuser-select: text;\\n\\t}\\n}\\n\\n// Make composer editor expand\\n.message-editor {\\n\\tflex: 1 1 100%;\\n\\tmin-height: 0;\\n\\tborder-top: 1px solid var(--color-border);\\n}\\n\\n.draft-status {\\n\\tpadding: calc(var(--default-grid-baseline) * 0.5);\\n\\topacity: 0.5;\\n\\tfont-size: small;\\n\\tdisplay: block;\\n}\\n\\n.from-label,\\n.to-label,\\n.copy-toggle,\\n.cc-label,\\n.bcc-label {\\n\\tcolor: var(--color-text-maxcontrast);\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.bcc-label {\\n\\ttop: initial;\\n\\tbottom: 0;\\n}\\n\\n.copy-toggle {\\n\\tcursor: pointer;\\n\\twidth: initial;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tcolor: var(--color-main-text);\\n\\t}\\n}\\n\\n.reply {\\n\\tmin-height: 100px;\\n}\\n\\n.subject {\\n\\tborder: none !important;\\n}\\n\\n:deep([data-select=\\\"create\\\"] .avatardiv--unknown) {\\n\\tbackground: var(--color-text-maxcontrast) !important;\\n}\\n\\n#from{\\n\\twidth: 100%;\\n\\tcursor: pointer;\\n}\\n\\n:deep(.vs__actions){\\n\\tdisplay: none;\\n}\\n\\n:deep(.v-select.select){\\n\\tinset-inline-start: 0 !important;\\n}\\n\\n:deep(.vs__dropdown-menu){\\n\\tpadding: 0 !important;\\n}\\n\\n:deep(.vs__dropdown-option){\\n\\tborder-radius: 0  !important;\\n}\\n\\n.submit-message.send.primary.icon-confirm-white {\\n\\tcolor: var(--color-main-background);\\n}\\n\\n.button {\\n\\tbackground-color: transparent;\\n\\tborder: none;\\n}\\n\\n.send-button {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tpadding: calc(var(--default-grid-baseline) * 2) calc(var(--default-grid-baseline) * 4);\\n\\tmargin-inline-start: var(--default-grid-baseline);\\n}\\n\\n.send-button .send-icon {\\n\\tpadding-inline-end: var(--default-grid-baseline);\\n}\\n\\n.centered-content {\\n\\tmargin-top: 0 !important;\\n}\\n\\n.composer-actions-right {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\tbottom: var(--default-grid-baseline);\\n}\\n\\n.composer-actions--primary-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tpadding-inline-start: calc(var(--default-grid-baseline) * 2);\\n\\talign-items: center;\\n}\\n\\n.composer-actions--secondary-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tpadding: 12px;\\n\\tgap: 5px;\\n}\\n\\n.composer-actions--primary-actions .button {\\n\\tpadding: 2px;\\n}\\n\\n.composer-actions--secondary-actions .button{\\n\\tflex-shrink: 0;\\n}\\n\\n.composer-actions-draft-status {\\n\\tpadding-inline-start: 10px;\\n}\\n\\n:deep(.vs__selected-options .vs__dropdown-toggle .vs--multiple ){\\n\\twidth: 100%;\\n}\\n\\n@media only screen and (max-width: 580px) {\\n\\t.composer-actions-right {\\n\\t\\talign-items: end;\\n\\t\\tflex-direction: column-reverse;\\n\\t}\\n\\t.composer-actions-draft-status {\\n\\t\\ttext-align: end;\\n\\t\\tpadding-inline-end: 15px;\\n\\t}\\n\\t.composer-actions--primary-actions {\\n\\t\\tpadding-inline-end: 5px;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.recipient-info[data-v-1d39f020]{display:inline;width:100%}.recipient-info__single[data-v-1d39f020]{width:370px;display:inline-block}.recipient-info__avatar[data-v-1d39f020]{margin-top:20px;display:inline;float:inline-start;padding:20px}.recipient-info__details[data-v-1d39f020]{max-width:100%}.recipient-info__multiple[data-v-1d39f020]{margin-top:10px;display:flex;flex-direction:column}.recipient-info__item[data-v-1d39f020]{margin-bottom:10px}.recipient-info__expand-toggle[data-v-1d39f020]{cursor:pointer;display:flex;gap:5px}.recipient-info__header[data-v-1d39f020]{display:contents}.recipient-info__name[data-v-1d39f020]{margin-top:50px}.recipient-info__show-less[data-v-1d39f020]{margin-top:40px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientInfo.vue\"],\"names\":[],\"mappings\":\"AACA,iCACC,cAAA,CACA,UAAA,CAEA,yCACC,WAAA,CACA,oBAAA,CAGD,yCACC,eAAA,CACA,cAAA,CACA,kBAAA,CACA,YAAA,CAGD,0CACC,cAAA,CAGD,2CACC,eAAA,CACA,YAAA,CACA,qBAAA,CAGD,uCACC,kBAAA,CAGD,gDACC,cAAA,CACA,YAAA,CACA,OAAA,CAGD,yCACC,gBAAA,CAGD,uCACC,eAAA,CAGD,4CACC,eAAA\",\"sourcesContent\":[\"\\n.recipient-info {\\n\\tdisplay: inline;\\n\\twidth: 100%;\\n\\n\\t&__single {\\n\\t\\twidth: 370px;\\n\\t\\tdisplay: inline-block;\\n\\t}\\n\\n\\t&__avatar {\\n\\t\\tmargin-top: 20px;\\n\\t\\tdisplay: inline;\\n\\t\\tfloat: inline-start;\\n\\t\\tpadding: 20px;\\n\\t}\\n\\n\\t&__details {\\n\\t\\tmax-width: 100%;\\n\\t}\\n\\n\\t&__multiple {\\n\\t\\tmargin-top: 10px;\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t}\\n\\n\\t&__item {\\n\\t\\tmargin-bottom: 10px;\\n\\t}\\n\\n\\t&__expand-toggle {\\n\\t\\tcursor: pointer;\\n\\t\\tdisplay: flex;\\n\\t\\tgap: 5px;\\n\\t}\\n\\n\\t&__header {\\n\\t\\tdisplay: contents;\\n\\t}\\n\\n\\t&__name {\\n\\t\\tmargin-top: 50px;\\n\\t}\\n\\n\\t&__show-less {\\n\\t\\tmargin-top: 40px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.new-message-attachments--counter[data-v-efab168c]{color:var(--color-text-maxcontrast);padding:10px 20px;cursor:pointer;display:flex;align-items:center}.new-message-attachments--counter--with-errors[data-v-efab168c]{color:red}.new-message-attachments--list[data-v-efab168c]{display:flex;flex-wrap:wrap;overflow:auto;transition:max-height .5s cubic-bezier(0, 1, 0, 1);padding:0 10px}.new-message-attachments--list.hide[data-v-efab168c]{overflow:hidden;max-height:0;transition:max-height .5s cubic-bezier(0, 1, 0, 1)}.new-message-attachments--list.active[data-v-efab168c]{overflow:auto;max-height:287px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ComposerAttachments.vue\"],\"names\":[],\"mappings\":\"AAGC,mDACC,mCAAA,CACA,iBAAA,CACA,cAAA,CACA,YAAA,CACA,kBAAA,CAEA,gEACC,SAAA,CAIF,gDACC,YAAA,CACA,cAAA,CAEA,aAAA,CACA,kDAAA,CACA,cAAA,CAEA,qDACC,eAAA,CACA,YAAA,CACA,kDAAA,CAGD,uDACC,aAAA,CACA,gBAAA\",\"sourcesContent\":[\"\\n\\n.new-message-attachments {\\n\\t&--counter {\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\tpadding: 10px 20px;\\n\\t\\tcursor:pointer;\\n\\t\\tdisplay:flex;\\n\\t\\talign-items: center;\\n\\n\\t\\t&--with-errors {\\n\\t\\t\\tcolor:red;\\n\\t\\t}\\n\\t}\\n\\n\\t&--list {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\t// 2 and a half attachment height\\n\\t\\toverflow: auto;\\n\\t\\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\\n\\t\\tpadding: 0 10px;\\n\\n\\t\\t&.hide {\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\tmax-height:0;\\n\\t\\t\\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\toverflow: auto;\\n\\t\\t\\tmax-height: 287px;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.external[data-v-5f9950ff]{background-color:var(--color-error) !important}.external[data-v-5f9950ff] .option__lineone{color:var(--color-primary-text) !important}.ncselect__tag--recipient[data-v-5f9950ff]{padding:0;border-radius:25px;border-color:rgba(0,0,0,0);background-color:var(--color-background-dark);height:24px;max-width:100%;display:flex}.ncselect__tag--recipient>span.option[data-v-5f9950ff]{margin-inline-start:0}.delete-recipient[data-v-5f9950ff]{display:inline-flex;align-items:center;justify-content:center;cursor:pointer;height:24px;width:24px;min-width:24px;margin-inline-start:6px;border-radius:50%;flex-shrink:0}.delete-recipient[data-v-5f9950ff]:hover{background:var(--color-background-darker)}.option[data-v-5f9950ff]{flex-shrink:1;overflow:hidden;width:unset}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientListItem.vue\"],\"names\":[],\"mappings\":\"AACA,2BACC,8CAAA,CACA,4CACC,0CAAA,CAIF,2CACC,SAAA,CACA,kBAAA,CACA,0BAAA,CACA,6CAAA,CACA,WAAA,CACA,cAAA,CACA,YAAA,CAEA,uDACC,qBAAA,CAIF,mCACC,mBAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CACA,WAAA,CACA,UAAA,CACA,cAAA,CACA,uBAAA,CACA,iBAAA,CACA,aAAA,CAEA,yCACC,yCAAA,CAIF,yBACC,aAAA,CACA,eAAA,CACA,WAAA\",\"sourcesContent\":[\"\\n.external {\\n\\tbackground-color: var(--color-error) !important;\\n\\t:deep(.option__lineone){\\n\\t\\tcolor: var(--color-primary-text) !important;\\n\\t}\\n}\\n\\n.ncselect__tag--recipient {\\n\\tpadding: 0 ;\\n\\tborder-radius: 25px;\\n\\tborder-color: transparent;\\n\\tbackground-color: var(--color-background-dark);\\n\\theight: 24px;\\n\\tmax-width: 100%;\\n\\tdisplay: flex;\\n\\n\\t& > span.option {\\n\\t\\tmargin-inline-start: 0\\n\\t}\\n}\\n\\n.delete-recipient {\\n\\tdisplay: inline-flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tcursor: pointer;\\n\\theight: 24px;\\n\\twidth: 24px;\\n\\tmin-width: 24px;\\n\\tmargin-inline-start: 6px;\\n\\tborder-radius: 50%;\\n\\tflex-shrink: 0;\\n\\n\\t&:hover {\\n\\t\\tbackground: var(--color-background-darker);\\n\\t}\\n}\\n\\n.option {\\n\\tflex-shrink: 1;\\n\\toverflow: hidden;\\n\\twidth: unset;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 -960 960 960\\\" fill=\\\"#5f6368\\\"><path d=\\\"M200-200h560v-367L567-760H200v560Zm0 80q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h400l240 240v400q0 33-23.5 56.5T760-120H200Zm80-160h400v-80H280v80Zm0-160h400v-80H280v80Zm0-160h280v-80H280v80Zm-80 400v-560 560Z\\\"></path></svg>\"","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n#mailvelope-composer[data-v-0f14fc25] {\n\twidth: 100%;\n\theight: 450px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailvelopeEditor.vue\"],\"names\":[],\"mappings\":\";AA6DA;CACA,WAAA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\\n  - SPDX-License-Identifier: AGPL-3.0-or-later\\n-->\\n\\n<template>\\n\\t<div id=\\\"mailvelope-composer\\\" />\\n</template>\\n\\n<script>\\nimport logger from '../logger.js'\\nimport { isPgpgMessage } from '../crypto/pgp.js'\\n\\nexport default {\\n\\tname: 'MailvelopeEditor',\\n\\tprops: {\\n\\t\\tvalue: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\trecipients: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tquotedText: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: () => undefined,\\n\\t\\t},\\n\\t\\tisReplyOrForward: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\tdefault: false,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\teditor: undefined,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\\n\\t\\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\\n\\n\\t\\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\\n\\t\\t\\tquotedMail: isEncrypted ? quotedMail : undefined,\\n\\t\\t})\\n\\t},\\n\\tmethods: {\\n\\t\\tasync pull() {\\n\\t\\t\\tconst recipients = this.recipients.map((r) => r.email)\\n\\t\\t\\tlogger.info('encrypting message', { recipients })\\n\\t\\t\\tconst armored = await this.editor.encrypt(recipients)\\n\\t\\t\\tlogger.info('message encryted', { armored })\\n\\n\\t\\t\\tthis.$emit('input', armored)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mailvelope-composer {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.insert-button[data-v-2fd130f3]{justify-self:end;margin-bottom:calc(var(--default-grid-baseline)*2)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/textBlocks/TextBlockModal.vue\"],\"names\":[],\"mappings\":\"AACA,gCACC,gBAAA,CACA,kDAAA\",\"sourcesContent\":[\"\\n.insert-button {\\n\\tjustify-self: end;\\n\\tmargin-bottom: calc( var(--default-grid-baseline) * 2) ;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.composer-attachment[data-v-269b6340]{width:calc(50% - 20px);box-sizing:border-box;display:flex;justify-content:space-between;align-items:flex-start;margin:10px;flex-wrap:wrap}.composer-attachment--with-error[data-v-269b6340]{color:red;opacity:.5}.composer-attachment .cloud-attachment-icon[data-v-269b6340]{position:absolute;z-index:2;inset-inline-end:2px;top:2px;color:#000}.composer-attachment .attachment-preview[data-v-269b6340]{display:inline-flex;flex-wrap:wrap;width:50px;height:50px;overflow:hidden;border-radius:3px;align-items:center;justify-content:center;position:relative}.composer-attachment .attachment-preview img[data-v-269b6340]{display:block;min-width:50px;min-height:50px;max-width:72px;max-height:72px;position:absolute}.composer-attachment .attachment-preview span[data-v-269b6340]{color:rgba(0,0,0,.3);font-size:13px;text-transform:uppercase;font-weight:bold}.composer-attachment button[data-v-269b6340]{padding:0;background:rgba(0,0,0,0);border:none;margin:6px -2px 0 0}.attachments-upload-progress[data-v-269b6340]{display:block;height:5px;width:100%;position:relative;border-radius:5px;background:var(--color-background-dark);margin-top:7px}.attachments-upload-progress .attachments-upload-progress--bar[data-v-269b6340]{height:5px;background:var(--color-primary-element-light);position:absolute;z-index:1;inset-inline-start:0;border-radius:5px}.attachments-upload-progress>div[data-v-269b6340]{padding-inline-start:3px}.new-message-attachments-action[data-v-269b6340]{display:inline-block;vertical-align:middle;padding:18px;opacity:.5}.attachment-inner[data-v-269b6340]{display:flex;flex-wrap:wrap;width:calc(100% - 90px);position:relative}.new-message-attachment-name[data-v-269b6340]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin-bottom:3px}.new-message-attachment-size[data-v-269b6340]{color:#6a6a6a;width:100%}.new-message-attachment-name.upload-ongoing[data-v-269b6340]{color:#0082c9}.new-message-attachment-name.upload-warning[data-v-269b6340]{color:#d2322d}.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-269b6340]{border:1px solid #e9322d;background:#e9322d}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ComposerAttachment.vue\"],\"names\":[],\"mappings\":\"AAEA,sCACC,sBAAA,CACG,qBAAA,CACA,YAAA,CACA,6BAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA,CAEH,kDACC,SAAA,CACA,UAAA,CAGD,6DACC,iBAAA,CACA,SAAA,CACA,oBAAA,CACA,OAAA,CACA,UAAA,CAGD,0DACC,mBAAA,CACA,cAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,iBAAA,CACA,kBAAA,CACA,sBAAA,CACA,iBAAA,CAEA,8DACC,aAAA,CACA,cAAA,CACA,eAAA,CACA,cAAA,CACA,eAAA,CACA,iBAAA,CAGD,+DACC,oBAAA,CACA,cAAA,CACA,wBAAA,CACA,gBAAA,CAKF,6CACC,SAAA,CACA,wBAAA,CACA,WAAA,CACA,mBAAA,CAIF,8CACC,aAAA,CACA,UAAA,CACA,UAAA,CACA,iBAAA,CACA,iBAAA,CACA,uCAAA,CACA,cAAA,CAEA,gFACC,UAAA,CACA,6CAAA,CACA,iBAAA,CACA,SAAA,CACA,oBAAA,CACA,iBAAA,CAIF,kDACC,wBAAA,CAGD,iDACC,oBAAA,CACA,qBAAA,CACA,YAAA,CACA,UAAA,CAGD,mCACC,YAAA,CACG,cAAA,CACH,uBAAA,CACA,iBAAA,CAKD,8CACC,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,iBAAA,CAGD,8CACC,aAAA,CACA,UAAA,CAID,6DACC,aAAA,CAID,6DACC,aAAA,CAID,mFACC,wBAAA,CACA,kBAAA\",\"sourcesContent\":[\"\\n\\n.composer-attachment {\\n\\twidth: calc(50% - 20px);\\n    box-sizing: border-box;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n    margin: 10px;\\n    flex-wrap: wrap;\\n\\n\\t&--with-error {\\n\\t\\tcolor:red;\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t.cloud-attachment-icon {\\n\\t\\tposition:absolute;\\n\\t\\tz-index: 2;\\n\\t\\tinset-inline-end: 2px;\\n\\t\\ttop: 2px;\\n\\t\\tcolor: rgba(0, 0, 0, 1);\\n\\t}\\n\\n\\t.attachment-preview {\\n\\t\\tdisplay: inline-flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\twidth: 50px;\\n\\t\\theight:50px;\\n\\t\\toverflow: hidden;\\n\\t\\tborder-radius: 3px;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: center;\\n\\t\\tposition: relative;\\n\\n\\t\\timg {\\n\\t\\t\\tdisplay: block;\\n\\t\\t\\tmin-width: 50px;\\n\\t\\t\\tmin-height: 50px;\\n\\t\\t\\tmax-width: 72px;\\n\\t\\t\\tmax-height: 72px;\\n\\t\\t\\tposition: absolute;\\n\\t\\t}\\n\\n\\t\\tspan {\\n\\t\\t\\tcolor: rgba(0,0,0,0.3);\\n\\t\\t\\tfont-size: 13px;\\n\\t\\t\\ttext-transform: uppercase;\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t}\\n\\n\\t}\\n\\n\\tbutton {\\n\\t\\tpadding: 0;\\n\\t\\tbackground: transparent;\\n\\t\\tborder: none;\\n\\t\\tmargin: 6px -2px 0 0;\\n\\t}\\n}\\n\\n.attachments-upload-progress {\\n\\tdisplay: block;\\n\\theight: 5px;\\n\\twidth: 100%;\\n\\tposition: relative;\\n\\tborder-radius: 5px;\\n\\tbackground: var(--color-background-dark);\\n\\tmargin-top: 7px;\\n\\n\\t.attachments-upload-progress--bar {\\n\\t\\theight: 5px;\\n\\t\\tbackground: var(--color-primary-element-light);\\n\\t\\tposition: absolute;\\n\\t\\tz-index: 1;\\n\\t\\tinset-inline-start: 0;\\n\\t\\tborder-radius: 5px;\\n\\t}\\n}\\n\\n.attachments-upload-progress > div {\\n\\tpadding-inline-start: 3px;\\n}\\n\\n.new-message-attachments-action {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 18px;\\n\\topacity: 0.5;\\n}\\n\\n.attachment-inner {\\n\\tdisplay: flex;\\n    flex-wrap: wrap;\\n\\twidth: calc(100% - 90px);\\n\\tposition: relative;\\n\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name {\\n\\ttext-overflow: ellipsis;\\n\\toverflow: hidden;\\n\\twhite-space:nowrap;\\n\\tmargin-bottom: 3px;\\n}\\n\\n.new-message-attachment-size {\\n\\tcolor: #6a6a6a;\\n\\twidth: 100%;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.showMessageComposer)?_c('Modal',{attrs:{\"size\":_vm.modalSize,\"name\":_vm.modalTitle,\"additional-trap-elements\":_vm.additionalTrapElements},on:{\"close\":function($event){$event.type === 'click' ? _vm.onClose() : _vm.onMinimize()}}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"left-pane\"},[_c('NcButton',{staticClass:\"maximize-button\",attrs:{\"type\":\"tertiary-no-background\",\"aria-label\":_vm.t('mail', 'Maximize composer'),\"title\":_vm.largerModal ? _vm.t('mail', 'Show recipient details') : _vm.t('mail', 'Hide recipient details')},on:{\"click\":_vm.onMaximize},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(!_vm.largerModal)?_c('MaximizeIcon',{attrs:{\"size\":20}}):_c('DefaultComposerIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,2562889512)}),_vm._v(\" \"),_c('NcButton',{staticClass:\"minimize-button\",attrs:{\"type\":\"tertiary-no-background\",\"aria-label\":_vm.t('mail', 'Minimize composer'),\"title\":_vm.t('mail', 'Minimize composer')},on:{\"click\":_vm.onMinimize},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('MinimizeIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,1222194427)}),_vm._v(\" \"),_c('KeepAlive',[(_vm.error)?_c('EmptyContent',{staticClass:\"empty-content\",attrs:{\"name\":_vm.t('mail', 'Error sending your message'),\"role\":\"alert\"},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('NcButton',{attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('mail', 'Go back')},on:{\"click\":function($event){_vm.error = undefined}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('mail', 'Retry')},on:{\"click\":_vm.onSend}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Retry'))+\"\\n\\t\\t\\t\\t\\t\\t\")])]},proxy:true}],null,false,2969084300)},[_c('p',[_vm._v(_vm._s(_vm.error))])]):(_vm.warning)?_c('EmptyContent',{staticClass:\"empty-content\",attrs:{\"name\":_vm.t('mail', 'Warning sending your message'),\"role\":\"alert\"},scopedSlots:_vm._u([{key:\"description\",fn:function(){return [_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.warning)+\"\\n\\t\\t\\t\\t\\t\")]},proxy:true},{key:\"action\",fn:function(){return [_c('NcButton',{attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('mail', 'Go back')},on:{\"click\":function($event){_vm.warning = undefined}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('mail', 'Send anyway')},on:{\"click\":_vm.onForceSend}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send anyway'))+\"\\n\\t\\t\\t\\t\\t\\t\")])]},proxy:true}],null,false,3361074366)}):_vm._e(),_vm._v(\" \"),_c('Composer',{ref:\"composer\",attrs:{\"from-account\":_vm.composerData.accountId,\"from-alias\":_vm.composerData.aliasId,\"to\":_vm.composerData.to,\"cc\":_vm.composerData.cc,\"bcc\":_vm.composerData.bcc,\"subject\":_vm.composerData.subject,\"attachments-data\":_vm.composerData.attachments,\"body\":_vm.composerDataBodyAsTextInstance,\"editor-body\":_vm.convertEditorBody(_vm.composerData),\"in-reply-to-message-id\":_vm.composerData.inReplyToMessageId,\"reply-to\":_vm.composerData.replyTo,\"forward-from\":_vm.composerData.forwardFrom,\"send-at\":_vm.composerData.sendAt * 1000,\"forwarded-messages\":_vm.forwardedMessages,\"smart-reply\":_vm.smartReply,\"can-save-draft\":_vm.canSaveDraft,\"saving-draft\":_vm.savingDraft,\"draft-saved\":_vm.draftSaved,\"smime-sign\":_vm.composerData.smimeSign,\"smime-encrypt\":_vm.composerData.smimeEncrypt,\"is-first-open\":_vm.modalFirstOpen,\"request-mdn\":_vm.composerData.requestMdn,\"accounts\":_vm.accounts},on:{\"update:from-account\":function($event){return _vm.patchComposerData({ accountId: $event })},\"update:from-alias\":function($event){return _vm.patchComposerData({ aliasId: $event })},\"update:to\":function($event){return _vm.patchComposerData({ to: $event })},\"update:cc\":function($event){return _vm.patchComposerData({ cc: $event })},\"update:bcc\":function($event){return _vm.patchComposerData({ bcc: $event })},\"update:subject\":function($event){return _vm.patchComposerData({ subject: $event })},\"update:attachments-data\":function($event){return _vm.patchComposerData({ attachments: $event })},\"update:editor-body\":_vm.patchEditorBody,\"update:send-at\":function($event){return _vm.patchComposerData({ sendAt: $event / 1000 })},\"update:smime-sign\":function($event){return _vm.patchComposerData({ smimeSign: $event })},\"update:smime-encrypt\":function($event){return _vm.patchComposerData({ smimeSign: $event })},\"update:request-mdn\":function($event){return _vm.patchComposerData({ requestMdn: $event })},\"draft\":_vm.onDraft,\"discard-draft\":_vm.discardDraft,\"upload-attachment\":_vm.onAttachmentUploading,\"send\":_vm.onSend,\"show-toolbar\":_vm.handleShow}})],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showRecipientPane && !_vm.warning && !_vm.error),expression:\"showRecipientPane && !warning && !error\"}],staticClass:\"right-pane\"},[_c('RecipientInfo')],1)])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getClient } from '../dav/client.js'\n\nexport async function getFileSize(path) {\n\tconst response = await getClient('files').stat(path, {\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind  xmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t\tdetails: true,\n\t})\n\n\treturn response?.data?.props?.size\n}\n\nexport async function getFileData(path) {\n\tconst response = await getClient('files').stat(path, {\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind\n\t\t\txmlns:d=\"DAV:\"\n\t\t\txmlns:oc=\"http://owncloud.org/ns\"\n\t\t\txmlns:nc=\"http://nextcloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t\t<oc:fileid />\n\t\t\t\t\t<nc:has-preview />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t\tdetails: true,\n\t})\n\n\treturn response?.data?.props\n}\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<li class=\"composer-attachment\" :class=\"{'composer-attachment--with-error' : attachment.error }\">\n\t\t<div class=\"attachment-preview\">\n\t\t\t<img v-if=\"attachment.imageBlobURL !== false\" :src=\"attachment.imageBlobURL\" class=\"attachment-preview-image\">\n\t\t\t<img v-else-if=\"attachment.hasPreview\" :src=\"previewURL\" class=\"attachment-preview-image\">\n\t\t\t<img v-else :src=\"getIcon\" class=\"attachment-preview-image\">\n\t\t\t<span v-if=\"attachment.type === 'cloud'\" class=\"cloud-attachment-icon\">\n\t\t\t\t<Cloud :size=\"20\" />\n\t\t\t</span>\n\t\t\t<span v-else-if=\"attachment.type === 'message'\">\n\t\t\t\t<EmailArrowRightIcon />\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"attachment-inner\">\n\t\t\t<span class=\"new-message-attachment-name\">\n\t\t\t\t{{ attachment.displayName ? attachment.displayName : attachment.fileName }}\n\t\t\t</span>\n\t\t\t<span v-if=\"!attachment.finished\" class=\"attachments-upload-progress\">\n\t\t\t\t<span class=\"attachments-upload-progress--bar\" :style=\"&quot;width:&quot; + attachment.percent + &quot;%&quot;\" />\n\t\t\t</span>\n\t\t\t<span v-else-if=\"attachment.sizeString\" class=\"new-message-attachment-size\">\n\t\t\t\t{{ attachment.sizeString }}\n\t\t\t</span>\n\t\t</div>\n\t\t<button @click=\"onDelete(attachment)\">\n\t\t\t<Close :size=\"20\" />\n\t\t</button>\n\t</li>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport Close from 'vue-material-design-icons/CloseOutline.vue'\nimport Cloud from 'vue-material-design-icons/CloudOutline.vue'\nimport EmailArrowRightIcon from 'vue-material-design-icons/EmailArrowRightOutline.vue'\n\nexport default {\n\tname: 'ComposerAttachment',\n\tcomponents: {\n\t\tClose,\n\t\tCloud,\n\t\tEmailArrowRightIcon,\n\t},\n\tprops: {\n\t\tattachment: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tuploading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tprogress: 0,\n\t\t\tsizeString: '',\n\t\t\tfinished: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tpreviewURL() {\n\t\t\tif (this.attachment.hasPreview && this.attachment.id > 0) {\n\t\t\t\treturn generateUrl(`/core/preview?fileId=${this.attachment.id}&x=100&y=100&a=0`)\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\t\tgetIcon() {\n\t\t\treturn OC.MimeType.getIconUrl(this.attachment.fileType)\n\t\t},\n\t\textension() {\n\t\t\treturn this.attachment.fileName.split('.').pop()\n\t\t},\n\t},\n\tmethods: {\n\t\tonDelete(attachment) {\n\t\t\tthis.$emit('on-delete-attachment', attachment)\n\t\t},\n\t},\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n.composer-attachment {\n\twidth: calc(50% - 20px);\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin: 10px;\n    flex-wrap: wrap;\n\n\t&--with-error {\n\t\tcolor:red;\n\t\topacity: 0.5;\n\t}\n\n\t.cloud-attachment-icon {\n\t\tposition:absolute;\n\t\tz-index: 2;\n\t\tinset-inline-end: 2px;\n\t\ttop: 2px;\n\t\tcolor: rgba(0, 0, 0, 1);\n\t}\n\n\t.attachment-preview {\n\t\tdisplay: inline-flex;\n\t\tflex-wrap: wrap;\n\t\twidth: 50px;\n\t\theight:50px;\n\t\toverflow: hidden;\n\t\tborder-radius: 3px;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tposition: relative;\n\n\t\timg {\n\t\t\tdisplay: block;\n\t\t\tmin-width: 50px;\n\t\t\tmin-height: 50px;\n\t\t\tmax-width: 72px;\n\t\t\tmax-height: 72px;\n\t\t\tposition: absolute;\n\t\t}\n\n\t\tspan {\n\t\t\tcolor: rgba(0,0,0,0.3);\n\t\t\tfont-size: 13px;\n\t\t\ttext-transform: uppercase;\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t}\n\n\tbutton {\n\t\tpadding: 0;\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tmargin: 6px -2px 0 0;\n\t}\n}\n\n.attachments-upload-progress {\n\tdisplay: block;\n\theight: 5px;\n\twidth: 100%;\n\tposition: relative;\n\tborder-radius: 5px;\n\tbackground: var(--color-background-dark);\n\tmargin-top: 7px;\n\n\t.attachments-upload-progress--bar {\n\t\theight: 5px;\n\t\tbackground: var(--color-primary-element-light);\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tinset-inline-start: 0;\n\t\tborder-radius: 5px;\n\t}\n}\n\n.attachments-upload-progress > div {\n\tpadding-inline-start: 3px;\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 18px;\n\topacity: 0.5;\n}\n\n.attachment-inner {\n\tdisplay: flex;\n    flex-wrap: wrap;\n\twidth: calc(100% - 90px);\n\tposition: relative;\n\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\twhite-space:nowrap;\n\tmargin-bottom: 3px;\n}\n\n.new-message-attachment-size {\n\tcolor: #6a6a6a;\n\twidth: 100%;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=style&index=0&id=269b6340&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=style&index=0&id=269b6340&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ComposerAttachment.vue?vue&type=template&id=269b6340&scoped=true\"\nimport script from \"./ComposerAttachment.vue?vue&type=script&lang=js\"\nexport * from \"./ComposerAttachment.vue?vue&type=script&lang=js\"\nimport style0 from \"./ComposerAttachment.vue?vue&type=style&index=0&id=269b6340&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"269b6340\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"composer-attachment\",class:{'composer-attachment--with-error' : _vm.attachment.error }},[_c('div',{staticClass:\"attachment-preview\"},[(_vm.attachment.imageBlobURL !== false)?_c('img',{staticClass:\"attachment-preview-image\",attrs:{\"src\":_vm.attachment.imageBlobURL}}):(_vm.attachment.hasPreview)?_c('img',{staticClass:\"attachment-preview-image\",attrs:{\"src\":_vm.previewURL}}):_c('img',{staticClass:\"attachment-preview-image\",attrs:{\"src\":_vm.getIcon}}),_vm._v(\" \"),(_vm.attachment.type === 'cloud')?_c('span',{staticClass:\"cloud-attachment-icon\"},[_c('Cloud',{attrs:{\"size\":20}})],1):(_vm.attachment.type === 'message')?_c('span',[_c('EmailArrowRightIcon')],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"attachment-inner\"},[_c('span',{staticClass:\"new-message-attachment-name\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.attachment.displayName ? _vm.attachment.displayName : _vm.attachment.fileName)+\"\\n\\t\\t\")]),_vm._v(\" \"),(!_vm.attachment.finished)?_c('span',{staticClass:\"attachments-upload-progress\"},[_c('span',{staticClass:\"attachments-upload-progress--bar\",style:(\"width:\" + _vm.attachment.percent + \"%\")})]):(_vm.attachment.sizeString)?_c('span',{staticClass:\"new-message-attachment-size\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.attachment.sizeString)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.onDelete(_vm.attachment)}}},[_c('Close',{attrs:{\"size\":20}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"new-message-attachments\">\n\t\t<div v-if=\"hasNextLine\"\n\t\t\tclass=\"new-message-attachments--counter\"\n\t\t\t:class=\"{ 'new-message-attachments--counter--with-errors': hasAttachmentErrors }\"\n\t\t\t@click=\"isToggle = !isToggle\">\n\t\t\t<span>\n\t\t\t\t{{ n('mail', '{count} attachment', '{count} attachments', attachments.length, { count: attachments.length }) }} ({{ formatBytes(totalSizeOfUpload()) }})\n\t\t\t</span>\n\t\t\t<ChevronUp v-if=\"isToggle\" :size=\"20\" />\n\t\t\t<ChevronDown v-if=\"!isToggle\" :size=\"20\" />\n\t\t</div>\n\t\t<ul class=\"new-message-attachments--list\"\n\t\t\t:class=\"{\n\t\t\t\thide: isToggle,\n\t\t\t\tactive: !isToggle && hasNextLine,\n\t\t\t}\">\n\t\t\t<ComposerAttachment v-for=\"attachment in attachments\"\n\t\t\t\tref=\"attachments\"\n\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t:attachment=\"attachment\"\n\t\t\t\t:uploading=\"uploading\"\n\t\t\t\t@on-delete-attachment=\"onDelete(attachment)\" />\n\t\t</ul>\n\n\t\t<input ref=\"localAttachments\"\n\t\t\ttype=\"file\"\n\t\t\tmultiple\n\t\t\tstyle=\"display: none;\"\n\t\t\t@change=\"onLocalAttachmentSelected\">\n\t\t<FilePicker v-if=\"isAttachementPickerOpen\"\n\t\t\t:name=\"t('mail','Choose a file to add as attachment')\"\n\t\t\t:buttons=\"attachementPickerButtons\"\n\t\t\t:filter-fn=\"filterAttachements\"\n\t\t\t@close=\"()=>isAttachementPickerOpen = false\" />\n\t\t<FilePicker v-if=\"isLinkPickerOpen\"\n\t\t\t:name=\"t('mail','Choose a file to share as a link')\"\n\t\t\t:multiselect=\"false\"\n\t\t\t:buttons=\"linkPickerButtons\"\n\t\t\t:filter-fn=\"filterAttachements\"\n\t\t\t@close=\"()=>isLinkPickerOpen = false\" />\n\t</div>\n</template>\n\n<script>\nimport map from 'lodash/fp/map.js'\nimport trimStart from 'lodash/fp/trimCharsStart.js'\nimport { getRequestToken } from '@nextcloud/auth'\nimport { formatFileSize } from '@nextcloud/files'\nimport prop from 'lodash/fp/prop.js'\nimport { showWarning } from '@nextcloud/dialogs'\nimport { FilePickerVue as FilePicker } from '@nextcloud/dialogs/filepicker.js'\nimport sumBy from 'lodash/fp/sumBy.js'\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\n\nimport Vue from 'vue'\n\nimport logger from '../logger.js'\nimport { getFileData } from '../service/FileService.js'\nimport { shareFile } from '../service/FileSharingService.js'\nimport { uploadLocalAttachment } from '../service/AttachmentService.js'\n\nimport ComposerAttachment from './ComposerAttachment.vue'\n\nimport ChevronDown from 'vue-material-design-icons/ChevronDown.vue'\nimport ChevronUp from 'vue-material-design-icons/ChevronUp.vue'\n\nconst mimes = [\n\t'image/gif',\n\t'image/jpeg',\n\t'image/pjpeg',\n\t'image/png',\n\t'image/webp',\n]\n\nexport default {\n\tname: 'ComposerAttachments',\n\tcomponents: {\n\t\tFilePicker,\n\t\tComposerAttachment,\n\t\tChevronDown,\n\t\tChevronUp,\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tuploadSizeLimit: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\tuploads: {},\n\t\t\t// this need if we want to pass in value only corrected uploaded files\n\t\t\tattachments: [],\n\t\t\tisToggle: false,\n\t\t\thasNextLine: false,\n\t\t\tisAttachementPickerOpen: false,\n\t\t\tisLinkPickerOpen: false,\n\t\t\tattachementPickerButtons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: t('mail', 'Choose'),\n\t\t\t\t\tcallback: this.onAddCloudAttachment,\n\t\t\t\t\ttype: 'primary',\n\t\t\t\t},\n\t\t\t],\n\t\t\tlinkPickerButtons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: t('mail', 'Choose'),\n\t\t\t\t\tcallback: this.onAddCloudAttachmentLink,\n\t\t\t\t\ttype: 'primary',\n\t\t\t\t},\n\t\t\t],\n\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAttachmentErrors() {\n\t\t\treturn this.attachments.some(attachment => attachment.error)\n\t\t},\n\t\tuploadProgress() {\n\t\t\tlet uploaded = 0\n\t\t\tlet total = 0\n\t\t\tfor (const id in this.uploads) {\n\t\t\t\tuploaded += this.uploads[id].uploaded\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn ((uploaded / total) * 100).toFixed(1)\n\t\t},\n\t\ttotal() {\n\t\t\tlet total = 0\n\t\t\tfor (const id in this.uploads) {\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn total\n\t\t},\n\t},\n\twatch: {\n\t\tattachments() {\n\t\t\tthis.$nextTick(function() {\n\t\t\t\tlet prevTop = null\n\t\t\t\tthis.$refs.attachments.some((attachment, i) => {\n\t\t\t\t\tconst top = attachment.$el.getBoundingClientRect().top\n\t\t\t\t\tif (prevTop !== null && prevTop !== top) {\n\t\t\t\t\t\tif (!this.hasNextLine) {\n\t\t\t\t\t\t\tthis.isToggle = true\n\t\t\t\t\t\t\tthis.hasNextLine = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprevTop = top\n\t\t\t\t\t\tif (this.$refs.attachments.length === i + 1) {\n\t\t\t\t\t\t\tthis.hasNextLine = false\n\t\t\t\t\t\t\tthis.isToggle = false\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.on('on-add-local-attachment', this.onAddLocalAttachment)\n\t\tthis.bus.on('on-add-cloud-attachment', this.openAttachementPicker)\n\t\tthis.bus.on('on-add-cloud-attachment-link', this.OpenLinkPicker)\n\t\tthis.bus.on('on-add-message-as-attachment', this.onAddMessageAsAttachment)\n\t\tthis.value.map(attachment => {\n\t\t\tthis.attachments.push({\n\t\t\t\tid: attachment.id,\n\t\t\t\tfileName: attachment.fileName,\n\t\t\t\tdisplayName: trimStart('/', attachment.fileName),\n\t\t\t\ttotal: attachment.size,\n\t\t\t\tfinished: true,\n\t\t\t\tsizeString: this.formatBytes(attachment.size),\n\t\t\t\timageBlobURL: attachment.isImage ? attachment.downloadUrl : attachment.mimeUrl,\n\t\t\t})\n\t\t\treturn attachment\n\t\t})\n\t},\n\tmethods: {\n\t\tfilterAttachements(node) {\n\t\t\tconst downloadShareAttribute = node.attributes['share-attributes'] ? JSON.parse(node.attributes['share-attributes'])?.find((shareAttribute) => shareAttribute.key === 'download') : undefined\n\t\t\tconst downloadPermissions = downloadShareAttribute !== undefined ? downloadShareAttribute.value : true\n\t\t\treturn (node.permissions & OC.PERMISSION_READ) && downloadPermissions\n\t\t},\n\t\topenAttachementPicker() {\n\t\t\tthis.isAttachementPickerOpen = true\n\t\t},\n\t\tOpenLinkPicker() {\n\t\t\tthis.isLinkPickerOpen = true\n\t\t},\n\t\tonAddLocalAttachment() {\n\t\t\tthis.$refs.localAttachments.click()\n\t\t},\n\t\temitNewAttachments(attachments) {\n\t\t\tthis.$emit('input', this.value.concat(attachments))\n\t\t},\n\t\ttotalSizeOfUpload() {\n\t\t\treturn Object.values(this.value).reduce((acc, upload) => {\n\t\t\t\tif (!upload.type === 'local') {\n\t\t\t\t\t// Ignore link shares\n\t\t\t\t\treturn acc\n\t\t\t\t}\n\n\t\t\t\treturn acc + upload.size\n\t\t\t}, 0)\n\t\t},\n\t\tonLocalAttachmentSelected(e) {\n\t\t\tthis.uploading = true\n\t\t\t// BUG - if choose again - progress lost/ move to complete()\n\t\t\tVue.set(this, 'uploads', {})\n\n\t\t\tconst toUpload = sumBy(prop('size'), Object.values(e.target.files))\n\t\t\tconst newTotal = toUpload + this.totalSizeOfUpload()\n\t\t\tlogger.debug('checking upload size limit', {\n\t\t\t\texistingUploads: this.totalSizeOfUpload(),\n\t\t\t\ttoUpload,\n\t\t\t\tlimit: this.uploadSizeLimit,\n\t\t\t\tnewTotal,\n\t\t\t})\n\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\tthis.showAttachmentFileSizeWarning(e.target.files.length)\n\t\t\t\tthis.uploading = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst progress = (id) => (prog, uploaded) => {\n\t\t\t\tthis.uploads[id].uploaded = uploaded\n\t\t\t\tthis.attachments.map((item, i) => {\n\t\t\t\t\tif (item.displayName === id) {\n\t\t\t\t\t\tthis.attachments[i].progress = uploaded\n\t\t\t\t\t\tthis.changeProgress(item, uploaded)\n\t\t\t\t\t}\n\t\t\t\t\treturn item\n\t\t\t\t})\n\n\t\t\t}\n\t\t\t// TODO bug: cancel axios on close or delete attachment\n\t\t\tconst promises = map((file) => {\n\t\t\t\tconst controller = new AbortController()\n\t\t\t\tconst attachment = {\n\t\t\t\t\tfileName: file.name,\n\t\t\t\t\tfileType: file.type,\n\t\t\t\t\timageBlobURL: this.generatePreview(file),\n\t\t\t\t\tdisplayName: trimStart('/', file.name),\n\t\t\t\t\tprogress: null,\n\t\t\t\t\tpercent: 0,\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tfinished: false,\n\t\t\t\t\terror: false,\n\t\t\t\t\thasPreview: false,\n\t\t\t\t\tcontroller,\n\t\t\t\t}\n\t\t\t\tthis.attachments.push(attachment)\n\n\t\t\t\tVue.set(this.uploads, file.name, {\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tuploaded: 0,\n\t\t\t\t})\n\t\t\t\ttry {\n\t\t\t\t\treturn uploadLocalAttachment(file, progress(file.name), controller)\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tthis.attachments.some(attachment => {\n\t\t\t\t\t\t\t\tif (attachment.displayName === file.name && !attachment.error) {\n\t\t\t\t\t\t\t\t\tthis.$set(attachment, 'error', true)\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(({ file, id }) => {\n\t\t\t\t\t\t\tlogger.info('local attachment uploaded', { file, id })\n\n\t\t\t\t\t\t\tattachment.id = id\n\n\t\t\t\t\t\t\tthis.emitNewAttachments([{\n\t\t\t\t\t\t\t\tfileName: file.name,\n\t\t\t\t\t\t\t\tdisplayName: trimStart('/', file.name),\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t\t\t\ttype: 'local',\n\t\t\t\t\t\t\t}])\n\t\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('Could not upload file', { file, error })\n\t\t\t\t}\n\t\t\t}, e.target.files)\n\n\t\t\tconst done = Promise.all(promises)\n\t\t\t\t.catch((error) => logger.error('could not upload all attachments', { error }))\n\t\t\t\t.then(() => (this.uploading = false))\n\n\t\t\tthis.$emit('upload', done)\n\n\t\t\treturn done\n\t\t},\n\t\tasync onAddCloudAttachment(nodes) {\n\t\t\ttry {\n\t\t\t\tconst paths = nodes.map(node => node.path)\n\t\t\t\tthis.cloudAttachement = false\n\t\t\t\t// maybe fiiled front with placeholder loader...?\n\t\t\t\tconst filesFromCloud = await Promise.all(paths.map(getFileData))\n\n\t\t\t\tconst sum = filesFromCloud.reduce((sum, item) => {\n\t\t\t\t\treturn sum + item.size\n\t\t\t\t}, 0)\n\n\t\t\t\tconst newTotal = sum + this.totalSizeOfUpload()\n\n\t\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\t\tthis.showAttachmentFileSizeWarning(paths.length)\n\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.emitNewAttachments(paths.map((name, i) => {\n\t\t\t\t\tconst _cloudFile = {\n\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t\tdisplayName: trimStart('/', name),\n\t\t\t\t\t\ttype: 'cloud',\n\t\t\t\t\t\tsize: filesFromCloud[i].size,\n\n\t\t\t\t\t}\n\t\t\t\t\tconst _toAttachmentData = {\n\t\t\t\t\t\tfinished: true,\n\t\t\t\t\t\timageBlobURL: this.generatePreview(_cloudFile),\n\t\t\t\t\t\ttotal: filesFromCloud[i].size,\n\t\t\t\t\t\tsizeString: this.formatBytes(filesFromCloud[i].size),\n\t\t\t\t\t\thasPreview: filesFromCloud[i]['has-preview'],\n\t\t\t\t\t\t// dont know, may be it will be conflict if cloud & local has equal IDs?\n\t\t\t\t\t\tid: filesFromCloud[i].fileid,\n\t\t\t\t\t\tuploaded: 0,\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.attachments.push(Object.assign(_toAttachmentData, _cloudFile))\n\n\t\t\t\t\treturn _cloudFile\n\t\t\t\t}))\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment', { error })\n\t\t\t}\n\t\t},\n\t\tasync onAddCloudAttachmentLink(nodes) {\n\t\t\ttry {\n\t\t\t\tthis.cloudAttachementLink = false\n\t\t\t\tconst url = await shareFile(nodes[0].path, getRequestToken())\n\n\t\t\t\tthis.appendToBodyAtCursor(`<a href=\"${url}\">${url}</a>`)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment link', { error })\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add a forwarded message as an attachment\n\t\t *\n\t\t * @param {object} data Payload\n\t\t * @param {number} data.id Database id of the message to forward as an attachment\n\t\t * @param {string} data.fileName File name of the attachment\n\t\t */\n\t\tonAddMessageAsAttachment({ id, fileName }) {\n\t\t\tconst attachment = {\n\t\t\t\ttype: 'message',\n\t\t\t\tid,\n\t\t\t\tfileName,\n\t\t\t}\n\t\t\tthis.attachments.push({\n\t\t\t\t...attachment,\n\t\t\t\tfinished: true,\n\t\t\t})\n\t\t\tthis.emitNewAttachments([attachment])\n\t\t},\n\t\tshowAttachmentFileSizeWarning(num) {\n\t\t\tshowWarning(n(\n\t\t\t\t'mail',\n\t\t\t\t'The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.',\n\t\t\t\t'The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.',\n\t\t\t\tnum,\n\t\t\t\t{\n\t\t\t\t\tsize: formatFileSize(this.uploadSizeLimit),\n\t\t\t\t},\n\t\t\t))\n\t\t},\n\t\tonDelete(attachment) {\n\t\t\t// If the attachment is still uploading, abort the upload\n\t\t\tif (!attachment.finished && attachment.controller) {\n\t\t\t\tattachment.controller.abort()\n\t\t\t}\n\n\t\t\tconst val = {\n\t\t\t\tfileName: attachment.fileName,\n\t\t\t\tdisplayName: attachment.displayName,\n\t\t\t\tid: attachment.id,\n\t\t\t\tsize: attachment.total,\n\t\t\t\ttype: attachment.type,\n\t\t\t}\n\n\t\t\tthis.attachments = this.attachments.filter(a => a !== attachment)\n\n\t\t\tthis.$emit(\n\t\t\t\t'input',\n\t\t\t\tthis.value.filter(a => {\n\t\t\t\t\tif (val.type === 'cloud') {\n\t\t\t\t\t\treturn a.fileName !== val.fileName\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn a.id !== val.id\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t)\n\n\t\t\tconst updatedUploads = Object.keys(this.uploads)\n\t\t\t\t.filter(fileName => fileName !== attachment.fileName)\n\t\t\t\t.reduce((acc, fileName) => {\n\t\t\t\t\tacc[fileName] = this.uploads[fileName]\n\t\t\t\t\treturn acc\n\t\t\t\t}, {})\n\n\t\t\tthis.uploads = updatedUploads\n\n\t\t\tthis.$emit('on-delete-attachment', attachment)\n\t\t},\n\t\tappendToBodyAtCursor(toAppend) {\n\t\t\tthis.bus.emit('append-to-body-at-cursor', toAppend)\n\t\t},\n\t\tformatBytes(bytes, decimals = 2) {\n\t\t\tif (bytes === 0) return '0 B'\n\t\t\tconst k = 1024\n\t\t\tconst dm = decimals < 0 ? 0 : decimals\n\t\t\tconst sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\t\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k))\n\t\t\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n\t\t},\n\t\tchangeProgress(item, progress) {\n\t\t\tthis.attachments.map((attachment, i) => {\n\t\t\t\tif (item.fileName === attachment.fileName) {\n\t\t\t\t\tif (!attachment.finished) {\n\t\t\t\t\t\tconst _progress = progress <= attachment.total ? progress : attachment.total\n\t\t\t\t\t\tthis.$set(attachment, 'progress', _progress)\n\t\t\t\t\t\tthis.$set(attachment, 'sizeString', this.formatBytes(_progress))\n\t\t\t\t\t\tthis.$set(attachment, 'percent', (_progress / attachment.total) * 100).toFixed(1)\n\t\t\t\t\t\tif (item.total <= _progress) {\n\t\t\t\t\t\t\tthis.$set(attachment, 'finished', true)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn attachment\n\t\t\t})\n\t\t},\n\t\tgeneratePreview(file) {\n\t\t\tif (this.isImage(file)) {\n\t\t\t\treturn URL.createObjectURL(file)\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisImage(file) {\n\t\t\treturn file.type && mimes.indexOf(file.type) !== -1\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.new-message-attachments {\n\t&--counter {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding: 10px 20px;\n\t\tcursor:pointer;\n\t\tdisplay:flex;\n\t\talign-items: center;\n\n\t\t&--with-errors {\n\t\t\tcolor:red;\n\t\t}\n\t}\n\n\t&--list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\t// 2 and a half attachment height\n\t\toverflow: auto;\n\t\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\t\tpadding: 0 10px;\n\n\t\t&.hide {\n\t\t\toverflow: hidden;\n\t\t\tmax-height:0;\n\t\t\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\t\t}\n\n\t\t&.active {\n\t\t\toverflow: auto;\n\t\t\tmax-height: 287px;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js\"","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n// File originally from https://github.com/nextcloud/spreed/blob/bc22c21cf70a6243e7df7d838d49018c61468050/src/services/filesSharingServices.js\n// Slightly modified for use in Mail\n\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\n\n/**\n * Makes a share link for a given file or directory.\n *\n * @param {string} path The file path from the user's root directory. e.g. `/myfile.txt`\n * @param {string} token The conversation's token\n * @return {string} url share link\n */\nconst shareFile = async function(path, token) {\n\ttry {\n\t\tconst res = await axios.post(generateOcsUrl('apps/files_sharing/api/v1/', 2) + 'shares', {\n\t\t\tshareType: 3, // OC.Share.SHARE_TYPE_LINK,\n\t\t\tpath,\n\t\t\tshareWith: token,\n\t\t})\n\t\treturn res.data.ocs.data.url\n\t} catch (error) {\n\t\tif (\n\t\t\terror.response\n\t\t\t&& error.response.data\n\t\t\t&& error.response.data.ocs\n\t\t\t&& error.response.data.ocs.meta\n\t\t\t&& error.response.data.ocs.meta.message\n\t\t) {\n\t\t\tconsole.error(`Error while sharing file: ${error.response.data.ocs.meta.message || 'Unknown error'}`)\n\t\t\tshowError(error.response.data.ocs.meta.message)\n\t\t\tthrow error\n\t\t} else {\n\t\t\tconsole.error('Error while sharing file: Unknown error')\n\t\t\tshowError(t('mail', 'Error while sharing file'))\n\t\t\tthrow error\n\t\t}\n\t}\n}\n\nexport { shareFile }\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=efab168c&prod&scoped=true&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=efab168c&prod&scoped=true&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ComposerAttachments.vue?vue&type=template&id=efab168c&scoped=true\"\nimport script from \"./ComposerAttachments.vue?vue&type=script&lang=js\"\nexport * from \"./ComposerAttachments.vue?vue&type=script&lang=js\"\nimport style0 from \"./ComposerAttachments.vue?vue&type=style&index=0&id=efab168c&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"efab168c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"new-message-attachments\"},[(_vm.hasNextLine)?_c('div',{staticClass:\"new-message-attachments--counter\",class:{ 'new-message-attachments--counter--with-errors': _vm.hasAttachmentErrors },on:{\"click\":function($event){_vm.isToggle = !_vm.isToggle}}},[_c('span',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.n('mail', '{count} attachment', '{count} attachments', _vm.attachments.length, { count: _vm.attachments.length }))+\" (\"+_vm._s(_vm.formatBytes(_vm.totalSizeOfUpload()))+\")\\n\\t\\t\")]),_vm._v(\" \"),(_vm.isToggle)?_c('ChevronUp',{attrs:{\"size\":20}}):_vm._e(),_vm._v(\" \"),(!_vm.isToggle)?_c('ChevronDown',{attrs:{\"size\":20}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"new-message-attachments--list\",class:{\n\t\t\thide: _vm.isToggle,\n\t\t\tactive: !_vm.isToggle && _vm.hasNextLine,\n\t\t}},_vm._l((_vm.attachments),function(attachment){return _c('ComposerAttachment',{key:attachment.id,ref:\"attachments\",refInFor:true,attrs:{\"attachment\":attachment,\"uploading\":_vm.uploading},on:{\"on-delete-attachment\":function($event){return _vm.onDelete(attachment)}}})}),1),_vm._v(\" \"),_c('input',{ref:\"localAttachments\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.onLocalAttachmentSelected}}),_vm._v(\" \"),(_vm.isAttachementPickerOpen)?_c('FilePicker',{attrs:{\"name\":_vm.t('mail','Choose a file to add as attachment'),\"buttons\":_vm.attachementPickerButtons,\"filter-fn\":_vm.filterAttachements},on:{\"close\":()=>_vm.isAttachementPickerOpen = false}}):_vm._e(),_vm._v(\" \"),(_vm.isLinkPickerOpen)?_c('FilePicker',{attrs:{\"name\":_vm.t('mail','Choose a file to share as a link'),\"multiselect\":false,\"buttons\":_vm.linkPickerButtons,\"filter-fn\":_vm.filterAttachements},on:{\"close\":()=>_vm.isLinkPickerOpen = false}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcDialog',{attrs:{\"id\":\"text-block-picker\",\"name\":_vm.t('mail','Text blocks')},on:{\"closing\":_vm.handleClose}},[_c('p',[_vm._v(_vm._s(_vm.t('mail','Choose a text block to insert at the cursor')))]),_vm._v(\" \"),_vm._l((_vm.getMyTextBlocks()),function(textBlock){return _c('ListItem',{key:textBlock.id,attrs:{\"text-block\":textBlock,\"is-view-mode\":true,\"picked\":textBlock.id === _vm.picked?.id},on:{\"click\":_vm.handleClick}})}),_vm._v(\" \"),_vm._l((_vm.getSharedTextBlocks()),function(textBlock){return _c('ListItem',{key:textBlock.id,attrs:{\"text-block\":textBlock,\"shared\":true,\"is-view-mode\":true,\"picked\":textBlock.id === _vm.picked?.id},on:{\"click\":_vm.handleClick}})}),_vm._v(\" \"),_c('NcButton',{staticClass:\"insert-button\",attrs:{\"disabled\":!_vm.picked},on:{\"click\":function($event){return _vm.$emit('insert', _vm.picked)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconCheck',{attrs:{\"size\":20,\"name\":_vm.t('mail','Insert text block')}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Insert'))+\"\\n\\t\\t\")])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcDialog id=\"text-block-picker\" :name=\"t('mail','Text blocks')\" @closing=\"handleClose\">\n\t\t<p>{{ t('mail','Choose a text block to insert at the cursor') }}</p>\n\t\t<ListItem v-for=\"textBlock in getMyTextBlocks()\"\n\t\t\t:key=\"textBlock.id\"\n\t\t\t:text-block=\"textBlock\"\n\t\t\t:is-view-mode=\"true\"\n\t\t\t:picked=\"textBlock.id === picked?.id\"\n\t\t\t@click=\"handleClick\" />\n\t\t<ListItem v-for=\"textBlock in getSharedTextBlocks()\"\n\t\t\t:key=\"textBlock.id\"\n\t\t\t:text-block=\"textBlock\"\n\t\t\t:shared=\"true\"\n\t\t\t:is-view-mode=\"true\"\n\t\t\t:picked=\"textBlock.id === picked?.id\"\n\t\t\t@click=\"handleClick\" />\n\t\t<NcButton class=\"insert-button\"\n\t\t\t:disabled=\"!picked\"\n\t\t\t@click=\"$emit('insert', picked)\">\n\t\t\t{{ t('mail', 'Insert') }}\n\t\t\t<template #icon>\n\t\t\t\t<IconCheck :size=\"20\" :name=\"t('mail','Insert text block')\" />\n\t\t\t</template>\n\t\t</NcButton>\n\t</NcDialog>\n</template>\n\n<script>\nimport ListItem from './ListItem.vue'\nimport { NcDialog, NcButton } from '@nextcloud/vue'\nimport { mapState } from 'pinia'\nimport IconCheck from 'vue-material-design-icons/Check.vue'\nimport useMainStore from '../../store/mainStore.js'\nexport default {\n\tname: 'TextBlockModal',\n\tcomponents: {\n\t\tListItem,\n\t\tNcDialog,\n\t\tNcButton,\n\t\tIconCheck,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpicked: null,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState(useMainStore, ['getMyTextBlocks', 'getSharedTextBlocks']),\n\t},\n\tmethods: {\n\t\thandleClick(textBlock) {\n\t\t\tthis.picked = textBlock\n\n\t\t},\n\t\thandleClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.insert-button {\n\tjustify-self: end;\n\tmargin-bottom: calc( var(--default-grid-baseline) * 2) ;\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextBlockModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextBlockModal.vue?vue&type=script&lang=js\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextBlockModal.vue?vue&type=style&index=0&id=2fd130f3&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextBlockModal.vue?vue&type=style&index=0&id=2fd130f3&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./TextBlockModal.vue?vue&type=template&id=2fd130f3&scoped=true\"\nimport script from \"./TextBlockModal.vue?vue&type=script&lang=js\"\nexport * from \"./TextBlockModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./TextBlockModal.vue?vue&type=style&index=0&id=2fd130f3&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2fd130f3\",\n  null\n  \n)\n\nexport default component.exports","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div :class=\"isInternal?'ncselect__tag--recipient' :'ncselect__tag--recipient external'\" :title=\"option.email\">\n\t\t<ListItemIcon :no-margin=\"true\"\n\t\t\t:name=\"option.label\"\n\t\t\t:url=\"option.photo\"\n\t\t\t:avatar-size=\"24\" />\n\t\t<Close class=\"delete-recipient\"\n\t\t\t:size=\"20\"\n\t\t\t@click.prevent=\"removeRecipient(option)\" />\n\t</div>\n</template>\n\n<script>\nimport { NcListItemIcon as ListItemIcon } from '@nextcloud/vue'\nimport Close from 'vue-material-design-icons/Close.vue'\nimport { mapStores } from 'pinia'\nimport useMainStore from '../store/mainStore.js'\n\nexport default {\n\tname: 'RecipientListItem',\n\tcomponents: {\n\t\tListItemIcon,\n\t\tClose,\n\t},\n\tprops: {\n\t\toption: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisInternal: true,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapStores(useMainStore),\n\t},\n\tasync mounted() {\n\t\tif (this.mainStore.getPreference('internal-addresses', 'false') === 'true') {\n\t\t\tthis.isInternal = this.mainStore.isInternalAddress(this.option.email)\n\t\t}\n\t},\n\tmethods: {\n\t\tremoveRecipient(option, field) {\n\t\t\tthis.$emit('remove-recipient', option, field)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.external {\n\tbackground-color: var(--color-error) !important;\n\t:deep(.option__lineone){\n\t\tcolor: var(--color-primary-text) !important;\n\t}\n}\n\n.ncselect__tag--recipient {\n\tpadding: 0 ;\n\tborder-radius: 25px;\n\tborder-color: transparent;\n\tbackground-color: var(--color-background-dark);\n\theight: 24px;\n\tmax-width: 100%;\n\tdisplay: flex;\n\n\t& > span.option {\n\t\tmargin-inline-start: 0\n\t}\n}\n\n.delete-recipient {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcursor: pointer;\n\theight: 24px;\n\twidth: 24px;\n\tmin-width: 24px;\n\tmargin-inline-start: 6px;\n\tborder-radius: 50%;\n\tflex-shrink: 0;\n\n\t&:hover {\n\t\tbackground: var(--color-background-darker);\n\t}\n}\n\n.option {\n\tflex-shrink: 1;\n\toverflow: hidden;\n\twidth: unset;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=style&index=0&id=5f9950ff&prod&scoped=true&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=style&index=0&id=5f9950ff&prod&scoped=true&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./RecipientListItem.vue?vue&type=template&id=5f9950ff&scoped=true\"\nimport script from \"./RecipientListItem.vue?vue&type=script&lang=js\"\nexport * from \"./RecipientListItem.vue?vue&type=script&lang=js\"\nimport style0 from \"./RecipientListItem.vue?vue&type=style&index=0&id=5f9950ff&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f9950ff\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:_vm.isInternal?'ncselect__tag--recipient' :'ncselect__tag--recipient external',attrs:{\"title\":_vm.option.email}},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"name\":_vm.option.label,\"url\":_vm.option.photo,\"avatar-size\":24}}),_vm._v(\" \"),_c('Close',{staticClass:\"delete-recipient\",attrs:{\"size\":20},on:{\"click\":function($event){$event.preventDefault();return _vm.removeRecipient(_vm.option)}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div id=\"mailvelope-composer\" />\n</template>\n\n<script>\nimport logger from '../logger.js'\nimport { isPgpgMessage } from '../crypto/pgp.js'\n\nexport default {\n\tname: 'MailvelopeEditor',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tquotedText: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tisReplyOrForward: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teditor: undefined,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\n\t\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\n\n\t\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\n\t\t\tquotedMail: isEncrypted ? quotedMail : undefined,\n\t\t})\n\t},\n\tmethods: {\n\t\tasync pull() {\n\t\t\tconst recipients = this.recipients.map((r) => r.email)\n\t\t\tlogger.info('encrypting message', { recipients })\n\t\t\tconst armored = await this.editor.encrypt(recipients)\n\t\t\tlogger.info('message encryted', { armored })\n\n\t\t\tthis.$emit('input', armored)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#mailvelope-composer {\n\twidth: 100%;\n\theight: 450px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=style&index=0&id=0f14fc25&prod&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=style&index=0&id=0f14fc25&prod&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MailvelopeEditor.vue?vue&type=template&id=0f14fc25&scoped=true\"\nimport script from \"./MailvelopeEditor.vue?vue&type=script&lang=js\"\nexport * from \"./MailvelopeEditor.vue?vue&type=script&lang=js\"\nimport style0 from \"./MailvelopeEditor.vue?vue&type=style&index=0&id=0f14fc25&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f14fc25\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"mailvelope-composer\"}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"message-composer\">\n\t\t<NcReferencePickerModal v-if=\"isPickerAvailable && isPickerOpen\"\n\t\t\tid=\"reference-picker\"\n\t\t\t@submit=\"onPicked\"\n\t\t\t@cancel=\"closePicker\" />\n\t\t<TextBlockModal v-if=\"isTextBlockPickerOpen\" @close=\"isTextBlockPickerOpen = false\" @insert=\"onTextBlockInsert\" />\n\t\t<div class=\"composer-fields composer-fields__from mail-account\">\n\t\t\t<label class=\"from-label\" for=\"from\">\n\t\t\t\t{{ t('mail', 'From') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<NcSelect id=\"from\"\n\t\t\t\t\t:value=\"selectedAlias\"\n\t\t\t\t\t:options=\"aliases\"\n\t\t\t\t\tlabel=\"name\"\n\t\t\t\t\t:get-option-key=\"(option)=>option.selectId\"\n\t\t\t\t\t:searchable=\"false\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Select account')\"\n\t\t\t\t\t:aria-label-combobox=\"t('mail', 'Select account')\"\n\t\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t\t:append-to-body=\"false\"\n\t\t\t\t\t:selectable=\"(option)=>option.selectable\"\n\t\t\t\t\t@option:selected=\"onAliasChange\">\n\t\t\t\t\t<template #option=\"option\">\n\t\t\t\t\t\t{{ formatAliases(option) }}\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template #selected-option=\"option\">\n\t\t\t\t\t\t{{ formatAliases(option) }}\n\t\t\t\t\t</template>\n\t\t\t\t</NcSelect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<div class=\"composer-fields__label\">\n\t\t\t\t<label class=\"to-label\" for=\"to\">\n\t\t\t\t\t{{ t('mail', 'To') }}\n\t\t\t\t</label>\n\t\t\t\t<ButtonVue size=\"small\" type=\"tertiary-no-background\" @click.prevent=\"toggleViewMode\">\n\t\t\t\t\t{{ t('mail','Cc/Bcc') }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<NcSelect id=\"to\"\n\t\t\t\t\tref=\"toLabel\"\n\t\t\t\t\t:value=\"selectTo\"\n\t\t\t\t\t:options=\"selectableRecipients.filter(recipient=>!selectTo.some(to=>to.email===recipient.email))\"\n\t\t\t\t\t:get-option-key=\"(option) => option.email\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\t:aria-label-combobox=\"t('mail', 'Select recipient')\"\n\t\t\t\t\t:filter-by=\"(option, label, search)=>filterOption(option, label, search,'to')\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:close-on-select=\"true\"\n\t\t\t\t\t:clear-search-on-select=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorTo\"\n\t\t\t\t\t:reducible=\"true\"\n\t\t\t\t\t:clearable=\"true\"\n\t\t\t\t\t:no-wrap=\"false\"\n\t\t\t\t\t:append-to-body=\"false\"\n\t\t\t\t\t:create-option=\"createRecipientOption\"\n\t\t\t\t\t:clear-search-on-blur=\"() => clearOnBlur('to')\"\n\t\t\t\t\t@input=\"saveDraftDebounced\"\n\t\t\t\t\t@option:selecting=\"onNewToAddr\"\n\t\t\t\t\t@search:blur=\"onNewToAddr\"\n\t\t\t\t\t@search=\"onAutocomplete($event, 'to')\">\n\t\t\t\t\t<template #search=\"{ events, attributes }\">\n\t\t\t\t\t\t<input :placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\tclass=\"vs__search\"\n\t\t\t\t\t\t\tv-bind=\"attributes\"\n\t\t\t\t\t\t\tv-on=\"events\">\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #selected-option-container=\"{option}\">\n\t\t\t\t\t\t<RecipientListItem :option=\"option\"\n\t\t\t\t\t\t\tclass=\"vs__selected selected\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'to')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"option\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<ListItemIcon :no-margin=\"true\"\n\t\t\t\t\t\t\t\t:name=\"option.label\"\n\t\t\t\t\t\t\t\t:subname=\"getSubnameForRecipient(option)\"\n\t\t\t\t\t\t\t\t:icon-class=\"!option.id ? 'icon-user' : null\"\n\t\t\t\t\t\t\t\t:url=\"option.photo\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</NcSelect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"cc\" class=\"cc-label\">\n\t\t\t\t{{ t('mail', 'Cc') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<NcSelect id=\"cc\"\n\t\t\t\t\tref=\"toLabel\"\n\t\t\t\t\t:value=\"selectCc\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit,'select':true}\"\n\t\t\t\t\t:options=\"selectableRecipients.filter(recipient=>!selectCc.some(cc=>cc.email===recipient.email))\"\n\t\t\t\t\t:get-option-key=\"(option) => option.email\"\n\t\t\t\t\t:no-wrap=\"false\"\n\t\t\t\t\t:filter-by=\"(option, label, search)=>filterOption(option, label, search,'cc')\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\t:close-on-select=\"true\"\n\t\t\t\t\t:clear-search-on-blur=\"() => clearOnBlur('cc')\"\n\t\t\t\t\t:append-to-body=\"false\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t:aria-label-combobox=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t:clear-search-on-select=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorCc\"\n\t\t\t\t\t:reducible=\"true\"\n\t\t\t\t\t:clearable=\"true\"\n\t\t\t\t\t:create-option=\"createRecipientOption\"\n\t\t\t\t\t@input=\"saveDraftDebounced\"\n\t\t\t\t\t@option:selecting=\"onNewCcAddr\"\n\t\t\t\t\t@search:blur=\"onNewCcAddr\"\n\t\t\t\t\t@search=\"onAutocomplete($event, 'cc')\">\n\t\t\t\t\t<template #search=\"{ events, attributes }\">\n\t\t\t\t\t\t<input :placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\tclass=\"vs__search\"\n\t\t\t\t\t\t\tv-bind=\"attributes\"\n\t\t\t\t\t\t\tv-on=\"events\">\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #selected-option-container=\"{option}\">\n\t\t\t\t\t\t<RecipientListItem :option=\"option\"\n\t\t\t\t\t\t\tclass=\"vs__selected\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'cc')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"option\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<ListItemIcon :no-margin=\"true\"\n\t\t\t\t\t\t\t\t:name=\"option.label\"\n\t\t\t\t\t\t\t\t:subname=\"getSubnameForRecipient(option)\"\n\t\t\t\t\t\t\t\t:url=\"option.photo\"\n\t\t\t\t\t\t\t\t:icon-class=\"!option.id ? 'icon-user' : null\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</NcSelect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"showBCC\" class=\"composer-fields\">\n\t\t\t<label for=\"bcc\" class=\"bcc-label\">\n\t\t\t\t{{ t('mail', 'Bcc') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<NcSelect id=\"bcc\"\n\t\t\t\t\tref=\"toLabel\"\n\t\t\t\t\t:value=\"selectBcc\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit,'select':true}\"\n\t\t\t\t\t:no-wrap=\"false\"\n\t\t\t\t\t:filter-by=\"(option, label, search)=>filterOption(option, label, search,'bcc')\"\n\t\t\t\t\t:options=\"selectableRecipients.filter(recipient=>!selectBcc.some(bcc=>bcc.email===recipient.email))\"\n\t\t\t\t\t:get-option-key=\"(option) => option.email\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\t:close-on-select=\"true\"\n\t\t\t\t\t:clear-search-on-blur=\"() => clearOnBlur('bcc')\"\n\t\t\t\t\t:append-to-body=\"false\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t:aria-label-combobox=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t:clear-search-on-select=\"true\"\n\t\t\t\t\t:reset-on-options-change=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorBcc\"\n\t\t\t\t\t:clearable=\"true\"\n\t\t\t\t\t:create-option=\"createRecipientOption\"\n\t\t\t\t\t@input=\"saveDraftDebounced\"\n\t\t\t\t\t@option:selecting=\"onNewBccAddr\"\n\t\t\t\t\t@search:blur=\"onNewBccAddr\"\n\t\t\t\t\t@search=\"onAutocomplete($event, 'bcc')\">\n\t\t\t\t\t<template #search=\"{ events, attributes }\">\n\t\t\t\t\t\t<input :placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\tclass=\"vs__search\"\n\t\t\t\t\t\t\tv-bind=\"attributes\"\n\t\t\t\t\t\t\tdir=\"auto\"\n\t\t\t\t\t\t\tv-on=\"events\">\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #selected-option-container=\"{option}\">\n\t\t\t\t\t\t<RecipientListItem :option=\"option\"\n\t\t\t\t\t\t\tclass=\"vs__selected\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'bcc')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"option\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<ListItemIcon :no-margin=\"true\"\n\t\t\t\t\t\t\t\t:name=\"option.label\"\n\t\t\t\t\t\t\t\t:subname=\"getSubnameForRecipient(option)\"\n\t\t\t\t\t\t\t\t:url=\"option.photo\"\n\t\t\t\t\t\t\t\t:icon-class=\"!option.id ? 'icon-user' : null\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</NcSelect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label for=\"subject\" class=\"subject-label hidden-visually\">\n\t\t\t\t{{ t('mail', 'Subject') }}\n\t\t\t</label>\n\t\t\t<input id=\"subject\"\n\t\t\t\tv-model=\"subjectVal\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"subject\"\n\t\t\t\tclass=\"subject\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\t:placeholder=\"t('mail', 'Subject …')\"\n\t\t\t\t@input=\"saveDraftDebounced\">\n\t\t</div>\n\t\t<div v-if=\"noReply\" class=\"warning noreply-warning\">\n\t\t\t{{ t('mail', 'This message came from a noreply address so your reply will probably not be read.') }}\n\t\t</div>\n\t\t<div v-if=\"wantsSmimeEncrypt && missingSmimeCertificatesForRecipients.length\" class=\"warning noreply-warning\">\n\t\t\t{{\n\t\t\t\tt('mail', 'The following recipients do not have a S/MIME certificate: {recipients}.', {\n\t\t\t\t\trecipients: missingSmimeCertificatesForRecipients.join(', '),\n\t\t\t\t})\n\t\t\t}}\n\t\t</div>\n\t\t<div v-if=\"encrypt && mailvelope.keysMissing.length\" class=\"warning noreply-warning\">\n\t\t\t{{\n\t\t\t\tt('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\t\trecipients: mailvelope.keysMissing.join(', '),\n\t\t\t\t})\n\t\t\t}}\n\t\t</div>\n\t\t<div class=\"composer-fields message-editor\">\n\t\t\t<!--@keypress=\"onBodyKeyPress\"-->\n\t\t\t<TextEditor v-if=\"!encrypt\"\n\t\t\t\tref=\"editor\"\n\t\t\t\t:key=\"editorMode\"\n\t\t\t\t:value=\"bodyVal\"\n\t\t\t\t:html=\"!editorPlainText\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message …')\"\n\t\t\t\t:focus=\"isReply || !isFirstOpen\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t:text-blocks=\"textBlocks\"\n\t\t\t\t@input=\"onEditorInput\"\n\t\t\t\t@ready=\"onEditorReady\"\n\t\t\t\t@mention=\"handleMention\"\n\t\t\t\t@show-toolbar=\"handleShow\" />\n\t\t\t<MailvelopeEditor v-else\n\t\t\t\tref=\"mailvelopeEditor\"\n\t\t\t\t:value=\"bodyVal\"\n\t\t\t\t:recipients=\"allRecipients\"\n\t\t\t\t:quoted-text=\"body\"\n\t\t\t\t:is-reply-or-forward=\"isReply || isForward\"\n\t\t\t\t@input=\"onEditorInput\" />\n\t\t</div>\n\t\t<ComposerAttachments v-model=\"attachments\"\n\t\t\t:bus=\"bus\"\n\t\t\t:upload-size-limit=\"attachmentSizeLimit\"\n\t\t\t@upload=\"$emit('upload-attachment', $event, getMessageData())\" />\n\t\t<div class=\"composer-actions-right composer-actions\">\n\t\t\t<div class=\"composer-actions--primary-actions\">\n\t\t\t\t<p class=\"composer-actions-draft-status\">\n\t\t\t\t\t<span v-if=\"savingDraft\" class=\"draft-status\">{{ t('mail', 'Saving draft …') }}</span>\n\t\t\t\t\t<span v-else-if=\"!canSaveDraft\" class=\"draft-status\">{{ t('mail', 'Error saving draft') }}</span>\n\t\t\t\t\t<span v-else-if=\"draftSaved\" class=\"draft-status\">{{ t('mail', 'Draft saved') }}</span>\n\t\t\t\t</p>\n\t\t\t\t<ButtonVue v-if=\"!savingDraft && !canSaveDraft\"\n\t\t\t\t\tclass=\"button\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t:aria-label=\"t('mail', 'Save draft')\"\n\t\t\t\t\t@click=\"saveDraft\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Download :size=\"20\" :title=\"t('mail', 'Save draft')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue v-if=\"!savingDraft && draftSaved\"\n\t\t\t\t\tclass=\"button\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t:aria-label=\"t('mail', 'Discard & close draft')\"\n\t\t\t\t\t@click=\"$emit('discard-draft')\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Delete :size=\"20\" :title=\"t('mail', 'Discard & close draft')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<div class=\"composer-actions--secondary-actions\">\n\t\t\t\t<ButtonVue v-if=\"!encrypt && editorPlainText\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t:aria-label=\"t('mail', 'Enable formatting')\"\n\t\t\t\t\t@click=\"setEditorModeHtml()\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconFormat :size=\"20\" :title=\"t('mail', 'Enable formatting')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue v-if=\"!encrypt && !editorPlainText\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t:pressed=\"true\"\n\t\t\t\t\t:aria-label=\"t('mail', 'Disable formatting')\"\n\t\t\t\t\t@click=\"setEditorModeText()\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconFormat :size=\"20\" :title=\"t('mail', 'Disable formatting')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ButtonVue>\n\n\t\t\t\t<Actions :open.sync=\"isAddAttachmentsOpen\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Paperclip :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<ActionButton :close-after-click=\"true\" @click=\"onAddLocalAttachment\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconUpload :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Upload attachment')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton :close-after-click=\"true\" @click=\"onAddCloudAttachment\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconFolder :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Add attachment from Files')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton :close-after-click=\"true\" :disabled=\"encrypt\" @click=\"onAddCloudAttachmentLink\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconPublic :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Add share link from Files')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</Actions>\n\n\t\t\t\t<Actions :open.sync=\"isActionsOpen\"\n\t\t\t\t\t@close=\"isMoreActionsOpen = false\">\n\t\t\t\t\t<template v-if=\"!isMoreActionsOpen\">\n\t\t\t\t\t\t<ActionButton v-if=\"isPickerAvailable\" :close-after-click=\"true\" @click=\"openPicker\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconLinkPicker :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Smart picker')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton :close-after-click=\"true\" @click=\"openTextBlockPicker\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<NcIconSvgWrapper :size=\"20\"\n\t\t\t\t\t\t\t\t\t:title=\"t('mail', 'Text blocks')\"\n\t\t\t\t\t\t\t\t\t:svg=\"textBlockSvg\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Text blocks')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton v-if=\"!isScheduledSendingDisabled\"\n\t\t\t\t\t\t\t:close-after-click=\"false\"\n\t\t\t\t\t\t\t@click=\"isMoreActionsOpen=true\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<SendClock :size=\"20\" :title=\"t('mail', 'Send later')\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Send later')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionCheckbox :checked=\"requestMdnVal\"\n\t\t\t\t\t\t\t@check=\"requestMdnVal = true\"\n\t\t\t\t\t\t\t@uncheck=\"requestMdnVal = false\">\n\t\t\t\t\t\t\t{{ t('mail', 'Request a read receipt') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t\t<ActionCheckbox v-if=\"smimeCertificateForCurrentAlias\"\n\t\t\t\t\t\t\t:checked=\"wantsSmimeSign\"\n\t\t\t\t\t\t\t@check=\"smimeSignCheck(true)\"\n\t\t\t\t\t\t\t@uncheck=\"smimeSignCheck(false)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Sign message with S/MIME') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t\t<ActionCheckbox v-if=\"smimeCertificateForCurrentAlias\"\n\t\t\t\t\t\t\t:checked=\"wantsSmimeEncrypt\"\n\t\t\t\t\t\t\t:disabled=\"encrypt\"\n\t\t\t\t\t\t\t@check=\"wantsSmimeEncrypt = true\"\n\t\t\t\t\t\t\t@uncheck=\"wantsSmimeEncrypt = false\">\n\t\t\t\t\t\t\t{{ t('mail', 'Encrypt message with S/MIME') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t\t<ActionCheckbox v-if=\"mailvelope.available\"\n\t\t\t\t\t\t\t:checked=\"encrypt\"\n\t\t\t\t\t\t\t:disabled=\"wantsSmimeEncrypt\"\n\t\t\t\t\t\t\t@change=\"isActionsOpen = false\"\n\t\t\t\t\t\t\t@check=\"encrypt = true\"\n\t\t\t\t\t\t\t@uncheck=\"encrypt = false\">\n\t\t\t\t\t\t\t{{ t('mail', 'Encrypt message with Mailvelope') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-if=\"isMoreActionsOpen\">\n\t\t\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t\t\t@click=\"isMoreActionsOpen=false\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<ChevronLeft :title=\"t('mail', 'Send later')\"\n\t\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t\t{{ t('mail', 'Send later') }}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionRadio :value=\"undefined\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"!sendAtVal\"\n\t\t\t\t\t\t\tclass=\"send-action-radio\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(undefined)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Send now') }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateTomorrowMorning\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtTomorrowMorning\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateTomorrowMorning)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Tomorrow morning') }} - {{ convertToLocalDate(dateTomorrowMorning) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateTomorrowAfternoon\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtTomorrowAfternoon\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateTomorrowAfternoon)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Tomorrow afternoon') }} - {{ convertToLocalDate(dateTomorrowAfternoon) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateMondayMorning\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtMondayMorning\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateMondayMorning)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Monday morning') }} - {{ convertToLocalDate(dateMondayMorning) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio name=\"sendLater\"\n\t\t\t\t\t\t\tclass=\"send-action-radio\"\n\t\t\t\t\t\t\t:checked=\"isSendAtCustom\"\n\t\t\t\t\t\t\t:value=\"customSendTime\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(customSendTime)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Custom date and time') }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionInput v-model=\"selectedDate\"\n\t\t\t\t\t\t\t:is-native-picker=\"true\"\n\t\t\t\t\t\t\t:min=\"dateToday\"\n\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t:first-day-of-week=\"firstDayDatetimePicker\"\n\t\t\t\t\t\t\t:use12h=\"showAmPm\"\n\t\t\t\t\t\t\t:formatter=\"formatter\"\n\t\t\t\t\t\t\t:format=\"'YYYY-MM-DD HH:mm'\"\n\t\t\t\t\t\t\ticon=\"\"\n\t\t\t\t\t\t\t:minute-step=\"5\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(customSendTime)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Enter a date') }}\n\t\t\t\t\t\t</ActionInput>\n\t\t\t\t\t</template>\n\t\t\t\t</Actions>\n\n\t\t\t\t<ButtonVue :disabled=\"!canSend || sending\"\n\t\t\t\t\tnative-type=\"submit\"\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t:aria-label=\"submitButtonTitle\"\n\t\t\t\t\t@click=\"onSend\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Send :title=\"submitButtonTitle\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ submitButtonTitle }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport debounce from 'lodash/fp/debounce.js'\nimport uniqBy from 'lodash/fp/uniqBy.js'\nimport trimStart from 'lodash/fp/trimCharsStart.js'\nimport Autosize from 'vue-autosize'\nimport debouncePromise from 'debounce-promise'\n\nimport { NcActions as Actions, NcActionButton as ActionButton, NcActionCheckbox as ActionCheckbox, NcActionInput as ActionInput, NcActionRadio as ActionRadio, NcButton as ButtonVue, NcSelect, NcListItemIcon as ListItemIcon, NcIconSvgWrapper } from '@nextcloud/vue'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft.vue'\nimport Delete from 'vue-material-design-icons/DeleteOutline.vue'\nimport ComposerAttachments from './ComposerAttachments.vue'\nimport TextBlockModal from './textBlocks/TextBlockModal.vue'\nimport Download from 'vue-material-design-icons/DownloadOutline.vue'\nimport IconUpload from 'vue-material-design-icons/UploadOutline.vue'\nimport IconFolder from 'vue-material-design-icons/FolderOutline.vue'\nimport IconPublic from 'vue-material-design-icons/Link.vue'\nimport IconLinkPicker from 'vue-material-design-icons/ShapeOutline.vue'\nimport RecipientListItem from './RecipientListItem.vue'\nimport Paperclip from 'vue-material-design-icons/Paperclip.vue'\nimport IconFormat from 'vue-material-design-icons/FormatSize.vue'\nimport { showError, showWarning } from '@nextcloud/dialogs'\nimport { getCanonicalLocale, getFirstDay, getLocale, translate as t } from '@nextcloud/l10n'\nimport Vue from 'vue'\nimport mitt from 'mitt'\nimport textBlockSvg from './../../img/text_snippet.svg'\n\nimport { findRecipient } from '../service/AutocompleteService.js'\nimport { detect, html, toHtml, toPlain } from '../util/text.js'\nimport logger from '../logger.js'\nimport TextEditor from './TextEditor.vue'\nimport { buildReplyBody } from '../ReplyBuilder.js'\nimport MailvelopeEditor from './MailvelopeEditor.vue'\nimport { getMailvelope } from '../crypto/mailvelope.js'\nimport { isPgpgMessage } from '../crypto/pgp.js'\n\nimport { NcReferencePickerModal } from '@nextcloud/vue/components/NcRichText'\n\nimport Send from 'vue-material-design-icons/SendOutline.vue'\nimport SendClock from 'vue-material-design-icons/SendClockOutline.vue'\nimport moment from '@nextcloud/moment'\nimport { TRIGGER_CHANGE_ALIAS, TRIGGER_EDITOR_READY } from '../ckeditor/signature/InsertSignatureCommand.js'\nimport { EDITOR_MODE_HTML, EDITOR_MODE_TEXT } from '../store/constants.js'\nimport useMainStore from '../store/mainStore.js'\nimport { mapStores, mapState } from 'pinia'\nimport { savePreference } from '../service/PreferenceService.js'\n\nconst debouncedSearch = debouncePromise(findRecipient, 500)\n\nconst NO_ALIAS_SET = -1\n\nVue.use(Autosize)\n\nexport default {\n\tname: 'Composer',\n\tcomponents: {\n\t\tMailvelopeEditor,\n\t\tActions,\n\t\tActionButton,\n\t\tActionCheckbox,\n\t\tActionInput,\n\t\tActionRadio,\n\t\tButtonVue,\n\t\tComposerAttachments,\n\t\tTextBlockModal,\n\t\tChevronLeft,\n\t\tDelete,\n\t\tDownload,\n\t\tIconUpload,\n\t\tIconFolder,\n\t\tIconPublic,\n\t\tIconLinkPicker,\n\t\tNcSelect,\n\t\tNcIconSvgWrapper,\n\t\tPaperclip,\n\t\tTextEditor,\n\t\tListItemIcon,\n\t\tRecipientListItem,\n\t\tSend,\n\t\tSendClock,\n\t\tIconFormat,\n\t\tNcReferencePickerModal,\n\t},\n\tprops: {\n\t\tfromAccount: {\n\t\t\ttype: Number,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tfromAlias: {\n\t\t\ttype: Number,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tto: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tbcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsubject: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbody: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => html(''),\n\t\t},\n\t\teditorBody: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tinReplyToMessageId: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\treplyTo: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardFrom: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardedMessages: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsmartReply: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tsendAt: {\n\t\t\ttype: Number,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tattachmentsData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\terror: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tcanSaveDraft: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tuploadingAttachments: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsavingDraft: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdraftSaved: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsmimeSign: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsmimeEncrypt: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisFirstOpen: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\trequestMdn: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\taccounts: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\t// Set default custom date time picker value to now + 1 hour\n\t\tconst selectedDate = new Date()\n\t\tselectedDate.setHours(selectedDate.getHours() + 1)\n\n\t\treturn {\n\t\t\tsending: false,\n\t\t\ttextBlockSvg,\n\t\t\tshowCC: this.cc.length > 0,\n\t\t\tshowBCC: this.bcc.length > 0,\n\t\t\tselectedAlias: NO_ALIAS_SET, // Fixed in `beforeMount`\n\t\t\tautocompleteRecipients: this.to.concat(this.cc).concat(this.bcc),\n\t\t\tnewRecipients: [],\n\t\t\tsubjectVal: this.subject,\n\t\t\tbodyVal: this.editorBody,\n\t\t\tattachments: this.attachmentsData,\n\t\t\tnoReply: this.to.some((to) => to.email?.startsWith('noreply@') || to.email?.startsWith('no-reply@')),\n\t\t\tsaveDraftDebounced: debounce(5 * 1000, this.saveDraft),\n\t\t\tselectTo: this.to,\n\t\t\tselectCc: this.cc,\n\t\t\tselectBcc: this.bcc,\n\t\t\tbus: mitt(),\n\t\t\tencrypt: false,\n\t\t\tmailvelope: {\n\t\t\t\tavailable: false,\n\t\t\t\tkeyRing: undefined,\n\t\t\t\tkeysMissing: [],\n\t\t\t},\n\t\t\teditorMode: (this.body?.format !== 'html') ? EDITOR_MODE_TEXT : EDITOR_MODE_HTML,\n\t\t\trequestMdnVal: this.requestMdn,\n\t\t\tchangeSignature: false,\n\t\t\tloadingIndicatorTo: false,\n\t\t\tloadingIndicatorCc: false,\n\t\t\tloadingIndicatorBcc: false,\n\t\t\tisAddAttachmentsOpen: false,\n\t\t\tisActionsOpen: false,\n\t\t\tisMoreActionsOpen: false,\n\t\t\tselectedDate,\n\t\t\tsendAtVal: this.sendAt,\n\t\t\tfirstDayDatetimePicker: getFirstDay() === 0 ? 7 : getFirstDay(),\n\t\t\tformatter: {\n\t\t\t\tstringify: (date) => {\n\t\t\t\t\treturn date ? moment(date).format('LLL') : ''\n\t\t\t\t},\n\t\t\t\tparse: (value) => {\n\t\t\t\t\treturn value ? moment(value, 'LLL').toDate() : null\n\t\t\t\t},\n\t\t\t},\n\t\t\tautoLimit: true,\n\t\t\twantsSmimeSign: this.smimeSign,\n\t\t\twantsSmimeEncrypt: this.smimeEncrypt,\n\t\t\tisPickerOpen: false,\n\t\t\tisTextBlockPickerOpen: false,\n\t\t\trecipientSearchTerms: {},\n\t\t\tsmimeSignAliases: [],\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapStores(useMainStore),\n\t\t...mapState(useMainStore, ['isScheduledSendingDisabled']),\n\t\tisPickerAvailable() {\n\t\t\treturn parseInt(this.mainStore.getNcVersion) >= 26\n\t\t},\n\t\taliases() {\n\t\t\tlet cnt = 0\n\t\t\tconst accounts = this.accounts.filter((a) => !a.isUnified)\n\t\t\tconst aliases = accounts.flatMap((account) => [\n\t\t\t\t{\n\t\t\t\t\tid: account.id,\n\t\t\t\t\taliasId: null,\n\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\tsignature: account.signature,\n\t\t\t\t\tname: account.name,\n\t\t\t\t\temailAddress: account.emailAddress,\n\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t\tsmimeCertificateId: account.smimeCertificateId,\n\t\t\t\t\tselectable: account.connectionStatus,\n\t\t\t\t},\n\t\t\t\taccount.aliases.map((alias) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: account.id,\n\t\t\t\t\t\taliasId: alias.id,\n\t\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\t\tsignature: alias.signature,\n\t\t\t\t\t\tname: alias.name,\n\t\t\t\t\t\temailAddress: alias.alias,\n\t\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t\t\tsmimeCertificateId: alias.smimeCertificateId,\n\t\t\t\t\t\tselectable: account.connectionStatus,\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t])\n\t\t\treturn aliases.flat()\n\t\t},\n\t\tallRecipients() {\n\t\t\treturn this.selectTo.concat(this.selectCc).concat(this.selectBcc)\n\t\t},\n\t\tdateToday() {\n\t\t\treturn new Date(new Date().setDate(new Date().getDate()))\n\t\t},\n\t\tattachmentSizeLimit() {\n\t\t\treturn this.mainStore.getPreference('attachment-size-limit')\n\t\t},\n\t\tselectableRecipients() {\n\t\t\treturn uniqBy('email')(this.newRecipients\n\t\t\t\t.concat(this.autocompleteRecipients)\n\t\t\t\t.map((recipient) => ({ ...recipient, label: recipient.label || recipient.email })))\n\t\t},\n\t\tisForward() {\n\t\t\treturn this.forwardFrom !== undefined\n\t\t},\n\t\tisReply() {\n\t\t\treturn this.replyTo !== undefined\n\t\t},\n\t\tcanSend() {\n\t\t\tif (this.wantsSmimeEncrypt && (!this.smimeCertificateForCurrentAlias || this.missingSmimeCertificatesForRecipients.length)) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (this.encrypt && this.mailvelope.keysMissing.length) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selectTo.length > 0 || this.selectCc.length > 0 || this.selectBcc.length > 0\n\t\t},\n\t\teditorPlainText() {\n\t\t\treturn this.editorMode === EDITOR_MODE_TEXT\n\t\t},\n\t\tsubmitButtonTitle() {\n\t\t\tif (this.wantsSmimeEncrypt) {\n\t\t\t\tif (this.sendAtVal) {\n\t\t\t\t\treturn t('mail', 'Encrypt with S/MIME and send later') + ` ${this.convertToLocalDate(this.sendAtVal)}`\n\t\t\t\t}\n\t\t\t\treturn t('mail', 'Encrypt with S/MIME and send')\n\t\t\t}\n\n\t\t\tif (this.mailvelope.available && this.encrypt) {\n\t\t\t\tif (this.sendAtVal) {\n\t\t\t\t\treturn t('mail', 'Encrypt with Mailvelope and send later') + ` ${this.convertToLocalDate(this.sendAtVal)}`\n\t\t\t\t}\n\t\t\t\treturn t('mail', 'Encrypt with Mailvelope and send')\n\t\t\t}\n\n\t\t\tif (this.sendAtVal) {\n\t\t\t\treturn t('mail', 'Send later') + ` ${this.convertToLocalDate(this.sendAtVal)}`\n\t\t\t}\n\t\t\treturn t('mail', 'Send')\n\t\t},\n\t\tdateTomorrowMorning() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setTime(today.getTime() + 24 * 60 * 60 * 1000)\n\t\t\treturn today.setHours(9, 0, 0, 0)\n\n\t\t},\n\t\tdateTomorrowAfternoon() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setTime(today.getTime() + 24 * 60 * 60 * 1000)\n\t\t\treturn today.setHours(14, 0, 0, 0)\n\t\t},\n\t\tdateMondayMorning() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setHours(9, 0, 0, 0)\n\t\t\treturn today.setDate(today.getDate() + (7 - today.getDay()) % 7 + 1)\n\t\t},\n\t\tcustomSendTime() {\n\t\t\treturn new Date(this.selectedDate).getTime()\n\t\t},\n\t\tshowAmPm() {\n\t\t\tconst localeData = moment().locale(getLocale()).localeData()\n\t\t\tconst timeFormat = localeData.longDateFormat('LT').toLowerCase()\n\n\t\t\treturn timeFormat.indexOf('a') !== -1\n\t\t},\n\t\tisSendAtTomorrowMorning() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateTomorrowMorning / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtTomorrowAfternoon() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateTomorrowAfternoon / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtMondayMorning() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateMondayMorning / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtCustom() {\n\t\t\tif (this.sendAtVal && !this.isSendAtTomorrowMorning && !this.isSendAtTomorrowAfternoon && !this.isSendAtMondayMorning) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * The S/MIME certificate object of the current alias/account.\n\t\t *\n\t\t * @return {object|undefined} S/MIME certificate of current account or alias if one is selected\n\t\t */\n\t\tsmimeCertificateForCurrentAlias() {\n\t\t\tif (this.selectedAlias === NO_ALIAS_SET) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn this.smimeCertificateForAlias(this.selectedAlias)\n\t\t},\n\n\t\t/**\n\t\t * Whether the outgoing message should be signed with S/MIME.\n\t\t *\n\t\t * @return {boolean} True if the message should be signed\n\t\t */\n\t\tshouldSmimeSign() {\n\t\t\treturn this.wantsSmimeSign && !!this.smimeCertificateForCurrentAlias\n\t\t},\n\n\t\t/**\n\t\t * Whether the outgoing message should be encrypted with S/MIME.\n\t\t *\n\t\t * @return {boolean} True if the message should be encrypted\n\t\t */\n\t\tshouldSmimeEncrypt() {\n\t\t\treturn this.wantsSmimeEncrypt && !!this.smimeCertificateForCurrentAlias && this.missingSmimeCertificatesForRecipients.length === 0\n\t\t},\n\n\t\t/**\n\t\t * Return a list of recipients without a matching S/MIME certificate.\n\t\t *\n\t\t * @return {Array} Recipients without matching certificate\n\t\t */\n\t\tmissingSmimeCertificatesForRecipients() {\n\t\t\tconst missingCertificates = []\n\n\t\t\tthis.allRecipients.forEach((recipient) => {\n\t\t\t\tconst recipientCertificate = this.mainStore.getSmimeCertificateByEmail(recipient.email)\n\t\t\t\tif (!recipientCertificate) {\n\t\t\t\t\tmissingCertificates.push(recipient.email)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn missingCertificates\n\t\t},\n\n\t\ttextBlocks() {\n\t\t\treturn this.mainStore.getSharedTextBlocks()?.map(textBlock => ({ title: textBlock.title, content: textBlock.content }))\n\t\t\t\t.concat(this.mainStore.getMyTextBlocks().map(textBlock => ({ title: textBlock.title, content: textBlock.content })))\n\t\t},\n\t},\n\twatch: {\n\t\t'$route.params.threadId'() {\n\t\t\tthis.reset()\n\t\t},\n\t\tallRecipients() {\n\t\t\tthis.checkRecipientsKeys()\n\t\t},\n\t\taliases(newAliases) {\n\t\t\tconsole.debug('aliases changed')\n\t\t\tif (this.selectedAlias === NO_ALIAS_SET) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst newAlias = newAliases.find(alias => alias.id === this.selectedAlias.id && alias.aliasId === this.selectedAlias.aliasId)\n\t\t\tif (newAlias === undefined) {\n\t\t\t\t// selected alias does not exist anymore.\n\t\t\t\tthis.onAliasChange(newAliases[0])\n\t\t\t} else {\n\t\t\t\t// update the selected alias\n\t\t\t\tthis.onAliasChange(newAlias)\n\t\t\t}\n\t\t},\n\t\tselectTo(val) {\n\t\t\tthis.$emit('update:to', val)\n\t\t},\n\t\tselectCc(val) {\n\t\t\tthis.$emit('update:cc', val)\n\t\t},\n\t\tselectBcc(val) {\n\t\t\tthis.$emit('update:bcc', val)\n\t\t},\n\t\tsubjectVal(val) {\n\t\t\tthis.$emit('update:subject', val)\n\t\t},\n\t\tbodyVal(val) {\n\t\t\tthis.$emit('update:editor-body', val)\n\t\t},\n\t\tattachments(val) {\n\t\t\tthis.$emit('update:attachments-data', val)\n\t\t},\n\t\tsendAtVal(val) {\n\t\t\tthis.$emit('update:send-at', val)\n\t\t},\n\t\twantsSmimeSign(val) {\n\t\t\tthis.$emit('update:smime-sign', val)\n\t\t},\n\t\twantsSmimeEncrypt(val) {\n\t\t\tthis.$emit('update:smime-encrypt', val)\n\t\t},\n\t\trequestMdnVal(val) {\n\t\t\tthis.$emit('update:request-mdn', val)\n\t\t},\n\t\tselectedAlias: {\n\t\t\thandler() {\n\t\t\t\tconst aliasEmailAddress = this.selectedAlias.emailAddress\n\t\t\t\tthis.wantsSmimeSign = this.smimeSignAliases.indexOf(aliasEmailAddress) !== -1\n\t\t\t},\n\t\t\timmediate: true,\n\t\t},\n\t},\n\tasync beforeMount() {\n\t\tthis.setAlias()\n\t\tthis.initBody()\n\t\tawait this.onMailvelopeLoaded(await getMailvelope())\n\t},\n\tmounted() {\n\t\tif (!this.isReply && this.isFirstOpen) {\n\t\t\tthis.$nextTick(() => this.$refs.toLabel.$el.focus())\n\t\t}\n\n\t\t// Add attachments in case of forward\n\t\tif (this.forwardFrom?.attachments !== undefined) {\n\t\t\tthis.forwardFrom.attachments.forEach(att => {\n\t\t\t\tthis.attachments.push({\n\t\t\t\t\tfileName: att.fileName,\n\t\t\t\t\tdisplayName: trimStart('/', att.fileName),\n\t\t\t\t\tid: att.id,\n\t\t\t\t\tmessageId: this.forwardFrom.databaseId,\n\t\t\t\t\ttype: 'message-attachment',\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\t// Add messages forwarded as attachments\n\t\tfor (const id of this.forwardedMessages) {\n\t\t\tconst env = this.mainStore.getEnvelope(id)\n\t\t\tif (!env) {\n\t\t\t\t// TODO: also happens when the composer page is reloaded\n\t\t\t\tshowError(t('mail', 'Message {id} could not be found', {\n\t\t\t\t\tid,\n\t\t\t\t}))\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tthis.bus.emit('on-add-message-as-attachment', {\n\t\t\t\tid,\n\t\t\t\tfileName: env.subject + '.eml',\n\t\t\t})\n\t\t}\n\n\t\t// Set custom date and time picker value if initialized with custom send at value\n\t\tif (this.sendAt && this.isSendAtCustom) {\n\t\t\tthis.selectedDate = new Date(this.sendAt)\n\t\t}\n\n\t\tthis.smimeSignAliases = this.mainStore.getPreference('smime-sign-aliases', [])\n\t\tif (!this.mainStore.areTextBlocksFetched) {\n\t\t\tthis.mainStore.fetchSharedTextBlocks()\n\t\t\tthis.mainStore.fetchMyTextBlocks()\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('mailvelope', this.onMailvelopeLoaded)\n\t},\n\tmethods: {\n\t\tclearOnBlur(event) {\n\t\t\tif (this.recipientSearchTerms[event]) {\n\t\t\t\treturn this.recipientSearchTerms[event].includes('@')\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\thandleShow(event) {\n\t\t\tthis.$emit('show-toolbar', event)\n\t\t},\n\t\topenPicker() {\n\t\t\tthis.isPickerOpen = true\n\t\t},\n\t\topenTextBlockPicker() {\n\t\t\tthis.isTextBlockPickerOpen = true\n\t\t},\n\t\tclosePicker() {\n\t\t\tthis.isPickerOpen = false\n\t\t},\n\t\tfilterOption(option, label, search, list) {\n\t\t\tlet select = []\n\t\t\tif (list === 'to') {\n\t\t\t\tselect = this.selectTo\n\t\t\t} else if (list === 'cc') {\n\t\t\t\tselect = this.selectCc\n\n\t\t\t} else if (list === 'bcc') {\n\t\t\t\tselect = this.selectBcc\n\t\t\t}\n\n\t\t\treturn (label || '').toLocaleLowerCase().indexOf(search.toLocaleLowerCase()) > -1 && !select.some((item) => item.email === option.email)\n\t\t},\n\t\tsetAlias() {\n\t\t\tconst previous = this.selectedAlias\n\t\t\tif (this.fromAccount && this.fromAlias) {\n\t\t\t\tthis.selectedAlias = this.aliases.find((alias) => {\n\t\t\t\t\treturn alias.id === this.fromAccount && alias.aliasId === this.fromAlias\n\t\t\t\t})\n\t\t\t} else if (this.fromAccount) {\n\t\t\t\t// Default alias of account: aliasId === null\n\t\t\t\tthis.selectedAlias = this.aliases.find((alias) => {\n\t\t\t\t\treturn alias.id === this.fromAccount && !alias.aliasId\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconst currentAccountId = this.mainStore.getMailbox(this.$route.params.mailboxId)?.accountId\n\t\t\t\tif (currentAccountId) {\n\t\t\t\t\tthis.selectedAlias = this.aliases.find((alias) => {\n\t\t\t\t\t\treturn alias.id === currentAccountId\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.selectedAlias = this.aliases[0]\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Only overwrite editormode if body is empty\n\t\t\tif (previous === NO_ALIAS_SET && (!this.body || this.body.value === '')) {\n\t\t\t\tthis.editorMode = this.selectedAlias.editorMode\n\t\t\t}\n\t\t},\n\t\tasync checkRecipientsKeys() {\n\t\t\tif (!this.encrypt || !this.mailvelope.available) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst recipients = this.allRecipients.map((r) => r.email)\n\t\t\tconst keysValid = await this.mailvelope.keyRing.validKeyForAddress(recipients)\n\t\t\tlogger.debug('recipients keys validated', { recipients, keysValid })\n\t\t\tthis.mailvelope.keysMissing = recipients.filter((r) => keysValid[r] === false)\n\t\t},\n\t\tinitBody() {\n\t\t\t/** @member {Text} body */\n\t\t\tlet body\n\t\t\tif (this.replyTo && this.isFirstOpen) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.replyTo.from[0],\n\t\t\t\t\tthis.replyTo.dateInt,\n\t\t\t\t\tthis.mainStore.getPreference('reply-mode', 'top') === 'top',\n\t\t\t\t).value\n\t\t\t} else if (this.forwardFrom && this.isFirstOpen) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.forwardFrom.from[0],\n\t\t\t\t\tthis.forwardFrom.dateInt,\n\t\t\t\t\tthis.mainStore.getPreference('reply-mode', 'top') === 'top',\n\t\t\t\t).value\n\t\t\t} else {\n\t\t\t\tbody = this.bodyVal\n\t\t\t}\n\t\t\tthis.bodyVal = html(body).value\n\t\t},\n\t\tgetMessageData() {\n\t\t\tconst data = {\n\t\t\t\t// TODO: Rename account to accountId\n\t\t\t\taccount: this.selectedAlias.id,\n\t\t\t\taccountId: this.selectedAlias.id,\n\t\t\t\taliasId: this.selectedAlias.aliasId,\n\t\t\t\tto: this.selectTo,\n\t\t\t\tcc: this.selectCc,\n\t\t\t\tbcc: this.selectBcc,\n\t\t\t\tsubject: this.subjectVal,\n\t\t\t\tattachments: this.attachments,\n\t\t\t\tinReplyToMessageId: this.inReplyToMessageId ?? (this.replyTo ? this.replyTo.messageId : undefined),\n\t\t\t\tisHtml: !this.encrypt && !this.editorPlainText,\n\t\t\t\trequestMdn: this.requestMdnVal,\n\t\t\t\tsendAt: this.sendAtVal ? Math.floor(this.sendAtVal / 1000) : undefined,\n\t\t\t\tsmimeSign: this.shouldSmimeSign,\n\t\t\t\tsmimeEncrypt: this.shouldSmimeEncrypt,\n\t\t\t\tsmimeCertificateId: this.smimeCertificateForCurrentAlias?.id,\n\t\t\t\tisPgpMime: this.encrypt,\n\t\t\t}\n\n\t\t\tif (data.isHtml) {\n\t\t\t\tdata.bodyHtml = this.bodyVal\n\t\t\t} else {\n\t\t\t\tdata.bodyPlain = toPlain(html(this.bodyVal)).value\n\t\t\t}\n\n\t\t\treturn data\n\t\t},\n\t\tsaveDraft() {\n\t\t\tconst draftData = this.getMessageData()\n\t\t\tif (draftData.subject === ''\n\t\t\t\t&& draftData.body?.value === ''\n\t\t\t\t&& draftData.cc.length === 0\n\t\t\t\t&& draftData.bcc.length === 0\n\t\t\t\t&& draftData.to.length === 0\n\t\t\t\t&& draftData.sendAt === undefined) {\n\t\t\t\t// this might happen after a call to reset()\n\t\t\t\t// where the text input gets reset as well\n\t\t\t\t// and fires an input event\n\t\t\t\tlogger.debug('Nothing substantial to save, ignoring draft save')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.$emit('draft', draftData)\n\t\t},\n\t\tinsertSignature() {\n\t\t\tlet trigger\n\n\t\t\tif (this.changeSignature) {\n\t\t\t\ttrigger = TRIGGER_CHANGE_ALIAS\n\t\t\t} else {\n\t\t\t\ttrigger = TRIGGER_EDITOR_READY\n\t\t\t}\n\n\t\t\tthis.$refs.editor.editorExecute('insertSignature',\n\t\t\t\ttrigger,\n\t\t\t\ttoHtml(detect(this.selectedAlias.signature)).value,\n\t\t\t\tthis.selectedAlias.signatureAboveQuote,\n\t\t\t)\n\n\t\t\tthis.changeSignature = false\n\t\t},\n\t\tonPicked(content) {\n\t\t\tthis.closePicker()\n\t\t\tthis.bus.emit('append-to-body-at-cursor', content)\n\t\t},\n\t\tonTextBlockInsert(content) {\n\t\t\tthis.isTextBlockPickerOpen = false\n\t\t\tthis.bus.emit('insert-text-block', content)\n\t\t},\n\t\tonEditorInput(text) {\n\t\t\tthis.bodyVal = text\n\t\t\tthis.saveDraftDebounced()\n\t\t},\n\t\tonEditorReady(editor) {\n\t\t\tthis.bodyVal = editor.getData()\n\t\t\tthis.insertSignature()\n\t\t\tif (this.smartReply) {\n\t\t\t\tthis.bus.emit('append-to-body-at-cursor', this.smartReply)\n\t\t\t}\n\t\t},\n\t\tonChangeSendLater(value) {\n\t\t\tthis.sendAtVal = value ? Number.parseInt(value, 10) : undefined\n\t\t},\n\t\tconvertToLocalDate(timestamp) {\n\t\t\tconst options = {\n\t\t\t\tmonth: 'short',\n\t\t\t\tday: 'numeric',\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t}\n\t\t\treturn new Date(timestamp).toLocaleString(getCanonicalLocale(), options)\n\t\t},\n\t\tonAliasChange(alias) {\n\t\t\tlogger.debug('changed alias', { alias })\n\t\t\tthis.selectedAlias = alias\n\t\t\tthis.changeSignature = true\n\n\t\t\tthis.$emit('update:from-account', alias.id)\n\t\t\tif (alias.aliasId) {\n\t\t\t\tthis.$emit('update:from-alias', alias.aliasId)\n\t\t\t}\n\n\t\t\tif (this.wantsSmimeSign || this.wantsSmimeEncrypt) {\n\t\t\t\tif (!this.smimeCertificateForAlias(alias)) {\n\t\t\t\t\tthis.wantsSmimeSign = false\n\t\t\t\t\tthis.wantsSmimeEncrypt = false\n\t\t\t\t\tshowWarning(t('mail', 'Sign or Encrypt with S/MIME was selected, but we don\\'t have a certificate for the selected alias. The message will not be signed or encrypted.'))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Alias change may change the editor mode as well.\n\t\t\t *\n\t\t\t * As editorMode is the key for the TextEditor component a change will destroy the current instance\n\t\t\t * and the signature for the alias is inserted via onEditorReady event.\n\t\t\t *\n\t\t\t * Otherwise (when editorMode is the same) call insertSignature directly.\n\t\t\t */\n\t\t\tif (this.editorMode === EDITOR_MODE_TEXT && alias.editorMode === EDITOR_MODE_HTML) {\n\t\t\t\tthis.editorMode = EDITOR_MODE_HTML\n\t\t\t} else {\n\t\t\t\tthis.insertSignature()\n\t\t\t}\n\t\t},\n\t\tonAddLocalAttachment() {\n\t\t\tthis.bus.emit('on-add-local-attachment')\n\t\t\tthis.saveDraftDebounced()\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tthis.bus.emit('on-add-cloud-attachment')\n\t\t\tthis.saveDraftDebounced()\n\t\t},\n\t\tonAddCloudAttachmentLink() {\n\t\t\tthis.bus.emit('on-add-cloud-attachment-link')\n\t\t},\n\t\tonAutocomplete(term, addressType) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.loadingIndicatorTo = addressType === 'to'\n\t\t\tthis.loadingIndicatorCc = addressType === 'cc'\n\t\t\tthis.loadingIndicatorBcc = addressType === 'bcc'\n\t\t\tthis.recipientSearchTerms[addressType] = term\n\n\t\t\t// Autocomplete from own identifies (useful for testing)\n\t\t\tconst accounts = this.accounts.filter((a) => !a.isUnified)\n\t\t\tconst selfRecipients = accounts\n\t\t\t\t.filter(\n\t\t\t\t\taccount => account.emailAddress.toLowerCase().indexOf(term.toLowerCase()) !== -1\n\t\t\t\t\t|| account.name.toLowerCase().indexOf(term.toLowerCase()) !== -1,\n\t\t\t\t)\n\t\t\t\t.map(account => ({\n\t\t\t\t\temail: account.emailAddress,\n\t\t\t\t\tlabel: account.name,\n\t\t\t\t}))\n\t\t\tthis.autocompleteRecipients = uniqBy('email')(this.autocompleteRecipients.concat(selfRecipients))\n\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tif (addressType === 'to') {\n\t\t\t\t\tthis.loadingIndicatorTo = false\n\t\t\t\t} else if (addressType === 'cc') {\n\t\t\t\t\tthis.loadingIndicatorCc = false\n\t\t\t\t} else if (addressType === 'bcc') {\n\t\t\t\t\tthis.loadingIndicatorBcc = false\n\t\t\t\t}\n\n\t\t\t\t// Search results might not have labels\n\t\t\t\tfor (const result of results) {\n\t\t\t\t\tif (!result.label) {\n\t\t\t\t\t\tresult.label = result.email\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.autocompleteRecipients = uniqBy('email')(this.autocompleteRecipients.concat(results))\n\t\t\t})\n\t\t},\n\t\tasync onMailvelopeLoaded(mailvelope) {\n\t\t\tthis.encrypt = isPgpgMessage(this.body)\n\t\t\tthis.mailvelope.available = true\n\t\t\tlogger.info('Mailvelope loaded', {\n\t\t\t\tencrypt: this.encrypt,\n\t\t\t\tisPgpgMessage: isPgpgMessage(this.body),\n\t\t\t\tkeyRing: this.mailvelope.keyRing,\n\t\t\t})\n\t\t\tthis.mailvelope.keyRing = await mailvelope.getKeyring()\n\t\t\tawait this.checkRecipientsKeys()\n\t\t},\n\t\thandleMention(option) {\n\t\t\tthis.editorMode = EDITOR_MODE_HTML\n\t\t\tthis.onNewToAddr(option)\n\t\t},\n\t\tonNewToAddr(option) {\n\t\t\tthis.onNewAddr(option, this.selectTo, 'to')\n\t\t},\n\t\tonNewCcAddr(option) {\n\t\t\tthis.onNewAddr(option, this.selectCc, 'cc')\n\t\t},\n\t\tonNewBccAddr(option) {\n\t\t\tthis.onNewAddr(option, this.selectBcc, 'bcc')\n\t\t},\n\t\tonNewAddr(option, list, type) {\n\t\t\tif (\n\t\t\t\t(option === null || option === undefined)\n\t\t\t\t&& this.recipientSearchTerms[type] !== undefined\n\t\t\t\t&& this.recipientSearchTerms[type] !== ''\n\t\t\t) {\n\t\t\t\tif (!this.recipientSearchTerms[type].includes('@')) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\toption = {}\n\t\t\t\toption.email = this.recipientSearchTerms[type]\n\t\t\t\toption.label = this.recipientSearchTerms[type]\n\t\t\t\tthis.recipientSearchTerms[type] = ''\n\t\t\t}\n\n\t\t\tif (list.some((recipient) => recipient.email === option?.email) || !option) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst recipient = { ...option }\n\t\t\tthis.newRecipients.push(recipient)\n\t\t\tlist.push(recipient)\n\t\t\tthis.saveDraftDebounced()\n\t\t},\n\t\tasync onSend(_, force = false) {\n\t\t\tif (this.encrypt) {\n\t\t\t\tlogger.debug('get encrypted message from mailvelope')\n\t\t\t\tawait this.$refs.mailvelopeEditor.pull()\n\t\t\t}\n\n\t\t\tthis.$emit('send', {\n\t\t\t\t...this.getMessageData(),\n\t\t\t\tforce,\n\t\t\t})\n\t\t},\n\t\treset() {\n\t\t\tthis.selectTo = []\n\t\t\tthis.selectCc = []\n\t\t\tthis.selectBcc = []\n\t\t\tthis.subjectVal = ''\n\t\t\tthis.bodyVal = '<p></p><p></p>'\n\t\t\tthis.attachments = []\n\t\t\tthis.autocompleteRecipients = []\n\t\t\tthis.newRecipients = []\n\t\t\tthis.requestMdnVal = false\n\t\t\tthis.changeSignature = false\n\t\t\tthis.sendAtVal = undefined\n\n\t\t\tthis.setAlias()\n\t\t\tthis.initBody()\n\t\t},\n\t\t/**\n\t\t * Format aliases for the Multiselect\n\t\t *\n\t\t * @param {object} alias the alias to format\n\t\t * @return {string}\n\t\t */\n\t\tformatAliases(alias) {\n\t\t\tif (!alias.name) {\n\t\t\t\treturn alias.emailAddress\n\t\t\t}\n\n\t\t\treturn `${alias.name} <${alias.emailAddress}>`\n\t\t},\n\t\t/**\n\t\t * Whether the date is acceptable\n\t\t *\n\t\t * @param {Date} date The date to compare to\n\t\t * @return {boolean}\n\t\t */\n\t\tdisabledDatetimepickerDate(date) {\n\t\t\tconst minimumDate = new Date()\n\t\t\t// Make it one sec before midnight so it shows the next full day as available\n\t\t\tminimumDate.setHours(0, 0, 0)\n\t\t\tminimumDate.setSeconds(minimumDate.getSeconds() - 1)\n\n\t\t\treturn date.getTime() <= minimumDate\n\t\t},\n\n\t\t/**\n\t\t * Whether the time for date is acceptable\n\t\t *\n\t\t * @param {Date} date The date to compare to\n\t\t * @return {boolean}\n\t\t */\n\t\tdisabledDatetimepickerTime(date) {\n\t\t\tconst now = new Date()\n\t\t\tconst minimumDate = new Date(now.getTime())\n\t\t\treturn date.getTime() <= minimumDate\n\t\t},\n\t\t/**\n\t\t * Remove recipient from recipients array (To,Cc,Bcc)\n\t\t *\n\t\t * @param {Array} option Current option from Multiselect\n\t\t * @param {Array} field List of recipients (ex. this.selectTo)\n\t\t */\n\t\tonRemoveRecipient(option, field) {\n\t\t\tswitch (field) {\n\t\t\tcase 'to':\n\t\t\t\tthis.removeRecipientTo(option)\n\t\t\t\tbreak\n\t\t\tcase 'cc':\n\t\t\t\tthis.removeRecipientCc(option)\n\t\t\t\tbreak\n\t\t\tcase 'bcc':\n\t\t\t\tthis.removeRecipientBcc(option)\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tremoveRecipient(option, list) {\n\t\t\treturn list.filter((recipient) => recipient.email !== option.email)\n\t\t},\n\t\tremoveRecipientTo(option) {\n\t\t\tthis.selectTo = this.removeRecipient(option, this.selectTo)\n\t\t},\n\t\tremoveRecipientCc(option) {\n\t\t\tthis.selectCc = this.removeRecipient(option, this.selectCc)\n\t\t},\n\t\tremoveRecipientBcc(option) {\n\t\t\tthis.selectBcc = this.removeRecipient(option, this.selectBcc)\n\t\t},\n\t\ttoggleViewMode() {\n\t\t\tthis.autoLimit = !this.autoLimit\n\t\t\tthis.showCC = !(this.showCC && this.selectCc.length === 0 && this.autoLimit)\n\t\t\tthis.showBCC = !(this.showBCC && this.selectBcc.length === 0 && this.autoLimit)\n\t\t},\n\t\tsetEditorModeHtml() {\n\t\t\tthis.editorMode = EDITOR_MODE_HTML\n\t\t},\n\t\tsetEditorModeText() {\n\t\t\tOC.dialogs.confirmDestructive(\n\t\t\t\tt('mail', 'Any existing formatting (for example bold, italic, underline or inline images) will be removed.'),\n\t\t\t\tt('mail', 'Turn off formatting'),\n\t\t\t\t{\n\t\t\t\t\ttype: OC.dialogs.YES_NO_BUTTONS,\n\t\t\t\t\tconfirm: t('mail', 'Turn off and remove formatting'),\n\t\t\t\t\tconfirmClasses: 'error',\n\t\t\t\t\tcancel: t('mail', 'Keep formatting'),\n\t\t\t\t},\n\t\t\t\t(decision) => {\n\t\t\t\t\tif (decision) {\n\t\t\t\t\t\tthis.editorMode = EDITOR_MODE_TEXT\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t)\n\t\t},\n\t\t/**\n\t\t * The S/MIME certificate object for an alias/account.\n\t\t *\n\t\t * @param {object} alias object\n\t\t * @return {object|undefined} S/MIME certificate of account or alias if one is selected\n\t\t */\n\t\tsmimeCertificateForAlias(alias) {\n\t\t\tconst certificateId = alias.smimeCertificateId\n\t\t\tif (!certificateId) {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t\treturn this.mainStore.getSmimeCertificate(certificateId)\n\t\t},\n\n\t\tsmimeSignCheck(value) {\n\t\t\tthis.wantsSmimeSign = value\n\t\t\tif (value) {\n\t\t\t\tthis.smimeSignAliases.push(this.selectedAlias.emailAddress)\n\t\t\t} else {\n\t\t\t\tthis.smimeSignAliases = this.smimeSignAliases\n\t\t\t\t\t.filter((alias) => alias !== this.selectedAlias.emailAddress)\n\t\t\t}\n\t\t\tsavePreference('smime-sign-aliases', JSON.stringify(this.smimeSignAliases))\n\t\t},\n\n\t\t/**\n\t\t * Create a new option for the to, cc and bcc selects.\n\t\t *\n\t\t * @param {string} value The string (email) typed by the user\n\t\t * @return {{email: string, label: string}} The new option\n\t\t */\n\t\tcreateRecipientOption(value) {\n\t\t\treturn { email: value, label: value }\n\t\t},\n\n\t\t/**\n\t\t * Return the subname for recipient suggestion.\n\t\t *\n\t\t * Empty if label and email are the same or\n\t\t * if the suggestion is a group.\n\t\t *\n\t\t * @param {{email: string, label: string}} option object\n\t\t * @return {string}\n\t\t */\n\t\tgetSubnameForRecipient(option) {\n\t\t\tif (option.source && option.source === 'groups') {\n\t\t\t\treturn ''\n\t\t\t}\n\n\t\t\tif (option.label === option.email) {\n\t\t\t\treturn ''\n\t\t\t}\n\n\t\t\treturn option.email\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.message-composer {\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmax-height: 100%;\n}\n\n.composer-actions {\n\tposition: sticky;\n\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\n}\n\n.composer-fields {\n\tpadding: var(--default-grid-baseline) calc(var(--default-grid-baseline) * 2) 0 calc(var(--default-grid-baseline) * 2);\n\n\t&__label {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-end;\n\n\t\t/** NcButton does not allow font weight styling */\n\t\t:deep(.button-vue__text) {\n\t\t\tfont-weight: normal;\n\t\t}\n\t}\n\n\t&.mail-account {\n\t\tborder-top: none;\n\t\tpadding-top: calc(var(--default-grid-baseline) * 2);\n\t}\n\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.composer-fields--custom {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\t\tpadding-top: calc(var(--default-grid-baseline) * 0.5);\n\n\t\tbutton {\n\t\t\tmargin-top: 0;\n\t\t\tmargin-bottom: 0;\n\t\t\tbackground-color: transparent;\n\t\t\tborder: none;\n\t\t\topacity: 0.5;\n\t\t\tpadding: calc(var(--default-grid-baseline) * 2) calc(var(--default-grid-baseline) * 4);\n\t\t}\n\n\t\t.select {\n\t\t\twidth: 100%;\n\t\t}\n\t\t.vs__search{\n\t\t\twidth: 100%;\n\t\t}\n\t\t.v-select{\n\t\t\tflex-grow: 0.95;\n\t\t}\n\t}\n\n\t.subject {\n\t\tfont-size: 15px;\n\t\tfont-weight: bold;\n\t\tmargin: var(--default-grid-baseline) 0 !important;\n\t\tpadding: 0 !important;\n\t\twidth: 100%;\n\n\t\t&:focus-visible {\n\t\t\tbox-shadow: none !important;\n\t\t}\n\t}\n\n\t.message-body {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tborder: none !important;\n\t\toutline: none !important;\n\t\tbox-shadow: none !important;\n\n\t\t// Fix contenteditable not becoming focused upon clichint within it's\n\t\t// boundaries in safari\n\t\t-webkit-user-select: text;\n\t\tuser-select: text;\n\t}\n}\n\n// Make composer editor expand\n.message-editor {\n\tflex: 1 1 100%;\n\tmin-height: 0;\n\tborder-top: 1px solid var(--color-border);\n}\n\n.draft-status {\n\tpadding: calc(var(--default-grid-baseline) * 0.5);\n\topacity: 0.5;\n\tfont-size: small;\n\tdisplay: block;\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tcolor: var(--color-text-maxcontrast);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n.subject {\n\tborder: none !important;\n}\n\n:deep([data-select=\"create\"] .avatardiv--unknown) {\n\tbackground: var(--color-text-maxcontrast) !important;\n}\n\n#from{\n\twidth: 100%;\n\tcursor: pointer;\n}\n\n:deep(.vs__actions){\n\tdisplay: none;\n}\n\n:deep(.v-select.select){\n\tinset-inline-start: 0 !important;\n}\n\n:deep(.vs__dropdown-menu){\n\tpadding: 0 !important;\n}\n\n:deep(.vs__dropdown-option){\n\tborder-radius: 0  !important;\n}\n\n.submit-message.send.primary.icon-confirm-white {\n\tcolor: var(--color-main-background);\n}\n\n.button {\n\tbackground-color: transparent;\n\tborder: none;\n}\n\n.send-button {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: calc(var(--default-grid-baseline) * 2) calc(var(--default-grid-baseline) * 4);\n\tmargin-inline-start: var(--default-grid-baseline);\n}\n\n.send-button .send-icon {\n\tpadding-inline-end: var(--default-grid-baseline);\n}\n\n.centered-content {\n\tmargin-top: 0 !important;\n}\n\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tbottom: var(--default-grid-baseline);\n}\n\n.composer-actions--primary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding-inline-start: calc(var(--default-grid-baseline) * 2);\n\talign-items: center;\n}\n\n.composer-actions--secondary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 12px;\n\tgap: 5px;\n}\n\n.composer-actions--primary-actions .button {\n\tpadding: 2px;\n}\n\n.composer-actions--secondary-actions .button{\n\tflex-shrink: 0;\n}\n\n.composer-actions-draft-status {\n\tpadding-inline-start: 10px;\n}\n\n:deep(.vs__selected-options .vs__dropdown-toggle .vs--multiple ){\n\twidth: 100%;\n}\n\n@media only screen and (max-width: 580px) {\n\t.composer-actions-right {\n\t\talign-items: end;\n\t\tflex-direction: column-reverse;\n\t}\n\t.composer-actions-draft-status {\n\t\ttext-align: end;\n\t\tpadding-inline-end: 15px;\n\t}\n\t.composer-actions--primary-actions {\n\t\tpadding-inline-end: 5px;\n\t}\n}\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=3657ba82&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=3657ba82&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Composer.vue?vue&type=template&id=3657ba82&scoped=true\"\nimport script from \"./Composer.vue?vue&type=script&lang=js\"\nexport * from \"./Composer.vue?vue&type=script&lang=js\"\nimport style0 from \"./Composer.vue?vue&type=style&index=0&id=3657ba82&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3657ba82\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"message-composer\"},[(_vm.isPickerAvailable && _vm.isPickerOpen)?_c('NcReferencePickerModal',{attrs:{\"id\":\"reference-picker\"},on:{\"submit\":_vm.onPicked,\"cancel\":_vm.closePicker}}):_vm._e(),_vm._v(\" \"),(_vm.isTextBlockPickerOpen)?_c('TextBlockModal',{on:{\"close\":function($event){_vm.isTextBlockPickerOpen = false},\"insert\":_vm.onTextBlockInsert}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields composer-fields__from mail-account\"},[_c('label',{staticClass:\"from-label\",attrs:{\"for\":\"from\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'From'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('NcSelect',{attrs:{\"id\":\"from\",\"value\":_vm.selectedAlias,\"options\":_vm.aliases,\"label\":\"name\",\"get-option-key\":(option)=>option.selectId,\"searchable\":false,\"placeholder\":_vm.t('mail', 'Select account'),\"aria-label-combobox\":_vm.t('mail', 'Select account'),\"clear-on-select\":false,\"append-to-body\":false,\"selectable\":(option)=>option.selectable},on:{\"option:selected\":_vm.onAliasChange},scopedSlots:_vm._u([{key:\"option\",fn:function(option){return [_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.formatAliases(option))+\"\\n\\t\\t\\t\\t\")]}},{key:\"selected-option\",fn:function(option){return [_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.formatAliases(option))+\"\\n\\t\\t\\t\\t\")]}}])})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('div',{staticClass:\"composer-fields__label\"},[_c('label',{staticClass:\"to-label\",attrs:{\"for\":\"to\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'To'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"size\":\"small\",\"type\":\"tertiary-no-background\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleViewMode.apply(null, arguments)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Cc/Bcc'))+\"\\n\\t\\t\\t\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('NcSelect',{ref:\"toLabel\",attrs:{\"id\":\"to\",\"value\":_vm.selectTo,\"options\":_vm.selectableRecipients.filter(recipient=>!_vm.selectTo.some(to=>to.email===recipient.email)),\"get-option-key\":(option) => option.email,\"taggable\":true,\"aria-label-combobox\":_vm.t('mail', 'Select recipient'),\"filter-by\":(option, label, search)=>_vm.filterOption(option, label, search,'to'),\"multiple\":true,\"close-on-select\":true,\"clear-search-on-select\":true,\"loading\":_vm.loadingIndicatorTo,\"reducible\":true,\"clearable\":true,\"no-wrap\":false,\"append-to-body\":false,\"create-option\":_vm.createRecipientOption,\"clear-search-on-blur\":() => _vm.clearOnBlur('to')},on:{\"input\":_vm.saveDraftDebounced,\"option:selecting\":_vm.onNewToAddr,\"search:blur\":_vm.onNewToAddr,\"search\":function($event){return _vm.onAutocomplete($event, 'to')}},scopedSlots:_vm._u([{key:\"search\",fn:function({ events, attributes }){return [_c('input',_vm._g(_vm._b({staticClass:\"vs__search\",attrs:{\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"type\":\"search\"}},'input',attributes,false),events))]}},{key:\"selected-option-container\",fn:function({option}){return [_c('RecipientListItem',{staticClass:\"vs__selected selected\",attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'to')}}})]}},{key:\"option\",fn:function(option){return [_c('div',[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"name\":option.label,\"subname\":_vm.getSubnameForRecipient(option),\"icon-class\":!option.id ? 'icon-user' : null,\"url\":option.photo}})],1)]}}])})],1)]),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"cc-label\",attrs:{\"for\":\"cc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Cc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('NcSelect',{ref:\"toLabel\",class:{'opened': !_vm.autoLimit,'select':true},attrs:{\"id\":\"cc\",\"value\":_vm.selectCc,\"options\":_vm.selectableRecipients.filter(recipient=>!_vm.selectCc.some(cc=>cc.email===recipient.email)),\"get-option-key\":(option) => option.email,\"no-wrap\":false,\"filter-by\":(option, label, search)=>_vm.filterOption(option, label, search,'cc'),\"taggable\":true,\"close-on-select\":true,\"clear-search-on-blur\":() => _vm.clearOnBlur('cc'),\"append-to-body\":false,\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"aria-label-combobox\":_vm.t('mail', 'Contact or email address …'),\"clear-search-on-select\":true,\"loading\":_vm.loadingIndicatorCc,\"reducible\":true,\"clearable\":true,\"create-option\":_vm.createRecipientOption},on:{\"input\":_vm.saveDraftDebounced,\"option:selecting\":_vm.onNewCcAddr,\"search:blur\":_vm.onNewCcAddr,\"search\":function($event){return _vm.onAutocomplete($event, 'cc')}},scopedSlots:_vm._u([{key:\"search\",fn:function({ events, attributes }){return [_c('input',_vm._g(_vm._b({staticClass:\"vs__search\",attrs:{\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"type\":\"search\"}},'input',attributes,false),events))]}},{key:\"selected-option-container\",fn:function({option}){return [_c('RecipientListItem',{staticClass:\"vs__selected\",attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'cc')}}})]}},{key:\"option\",fn:function(option){return [_c('div',[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"name\":option.label,\"subname\":_vm.getSubnameForRecipient(option),\"url\":option.photo,\"icon-class\":!option.id ? 'icon-user' : null}})],1)]}}],null,false,2538260560)})],1)]):_vm._e(),_vm._v(\" \"),(_vm.showBCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"bcc-label\",attrs:{\"for\":\"bcc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Bcc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('NcSelect',{ref:\"toLabel\",class:{'opened': !_vm.autoLimit,'select':true},attrs:{\"id\":\"bcc\",\"value\":_vm.selectBcc,\"no-wrap\":false,\"filter-by\":(option, label, search)=>_vm.filterOption(option, label, search,'bcc'),\"options\":_vm.selectableRecipients.filter(recipient=>!_vm.selectBcc.some(bcc=>bcc.email===recipient.email)),\"get-option-key\":(option) => option.email,\"taggable\":true,\"close-on-select\":true,\"clear-search-on-blur\":() => _vm.clearOnBlur('bcc'),\"append-to-body\":false,\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"aria-label-combobox\":_vm.t('mail', 'Contact or email address …'),\"clear-search-on-select\":true,\"reset-on-options-change\":true,\"loading\":_vm.loadingIndicatorBcc,\"clearable\":true,\"create-option\":_vm.createRecipientOption},on:{\"input\":_vm.saveDraftDebounced,\"option:selecting\":_vm.onNewBccAddr,\"search:blur\":_vm.onNewBccAddr,\"search\":function($event){return _vm.onAutocomplete($event, 'bcc')}},scopedSlots:_vm._u([{key:\"search\",fn:function({ events, attributes }){return [_c('input',_vm._g(_vm._b({staticClass:\"vs__search\",attrs:{\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"type\":\"search\",\"dir\":\"auto\"}},'input',attributes,false),events))]}},{key:\"selected-option-container\",fn:function({option}){return [_c('RecipientListItem',{staticClass:\"vs__selected\",attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'bcc')}}})]}},{key:\"option\",fn:function(option){return [_c('div',[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"name\":option.label,\"subname\":_vm.getSubnameForRecipient(option),\"url\":option.photo,\"icon-class\":!option.id ? 'icon-user' : null}})],1)]}}],null,false,1352508756)})],1)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"subject-label hidden-visually\",attrs:{\"for\":\"subject\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Subject'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectVal),expression:\"subjectVal\"}],staticClass:\"subject\",attrs:{\"id\":\"subject\",\"type\":\"text\",\"name\":\"subject\",\"autocomplete\":\"off\",\"placeholder\":_vm.t('mail', 'Subject …')},domProps:{\"value\":(_vm.subjectVal)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.subjectVal=$event.target.value},_vm.saveDraftDebounced]}})]),_vm._v(\" \"),(_vm.noReply)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'This message came from a noreply address so your reply will probably not be read.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.wantsSmimeEncrypt && _vm.missingSmimeCertificatesForRecipients.length)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The following recipients do not have a S/MIME certificate: {recipients}.', {\n\t\t\t\trecipients: _vm.missingSmimeCertificatesForRecipients.join(', '),\n\t\t\t}))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.encrypt && _vm.mailvelope.keysMissing.length)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\trecipients: _vm.mailvelope.keysMissing.join(', '),\n\t\t\t}))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields message-editor\"},[(!_vm.encrypt)?_c('TextEditor',{key:_vm.editorMode,ref:\"editor\",staticClass:\"message-body\",attrs:{\"value\":_vm.bodyVal,\"html\":!_vm.editorPlainText,\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message …'),\"focus\":_vm.isReply || !_vm.isFirstOpen,\"bus\":_vm.bus,\"text-blocks\":_vm.textBlocks},on:{\"input\":_vm.onEditorInput,\"ready\":_vm.onEditorReady,\"mention\":_vm.handleMention,\"show-toolbar\":_vm.handleShow}}):_c('MailvelopeEditor',{ref:\"mailvelopeEditor\",attrs:{\"value\":_vm.bodyVal,\"recipients\":_vm.allRecipients,\"quoted-text\":_vm.body,\"is-reply-or-forward\":_vm.isReply || _vm.isForward},on:{\"input\":_vm.onEditorInput}})],1),_vm._v(\" \"),_c('ComposerAttachments',{attrs:{\"bus\":_vm.bus,\"upload-size-limit\":_vm.attachmentSizeLimit},on:{\"upload\":function($event){_vm.$emit('upload-attachment', $event, _vm.getMessageData())}},model:{value:(_vm.attachments),callback:function ($$v) {_vm.attachments=$$v},expression:\"attachments\"}}),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions-right composer-actions\"},[_c('div',{staticClass:\"composer-actions--primary-actions\"},[_c('p',{staticClass:\"composer-actions-draft-status\"},[(_vm.savingDraft)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Saving draft …')))]):(!_vm.canSaveDraft)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Error saving draft')))]):(_vm.draftSaved)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Draft saved')))]):_vm._e()]),_vm._v(\" \"),(!_vm.savingDraft && !_vm.canSaveDraft)?_c('ButtonVue',{staticClass:\"button\",attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('mail', 'Save draft')},on:{\"click\":_vm.saveDraft},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Download',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Save draft')}})]},proxy:true}],null,false,2227301918)}):_vm._e(),_vm._v(\" \"),(!_vm.savingDraft && _vm.draftSaved)?_c('ButtonVue',{staticClass:\"button\",attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('mail', 'Discard & close draft')},on:{\"click\":function($event){return _vm.$emit('discard-draft')}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Delete',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Discard & close draft')}})]},proxy:true}],null,false,3896853704)}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions--secondary-actions\"},[(!_vm.encrypt && _vm.editorPlainText)?_c('ButtonVue',{attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('mail', 'Enable formatting')},on:{\"click\":function($event){return _vm.setEditorModeHtml()}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconFormat',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Enable formatting')}})]},proxy:true}],null,false,2537405168)}):_vm._e(),_vm._v(\" \"),(!_vm.encrypt && !_vm.editorPlainText)?_c('ButtonVue',{attrs:{\"type\":\"tertiary\",\"pressed\":true,\"aria-label\":_vm.t('mail', 'Disable formatting')},on:{\"click\":function($event){return _vm.setEditorModeText()}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconFormat',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Disable formatting')}})]},proxy:true}],null,false,742643909)}):_vm._e(),_vm._v(\" \"),_c('Actions',{attrs:{\"open\":_vm.isAddAttachmentsOpen},on:{\"update:open\":function($event){_vm.isAddAttachmentsOpen=$event}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Paperclip',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onAddLocalAttachment},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconUpload',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Upload attachment'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onAddCloudAttachment},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconFolder',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add attachment from Files'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true,\"disabled\":_vm.encrypt},on:{\"click\":_vm.onAddCloudAttachmentLink},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconPublic',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add share link from Files'))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('Actions',{attrs:{\"open\":_vm.isActionsOpen},on:{\"update:open\":function($event){_vm.isActionsOpen=$event},\"close\":function($event){_vm.isMoreActionsOpen = false}}},[(!_vm.isMoreActionsOpen)?[(_vm.isPickerAvailable)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.openPicker},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconLinkPicker',{attrs:{\"size\":20}})]},proxy:true}],null,false,3539100229)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Smart picker'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.openTextBlockPicker},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('NcIconSvgWrapper',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Text blocks'),\"svg\":_vm.textBlockSvg}})]},proxy:true}],null,false,2993883612)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Text blocks'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.isScheduledSendingDisabled)?_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.isMoreActionsOpen=true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('SendClock',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Send later')}})]},proxy:true}],null,false,1769650344)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send later'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":_vm.requestMdnVal},on:{\"check\":function($event){_vm.requestMdnVal = true},\"uncheck\":function($event){_vm.requestMdnVal = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Request a read receipt'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.smimeCertificateForCurrentAlias)?_c('ActionCheckbox',{attrs:{\"checked\":_vm.wantsSmimeSign},on:{\"check\":function($event){return _vm.smimeSignCheck(true)},\"uncheck\":function($event){return _vm.smimeSignCheck(false)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Sign message with S/MIME'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.smimeCertificateForCurrentAlias)?_c('ActionCheckbox',{attrs:{\"checked\":_vm.wantsSmimeEncrypt,\"disabled\":_vm.encrypt},on:{\"check\":function($event){_vm.wantsSmimeEncrypt = true},\"uncheck\":function($event){_vm.wantsSmimeEncrypt = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Encrypt message with S/MIME'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.mailvelope.available)?_c('ActionCheckbox',{attrs:{\"checked\":_vm.encrypt,\"disabled\":_vm.wantsSmimeEncrypt},on:{\"change\":function($event){_vm.isActionsOpen = false},\"check\":function($event){_vm.encrypt = true},\"uncheck\":function($event){_vm.encrypt = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Encrypt message with Mailvelope'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()]:_vm._e(),_vm._v(\" \"),(_vm.isMoreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.isMoreActionsOpen=false}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ChevronLeft',{attrs:{\"title\":_vm.t('mail', 'Send later'),\"size\":20}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send later'))+\"\\n\\t\\t\\t\\t\\t\\t\")]},proxy:true}],null,false,2922837455)}),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio\",attrs:{\"value\":undefined,\"name\":\"sendLater\",\"checked\":!_vm.sendAtVal},on:{\"change\":function($event){return _vm.onChangeSendLater(undefined)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send now'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateTomorrowMorning,\"name\":\"sendLater\",\"checked\":_vm.isSendAtTomorrowMorning},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateTomorrowMorning)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Tomorrow morning'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateTomorrowMorning))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateTomorrowAfternoon,\"name\":\"sendLater\",\"checked\":_vm.isSendAtTomorrowAfternoon},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateTomorrowAfternoon)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Tomorrow afternoon'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateTomorrowAfternoon))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateMondayMorning,\"name\":\"sendLater\",\"checked\":_vm.isSendAtMondayMorning},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateMondayMorning)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Monday morning'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateMondayMorning))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio\",attrs:{\"name\":\"sendLater\",\"checked\":_vm.isSendAtCustom,\"value\":_vm.customSendTime},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.customSendTime)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Custom date and time'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionInput',{attrs:{\"is-native-picker\":true,\"min\":_vm.dateToday,\"type\":\"datetime-local\",\"first-day-of-week\":_vm.firstDayDatetimePicker,\"use12h\":_vm.showAmPm,\"formatter\":_vm.formatter,\"format\":'YYYY-MM-DD HH:mm',\"icon\":\"\",\"minute-step\":5},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.customSendTime)}},model:{value:(_vm.selectedDate),callback:function ($$v) {_vm.selectedDate=$$v},expression:\"selectedDate\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Enter a date'))+\"\\n\\t\\t\\t\\t\\t\")])]:_vm._e()],2),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"disabled\":!_vm.canSend || _vm.sending,\"native-type\":\"submit\",\"type\":\"primary\",\"aria-label\":_vm.submitButtonTitle},on:{\"click\":_vm.onSend},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Send',{attrs:{\"title\":_vm.submitButtonTitle,\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.submitButtonTitle)+\"\\n\\t\\t\\t\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nexport default class AttachmentMissingError extends Error {\n\n\tconstructor(message) {\n\t\tsuper(message)\n\t\tthis.name = AttachmentMissingError.getName()\n\t\tthis.message = message\n\t}\n\n\tstatic getName() {\n\t\treturn 'AttachmentMissingError'\n\t}\n\n}\n","/**\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nexport default class SubjectMissingError extends Error {\n\n\tconstructor(message) {\n\t\tsuper(message)\n\t\tthis.name = SubjectMissingError.getName()\n\t\tthis.message = message\n\n\t}\n\n\tstatic getName() {\n\t\treturn 'SubjectMissingError'\n\t}\n\n}\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n<template>\n\t<div ref=\"contactDetails\" />\n</template>\n\n<script>\nimport logger from '../logger.js'\n\nexport default {\n\tprops: {\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tvm: null,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst mountContactDetails = window.OCA?.Contacts?.mountContactDetails\n\t\tif (mountContactDetails) {\n\t\t\ttry {\n\t\t\t\tthis.vm = await mountContactDetails(this.$refs.contactDetails, this.email)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error(`Failed to mount contact details: ${error}`)\n\t\t\t}\n\t\t}\n\t},\n\tasync beforeDestroy() {\n\t\tif (this.vm) {\n\t\t\tthis.vm.$destroy()\n\t\t}\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DisplayContactDetails.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DisplayContactDetails.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DisplayContactDetails.vue?vue&type=template&id=5850892e\"\nimport script from \"./DisplayContactDetails.vue?vue&type=script&lang=js\"\nexport * from \"./DisplayContactDetails.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"contactDetails\"})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientInfo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientInfo.vue?vue&type=script&lang=js\"","<!--\n  - SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"recipient-info\">\n\t\t<!-- For a single recipient -->\n\t\t<div v-if=\"recipients && recipients.length === 1\" class=\"recipient-info__single\">\n\t\t\t<div class=\"recipient-info__header\">\n\t\t\t\t<div class=\"recipient-info__avatar\">\n\t\t\t\t\t<Avatar :display-name=\"recipients[0].label\"\n\t\t\t\t\t\t:email=\"recipients[0].email\"\n\t\t\t\t\t\t:size=\"55\"\n\t\t\t\t\t\t:disable-tooltip=\"true\"\n\t\t\t\t\t\t:disable-menu=\"true\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"recipient-info__details\">\n\t\t\t\t\t<DisplayContactDetails :email=\"recipients[0].email\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- For multiple recipients -->\n\t\t<div v-else-if=\"recipients && recipients.length > 1\" class=\"recipient-info__multiple\">\n\t\t\t<div v-for=\"(recipient, index) in recipients\" :key=\"recipient.email\" class=\"recipient-info__item\">\n\t\t\t\t<div class=\"recipient-info__header\">\n\t\t\t\t\t<div class=\"recipient-info__avatar\">\n\t\t\t\t\t\t<Avatar :display-name=\"recipient.label\"\n\t\t\t\t\t\t\t:email=\"recipient.email\"\n\t\t\t\t\t\t\t:size=\"55\"\n\t\t\t\t\t\t\t:disable-tooltip=\"true\"\n\t\t\t\t\t\t\t:disable-menu=\"true\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!expandedRecipients[index]\" class=\"recipient-info__name\">\n\t\t\t\t\t\t<h6>{{ recipient.email }}</h6>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"recipient-info__expand-toggle\" @click=\"toggleExpand(index)\">\n\t\t\t\t\t\t<template v-if=\"isExpanded(index)\">\n\t\t\t\t\t\t\t<div class=\"recipient-info__show-less\">\n\t\t\t\t\t\t\t\t<IconArrowUp :size=\"20\" />\n\t\t\t\t\t\t\t\t<span>{{ t('mail', 'Show less') }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<IconArrowDown :size=\"20\" />\n\t\t\t\t\t\t\t<span>{{ t('mail', 'Show more') }}</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"expandedRecipients[index]\" class=\"recipient-info__details\">\n\t\t\t\t\t<DisplayContactDetails :email=\"recipient.email\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { mapGetters } from 'pinia'\nimport IconArrowDown from 'vue-material-design-icons/ArrowDown.vue'\nimport IconArrowUp from 'vue-material-design-icons/ArrowUp.vue'\nimport Avatar from './Avatar.vue'\nimport DisplayContactDetails from './DisplayContactDetails.vue'\nimport useMainStore from '../store/mainStore.js'\n\nexport default {\n\tcomponents: {\n\t\tAvatar,\n\t\tIconArrowDown,\n\t\tIconArrowUp,\n\t\tDisplayContactDetails,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\texpandedRecipients: [],\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters(useMainStore, ['composerMessage']),\n\t\trecipients() {\n\t\t\treturn Array.isArray(this.composerMessage.data.to) ? this.composerMessage.data.to : []\n\t\t},\n\t},\n\twatch: {\n\t\trecipients: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.expandedRecipients = this.recipients.map(() => false)\n\t\t\t},\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggleExpand(index) {\n\t\t\tthis.$set(this.expandedRecipients, index, !this.expandedRecipients[index])\n\t\t},\n\t\tisExpanded(index) {\n\t\t\treturn this.expandedRecipients[index]\n\t\t},\n\t},\n}\n</script>\n<style scoped lang=\"scss\">\n.recipient-info {\n\tdisplay: inline;\n\twidth: 100%;\n\n\t&__single {\n\t\twidth: 370px;\n\t\tdisplay: inline-block;\n\t}\n\n\t&__avatar {\n\t\tmargin-top: 20px;\n\t\tdisplay: inline;\n\t\tfloat: inline-start;\n\t\tpadding: 20px;\n\t}\n\n\t&__details {\n\t\tmax-width: 100%;\n\t}\n\n\t&__multiple {\n\t\tmargin-top: 10px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t&__item {\n\t\tmargin-bottom: 10px;\n\t}\n\n\t&__expand-toggle {\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tgap: 5px;\n\t}\n\n\t&__header {\n\t\tdisplay: contents;\n\t}\n\n\t&__name {\n\t\tmargin-top: 50px;\n\t}\n\n\t&__show-less {\n\t\tmargin-top: 40px;\n\t}\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientInfo.vue?vue&type=style&index=0&id=1d39f020&prod&scoped=true&lang=scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientInfo.vue?vue&type=style&index=0&id=1d39f020&prod&scoped=true&lang=scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./RecipientInfo.vue?vue&type=template&id=1d39f020&scoped=true\"\nimport script from \"./RecipientInfo.vue?vue&type=script&lang=js\"\nexport * from \"./RecipientInfo.vue?vue&type=script&lang=js\"\nimport style0 from \"./RecipientInfo.vue?vue&type=style&index=0&id=1d39f020&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d39f020\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"recipient-info\"},[(_vm.recipients && _vm.recipients.length === 1)?_c('div',{staticClass:\"recipient-info__single\"},[_c('div',{staticClass:\"recipient-info__header\"},[_c('div',{staticClass:\"recipient-info__avatar\"},[_c('Avatar',{attrs:{\"display-name\":_vm.recipients[0].label,\"email\":_vm.recipients[0].email,\"size\":55,\"disable-tooltip\":true,\"disable-menu\":true}})],1),_vm._v(\" \"),_c('div',{staticClass:\"recipient-info__details\"},[_c('DisplayContactDetails',{attrs:{\"email\":_vm.recipients[0].email}})],1)])]):(_vm.recipients && _vm.recipients.length > 1)?_c('div',{staticClass:\"recipient-info__multiple\"},_vm._l((_vm.recipients),function(recipient,index){return _c('div',{key:recipient.email,staticClass:\"recipient-info__item\"},[_c('div',{staticClass:\"recipient-info__header\"},[_c('div',{staticClass:\"recipient-info__avatar\"},[_c('Avatar',{attrs:{\"display-name\":recipient.label,\"email\":recipient.email,\"size\":55,\"disable-tooltip\":true,\"disable-menu\":true}})],1),_vm._v(\" \"),(!_vm.expandedRecipients[index])?_c('div',{staticClass:\"recipient-info__name\"},[_c('h6',[_vm._v(_vm._s(recipient.email))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"recipient-info__expand-toggle\",on:{\"click\":function($event){return _vm.toggleExpand(index)}}},[(_vm.isExpanded(index))?[_c('div',{staticClass:\"recipient-info__show-less\"},[_c('IconArrowUp',{attrs:{\"size\":20}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('mail', 'Show less')))])],1)]:[_c('IconArrowDown',{attrs:{\"size\":20}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('mail', 'Show more')))])]],2)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.expandedRecipients[index]),expression:\"expandedRecipients[index]\"}],staticClass:\"recipient-info__details\"},[_c('DisplayContactDetails',{attrs:{\"email\":recipient.email}})],1)])}),0):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { html, plain } from './text.js'\n\n/**\n * Convert a given message data object to a text instance (see ./text.js)\n *\n * @param {{ isHtml: boolean, bodyHtml?: string|null, bodyPlain?: string|null }} message The message object\n * @return {import('./text.js').Text} The text instance\n */\nexport function messageBodyToTextInstance(message) {\n\tif (message.isHtml) {\n\t\treturn html(message.bodyHtml ?? '')\n\t}\n\n\treturn plain(message.bodyPlain ?? '')\n}\n","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<Modal v-if=\"showMessageComposer\"\n\t\t:size=\"modalSize\"\n\t\t:name=\"modalTitle\"\n\t\t:additional-trap-elements=\"additionalTrapElements\"\n\t\t@close=\"$event.type === 'click' ? onClose() : onMinimize()\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"left-pane\">\n\t\t\t\t<NcButton class=\"maximize-button\"\n\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t:aria-label=\"t('mail', 'Maximize composer')\"\n\t\t\t\t\t:title=\"largerModal ? t('mail', 'Show recipient details') : t('mail', 'Hide recipient details')\"\n\t\t\t\t\t@click=\"onMaximize\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<MaximizeIcon v-if=\"!largerModal\" :size=\"20\" />\n\t\t\t\t\t\t<DefaultComposerIcon v-else :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton class=\"minimize-button\"\n\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t:aria-label=\"t('mail', 'Minimize composer')\"\n\t\t\t\t\t:title=\"t('mail', 'Minimize composer')\"\n\t\t\t\t\t@click=\"onMinimize\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<MinimizeIcon :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\n\t\t\t\t<KeepAlive>\n\t\t\t\t\t<EmptyContent v-if=\"error\"\n\t\t\t\t\t\t:name=\"t('mail', 'Error sending your message')\"\n\t\t\t\t\t\tclass=\"empty-content\"\n\t\t\t\t\t\trole=\"alert\">\n\t\t\t\t\t\t<p>{{ error }}</p>\n\t\t\t\t\t\t<template #action>\n\t\t\t\t\t\t\t<NcButton type=\"tertiary\" :aria-label=\"t('mail', 'Go back')\" @click=\"error = undefined\">\n\t\t\t\t\t\t\t\t{{ t('mail', 'Go back') }}\n\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t\t<NcButton type=\"tertiary\" :aria-label=\"t('mail', 'Retry')\" @click=\"onSend\">\n\t\t\t\t\t\t\t\t{{ t('mail', 'Retry') }}\n\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</EmptyContent>\n\t\t\t\t\t<EmptyContent v-else-if=\"warning\"\n\t\t\t\t\t\t:name=\"t('mail', 'Warning sending your message')\"\n\t\t\t\t\t\tclass=\"empty-content\"\n\t\t\t\t\t\trole=\"alert\">\n\t\t\t\t\t\t<template #description>\n\t\t\t\t\t\t\t{{ warning }}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #action>\n\t\t\t\t\t\t\t<NcButton type=\"tertiary\" :aria-label=\"t('mail', 'Go back')\" @click=\"warning = undefined\">\n\t\t\t\t\t\t\t\t{{ t('mail', 'Go back') }}\n\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t\t<NcButton type=\"tertiary\" :aria-label=\"t('mail', 'Send anyway')\" @click=\"onForceSend\">\n\t\t\t\t\t\t\t\t{{ t('mail', 'Send anyway') }}\n\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</EmptyContent>\n\n\t\t\t\t\t<Composer ref=\"composer\"\n\t\t\t\t\t\t:from-account=\"composerData.accountId\"\n\t\t\t\t\t\t:from-alias=\"composerData.aliasId\"\n\t\t\t\t\t\t:to=\"composerData.to\"\n\t\t\t\t\t\t:cc=\"composerData.cc\"\n\t\t\t\t\t\t:bcc=\"composerData.bcc\"\n\t\t\t\t\t\t:subject=\"composerData.subject\"\n\t\t\t\t\t\t:attachments-data=\"composerData.attachments\"\n\t\t\t\t\t\t:body=\"composerDataBodyAsTextInstance\"\n\t\t\t\t\t\t:editor-body=\"convertEditorBody(composerData)\"\n\t\t\t\t\t\t:in-reply-to-message-id=\"composerData.inReplyToMessageId\"\n\t\t\t\t\t\t:reply-to=\"composerData.replyTo\"\n\t\t\t\t\t\t:forward-from=\"composerData.forwardFrom\"\n\t\t\t\t\t\t:send-at=\"composerData.sendAt * 1000\"\n\t\t\t\t\t\t:forwarded-messages=\"forwardedMessages\"\n\t\t\t\t\t\t:smart-reply=\"smartReply\"\n\t\t\t\t\t\t:can-save-draft=\"canSaveDraft\"\n\t\t\t\t\t\t:saving-draft=\"savingDraft\"\n\t\t\t\t\t\t:draft-saved=\"draftSaved\"\n\t\t\t\t\t\t:smime-sign=\"composerData.smimeSign\"\n\t\t\t\t\t\t:smime-encrypt=\"composerData.smimeEncrypt\"\n\t\t\t\t\t\t:is-first-open=\"modalFirstOpen\"\n\t\t\t\t\t\t:request-mdn=\"composerData.requestMdn\"\n\t\t\t\t\t\t:accounts=\"accounts\"\n\t\t\t\t\t\t@update:from-account=\"patchComposerData({ accountId: $event })\"\n\t\t\t\t\t\t@update:from-alias=\"patchComposerData({ aliasId: $event })\"\n\t\t\t\t\t\t@update:to=\"patchComposerData({ to: $event })\"\n\t\t\t\t\t\t@update:cc=\"patchComposerData({ cc: $event })\"\n\t\t\t\t\t\t@update:bcc=\"patchComposerData({ bcc: $event })\"\n\t\t\t\t\t\t@update:subject=\"patchComposerData({ subject: $event })\"\n\t\t\t\t\t\t@update:attachments-data=\"patchComposerData({ attachments: $event })\"\n\t\t\t\t\t\t@update:editor-body=\"patchEditorBody\"\n\t\t\t\t\t\t@update:send-at=\"patchComposerData({ sendAt: $event / 1000 })\"\n\t\t\t\t\t\t@update:smime-sign=\"patchComposerData({ smimeSign: $event })\"\n\t\t\t\t\t\t@update:smime-encrypt=\"patchComposerData({ smimeSign: $event })\"\n\t\t\t\t\t\t@update:request-mdn=\"patchComposerData({ requestMdn: $event })\"\n\t\t\t\t\t\t@draft=\"onDraft\"\n\t\t\t\t\t\t@discard-draft=\"discardDraft\"\n\t\t\t\t\t\t@upload-attachment=\"onAttachmentUploading\"\n\t\t\t\t\t\t@send=\"onSend\"\n\t\t\t\t\t\t@show-toolbar=\"handleShow\" />\n\t\t\t\t</KeepAlive>\n\t\t\t</div>\n\n\t\t\t<div v-show=\"showRecipientPane && !warning && !error\" class=\"right-pane\">\n\t\t\t\t<RecipientInfo />\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n</template>\n<script>\nimport {\n\tNcButton,\n\tNcEmptyContent as EmptyContent,\n\tNcModal as Modal,\n} from '@nextcloud/vue'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport logger from '../logger.js'\nimport Composer from './Composer.vue'\nimport { UNDO_DELAY } from '../store/constants.js'\nimport { matchError } from '../errors/match.js'\nimport NoSentMailboxConfiguredError from '../errors/NoSentMailboxConfiguredError.js'\nimport ManyRecipientsError from '../errors/ManyRecipientsError.js'\nimport AttachmentMissingError from '../errors/AttachmentMissingError.js'\nimport SubjectMissingError from '../errors/SubjectMissingError.js'\nimport MinimizeIcon from 'vue-material-design-icons/Minus.vue'\nimport MaximizeIcon from 'vue-material-design-icons/ArrowExpand.vue'\nimport DefaultComposerIcon from 'vue-material-design-icons/ArrowCollapse.vue'\nimport { deleteDraft, saveDraft, updateDraft } from '../service/DraftService.js'\nimport useOutboxStore from '../store/outboxStore.js'\nimport { mapStores, mapState, mapActions } from 'pinia'\nimport RecipientInfo from './RecipientInfo.vue'\nimport useMainStore from '../store/mainStore.js'\nimport { messageBodyToTextInstance } from '../util/message.js'\nimport { toPlain } from '../util/text.js'\n\nexport default {\n\tname: 'NewMessageModal',\n\tcomponents: {\n\t\tNcButton,\n\t\tComposer,\n\t\tEmptyContent,\n\t\tModal,\n\t\tMinimizeIcon,\n\t\tMaximizeIcon,\n\t\tDefaultComposerIcon,\n\t\tRecipientInfo,\n\t},\n\tprops: {\n\t\taccounts: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tadditionalTrapElements: ['#reference-picker', '#text-block-picker'],\n\t\t\toriginal: undefined,\n\t\t\tdraftsPromise: Promise.resolve(),\n\t\t\tattachmentsPromise: Promise.resolve(),\n\t\t\tcanSaveDraft: true,\n\t\t\tsavingDraft: false,\n\t\t\tdraftSaved: false,\n\t\t\tuploadingAttachments: false,\n\t\t\tsending: false,\n\t\t\terror: undefined,\n\t\t\twarning: undefined,\n\t\t\tmodalFirstOpen: true,\n\t\t\tcookedComposerData: undefined,\n\t\t\tchanged: false,\n\t\t\tlargerModal: false,\n\t\t\tisLargeScreen: window.innerWidth >= 1024,\n\t\t\tisMaximized: false,\n\t\t\trecipient: {\n\t\t\t\tname: '',\n\t\t\t\temail: '',\n\t\t\t},\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapStores(useOutboxStore, useMainStore),\n\t\t...mapState(useMainStore, ['showMessageComposer']),\n\t\t...mapActions(useMainStore, ['getPreference']),\n\t\tcomposerDataBodyAsTextInstance() {\n\t\t\treturn messageBodyToTextInstance(this.composerData)\n\t\t},\n\t\tmodalTitle() {\n\t\t\tif (this.composerMessage.type === 'outbox') {\n\t\t\t\treturn t('mail', 'Edit message')\n\t\t\t}\n\t\t\tif (this.composerData.draftId !== undefined) {\n\t\t\t\treturn t('mail', 'Draft')\n\t\t\t}\n\t\t\tif (this.composerData.replyTo) {\n\t\t\t\treturn t('mail', 'Reply')\n\t\t\t}\n\t\t\tif (this.composerData.forwardFrom) {\n\t\t\t\treturn t('mail', 'Forward')\n\t\t\t}\n\t\t\treturn t('mail', 'New message')\n\t\t},\n\t\thasContactDetailsApi() {\n\t\t\treturn !!window.OCA?.Contacts?.mountContactDetails\n\t\t},\n\t\tshowRecipientPane() {\n\t\t\treturn this.hasContactDetailsApi\n\t\t\t\t&& this.composerData.to\n\t\t\t\t&& this.composerData.to.length > 0\n\t\t\t\t&& !this.largerModal\n\t\t},\n\t\tcomposerMessage() {\n\t\t\treturn this.mainStore.composerMessage\n\t\t},\n\t\tcomposerData() {\n\t\t\treturn this.mainStore.composerMessage?.data ?? {}\n\t\t},\n\t\tforwardedMessages() {\n\t\t\treturn this.composerMessage?.options?.forwardedMessages ?? []\n\t\t},\n\t\tsmartReply() {\n\t\t\treturn this.composerData?.smartReply ?? null\n\t\t},\n\t\tmodalSize() {\n\t\t\treturn this.isLargeScreen && this.hasContactDetailsApi && this.composerData.to && this.composerData.to.length > 0\n\t\t\t\t? 'large'\n\t\t\t\t: (this.largerModal ? 'large' : 'normal')\n\t\t},\n\t},\n\tcreated() {\n\t\tconst id = this.composerData?.id\n\t\tif (id) {\n\t\t\tthis.draftsPromise = Promise.resolve(id)\n\t\t}\n\t\twindow.addEventListener('beforeunload', this.onBeforeUnload)\n\t},\n\tasync mounted() {\n\t\tawait this.$nextTick()\n\t\tthis.updateCookedComposerData()\n\t\tawait this.openModalSize()\n\t\twindow.addEventListener('resize', this.checkScreenSize)\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('beforeunload', this.onBeforeUnload)\n\t\twindow.removeEventListener('resize', this.checkScreenSize)\n\t},\n\tmethods: {\n\t\tcheckScreenSize() {\n\t\t\tthis.isLargeScreen = window.innerWidth >= 1024\n\t\t},\n\t\tasync openModalSize() {\n\t\t\ttry {\n\t\t\t\tconst sizePreference = this.mainStore.getPreference('modalSize')\n\t\t\t\tthis.largerModal = sizePreference === 'large'\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error getting modal size preference', error)\n\t\t\t}\n\t\t},\n\t\tasync onMaximize() {\n\t\t\tthis.isMaximized = !this.isMaximized\n\t\t\tthis.largerModal = !this.largerModal\n\t\t\ttry {\n\t\t\t\tawait this.mainStore.savePreference({\n\t\t\t\t\tkey: 'modalSize',\n\t\t\t\t\tvalue: this.largerModal ? 'large' : 'normal',\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to save preference', error)\n\t\t\t}\n\t\t},\n\t\tasync onMinimize() {\n\t\t\tthis.isMaximized = false\n\t\t\tthis.modalFirstOpen = false\n\n\t\t\tawait this.mainStore.hideMessageComposerMutation()\n\t\t\tif (!this.mainStore.composerMessageIsSaved && this.changed) {\n\t\t\t\tawait this.onDraft(this.cookedComposerData, { showToast: true })\n\t\t\t}\n\n\t\t},\n\t\thandleShow(element) {\n\t\t\tthis.additionalTrapElements.push(element)\n\t\t},\n\t\t/**\n\t\t * @param {object} data Message data\n\t\t * @param {object=} opts Options\n\t\t * @param {boolean=} opts.showToast Show a toast after saving\n\t\t * @return {Promise<number>} Draft id promise\n\t\t */\n\t\t// TODO: when there's no draft is saved, Cloing wont move ie case 2 doesn't work\n\t\tonDraft(data, { showToast = false } = {}) {\n\t\t\tif (!this.composerMessage) {\n\t\t\t\tlogger.info('Ignoring draft because there is no message anymore', { data })\n\t\t\t\treturn this.draftsPromise\n\t\t\t}\n\t\t\tthis.changed = true\n\n\t\t\tthis.draftsPromise = this.draftsPromise.then(async (id) => {\n\t\t\t\tthis.savingDraft = true\n\t\t\t\tthis.draftSaved = false\n\t\t\t\ttry {\n\t\t\t\t\tlet idToReturn\n\t\t\t\t\tconst dataForServer = this.getDataForServer(data, true)\n\t\t\t\t\tif (!id) {\n\t\t\t\t\t\tconst { id } = await saveDraft(dataForServer)\n\t\t\t\t\t\tdataForServer.id = id\n\t\t\t\t\t\tawait this.mainStore.patchComposerData({ id, draftId: dataForServer.draftId })\n\t\t\t\t\t\tthis.canSaveDraft = true\n\t\t\t\t\t\tthis.draftSaved = true\n\n\t\t\t\t\t\tidToReturn = id\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdataForServer.id = id\n\t\t\t\t\t\tawait updateDraft(dataForServer)\n\t\t\t\t\t\tthis.canSaveDraft = true\n\t\t\t\t\t\tthis.draftSaved = true\n\t\t\t\t\t\tidToReturn = id\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.mainStore.setComposerMessageSavedMutation(true)\n\n\t\t\t\t\tif (showToast) {\n\t\t\t\t\t\tif (this.composerMessage.type === 'outbox') {\n\t\t\t\t\t\t\tshowSuccess(t('mail', 'Message saved'))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tshowSuccess(t('mail', 'Draft saved'))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (idToReturn !== undefined) {\n\t\t\t\t\t\treturn idToReturn\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('Could not save draft', { error })\n\t\t\t\t\tthis.canSaveDraft = false\n\t\t\t\t\tthis.mainStore.setComposerIndicatorDisabledMutation(false)\n\n\t\t\t\t\tif (showToast) {\n\t\t\t\t\t\tif (this.composerMessage.type === 'outbox') {\n\t\t\t\t\t\t\tshowError(t('mail', 'Failed to save message'))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tshowError(t('mail', 'Failed to save draft'))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn this.draftsPromise\n\t\t},\n\t\tgetDataForServer(data) {\n\t\t\tconst dataForServer = {\n\t\t\t\t...data,\n\t\t\t\tid: data.id,\n\t\t\t\taccountId: data.accountId,\n\t\t\t\tto: data.to,\n\t\t\t\tcc: data.cc,\n\t\t\t\tbcc: data.bcc,\n\t\t\t\tattachments: data.attachments,\n\t\t\t\taliasId: data.aliasId,\n\t\t\t\tinReplyToMessageId: data.inReplyToMessageId,\n\t\t\t\tsendAt: data.sendAt,\n\t\t\t\tdraftId: this.composerData?.draftId,\n\t\t\t}\n\n\t\t\tif (data.isHtml) {\n\t\t\t\tdelete dataForServer.bodyPlain\n\t\t\t} else {\n\t\t\t\tdelete dataForServer.bodyHtml\n\t\t\t}\n\n\t\t\treturn dataForServer\n\t\t},\n\t\tonAttachmentUploading(done, data) {\n\t\t\tthis.attachmentsPromise = this.attachmentsPromise\n\t\t\t\t.then(done)\n\t\t\t\t.then(() => this.onDraft(data))\n\t\t\t\t.then(() => logger.debug('attachments uploaded'))\n\t\t\t\t.catch((error) => logger.error('could not upload attachments', { error }))\n\t\t},\n\t\tasync onSend(data, force = false) {\n\t\t\tlogger.debug('sending message', { data })\n\n\t\t\tif (this.sending) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tawait this.attachmentsPromise\n\t\t\tthis.uploadingAttachments = false\n\t\t\tthis.sending = true\n\t\t\tthis.$emit('close')\n\t\t\ttry {\n\t\t\t\tconst now = new Date().getTime()\n\t\t\t\tfor (const attachment of data.attachments) {\n\t\t\t\t\tif (!attachment.type) {\n\t\t\t\t\t\t// todo move to backend: https://github.com/nextcloud/mail/issues/6227\n\t\t\t\t\t\tattachment.type = 'local'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst dataForServer = this.getDataForServer({\n\t\t\t\t\t...data,\n\t\t\t\t\tid: await this.draftsPromise,\n\t\t\t\t\tsendAt: data.sendAt ? data.sendAt : Math.floor((now + UNDO_DELAY) / 1000),\n\t\t\t\t})\n\t\t\t\tif (dataForServer.sendAt < Math.floor((now + UNDO_DELAY) / 1000)) {\n\t\t\t\t\tdataForServer.sendAt = Math.floor((now + UNDO_DELAY) / 1000)\n\t\t\t\t}\n\t\t\t\tif (!force && !data.subject?.trim()) {\n\t\t\t\t\tthrow new SubjectMissingError()\n\t\t\t\t}\n\n\t\t\t\tif (!force && data.attachments.length === 0) {\n\t\t\t\t\tconst lines = toPlain(messageBodyToTextInstance(data)).value.toLowerCase().split('\\n')\n\t\t\t\t\tconst wordAttachment = t('mail', 'attachment').toLowerCase()\n\t\t\t\t\tconst wordAttached = t('mail', 'attached').toLowerCase()\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line.startsWith('>') || line.startsWith('--')) {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (line.includes(wordAttachment) || line.includes(wordAttached)) {\n\t\t\t\t\t\t\tthrow new AttachmentMissingError()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!this.composerData.id) {\n\t\t\t\t\t// This is a new message\n\t\t\t\t\tconst { id } = await saveDraft(dataForServer)\n\t\t\t\t\tdataForServer.id = id\n\t\t\t\t\tawait this.outboxStore.enqueueFromDraft({\n\t\t\t\t\t\tdraftMessage: dataForServer,\n\t\t\t\t\t\tid,\n\t\t\t\t\t})\n\t\t\t\t} else if (this.composerData.type === 0) {\n\t\t\t\t\t// This is an outbox message\n\t\t\t\t\tdataForServer.id = this.composerData.id\n\t\t\t\t\tawait this.outboxStore.updateMessage({\n\t\t\t\t\t\tmessage: dataForServer,\n\t\t\t\t\t\tid: this.composerData.id,\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// This is a draft\n\t\t\t\t\tawait updateDraft(dataForServer)\n\t\t\t\t\tdataForServer.id = this.composerData.id\n\t\t\t\t\tawait this.outboxStore.enqueueFromDraft({\n\t\t\t\t\t\tdraftMessage: dataForServer,\n\t\t\t\t\t\tid: this.composerData.id,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif (!data.sendAt || data.sendAt < Math.floor((now + UNDO_DELAY) / 1000)) {\n\t\t\t\t\t// Awaiting here would keep the modal open for a long time and thus block the user\n\t\t\t\t\tthis.outboxStore.sendMessageWithUndo({ id: dataForServer.id }).catch((error) => {\n\t\t\t\t\t\tlogger.debug('Could not send message', { error })\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (dataForServer.id) {\n\t\t\t\t\t// Remove old draft envelope\n\t\t\t\t\tthis.mainStore.removeMessageMutation({ id: dataForServer.id })\n\t\t\t\t}\n\t\t\t\tawait this.mainStore.stopComposerSession()\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = await matchError(error, {\n\t\t\t\t\t[NoSentMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\tlogger.error('could not send message', { error })\n\t\t\t\t\t\treturn t('mail', 'No sent folder configured. Please pick one in the account settings.')\n\t\t\t\t\t},\n\t\t\t\t\t[ManyRecipientsError.getName()]() {\n\t\t\t\t\t\tlogger.error('could not send message', { error })\n\t\t\t\t\t\treturn t('mail', 'You are trying to send to many recipients in To and/or Cc. Consider using Bcc to hide recipient addresses.')\n\t\t\t\t\t},\n\t\t\t\t\t// eslint-disable-next-line n/handle-callback-err\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not send message', { error })\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tthis.warning = await matchError(error, {\n\t\t\t\t\t[SubjectMissingError.getName()]() {\n\t\t\t\t\t\tlogger.info('showing the missing subject warning', { error })\n\t\t\t\t\t\treturn t('mail', 'Your message has no subject. Do you want to send it anyway?')\n\t\t\t\t\t},\n\t\t\t\t\t[AttachmentMissingError.getName()]() {\n\t\t\t\t\t\tlogger.info('showing the did you forgot an attachment warning', { error })\n\t\t\t\t\t\treturn t('mail', 'You mentioned an attachment. Did you forget to add it?')\n\t\t\t\t\t},\n\t\t\t\t\t// eslint-disable-next-line n/handle-callback-err\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.warn('could not send message', { error })\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.sending = false\n\t\t\t}\n\n\t\t\t// Sync sent mailbox when it's currently open\n\t\t\tconst account = this.mainStore.getAccount(data.accountId)\n\t\t\tif (account && parseInt(this.$route.params.mailboxId, 10) === account.sentMailboxId) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.mainStore.syncEnvelopes({\n\t\t\t\t\t\tmailboxId: account.sentMailboxId,\n\t\t\t\t\t\tquery: '',\n\t\t\t\t\t\tinit: false,\n\t\t\t\t\t})\n\t\t\t\t}, 500)\n\t\t\t}\n\t\t},\n\n\t\tasync onForceSend() {\n\t\t\tawait this.onSend(this.cookedComposerData, true)\n\t\t},\n\t\trecipientToRfc822(recipient) {\n\t\t\tif (recipient.email === recipient.label) {\n\t\t\t\t// From mailto or sender without proper label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.label === '') {\n\t\t\t\t// Invalid label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.email.search(/^[a-zA-Z]+:/) === 0) {\n\t\t\t\t// Group integration\n\t\t\t\treturn recipient.email\n\t\t\t} else {\n\t\t\t\t// Proper layout with label\n\t\t\t\treturn `\"${recipient.label}\" <${recipient.email}>`\n\t\t\t}\n\t\t},\n\t\tasync discardDraft() {\n\t\t\tlet id = await this.draftsPromise\n\t\t\tconst isOutbox = this.composerMessage.type === 'outbox'\n\t\t\tif (isOutbox) {\n\t\t\t\tid = this.composerMessage.data.id\n\t\t\t}\n\n\t\t\t// It's safe to stop the session and ultimately destroy this component as only data\n\t\t\t// local this this function is accessed afterwards\n\t\t\tawait this.mainStore.stopComposerSession()\n\n\t\t\ttry {\n\t\t\t\tif (isOutbox) {\n\t\t\t\t\tawait this.outboxStore.deleteMessage({ id })\n\t\t\t\t} else {\n\t\t\t\t\tdeleteDraft(id)\n\t\t\t\t}\n\t\t\t\tshowSuccess(t('mail', 'Message discarded'))\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not discard draft', { error })\n\t\t\t\tshowError(t('mail', 'Could not discard message'))\n\t\t\t}\n\t\t},\n\t\tconvertEditorBody(composerData) {\n\t\t\tif (composerData.isHtml) {\n\t\t\t\treturn composerData.bodyHtml\n\t\t\t}\n\n\t\t\treturn composerData.bodyPlain\n\t\t},\n\t\tpatchEditorBody(editorBody) {\n\t\t\tif (this.composerData.isHtml) {\n\t\t\t\tthis.patchComposerData({ bodyHtml: editorBody })\n\t\t\t} else {\n\t\t\t\tthis.patchComposerData({ bodyPlain: editorBody })\n\t\t\t}\n\t\t},\n\t\tupdateCookedComposerData() {\n\t\t\tif (!this.$refs.composer) {\n\t\t\t\t// Composer is not rendered yet\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Extract data to save drafts while the composer is not rendered.\n\t\t\t// This is hacky but there is no other way for now.\n\t\t\tthis.cookedComposerData = this.$refs.composer.getMessageData()\n\t\t},\n\t\tasync patchComposerData(data) {\n\t\t\tthis.changed = true\n\t\t\tthis.updateCookedComposerData()\n\t\t\tawait this.mainStore.patchComposerData(data)\n\t\t},\n\t\tonBeforeUnload(e) {\n\t\t\tif (this.canSaveDraft && this.changed) {\n\t\t\t\te.preventDefault()\n\t\t\t\te.returnValue = true\n\t\t\t\tthis.mainStore.showMessageComposerMutation()\n\t\t\t} else {\n\t\t\t\tconsole.info('No unsaved changes. See you!')\n\t\t\t}\n\t\t},\n\t\tasync onClose() {\n\t\t\tthis.mainStore.setComposerIndicatorDisabledMutation(true)\n\t\t\tawait this.onMinimize()\n\n\t\t\t// End the session only if all unsaved changes have been saved\n\t\t\tif (this.canSaveDraft && ((this.changed && this.draftSaved) || !this.changed)) {\n\t\t\t\tlogger.debug('Closing composer session due to close button click')\n\t\t\t\tawait this.mainStore.stopComposerSession({\n\t\t\t\t\trestoreOriginalSendAt: true,\n\t\t\t\t\tmoveToImap: this.changed,\n\t\t\t\t\tid: this.composerData.id,\n\t\t\t\t})\n\n\t\t\t}\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n@media only screen and (max-width: 600px) {\n\t:deep(.modal-container) {\n\t\tmax-width: 80%;\n\t}\n}\n\n:deep(.modal-wrapper .modal-container) {\n\toverflow-y: auto !important;\n\toverflow-x: auto !important;\n\t// from original Modal max-height\n\theight: 90%;\n\t// Max editor + modal height\n\tmax-height: 700px !important;\n}\n\n.minimize-button {\n\tfloat: inline-end;\n\tposition: absolute;\n\ttop: 4px;\n\tinset-inline-end: 63px;\n}\n\n.maximize-button {\n\tfloat: inline-end;\n\tposition: absolute;\n\ttop: 4px;\n\tinset-inline-end: 33px;\n\n}\n\n.empty-content{\n\theight: 100%;\n\tdisplay: flex;\n}\n\n.modal-content {\n\tdisplay: flex;\n\theight: 100%;\n\tflex-direction: row;\n\twidth: 100%;\n}\n\n.left-pane {\n\tflex: 1;\n\toverflow-y: auto;\n}\n\n.right-pane {\n\tflex: 0 0 370px;\n\toverflow-y: auto;\n\tpadding-inline-start: 5px;\n\tborder-inline-start: 1px solid #ccc;\n\t@media (max-width: 1024px) {\n\t\tdisplay: none;\n\t}\n}\n\n.modal-content.with-recipient .left-pane {\n\tflex: 1;\n}\n\n.modal-content .left-pane {\n\twidth: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=style&index=0&id=2f09f45c&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=style&index=0&id=2f09f45c&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./NewMessageModal.vue?vue&type=template&id=2f09f45c&scoped=true\"\nimport script from \"./NewMessageModal.vue?vue&type=script&lang=js\"\nexport * from \"./NewMessageModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./NewMessageModal.vue?vue&type=style&index=0&id=2f09f45c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f09f45c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","async","getFileData","path","response","getClient","stat","data","details","props","name","components","Close","Cloud","EmailArrowRightIcon","attachment","type","Object","required","uploading","Boolean","default","progress","sizeString","finished","computed","previewURL","hasPreview","generateUrl","getIcon","OC","MimeType","getIconUrl","fileType","extension","fileName","split","pop","methods","onDelete","$emit","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","_vm","this","_c","_self","staticClass","class","error","imageBlobURL","attrs","_v","_e","_s","displayName","style","percent","on","$event","mimes","FilePicker","ComposerAttachment","ChevronDown","ChevronUp","value","Array","bus","uploadSizeLimit","Number","uploads","attachments","isToggle","hasNextLine","isAttachementPickerOpen","isLinkPickerOpen","attachementPickerButtons","label","t","callback","onAddCloudAttachment","linkPickerButtons","onAddCloudAttachmentLink","hasAttachmentErrors","some","uploadProgress","uploaded","total","toFixed","watch","$nextTick","prevTop","$refs","i","top","$el","getBoundingClientRect","length","created","onAddLocalAttachment","openAttachementPicker","OpenLinkPicker","onAddMessageAsAttachment","map","trimStart","size","formatBytes","isImage","downloadUrl","mimeUrl","filterAttachements","node","downloadShareAttribute","attributes","JSON","parse","find","shareAttribute","key","undefined","downloadPermissions","permissions","PERMISSION_READ","localAttachments","click","emitNewAttachments","concat","totalSizeOfUpload","values","reduce","acc","upload","onLocalAttachmentSelected","e","Vue","toUpload","sumBy","prop","target","files","newTotal","logger","debug","existingUploads","limit","showAttachmentFileSizeWarning","prog","item","changeProgress","promises","file","controller","AbortController","generatePreview","uploadLocalAttachment","catch","$set","then","_ref","info","done","Promise","all","nodes","paths","cloudAttachement","filesFromCloud","sum","_cloudFile","_toAttachmentData","fileid","assign","cloudAttachementLink","url","token","axios","post","generateOcsUrl","shareType","shareWith","ocs","meta","message","console","showError","shareFile","getRequestToken","appendToBodyAtCursor","_ref2","num","showWarning","n","formatFileSize","abort","val","filter","a","updatedUploads","keys","toAppend","emit","bytes","decimals","arguments","dm","Math","floor","log","parseFloat","pow","_progress","URL","createObjectURL","indexOf","count","hide","active","_l","ref","refInFor","staticStyle","close","ListItem","NcDialog","NcButton","IconCheck","picked","mapState","useMainStore","handleClick","textBlock","handleClose","getMyTextBlocks","getSharedTextBlocks","scopedSlots","_u","fn","proxy","ListItemIcon","option","isInternal","mapStores","mounted","mainStore","getPreference","isInternalAddress","email","removeRecipient","field","photo","preventDefault","String","recipients","quotedText","isReplyOrForward","editor","isEncrypted","isPgpgMessage","quotedMail","window","mailvelope","createEditorContainer","pull","r","armored","encrypt","debouncedSearch","debouncePromise","findRecipient","use","Autosize","MailvelopeEditor","Actions","ActionButton","ActionCheckbox","ActionInput","ActionRadio","ButtonVue","ComposerAttachments","TextBlockModal","ChevronLeft","Delete","Download","IconUpload","IconFolder","IconPublic","IconLinkPicker","NcSelect","NcIconSvgWrapper","Paperclip","TextEditor","RecipientListItem","Send","SendClock","IconFormat","NcReferencePickerModal","fromAccount","fromAlias","to","cc","bcc","subject","body","html","editorBody","inReplyToMessageId","replyTo","forwardFrom","forwardedMessages","smartReply","sendAt","attachmentsData","canSaveDraft","uploadingAttachments","savingDraft","draftSaved","smimeSign","smimeEncrypt","isFirstOpen","requestMdn","accounts","selectedDate","Date","setHours","getHours","sending","textBlockSvg","showCC","showBCC","selectedAlias","autocompleteRecipients","newRecipients","subjectVal","bodyVal","noReply","startsWith","saveDraftDebounced","debounce","saveDraft","selectTo","selectCc","selectBcc","mitt","available","keyRing","keysMissing","editorMode","format","EDITOR_MODE_TEXT","EDITOR_MODE_HTML","requestMdnVal","changeSignature","loadingIndicatorTo","loadingIndicatorCc","loadingIndicatorBcc","isAddAttachmentsOpen","isActionsOpen","isMoreActionsOpen","sendAtVal","firstDayDatetimePicker","getFirstDay","formatter","stringify","date","moment","toDate","autoLimit","wantsSmimeSign","wantsSmimeEncrypt","isPickerOpen","isTextBlockPickerOpen","recipientSearchTerms","smimeSignAliases","isPickerAvailable","parseInt","getNcVersion","aliases","cnt","isUnified","flatMap","account","aliasId","selectId","signature","emailAddress","signatureAboveQuote","smimeCertificateId","selectable","connectionStatus","alias","flat","allRecipients","dateToday","setDate","getDate","attachmentSizeLimit","selectableRecipients","uniqBy","recipient","isForward","isReply","canSend","smimeCertificateForCurrentAlias","missingSmimeCertificatesForRecipients","editorPlainText","submitButtonTitle","convertToLocalDate","dateTomorrowMorning","today","setTime","getTime","dateTomorrowAfternoon","dateMondayMorning","getDay","customSendTime","showAmPm","locale","getLocale","localeData","longDateFormat","toLowerCase","isSendAtTomorrowMorning","isSendAtTomorrowAfternoon","isSendAtMondayMorning","isSendAtCustom","smimeCertificateForAlias","shouldSmimeSign","shouldSmimeEncrypt","missingCertificates","forEach","getSmimeCertificateByEmail","textBlocks","title","content","reset","checkRecipientsKeys","newAliases","newAlias","onAliasChange","handler","aliasEmailAddress","immediate","beforeMount","setAlias","initBody","onMailvelopeLoaded","getMailvelope","toLabel","focus","att","messageId","databaseId","env","getEnvelope","areTextBlocksFetched","fetchSharedTextBlocks","fetchMyTextBlocks","beforeDestroy","removeEventListener","clearOnBlur","event","includes","handleShow","openPicker","openTextBlockPicker","closePicker","filterOption","search","list","select","toLocaleLowerCase","previous","currentAccountId","getMailbox","$route","params","mailboxId","accountId","keysValid","validKeyForAddress","buildReplyBody","toPlain","toHtml","from","dateInt","getMessageData","isHtml","isPgpMime","bodyHtml","bodyPlain","draftData","insertSignature","trigger","TRIGGER_CHANGE_ALIAS","TRIGGER_EDITOR_READY","editorExecute","detect","onPicked","onTextBlockInsert","onEditorInput","text","onEditorReady","getData","onChangeSendLater","timestamp","toLocaleString","getCanonicalLocale","month","day","hour","minute","onAutocomplete","term","addressType","selfRecipients","results","result","getKeyring","handleMention","onNewToAddr","onNewAddr","onNewCcAddr","onNewBccAddr","onSend","_","force","mailvelopeEditor","formatAliases","disabledDatetimepickerDate","minimumDate","setSeconds","getSeconds","disabledDatetimepickerTime","now","onRemoveRecipient","removeRecipientTo","removeRecipientCc","removeRecipientBcc","toggleViewMode","setEditorModeHtml","setEditorModeText","dialogs","confirmDestructive","YES_NO_BUTTONS","confirm","confirmClasses","cancel","decision","certificateId","getSmimeCertificate","smimeSignCheck","savePreference","createRecipientOption","getSubnameForRecipient","source","apply","filter-by","clear-search-on-blur","events","_g","_b","_ref3","_ref4","_ref5","_ref6","directives","rawName","expression","domProps","composing","join","model","$$v","isScheduledSendingDisabled","AttachmentMissingError","Error","constructor","super","getName","SubjectMissingError","vm","mountContactDetails","OCA","Contacts","contactDetails","$destroy","Avatar","IconArrowDown","IconArrowUp","DisplayContactDetails","expandedRecipients","mapGetters","isArray","composerMessage","toggleExpand","index","isExpanded","messageBodyToTextInstance","plain","Composer","EmptyContent","Modal","MinimizeIcon","MaximizeIcon","DefaultComposerIcon","RecipientInfo","additionalTrapElements","original","draftsPromise","resolve","attachmentsPromise","warning","modalFirstOpen","cookedComposerData","changed","largerModal","isLargeScreen","innerWidth","isMaximized","useOutboxStore","mapActions","composerDataBodyAsTextInstance","composerData","modalTitle","draftId","hasContactDetailsApi","showRecipientPane","modalSize","addEventListener","onBeforeUnload","updateCookedComposerData","openModalSize","checkScreenSize","sizePreference","onMaximize","onMinimize","hideMessageComposerMutation","composerMessageIsSaved","onDraft","showToast","element","idToReturn","dataForServer","getDataForServer","updateDraft","patchComposerData","setComposerMessageSavedMutation","showSuccess","setComposerIndicatorDisabledMutation","onAttachmentUploading","UNDO_DELAY","trim","lines","wordAttachment","wordAttached","line","outboxStore","updateMessage","enqueueFromDraft","draftMessage","sendMessageWithUndo","removeMessageMutation","stopComposerSession","matchError","NoSentMailboxConfiguredError","ManyRecipientsError","warn","getAccount","sentMailboxId","setTimeout","syncEnvelopes","query","init","onForceSend","recipientToRfc822","discardDraft","isOutbox","deleteMessage","deleteDraft","convertEditorBody","patchEditorBody","composer","returnValue","showMessageComposerMutation","onClose","restoreOriginalSendAt","moveToImap","showMessageComposer"],"sourceRoot":""}