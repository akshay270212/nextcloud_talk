(self.webpackChunkcalendar=self.webpackChunkcalendar||[]).push([["src_utils_closestColor_js-src_utils_moment_js-src_utils_uidToColor_js-src_components_Editor_F-24b9af"],{27203:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var a=n(60649),o=n(58109),r=n(38680),l=n(53820),s=n(28934),d=n(8772),c=n(95308),i=n(46911),m=n(76333),u=n(16406),_=n(88075),p=n(53334),h=n(44487),y=n(57096),v=n(91882),f=n(83614),g=n(13779),A=n(41975),b=n(22600),C=n(88730),j=n(51849),I=n(38679),T=n(6088),D=n(88484),O=n(83591);const R={name:"FreeBusy",components:{NcSelect:m.EQ,FullCalendar:a.A,InviteesListSearch:A.A,NcActions:m.B6,NcActionButton:m.Ko,NcDateTimePickerNative:m.c,NcModal:m.FH,NcButton:m.x1,NcPopover:m.rI,NcUserBubble:m.Z9,NcListItemIcon:m.y_,ChevronRightIcon:h.A,ChevronLeftIcon:y.A,CheckIcon:v.A,HelpCircleIcon:g.A,Close:f.A},mixins:[u.A],props:{organizer:{type:Object,required:!0},attendees:{type:Array,required:!0},startDate:{type:Date,required:!0},endDate:{type:Date,required:!0},allDay:{type:Boolean,default:!1},eventTitle:{type:String,default:""},alreadyInvitedEmails:{type:Array,default:()=>[]},dialogName:{type:String,required:!1,default:null},disableFindTime:{type:Boolean,default:!1}},data(){return{loadingIndicator:!0,currentIsAllDay:this.allDay,currentStart:this.startDate,currentEnd:this.endDate,lang:(0,d.S)().locale,formattingOptions:{weekday:"long",year:"numeric",month:"long",day:"numeric"},freeSlots:[],selectedSlot:null,view:"timeGridWeek",navigatingWithButtons:!1}},computed:{...(0,j.aH)(I.A,{timezoneId:"getResolvedTimezone"}),...(0,j.aH)(I.A,{locale:"momentLocale"}),...(0,j.aH)(I.A,["showWeekends","showWeekNumbers","timezone"]),...(0,j.aH)(T.A,{personalCalendarColor:"getPersonalCalendarColor"}),isRTL:()=>(0,p.V8)(),weekNumber(){return(0,O.A)(this.currentStart,this.view,this.locale)},placeholder(){return this.$t("calendar","Suggested times")},plugins:()=>[o.A,(0,c.A)(),i.A,r.Ay],formattedCurrentStart(){return this.currentStart.getDate()!==this.currentEnd.getDate()?this.currentStart.toLocaleDateString(this.lang,this.formattingOptions)+" - "+this.currentEnd.toLocaleDateString(this.lang,this.formattingOptions):this.currentStart.toLocaleDateString(this.lang,this.formattingOptions)},formattedCurrentTime(){const e={hour:"2-digit",minute:"2-digit",hour12:!0},t=this.currentStart.toLocaleTimeString(this.lang,e),n=this.currentEnd?.toLocaleTimeString(this.lang,e);return`${t} - ${n} `},formattedTimeZone(){return this.timezoneId.replace("/","-")},eventSources(){const e=this.attendees.map((e=>e.attendeeProperty)),t=new _.Uy("ATTENDEE",this.organizer.attendeeProperty.email);return t.commonName=this.organizer.attendeeProperty.commonName,[...e,t].map((e=>(0,l.A)(this._uid,this.organizer.attendeeProperty,e)))},resources(){const e=[],t={CHAIR:this.$t("calendar","chairperson"),"REQ-PARTICIPANT":this.$t("calendar","required participant"),"NON-PARTICIPANT":this.$t("calendar","non-participant"),"OPT-PARTICIPANT":this.$t("calendar","optional participant")};for(const n of[this.organizer,...this.attendees]){let a=n.commonName||n.uri.slice(7);a=n===this.organizer?this.$t("calendar","{organizer} (organizer)",{organizer:a}):this.$t("calendar","{attendee} ({role})",{attendee:a,role:t[n.role]}),e.push({id:n.attendeeProperty.email,title:a})}return e.sort(((e,t)=>(e.id>t.id)-(e.id<t.id))),e},options(){return{initialView:this.view,initialDate:this.currentStart,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",eventSources:this.eventSources,plugins:this.plugins,editable:!1,selectable:!0,select:this.handleSelect,eventDidMount:this.eventDidMount,eventChange:this.handleChange,...(0,s.W)(),...(0,d.S)(),height:"parent",loading:this.loading,headerToolbar:!1,timeZone:this.timezoneId,titleFormat:{month:"long",year:"numeric",day:"numeric",weekday:"long"},dateClick:this.findFreeSlots()}}},watch:{view(e){this.$refs.freeBusyFullCalendar.getApi().changeView(e)},attendees(e){0===e.length&&this.$emit("close:no-attendees")}},mounted(){const e=this.$refs.freeBusyFullCalendar.getApi();this.view=this.attendees.length>4||this.isMobile?"timeGridDay":"timeGridWeek",this.allDay&&this.currentEnd.setDate(this.currentStart.getDate()+1),e.addEvent({id:"selected-event-slot",title:"Selected slot",start:this.currentStart,end:this.currentEnd,textColor:"var(--color-main-text)",backgroundColor:"rgba(0, 0, 0, 0)",editable:!0,overlap:!0,allDay:this.allDay}),this.findFreeSlots(),this.$nextTick((()=>e.updateSize()))},methods:{updateView(e){this.$refs.freeBusyFullCalendar.getApi().changeView(e),this.view=e},handleSelect(e){const t=this.$refs.freeBusyFullCalendar.getApi();this.currentStart=e.start,this.currentEnd=e.end,this.currentIsAllDay=e.allDay,t.getEventById("selected-event-slot").setDates(e.start,e.end)},handleChange(e){this.navigatingWithButtons?this.navigatingWithButtons=!1:"selected-event-slot"===e.event.id&&(this.currentStart=e.event.start,this.currentEnd=e.event.end)},eventDidMount(e){const t=e.el;if("selected-event-slot"===e.event.id)return void t.style.setProperty("border",`2px solid ${this.personalCalendarColor}`,"important");if(e.el.classList.contains("free-busy-busy-unavailable--organizer"))return;if(e.el.classList.contains("free-busy-organizer"))return void(t.style.background=`repeating-linear-gradient(45deg, ${this.personalCalendarColor}, ${this.personalCalendarColor} 1px, transparent 1px, transparent 3.5px)`);const n=(0,D.GM)(e.event.title);t.style.background=`repeating-linear-gradient(45deg, ${n}, ${n} 1px, transparent 1px, transparent 3.5px)`},save(){this.$emit("update-dates",{start:this.currentStart,end:this.currentEnd})},addAttendee(e){this.$emit("add-attendee",e),this.findFreeSlots()},removeAttendee(e){this.$emit("remove-attendee",e),this.findFreeSlots()},loading(e){this.loadingIndicator=e},handleActions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.navigatingWithButtons=!0;const n=this.$refs.freeBusyFullCalendar.getApi();switch(e){case"today":n.today();break;case"prev":n.prev();break;case"next":n.next();break;case"picker":n.gotoDate(t)}const a=n.getDate(),o=new Date(this.currentStart),r=new Date(this.currentEnd);o.setDate(a.getDate()),o.setMonth(a.getMonth()),o.setFullYear(a.getFullYear()),r.setDate(this.currentIsAllDay?a.getDate()+1:a.getDate()),r.setMonth(a.getMonth()),r.setFullYear(a.getFullYear()),this.currentStart=o,this.currentEnd=r,n.getEventById("selected-event-slot").setStart(this.currentStart),n.getEventById("selected-event-slot").setEnd(this.currentEnd),this.findFreeSlots()},async findFreeSlots(){if(this.currentStart.getDate()!==this.currentEnd.getDate())return;const e=new Date(this.currentStart),t=new Date(this.currentEnd);try{const n=new Date(e);n.setDate(e.getDate()+8);const a=await(0,b.j)(this.organizer.attendeeProperty,this.attendees.map((e=>e.attendeeProperty)),e,n,this.timezoneId),o=(0,b.l)(e,t,a.events);o.forEach((e=>{e.displayStart=(0,C.A)(e.start,!1,(0,d.S)().locale)})),this.freeSlots=o}catch(e){throw console.error("Error occurred while finding free slots:",e),e}},setSlotSuggestion(e){this.loading(!0),this.selectedSlot=e;const t=this.$refs.freeBusyFullCalendar.getApi();t.gotoDate(e.start),this.currentStart=e.start,this.currentEnd=e.end,t.getEventById("selected-event-slot").setStart(this.currentStart),t.getEventById("selected-event-slot").setEnd(this.currentEnd);const n=()=>{t.getDate()!==e.start?setTimeout(n,100):this.loading(!1)};n()}}}},63939:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(76333),o=n(28928),r=n(80502),l=n(52193),s=n(70715),d=n(17334),c=n.n(d),i=n(63814),m=n(89013),u=n(19425),_=n(85168),p=n(15745);const h={name:"InviteesListSearch",components:{Avatar:a.Bx,NcSelect:a.EQ,GoogleCirclesCommunitiesIcon:u.A},props:{alreadyInvitedEmails:{type:Array,required:!0},organizer:{type:Object,required:!1}},data:()=>({isLoading:!1,inputGiven:!1,matches:[],isCirclesEnabled:r.A}),computed:{placeholder(){return this.$t("calendar","Search for emails, users, contacts, contact groups or teams")},noResult(){return this.$t("calendar","No match found")}},methods:{findAttendees:c()((async function(e){this.isLoading=!0;const t=[];if(e.length>0){const n=[this.findAttendeesFromContactsAPI(e),this.findAttendeesFromDAV(e)];r.A&&n.push(this.findAttendeesFromCircles(e));const[a,o,l]=await Promise.all(n);t.push(...a),t.push(...o),r.A&&t.push(...l);if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)){t.find((t=>t.email.toLowerCase()===e.toLowerCase()))||t.unshift({calendarUserType:"INDIVIDUAL",commonName:e,email:e,isUser:!1,avatar:null,language:null,timezoneId:null,hasMultipleEMails:!1,dropdownName:e})}for(const e of t)e.uid=(0,m.z)();this.isLoading=!1,this.inputGiven=!0}else this.inputGiven=!1,this.isLoading=!1;this.matches=t}),500),addAttendee(e){if("circle"===e.type&&((0,_.cf)(this.$t("calendar","Note that members of circles get invited but are not synced yet.")),this.resolveCircleMembers(e.id,e.email)),"contactsgroup"!==e.type)this.$emit("add-attendee",e);else{(0,_.cf)(this.$t("calendar","Note that members of contact groups get invited but are not synced yet.")),this.getContactGroupMembers(e.commonName);const t={calendarUserType:"GROUP",commonName:e.commonName,dropdownName:e.dropdownName,email:e.email,isUser:!1,subtitle:e.subtitle,type:"contactsgroup"};this.$emit("add-attendee",t)}},async resolveCircleMembers(e,t){let n;try{n=await(0,l.S)(e)}catch(e){return console.debug(e),[]}n.data.forEach((e=>{this.organizer&&e.email===this.organizer.uri||this.$emit("add-attendee",e)}))},async getContactGroupMembers(e){let t;try{t=await s.Ay.post((0,i.uM)("calendar","index.php")+"/v1/autocompletion/groupmembers",{groupName:e})}catch(e){return console.error("Failed to fetch contact group members",e),[]}t.data.forEach((e=>{this.organizer&&e.email===this.organizer.uri||this.$emit("add-attendee",e)}))},async findAttendeesFromContactsAPI(e){let t;try{t=await s.Ay.post((0,i.uM)("calendar","index.php")+"/v1/autocompletion/attendee",{search:e})}catch(e){return console.debug(e),[]}return t.data.reduce(((e,t)=>{const n=t.emails.length>1;return t.emails.forEach((a=>{let o;o=t.name&&!n?t.name:t.name&&n?`${t.name} (${a})`:a,a&&this.alreadyInvitedEmails.includes((0,p.nO)(a))||("contactsgroup"!==t.type?e.push({calendarUserType:"INDIVIDUAL",commonName:t.name,email:a,isUser:!1,avatar:t.photo,language:t.lang,timezoneId:t.tzid,hasMultipleEMails:n,dropdownName:o}):e.push({calendarUserType:"GROUP",commonName:t.name,subtitle:this.$n("calendar","%n member","%n members",t.members),members:{length:t.members},email:a,isUser:!1,avatar:t.photo,language:t.lang,timezoneId:t.tzid,hasMultipleEMails:!1,dropdownName:o,type:"contactsgroup"}))})),e}),[])},async findAttendeesFromDAV(e){let t;try{t=await(0,o.Ze)(e)}catch(e){return console.debug(e),[]}return t.filter((e=>!!e.email&&(!this.alreadyInvitedEmails.includes(e.email)&&!["ROOM","RESOURCE"].includes(e.calendarUserType)))).map((e=>({commonName:e.displayname,calendarUserType:e.calendarUserType,email:e.email,language:e.language,isUser:"INDIVIDUAL"===e.calendarUserType,avatar:decodeURIComponent(e.userId),hasMultipleEMails:!1,dropdownName:e.displayname?[e.displayname,e.email].join(" "):e.email})))},async findAttendeesFromCircles(e){let t;try{t=await(0,l.D)(e)}catch(e){return console.debug(e),[]}return t.filter((e=>!0)).map((e=>({commonName:e.displayname,calendarUserType:"GROUP",email:"circle+"+e.id+"@"+e.instance,isUser:!1,dropdownName:e.displayname,type:"circle",id:e.id,subtitle:this.$n("calendar","%n member","%n members",e.population)})))}}}},14600:(e,t,n)=>{"use strict";n.d(t,{X:()=>a,Y:()=>o});var a=function(){var e=this,t=e._self._c;return t("NcModal",{attrs:{size:"full",name:e.dialogName||e.$t("calendar","Availability of attendees, resources and rooms")},on:{close:function(t){return e.$emit("close")}}},[t("div",{staticClass:"modal"},[t("div",{staticClass:"modal__content"},[e.loadingIndicator?t("div",{staticClass:"loading-indicator"},[t("div",{staticClass:"icon-loading"})]):e._e(),e._v(" "),t("div",{staticClass:"modal__content__header"},[e.isMobile&&e.freeSlots&&!e.disableFindTime?t("p",[t("NcSelect",{staticClass:"modal__content__header__available-slots",attrs:{options:e.freeSlots,placeholder:e.placeholder,clearable:!1,"input-id":"slot",label:"displayStart","label-outside":!0,value:e.selectedSlot},on:{"option:selected":e.setSlotSuggestion},scopedSlots:e._u([{key:"selected-option",fn:function(t){let{}=t;return[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("calendar","Suggestion accepted"))+"\n\t\t\t\t\t\t")]}}],null,!1,1565055063)})],1):e._e(),e._v(" "),e.isMobile?t("div",{staticClass:"modal__content__header__attendees"},[e.isMobile?t("InviteesListSearch",{staticClass:"modal__content__header__attendees__search",attrs:{"already-invited-emails":e.alreadyInvitedEmails,organizer:e.organizer},on:{"add-attendee":e.addAttendee}}):e._e(),e._v(" "),t("NcUserBubble",{attrs:{size:24,"display-name":e.organizer.commonName}}),e._v(" "),e._l(e.attendees,(function(n){return t("NcUserBubble",{key:n.id,staticClass:"modal__content__header__attendees__user-bubble",attrs:{size:24,"display-name":n.commonName},scopedSlots:e._u([{key:"name",fn:function(){return[t("a",{staticClass:"icon-close",attrs:{href:"#",title:"Remove user"},on:{click:function(t){return e.removeAttendee(n)}}})]},proxy:!0}],null,!0)})}))],2):e._e()]),e._v(" "),t("div",{staticClass:"modal__content__actions",class:{"modal__content__actions--mobile":e.isMobile}},[e.isMobile?t("div",{staticClass:"modal__content__actions__date date-navigation"},[t("NcButton",{attrs:{type:"secondary","aria-label":e.t("calendar","Today")},on:{click:function(t){return e.handleActions("today")}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("calendar","Today"))+"\n\t\t\t\t\t")]),e._v(" "),t("NcButton",{attrs:{type:"secondary","aria-label":e.isRTL?e.t("calendar","Previous date"):e.t("calendar","Next date")},on:{click:function(t){return e.handleActions(e.isRTL?"next":"prev")}},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isRTL?t("ChevronRightIcon",{attrs:{size:22}}):t("ChevronLeftIcon",{attrs:{size:22}})]},proxy:!0}],null,!1,1358314897)}),e._v(" "),t("NcDateTimePickerNative",{attrs:{"hide-label":!0,value:e.currentStart},on:{input:t=>e.handleActions("picker",t)}}),e._v(" "),t("NcButton",{attrs:{type:"secondary","aria-label":e.isRTL?e.t("calendar","Next date"):e.t("calendar","Previous date")},on:{click:function(t){return e.handleActions(e.isRTL?"prev":"next")}},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isRTL?t("ChevronLeftIcon",{attrs:{size:22}}):t("ChevronRightIcon",{attrs:{size:22}})]},proxy:!0}],null,!1,1870829617)}),e._v(" "),t("NcPopover",{attrs:{"focus-trap":!1},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("NcButton",{attrs:{type:"tertiary-no-background","aria-label":e.t("calendar","Legend")},scopedSlots:e._u([{key:"icon",fn:function(){return[t("HelpCircleIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2680586304)})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"freebusy-caption"},[t("div",{staticClass:"freebusy-caption__calendar-user-types"}),e._v(" "),t("div",{staticClass:"freebusy-caption__colors"},[t("div",{staticClass:"freebusy-caption-item"},[t("div",{staticClass:"freebusy-caption-item__color"}),e._v(" "),t("div",{staticClass:"freebusy-caption-item__label"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.$t("calendar","Out of office"))+"\n\t\t\t\t\t\t\t\t\t\t")])])])])]},proxy:!0}],null,!1,843471570)})],1):e._e()]),e._v(" "),t("div",{staticClass:"modal__content__title",class:{"modal__content__title--mobile":e.isMobile}},[e.isMobile?e._e():t("div",{staticClass:"modal__content__actions__title__date date-navigation"},[t("NcButton",{attrs:{type:"secondary","aria-label":e.t("calendar","Today")},on:{click:function(t){return e.handleActions("today")}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("calendar","Today"))+"\n\t\t\t\t\t")]),e._v(" "),t("NcButton",{attrs:{type:"secondary","aria-label":e.isRTL?e.t("calendar","Previous date"):e.t("calendar","Next date")},on:{click:function(t){return e.handleActions(e.isRTL?"next":"prev")}},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isRTL?t("ChevronRightIcon",{attrs:{size:22}}):t("ChevronLeftIcon",{attrs:{size:22}})]},proxy:!0}],null,!1,1358314897)}),e._v(" "),t("NcDateTimePickerNative",{attrs:{"hide-label":!0,value:e.currentStart},on:{input:t=>e.handleActions("picker",t)}}),e._v(" "),t("NcButton",{attrs:{type:"secondary","aria-label":e.isRTL?e.t("calendar","Next date"):e.t("calendar","Previous date")},on:{click:function(t){return e.handleActions(e.isRTL?"prev":"next")}},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isRTL?t("ChevronLeftIcon",{attrs:{size:22}}):t("ChevronRightIcon",{attrs:{size:22}})]},proxy:!0}],null,!1,1870829617)}),e._v(" "),t("NcPopover",{attrs:{"focus-trap":!1},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("NcButton",{attrs:{type:"tertiary-no-background"},scopedSlots:e._u([{key:"icon",fn:function(){return[t("HelpCircleIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2680586304)})]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"freebusy-caption"},[t("div",{staticClass:"freebusy-caption__calendar-user-types"}),e._v(" "),t("div",{staticClass:"freebusy-caption__colors"},[t("div",{staticClass:"freebusy-caption-item"},[t("div",{staticClass:"freebusy-caption-item__color"}),e._v(" "),t("div",{staticClass:"freebusy-caption-item__label"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.$t("calendar","Out of office"))+"\n\t\t\t\t\t\t\t\t\t\t")])])])])]},proxy:!0}],null,!1,2553328958)})],1),e._v(" "),t("h2",[e._v(e._s(e.weekNumber))]),e._v(" "),t("div",{staticClass:"modal__content__title__buttons"},[t("NcButton",{attrs:{type:"timeGridWeek"===e.view?"secondary":"tertiary",disabled:"timeGridWeek"===e.view},on:{click:function(t){return e.updateView("timeGridWeek")}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("calendar","Week"))+"\n\t\t\t\t\t")]),e._v(" "),t("NcButton",{attrs:{type:"timeGridDay"===e.view?"secondary":"tertiary",disabled:"timeGridDay"===e.view},on:{click:function(t){return e.updateView("timeGridDay")}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.t("calendar","Day"))+"\n\t\t\t\t\t")])],1)]),e._v(" "),t("div",{staticClass:"modal__content__body"},[e.isMobile?e._e():t("div",{staticClass:"modal__content__body__sidebar"},[e.freeSlots&&!e.disableFindTime?t("p",[t("NcSelect",{staticClass:"available-slots__multiselect",attrs:{options:e.freeSlots,placeholder:e.placeholder,clearable:!1,"input-id":"slot",label:"displayStart","label-outside":!0,value:e.selectedSlot,loading:e.loadingIndicator,disabled:e.loadingIndicator},on:{"option:selected":e.setSlotSuggestion},scopedSlots:e._u([{key:"selected-option",fn:function(t){let{}=t;return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.$t("calendar","Suggestion accepted"))+"\n\t\t\t\t\t\t\t")]}}],null,!1,2079017815)})],1):e._e(),e._v(" "),t("div",{staticClass:"modal__content__body__sidebar__attendees"},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("calendar","Attendees:"))+"\n\t\t\t\t\t\t"),t("InviteesListSearch",{staticClass:"modal__content__actions__select",attrs:{"already-invited-emails":e.alreadyInvitedEmails,organizer:e.organizer},on:{"add-attendee":e.addAttendee}}),e._v(" "),t("NcListItemIcon",{staticClass:"modal__content__body__sidebar__attendees__item",attrs:{name:e.organizer.commonName}}),e._v(" "),e._l(e.attendees,(function(n){return t("NcListItemIcon",{key:n.id,staticClass:"modal__content__body__sidebar__attendees__item",attrs:{name:n.commonName}},[t("NcActions",[t("NcActionButton",{on:{click:function(t){return e.removeAttendee(n)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Close",{attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.t("calendar","Delete"))+"\n\t\t\t\t\t\t\t\t")])],1)],1)}))],2)]),e._v(" "),t("div",{staticClass:"modal__content__body__calendar"},[t("FullCalendar",{ref:"freeBusyFullCalendar",attrs:{options:e.options}})],1)])]),e._v(" "),t("div",{staticClass:"modal__content__footer"},[t("div",{staticClass:"modal__content__footer__content"},[t("div",[t("p",{staticClass:"modal__content__footer__content__date"},[e._v("\n\t\t\t\t\t\t"+e._s(e.formattedCurrentStart)+"\n\t\t\t\t\t")]),e._v(" "),t("p",[e._v(e._s(e.formattedCurrentTime)),t("span",{staticClass:"modal__content__footer__content__timezone"},[e._v(e._s(e.formattedTimeZone))])])]),e._v(" "),t("NcButton",{attrs:{type:"primary"},on:{click:e.save},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CheckIcon",{attrs:{size:20}})]},proxy:!0}])},[e._v("\n\t\t\t\t\t"+e._s(e.$t("calendar","Done"))+"\n\t\t\t\t\t")])],1)])])])},o=[]},40825:(e,t,n)=>{"use strict";n.d(t,{X:()=>a,Y:()=>o});var a=function(){var e=this,t=e._self._c;return t("NcSelect",{staticClass:"invitees-search__vselect",class:{showContent:e.inputGiven,"icon-loading":e.isLoading},attrs:{options:e.matches,searchable:!0,"max-height":600,placeholder:e.placeholder,clearable:!1,"label-outside":!0,"input-id":"uid",label:"dropdownName"},on:{search:e.findAttendees,"option:selected":e.addAttendee},scopedSlots:e._u([{key:"option",fn:function(n){return[t("div",{staticClass:"invitees-search-list-item"},[n.isUser?t("Avatar",{key:n.uid,attrs:{user:n.avatar,"display-name":n.dropdownName}}):"circle"===n.type?t("Avatar",{scopedSlots:e._u([{key:"icon",fn:function(){return[t("GoogleCirclesCommunitiesIcon",{attrs:{size:20}})]},proxy:!0}],null,!0)}):e._e(),e._v(" "),n.isUser||"circle"===n.type?e._e():t("Avatar",{key:n.uid,attrs:{url:n.avatar,"display-name":n.commonName}}),e._v(" "),t("div",{staticClass:"invitees-search-list-item__label"},[t("div",[e._v("\n\t\t\t\t\t"+e._s(n.commonName)+"\n\t\t\t\t")]),e._v(" "),n.email!==n.commonName&&"circle"!==n.type&&"contactsgroup"!==n.type?t("div",[e._v("\n\t\t\t\t\t"+e._s(n.email)+"\n\t\t\t\t")]):e._e(),e._v(" "),"circle"===n.type||"contactsgroup"===n.type?t("div",[e._v("\n\t\t\t\t\t"+e._s(n.subtitle)+"\n\t\t\t\t")]):e._e()])],1)]}}])})},o=[]},88730:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(51651);const o=(e,t,n)=>t?(0,a.A)(e).locale(n).format("ll"):(0,a.A)(e).locale(n).format("lll")},83591:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(51651),o=n(53334);const r=(e,t,n)=>{switch(t){case"timeGridDay":return(0,a.A)(e).locale(n).format("ll");case"timeGridWeek":return(0,o.Tl)("calendar","Week {number} of {year}",{number:(0,a.A)(e).locale(n).week(),year:(0,a.A)(e).locale(n).weekYear()});case"multiMonthYear":return(0,a.A)(e).locale(n).format("YYYY");default:return(0,a.A)(e).locale(n).format("MMMM YYYY")}}},53820:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(88075);var a=n(22600);function o(e,t,n){return{id:"free-busy-event-source-"+e,editable:!1,startEditable:!1,durationEditable:!1,resourceEditable:!1,events:async(e,o,r)=>{let{start:l,end:s,timeZone:d}=e;const c=await(0,a.j)(t,[n],l,s,d,!1);c.error?r(c.error):o(c.events)}}}},20356:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(88075);function o(e,t,n,o,r,l,s){let d=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(!n)return[{id:Math.random().toString(36).substring(7),start:o.getInTimezone(l).jsDate.toISOString(),end:r.getInTimezone(l).jsDate.toISOString(),resourceId:e,display:"background",allDay:!1,title:s,textColor:"#FFFFFF"}];const c=(0,a.zc)().getParserForFileType("text/calendar");c.parse(t);const i=c._calendarComponent.getFirstComponent("VFREEBUSY");if(!i)return[];const m=[];for(const t of i.getPropertyIterator("FREEBUSY"))m.push({id:Math.random().toString(36).substring(7),start:t.getFirstValue().start.getInTimezone(l).jsDate,end:t.getFirstValue().end.getInTimezone(l).jsDate,allDay:t.getFirstValue().end.unixTime-t.getFirstValue().start.unixTime>=86400,resourceId:e,display:"auto",classNames:["free-busy-block",d?"free-busy-organizer":"","free-busy-"+t.type.toLowerCase(),d&&"BUSY-UNAVAILABLE"===t.type?"free-busy-busy-unavailable--organizer":""],title:s,textColor:"var(--color-main-text)"});return m}},28934:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});const a=()=>{const e={dayHeaderFormat:"ddd l",titleFormat:"ll",slotLabelFormat:"LT"};return{eventTimeFormat:"LT",views:{dayGridMonth:{...e,dayHeaderFormat:"ddd"},multiMonthYear:{...e,dayHeaderFormat:"ddd",multiMonthMaxColumns:4},timeGridDay:e,timeGridWeek:e,listMonth:{listDayFormat:"LL, dddd",listDaySideFormat:!1},resourceTimelineDay:e}}}},8772:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var a=n(53334);const o=()=>({firstDay:(0,a.JN)(),locale:(0,a.Z0)(),weekText:(0,a.Tl)("calendar","W"),allDayText:(0,a.Tl)("calendar","All day"),moreLinkText:e=>(0,a.Tl)("calendar","%n more",{},e),noEventsText:(0,a.Tl)("calendar","No events to display")})},95308:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(51651),o=n(67363),r=n(38679);const l=e=>{let{array:t}=e;const n=(0,r.A)();return(0,a.A)(t).locale(n.momentLocale)},s=()=>(e,t)=>{if(t.end){const n=l(t.start).format(e),a=l(t.end).format(e);return n===a?n:n+t.defaultSeparator+a}return l(t.start).format(e)};function d(){return(0,o.i1)({name:"@nextcloud/moment-plugin",cmdFormatter:s()})}},46911:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(67363),o=n(29174),r=n(62863),l=n(30835);class s extends o.bw{offsetForArray(e){let[t,n,a,o,s,d]=e,c=(0,r.A)().getTimezoneForId(this.timeZoneName);return c||(c=(0,r.A)().getTimezoneForId("UTC"),l.Ay.error(`VTimezoneNamedTimezoneImpl: Timezone ${this.timeZoneName} not found, falling back to UTC.`)),n+=1,c.offsetForArray(t,n,a,o,s,d)/60}timestampToArray(e){let t=(0,r.A)().getTimezoneForId(this.timeZoneName);t||(t=(0,r.A)().getTimezoneForId("UTC"),l.Ay.error(`VTimezoneNamedTimezoneImpl: Timezone ${this.timeZoneName} not found, falling back to UTC.`));const n=t.timestampToArray(e);return n[1]--,n}}const d=(0,a.i1)({name:"@nextcloud/v-timezone-named-timezone-plugin",namedTimeZonedImpl:s})},16126:(e,t,n)=>{"use strict";n.d(t,{t:()=>l,B:()=>s});var a=n(88484),o=n(35442);const r=e=>{const t=btoa(encodeURI(e.href));let n;n=e["common-name"]&&""!==e["common-name"].trim()?e["common-name"]:e.href.startsWith(o._l)?decodeURIComponent(e.href.slice(28)):e.href.startsWith(o.mI)?decodeURIComponent(e.href.slice(27)):e.href;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:null,displayName:null,writeable:!1,isUser:!1,isGroup:!1,isCircle:!1,uri:null},e)}({id:t,displayName:n,writeable:e.access[0].endsWith("read-write"),isUser:e.href.startsWith(o.mI),isGroup:e.href.startsWith(o._l),isCircle:e.href.startsWith(o.fM),uri:e.href})},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:"",displayName:"",color:(0,a.GM)(""),enabled:!0,loading:!1,supportsEvents:!0,supportsJournals:!1,supportsTasks:!1,owner:"",timezone:null,shares:[],publishURL:null,url:"",readOnly:!1,order:0,isSharedWithMe:!1,canBeShared:!1,canBePublished:!1,dav:!1,calendarObjects:[],fetchedTimeRanges:[],transparency:"opaque"},e)},s=(e,t)=>{const n=btoa(e.url),o=e.displayname||function(e){e.endsWith("/")&&(e=e.substring(0,e.length-1));return e.substring(e.lastIndexOf("/")+1)}(e.url);let s=(0,a.nJ)(e.color);s||(s=(0,a.GM)(o));const d=e.components.includes("VEVENT"),c=e.components.includes("VJOURNAL"),i=e.components.includes("VTODO"),m=e.owner,u=!e.isWriteable(),_=e.isShareable(),p=e.isPublishable(),h=e.order||0,y=e.url,v=e.publishURL||null,f=e.timezone||null,g=e.transparency||"opaque";let A,b=!1;b=!t||m!==t.url,t?"boolean"==typeof e.enabled?A=e.enabled:(A=!0,e.enabled=!0):A=!0;const C=[];if(t&&Array.isArray(e.shares))for(const n of e.shares)n.href!==t.principalScheme&&C.push(r(n));return l({id:n,displayName:o,color:s,order:h,url:y,enabled:A,supportsEvents:d,supportsJournals:c,supportsTasks:i,isSharedWithMe:b,owner:m,readOnly:u,publishURL:v,canBeShared:_,canBePublished:p,shares:C,timezone:f,transparency:g,dav:e})}},26620:(e,t,n)=>{"use strict";n.d(t,{ON:()=>l,cr:()=>s});var a=n(88075),o=n(35442);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:null,calendarId:null,dav:null,calendarComponent:null,uid:null,uri:null,objectType:null,isEvent:!1,isJournal:!1,isTodo:!1,existsOnServer:!1},e)},l=(e,t)=>{const n=(0,a.zc)().getParserForFileType("text/calendar");if("string"!=typeof e.data||""===e.data.trim())throw new Error("Empty calendar object");n.parse(e.data);const l=n.getItemIterator().next().value;if(!l)throw new Error("Empty calendar object");const s=l.getVObjectIterator().next().value;return r({id:btoa(e.url),calendarId:t,dav:e,calendarComponent:l,uid:s.uid,uri:e.url,objectType:s.name,isEvent:s.name===o.P$,isJournal:s.name===o.W5,isTodo:s.name===o.vC,existsOnServer:!0})},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.getVObjectIterator().next().value;if(!n)throw new Error("Calendar object without vobjects");return r({calendarId:t,calendarComponent:e,uid:n.uid,objectType:n.name,isEvent:n.name===o.P$,isJournal:n.name===o.W5,isTodo:n.name===o.vC})}},7051:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var a=n(53334);function o(){return[(0,a.Tl)("calendar","Anniversary"),(0,a.Tl)("calendar","Appointment"),(0,a.Tl)("calendar","Business"),(0,a.Tl)("calendar","Education"),(0,a.Tl)("calendar","Holiday"),(0,a.Tl)("calendar","Meeting"),(0,a.Tl)("calendar","Miscellaneous"),(0,a.Tl)("calendar","Non-working hours"),(0,a.Tl)("calendar","Not in office"),(0,a.Tl)("calendar","Personal"),(0,a.Tl)("calendar","Phone call"),(0,a.Tl)("calendar","Sick day"),(0,a.Tl)("calendar","Special occasion"),(0,a.Tl)("calendar","Travel"),(0,a.Tl)("calendar","Vacation")].map((e=>({value:e,label:e})))}const r=()=>({accessClass:{readableName:(0,a.Tl)("calendar","When shared show"),icon:"Eye",options:[{value:"PUBLIC",label:(0,a.Tl)("calendar","When shared show full event")},{value:"CONFIDENTIAL",label:(0,a.Tl)("calendar","When shared show only busy")},{value:"PRIVATE",label:(0,a.Tl)("calendar","When shared hide this event")}],multiple:!1,info:(0,a.Tl)("calendar","The visibility of this event in shared calendars."),defaultValue:"PUBLIC"},location:{readableName:(0,a.Tl)("calendar","Location"),placeholder:(0,a.Tl)("calendar","Add a location"),icon:"MapMarker"},description:{readableName:(0,a.Tl)("calendar","Description"),placeholder:(0,a.Tl)("calendar","Add a description\n\n- What is this meeting about\n- Agenda items\n- Anything participants need to prepare"),icon:"TextBoxOutline",defaultNumberOfRows:2},status:{readableName:(0,a.Tl)("calendar","Status"),icon:"Check",options:[{value:"CONFIRMED",label:(0,a.Tl)("calendar","Confirmed")},{value:"TENTATIVE",label:(0,a.Tl)("calendar","Tentative")},{value:"CANCELLED",label:(0,a.Tl)("calendar","Canceled")}],multiple:!1,info:(0,a.Tl)("calendar","Confirmation about the overall status of the event."),defaultValue:"CONFIRMED"},timeTransparency:{readableName:(0,a.Tl)("calendar","Show as"),icon:"Briefcase",multiple:!1,info:(0,a.Tl)("calendar","Take this event into account when calculating free-busy information."),options:[{value:"TRANSPARENT",label:(0,a.Tl)("calendar","Free")},{value:"OPAQUE",label:(0,a.Tl)("calendar","Busy")}],defaultValue:"TRANSPARENT"},categories:{readableName:(0,a.Tl)("calendar","Categories"),icon:"Tag",multiple:!0,info:(0,a.Tl)("calendar","Categories help you to structure and organize your events."),placeholder:(0,a.Tl)("calendar","Search or add categories"),tagPlaceholder:(0,a.Tl)("calendar","Add this as a new category"),options:o()},color:{readableName:(0,a.Tl)("calendar","Custom color"),icon:"EyedropperVariant",multiple:!1,info:(0,a.Tl)("calendar","Special color of this event. Overrides the calendar-color.")}})},38213:(e,t,n)=>{"use strict";n.d(t,{vV:()=>d});var a=n(70715),o=n(63814),r=n(85168),l=n(53334),s=n(44719);const d=async function(e,t){const n=(0,o.dC)(`dav/files/${t}/${e}`);try{await(0,a.Ay)({method:"MKCOL",url:n})}catch(n){if(405!==n?.response?.status)return(0,r.Qg)((0,l.Tl)("calendar","Error creating a folder {folder}",{folder:e})),e;"/"!==e&&(e=await c(e,t))}return e},c=async function(e,t){const n=await i(e,t),a=await(0,s.h4)(n),o=a?.multistatus?.response[0]?.propstat?.prop?.["mount-type"];if("shared"!==o)return e;const r=e.split("/");return r.pop(),1===r.length?"/":c(r.join("/"),t)},i=async function(e,t){const n=(0,o.dC)(`dav/files/${t}/${e}`);return(await(0,a.Ay)({method:"PROPFIND",url:n,data:'<?xml version="1.0"?>\n\t\t\t<d:propfind\n\t\t\txmlns:d="DAV:"\n\t\t\txmlns:oc="http://owncloud.org/ns"\n\t\t\txmlns:nc="http://nextcloud.org/ns">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<d:getcontenttype />\n\t\t\t\t\t<oc:size />\n\t\t\t\t\t<oc:fileid />\n\t\t\t\t\t<oc:share-types />\n\t\t\t\t\t<nc:has-preview />\n\t\t\t\t\t<nc:mount-type />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>'}).catch((()=>{(0,r.Qg)((0,l.Tl)("calendar","An error occurred during getting file information"))}))).data}},52193:(e,t,n)=>{"use strict";n.d(t,{D:()=>r,S:()=>l});var a=n(70715),o=n(63814);const r=async e=>{let t;try{t=await a.Ay.get((0,o.KT)("apps/files_sharing/api/v1/")+"sharees",{params:{format:"json",search:e,perPage:200,itemType:"pringroucipals"}})}catch(e){return[]}if("failure"===t.data.ocs.meta.status)return[];let n=[];return Array.isArray(t.data.ocs.data.circles)&&(n=n.concat(t.data.ocs.data.circles)),Array.isArray(t.data.ocs.data.exact.circles)&&(n=n.concat(t.data.ocs.data.exact.circles)),0===n.length?[]:n.filter((e=>!0)).map((e=>({displayname:e.label,population:e.value.circle.population,id:e.value.circle.id,instance:e.value.circle.owner.instance})))},l=async e=>{let t;try{t=await a.Ay.get((0,o.uM)("calendar","index.php")+"/v1/circles/getmembers",{params:{format:"json",circleId:e}})}catch(e){return console.debug(e),[]}return t}},22600:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,l:()=>i});var a=n(88075),o=n(28928),r=n(20356),l=n(62863),s=n(30835);const d=7;async function c(e,t,n,d,c){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const m=new Date(n.getTime());m.setDate(m.getDate()-1);let u=(0,l.A)().getTimezoneForId(c);u||(u=(0,l.A)().getTimezoneForId("UTC"),s.Ay.error(`FreeBusyEventSource: Timezone ${c} not found, falling back to UTC.`));const _=a.Z4.fromJSDate(m,!0),p=a.Z4.fromJSDate(d,!0);let h,y=!1;if(i){const n=new a.Uy("ATTENDEE",e.email);h=(0,a.TA)(_,p,e,[n,...t])}else h=(0,a.TA)(_,p,e,t),y=t[0].email===e.email;const v=h.toICS();let f,g;try{f=await(0,o.hC)()}catch(e){return{error:e}}try{g=await f.freeBusyRequest(v)}catch(e){return{error:e}}const A=[];for(const[e,n]of Object.entries(g))i?A.push(...(0,r.A)(e,n.calendarData,n.success,_,p,u)):A.push(...(0,r.A)(e,n.calendarData,n.success,_,p,u,t[0].commonName,y));return{events:A}}function i(e,t,n){let a=function(e,t){const n=new Date(e).toUTCString(),a=new Date(t).toUTCString(),o=new Date(a)-new Date(n);return Math.floor(o/1e3)}(e,t);0===a&&(a=86400);if(new Date(e).setDate(e.getDate()+d),n.error)return[{error:n.error}];let o=function(e){const t=new Map;for(const n of e){const e=n.start.toString()+n.end.toString();t.has(e)||t.set(e,n)}return Array.from(t.values()).sort(((e,t)=>new Date(e.start)-new Date(t.start)))}(n);o=o.filter((function(t){return new Date(e)<new Date(t.end)}));const r=[];for(let e=0;e<o.length;e++){const t=m(new Date(o[e].end),a,o);t&&r.push(t)}const l=m(new Date(e),a,o,!1,!1);return l&&r.unshift(l),r}function m(e,t,n){let a=!0;(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(e=function(e){e.getMinutes()%15==0&&e.setMinutes(e.getMinutes()+1);const t=15*Math.ceil(e.getMinutes()/15);return e.setMinutes(t),e.setSeconds(0),e.setMilliseconds(0),e}(e));const o=new Date(e);return o.setSeconds(e.getSeconds()+t),n.every((t=>{const n=new Date(t.start),r=new Date(t.end);return n>=e&&n<=o||r>=e&&r<=o?(a=!1,!1):!(n<=e&&r>=o)||(a=!1,!1)})),!!a&&{start:e,end:o}}},80502:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(32981).C)("calendar","isCirclesEnabled",!1)},62863:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const a=(0,n(62297).ZR)();let o=!1;function r(){return o||(a.registerDefaultTimezones(),o=!0),a}},87133:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var a=n(63032),o=n.n(a);const r=()=>{const e=o().determine();if(!e)return"UTC";const t=e.name();return t||"UTC"}},2023:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var a=n(62863),o=n(77555),r=n(88075);function l(e){const t=s(e);let n=1,a=e.getDate();for(;a>7;a-=7)n++;return{byDay:t,bySetPosition:n}}function s(e){switch(e.getDay()){case 0:return"SU";case 1:return"MO";case 2:return"TU";case 3:return"WE";case 4:return"TH";case 5:return"FR";case 6:return"SA";default:throw TypeError("Invalid date-object given")}}var d=n(88484),c=n(74717);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{alarmComponent:null,type:null,isRelative:!1,absoluteDate:null,absoluteTimezoneId:null,relativeIsBefore:null,relativeIsRelatedToStart:null,relativeUnitTimed:null,relativeAmountTimed:null,relativeUnitAllDay:null,relativeAmountAllDay:null,relativeHoursAllDay:null,relativeMinutesAllDay:null,relativeTrigger:null},e)},m=e=>{if(e.trigger.isRelative()){const t=e.trigger.value.isNegative,n="START"===e.trigger.related,{amount:a,unit:o}=(0,c.R2)(e.trigger.value.totalSeconds),{unit:r,amount:l,hours:s,minutes:d}=(0,c.rG)(e.trigger.value.totalSeconds),m=e.trigger.value.totalSeconds;return i({alarmComponent:e,type:e.action,isRelative:e.trigger.isRelative(),relativeIsBefore:t,relativeIsRelatedToStart:n,relativeUnitTimed:o,relativeAmountTimed:a,relativeUnitAllDay:r,relativeAmountAllDay:l,relativeHoursAllDay:s,relativeMinutesAllDay:d,relativeTrigger:m})}{const t=(0,o.z8)(e.trigger.value);return i({alarmComponent:e,type:e.action,isRelative:e.trigger.isRelative(),absoluteDate:t,absoluteTimezoneId:e.trigger.value.timezoneId})}};var u=n(58196);const _=e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{attachmentProperty:null,fileName:null,formatType:null,uri:null,value:null,xNcHasPreview:null,xNcFileId:null},e)}({attachmentProperty:e,fileName:e.getParameterFirstValue("FILENAME"),formatType:e.formatType,uri:e.uri,value:e.value,xNcHasPreview:"true"===e.getParameterFirstValue("X-NC-HAS-PREVIEW"),xNcFileId:e.getParameterFirstValue("X-NC-FILE-ID")}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{recurrenceRuleValue:null,frequency:"NONE",interval:1,count:null,until:null,byDay:[],byMonth:[],byMonthDay:[],bySetPosition:null,isUnsupported:!1},e)},h=["BYSECOND","BYMINUTE","BYHOUR","BYDAY","BYMONTHDAY","BYYEARDAY","BYWEEKNO","BYMONTH","BYSETPOS"],y=["BYSECOND","BYMINUTE","BYHOUR","BYMONTHDAY","BYYEARDAY","BYWEEKNO","BYMONTH","BYSETPOS"],v=["BYSECOND","BYMINUTE","BYHOUR","BYYEARDAY","BYWEEKNO","BYMONTH"],f=["BYSECOND","BYMINUTE","BYHOUR","BYYEARDAY","BYWEEKNO"],g=["SU","MO","TU","WE","TH","FR","SA"],A=[...Array(31).keys().map((e=>e+1))],b=[...Array(12).keys().map((e=>e+1))],C=e=>{const t=R(e,h);return w(e,{isUnsupported:t})},j=(e,t)=>{const n=R(e,y),a=e.getComponent("BYDAY").some((e=>!g.includes(e))),o=n||a,r=e.getComponent("BYDAY").filter((e=>g.includes(e)));return 0===r.length&&r.push(s(t.jsDate)),w(e,{byDay:r,isUnsupported:o})},I=(e,t)=>{let n=R(e,v),a=[],o=null,r=[];if(R(e,["BYMONTHDAY"])){R(e,["BYDAY","BYSETPOS"])&&(n=!0);const t=e.getComponent("BYMONTHDAY").some((e=>!A.includes(e)));n=n||t,r=e.getComponent("BYMONTHDAY").filter((e=>A.includes(e))).map((e=>e))}else if(R(e,["BYDAY"])&&R(e,["BYSETPOS"])){D(e.getComponent("BYDAY"))?a=e.getComponent("BYDAY"):(a=["MO","TU","WE","TH","FR","SA","SU"],n=!0);const t=e.getComponent("BYSETPOS");1===t.length&&O(t[0])?o=t[0]:(o=1,n=!0)}else if(R(e,["BYDAY"])){const l=e.getComponent("BYDAY");if(l.length>1)r.push(t.day),n=!0;else{const e=l[0],s=/^(-?\d)([A-Z]{2})$/.exec(e);if(s){const e=s[1],t=s[2];O(e)?(a=[t],o=parseInt(e,10)):(a=[t],o=1,n=!0)}else r.push(t.day),n=!0}}else r.push(t.day);return w(e,{byDay:a,bySetPosition:o,byMonthDay:r,isUnsupported:n})},T=(e,t)=>{let n=R(e,f),a=[],o=null,r=[],l=[];if(R(e,["BYMONTH"])){const t=e.getComponent("BYMONTH").some((e=>!b.includes(e)));n=n||t,r=e.getComponent("BYMONTH").filter((e=>b.includes(e))).map((e=>e))}else r.push(t.month);if(R(e,["BYMONTHDAY"])){R(e,["BYDAY","BYSETPOS"])&&(n=!0);const t=e.getComponent("BYMONTHDAY").some((e=>!A.includes(e)));n=n||t,l=e.getComponent("BYMONTHDAY").filter((e=>A.includes(e))).map((e=>e))}else if(R(e,["BYDAY"])&&R(e,["BYSETPOS"])){D(e.getComponent("BYDAY"))?a=e.getComponent("BYDAY"):(a=["MO","TU","WE","TH","FR","SA","SU"],n=!0);const t=e.getComponent("BYSETPOS");1===t.length&&O(t[0])?o=t[0]:(o=1,n=!0)}else if(R(e,["BYDAY"])){const r=e.getComponent("BYDAY");if(r.length>1)l.push(t.day),n=!0;else{const e=r[0],s=/^(-?\d)([A-Z]{2})$/.exec(e);if(s){const e=s[1],t=s[2];O(e)?(a=[t],o=parseInt(e,10)):(a=[t],o=1,n=!0)}else l.push(t.day),n=!0}}else l.push(t.day);return w(e,{byDay:a,bySetPosition:o,byMonth:r,byMonthDay:l,isUnsupported:n})},D=e=>["MO","TU","WE","TH","FR","SA","SU","FR,MO,SA,SU,TH,TU,WE","FR,MO,TH,TU,WE","SA,SU"].includes(e.slice().sort().join(",")),O=e=>["-2","-1","1","2","3","4","5"].includes(e.toString()),R=(e,t)=>{for(const n of t){if(e.getComponent(n).length>0)return!0}return!1},w=(e,t)=>{const n=null!==e.count&&null!==e.until;let a={};return n&&(a={isUnsupported:n}),p(Object.assign({},{recurrenceRuleValue:e,frequency:e.frequency,interval:parseInt(e.interval,10)||1,count:e.count,until:e.until?(0,o.z8)(e.until):null},t,a))},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{eventComponent:null,title:null,startDate:null,startTimezoneId:null,endDate:null,endTimezoneId:null,isAllDay:!1,canModifyAllDay:!0,location:null,description:null,accessClass:null,status:null,timeTransparency:null,recurrenceRule:p(),hasMultipleRRules:!1,isMasterItem:!1,isRecurrenceException:!1,forceThisAndAllFuture:!1,canCreateRecurrenceException:!1,attendees:[],organizer:null,alarms:[],customColor:null,categories:[],attachments:[]},e)},z=e=>{const t=S({eventComponent:e,title:e.title,isAllDay:e.isAllDay(),canModifyAllDay:e.canModifyAllDay(),location:e.location,description:e.description,accessClass:e.accessClass,status:e.status,timeTransparency:e.timeTransparency,categories:Array.from(e.getCategoryIterator()),isMasterItem:e.isMasterItem(),isRecurrenceException:e.isRecurrenceException(),canCreateRecurrenceException:e.canCreateRecurrenceExceptions()});if(t.startDate=(0,o.z8)(e.startDate),t.startTimezoneId=e.startDate.timezoneId,e.isAllDay()){const n=e.endDate.clone();n.addDuration(r.wy.fromSeconds(-86400)),t.endDate=(0,o.z8)(n)}else t.endDate=(0,o.z8)(e.endDate);if(t.endTimezoneId=e.endDate.timezoneId,e.organizer){const n=e.getFirstProperty("ORGANIZER");t.organizer={commonName:n.commonName,uri:n.email,attendeeProperty:n}}for(const n of e.getAlarmIterator())t.alarms.push(m(n));for(const n of e.getAttendeeIterator())t.attendees.push((0,u.Wj)(n));for(const n of e.getPropertyIterator("ATTACH"))t.attachments.push(_(n));const n=e.getPropertyIterator("RRULE"),a=n.next().value;if(a&&(t.recurrenceRule=((e,t)=>{switch(e.frequency){case"DAILY":return C(e);case"WEEKLY":return j(e,t);case"MONTHLY":return I(e,t);case"YEARLY":return T(e,t);default:return w(e,{isUnsupported:!0})}})(a.getFirstValue(),e.startDate),t.hasMultipleRRules=!n.next().done),e.hasProperty("COLOR")){const n=(0,d.dU)(e.getFirstPropertyFirstValue("COLOR"));null!==n&&(t.customColor=n)}return t};var B=n(67982),E=n(30835),N=n(7051),M=n(63814),x=n(81895),F=n(46305),P=n(6088),k=n(38679),Y=n(51849),U=n(85471);const L=(0,Y.nY)("calendarObjectInstance",{state:()=>({isNew:null,calendarObject:null,calendarObjectInstance:null,existingEvent:{objectId:null,recurrenceId:null}}),actions:{setCalendarObjectInstanceForExistingEvent(e){let{calendarObject:t,calendarObjectInstance:n,objectId:a,recurrenceId:o}=e;this.isNew=!1,this.calendarObject=t,this.calendarObjectInstance=n,this.existingEvent.objectId=a,this.existingEvent.recurrenceId=o},setCalendarObjectInstanceForNewEvent(e){let{calendarObject:t,calendarObjectInstance:n}=e;this.isNew=!0,this.calendarObject=t,this.calendarObjectInstance=n,this.existingEvent.objectId=null,this.existingEvent.recurrenceId=null},resetCalendarObjectInstanceObjectIdAndRecurrenceId(){this.isNew=!1,this.calendarObject=null,this.calendarObjectInstance=null,this.existingEvent.objectId=null,this.existingEvent.recurrenceId=null},changeTitle(e){let{calendarObjectInstance:t,title:n}=e;t.eventComponent.title=n,t.title=n},changeStartDateMutation(e){let{calendarObjectInstance:t,startDate:n}=e;t.eventComponent.startDate.year=n.getFullYear(),t.eventComponent.startDate.month=n.getMonth()+1,t.eventComponent.startDate.day=n.getDate(),t.eventComponent.startDate.hour=n.getHours(),t.eventComponent.startDate.minute=n.getMinutes(),t.eventComponent.startDate.second=0;const l=t.eventComponent.isAllDay(),s=t.eventComponent.endDate.clone(),d=t.eventComponent.startDate.clone();if(l){if(s.addDuration(r.wy.fromSeconds(-86400)),-1===s.compare(d)){const e=(0,a.A)().getTimezoneForId(s.timezoneId);t.eventComponent.endDate=t.eventComponent.startDate.getInTimezone(e),t.endDate=(0,o.z8)(t.eventComponent.endDate),t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400))}}else if(-1===s.compare(d)){const e=(0,a.A)().getTimezoneForId(s.timezoneId);t.eventComponent.endDate=t.eventComponent.startDate.getInTimezone(e),t.endDate=(0,o.z8)(t.eventComponent.endDate)}t.startDate=n},changeStartTimezoneMutation(e){let{calendarObjectInstance:t,startTimezone:n}=e;const o=(0,a.A)().getTimezoneForId(n);t.eventComponent.startDate.replaceTimezone(o),t.startTimezoneId=n,"floating"!==n&&"floating"!==t.endTimezoneId||(t.eventComponent.endDate.replaceTimezone(o),t.endTimezoneId=n)},changeEndDateMutation(e){let{calendarObjectInstance:t,endDate:n}=e;const l=t.eventComponent.endDate;t.eventComponent.endDate=l,t.eventComponent.endDate.year=n.getFullYear(),t.eventComponent.endDate.month=n.getMonth()+1,t.eventComponent.endDate.day=n.getDate(),t.eventComponent.endDate.hour=n.getHours(),t.eventComponent.endDate.minute=n.getMinutes(),t.eventComponent.endDate.second=0;const s=t.eventComponent.isAllDay(),d=t.eventComponent.endDate.clone(),c=t.eventComponent.startDate.clone();if(s){if(-1===d.compare(c)){const e=(0,a.A)().getTimezoneForId(c.timezoneId);t.eventComponent.startDate=t.eventComponent.endDate.getInTimezone(e),t.startDate=(0,o.z8)(t.eventComponent.startDate)}t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400))}else if(-1===d.compare(c))if(d.addDuration(r.wy.fromSeconds(86400)),-1===d.compare(c)){const e=(0,a.A)().getTimezoneForId(c.timezoneId);t.eventComponent.startDate=t.eventComponent.endDate.getInTimezone(e),t.startDate=(0,o.z8)(t.eventComponent.startDate)}else t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400)),n=new Date(n.getTime()+864e5);t.endDate=n},changeEndTimezoneMutation(e){let{calendarObjectInstance:t,endTimezone:n}=e;const o=(0,a.A)().getTimezoneForId(n);t.eventComponent.endDate.replaceTimezone(o),t.endTimezoneId=n,"floating"!==n&&"floating"!==t.startTimezoneId||(t.eventComponent.startDate.replaceTimezone(o),t.startTimezoneId=n)},toggleAllDayMutation(e){let{calendarObjectInstance:t}=e;if(!t.eventComponent.canModifyAllDay())return;const n=t.eventComponent.isAllDay();t.eventComponent.startDate.isDate=!n,t.eventComponent.endDate.isDate=!n,t.isAllDay=t.eventComponent.isAllDay(),n?t.eventComponent.endDate.addDuration(r.wy.fromSeconds(-86400)):t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400))},changeTimeToDefaultForTimedEvents(e){let{calendarObjectInstance:t}=e;const n=t.eventComponent.startDate,a=t.eventComponent.endDate;0===n.hour&&0===n.minute&&0===a.hour&&0===a.minute&&(n.hour=10,a.hour=11,t.startDate=(0,o.z8)(n),t.endDate=(0,o.z8)(a))},changeLocation(e){let{calendarObjectInstance:t,location:n}=e;t.eventComponent.deleteAllProperties("X-APPLE-STRUCTURED-LOCATION"),t.eventComponent.location=n,t.location=n},changeDescription(e){let{calendarObjectInstance:t,description:n}=e;const a=t.eventComponent.getFirstProperty("Description");if(a)for(const e of a.getParametersIterator())a.deleteParameter(e.name);t.eventComponent.deleteAllProperties("X-ALT-DESC"),t.eventComponent.description=n,t.description=n},changeAccessClass(e){let{calendarObjectInstance:t,accessClass:n}=e;t.eventComponent.accessClass=n,t.accessClass=n},changeStatus(e){let{calendarObjectInstance:t,status:n}=e;t.eventComponent.status=n,t.status=n},changeTimeTransparency(e){let{calendarObjectInstance:t,timeTransparency:n}=e;t.eventComponent.timeTransparency=n,t.timeTransparency=n},changeCustomColor(e){let{calendarObjectInstance:t,customColor:n}=e;if(null===n)return t.eventComponent.deleteAllProperties("COLOR"),void U.default.set(t,"customColor",null);const a=(0,d.mj)(n),o=(0,d.dU)(a);if(!a||!o)return console.error("Setting custom color failed"),console.error("customColor: ",n),console.error("cssColorName: ",a),void console.error("hexColorOfCssName: ",o);t.eventComponent.color=a,U.default.set(t,"customColor",o)},addAttendee(e){let{calendarObjectInstance:t,commonName:n,uri:a,calendarUserType:o=null,participationStatus:l=null,role:s=null,rsvp:d=null,language:c=null,timezoneId:i=null,organizer:m=null,member:u=null}=e;const _=r.Uy.fromNameAndEMail(n,a);null!==o&&(_.userType=o),null!==l&&(_.participationStatus=l),null!==s&&(_.role=s),null!==d&&(_.rsvp=d),null!==c&&(_.language=c),null!==i&&_.updateParameterIfExist("TZID",i),null!==u&&_.updateParameterIfExist("MEMBER",u),t.eventComponent.addProperty(_),t.attendees.push({commonName:n,participationStatus:l,role:s,rsvp:d,uri:a,attendeeProperty:_}),!t.organizer&&m&&this.setOrganizer({calendarObjectInstance:t,commonName:m.displayname,email:m.emailAddress})},removeAttendee(e){let{calendarObjectInstance:t,attendee:n}=e;t.eventComponent.removeAttendee(n.attendeeProperty),"GROUP"===n.attendeeProperty.userType&&n.members.forEach((function(e){if(Array.isArray(e.attendeeProperty.member)&&e.attendeeProperty.member.length>1){const t=e.attendeeProperty.member.findIndex((function(e){return e===n.uri}));-1!==t&&e.attendeeProperty.member.splice(t,1)}else{t.eventComponent.removeAttendee(e.attendeeProperty);const n=t.attendees.indexOf(e);-1!==n&&t.attendees.splice(n,1)}}));const a=t.attendees.indexOf(n);-1!==a&&t.attendees.splice(a,1),0===t.attendees.length&&(t.organizer=null,t.eventComponent.deleteAllProperties("ORGANIZER"))},changeAttendeesParticipationStatus(e){let{attendee:t,participationStatus:n}=e;t.attendeeProperty.participationStatus=n,t.participationStatus=n},changeAttendeesRole(e){let{attendee:t,role:n}=e;t.attendeeProperty.role=n,t.role=n},toggleAttendeeRSVP(e){let{attendee:t}=e;const n=t.attendeeProperty.rsvp;t.attendeeProperty.rsvp=!n,t.rsvp=!n},setOrganizer(e){let{calendarObjectInstance:t,commonName:n=null,email:a}=e;t.eventComponent.setOrganizerFromNameAndEMail(n,a),U.default.set(t,"organizer",{commonName:n,uri:a,attendeeProperty:t.eventComponent.getFirstProperty("ORGANIZER")})},addCategory(e){let{calendarObjectInstance:t,category:n}=e;t.eventComponent.addCategory(n),t.categories.push(n)},removeCategory(e){let{calendarObjectInstance:t,category:n}=e;t.eventComponent.removeCategory(n);const a=t.categories.indexOf(n);-1!==a&&t.categories.splice(a,1)},changeRecurrenceInterval(e){let{recurrenceRule:t,interval:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.interval=n,t.interval=n,console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceFrequencyMutation(e){let{recurrenceRule:t,frequency:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.frequency=n,t.frequency=n,console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceCount(e){let{recurrenceRule:t,count:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.count=n,t.count=n,t.until=null,console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceUntil(e){let{calendarObjectInstance:t,recurrenceRule:n,until:a}=e;n.recurrenceRuleValue&&("floating"!==t.startTimezoneId?n.recurrenceRuleValue.until=r.Z4.fromJSDate(a,{zone:"utc"}):n.recurrenceRuleValue.until=r.Z4.fromJSDate(a),n.until=a,n.count=null,console.debug(n.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceToInfinite(e){let{recurrenceRule:t}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.setToInfinite(),t.until=null,t.count=null,console.debug(t.recurrenceRuleValue._innerValue.toString()))},resetRecurrenceByParts(e){let{recurrenceRule:t}=e;if(t.recurrenceRuleValue){const e=["BYSECOND","BYMINUTE","BYHOUR","BYDAY","BYMONTHDAY","BYYEARDAY","BYWEEKNO","BYMONTH","BYSETPOS"];for(const n of e)t.recurrenceRuleValue.setComponent(n,[]);U.default.set(t,"byDay",[]),U.default.set(t,"byMonth",[]),U.default.set(t,"byMonthDay",[]),U.default.set(t,"bySetPosition",null),console.debug(t.recurrenceRuleValue._innerValue.toString())}},setDefaultRecurrenceByPartsForMonthlyBySetPosition(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;if(n.recurrenceRuleValue){const{byDay:e,bySetPosition:a}=l(t.startDate);n.recurrenceRuleValue.setComponent("BYDAY",[e]),n.recurrenceRuleValue.setComponent("BYSETPOS",[a]),n.byDay.push(e),n.bySetPosition=a,console.debug(n.recurrenceRuleValue._innerValue.toString())}},setDefaultRecurrenceByPartsForYearlyBySetPosition(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;if(n.recurrenceRuleValue){const e=t.startDate.getMonth()+1,{byDay:a,bySetPosition:o}=l(t.startDate);n.recurrenceRuleValue.setComponent("BYMONTH",[e]),n.recurrenceRuleValue.setComponent("BYDAY",[a]),n.recurrenceRuleValue.setComponent("BYSETPOS",[o]),n.byMonth.push(e),n.byDay.push(a),n.bySetPosition=o,console.debug(n.recurrenceRuleValue._innerValue.toString())}},addByDayToRecurrenceRule(e){let{recurrenceRule:t,byDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYDAY");-1===e.indexOf(n)&&(e.push(n),t.recurrenceRuleValue.setComponent("BYDAY",e));-1===t.byDay.indexOf(n)&&t.byDay.push(n),console.debug(t.recurrenceRuleValue._innerValue.toString())}},removeByDayFromRecurrenceRule(e){let{recurrenceRule:t,byDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYDAY"),a=e.indexOf(n);-1!==a&&(e.splice(a,1),t.recurrenceRuleValue.setComponent("BYDAY",e));const o=t.byDay.indexOf(n);-1!==o&&t.byDay.splice(o,1),console.debug(t.recurrenceRuleValue._innerValue.toString())}},addByMonthDayToRecurrenceRule(e){let{recurrenceRule:t,byMonthDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYMONTHDAY");-1===e.indexOf(n)&&(e.push(n),t.recurrenceRuleValue.setComponent("BYMONTHDAY",e));-1===t.byMonthDay.indexOf(n)&&t.byMonthDay.push(n),console.debug(t.recurrenceRuleValue._innerValue.toString())}},removeByMonthDayFromRecurrenceRule(e){let{recurrenceRule:t,byMonthDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYMONTHDAY"),a=e.indexOf(n);-1!==a&&(e.splice(a,1),t.recurrenceRuleValue.setComponent("BYMONTHDAY",e));const o=t.byMonthDay.indexOf(n);-1!==o&&t.byMonthDay.splice(o,1),console.debug(t.recurrenceRuleValue._innerValue.toString())}},addByMonthToRecurrenceRule(e){let{recurrenceRule:t,byMonth:n}=e;if(t.recurrenceRuleValue){console.debug("addByMonthToRecurrenceRule",n);const e=t.recurrenceRuleValue.getComponent("BYMONTH");-1===e.indexOf(n)&&(e.push(n),t.recurrenceRuleValue.setComponent("BYMONTH",e));-1===t.byMonth.indexOf(n)&&t.byMonth.push(n),console.debug(t.recurrenceRuleValue._innerValue.toString())}},removeByMonthFromRecurrenceRule(e){let{recurrenceRule:t,byMonth:n}=e;if(t.recurrenceRuleValue){console.debug("removeByMonthFromRecurrenceRule",n);const e=t.recurrenceRuleValue.getComponent("BYMONTH"),a=e.indexOf(n);-1!==a&&(e.splice(a,1),t.recurrenceRuleValue.setComponent("BYMONTH",e));const o=t.byMonth.indexOf(n);-1!==o&&t.byMonth.splice(o,1),console.debug(t.recurrenceRuleValue._innerValue.toString())}},changeRecurrenceByDay(e){let{recurrenceRule:t,byDay:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.setComponent("BYDAY",n),U.default.set(t,"byDay",n),console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceBySetPosition(e){let{recurrenceRule:t,bySetPosition:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.setComponent("BYSETPOS",[n]),U.default.set(t,"bySetPosition",n),console.debug(t.recurrenceRuleValue._innerValue.toString()))},markRecurrenceRuleAsSupported(e){let{recurrenceRule:t}=e;t.isUnsupported=!1},changeAlarmType(e){let{alarm:t,type:n}=e;t.alarmComponent&&(t.alarmComponent.action=n,t.type=n,console.debug(t.alarmComponent.toICALJs().toString()))},changeAlarmAbsoluteDate(e){let{alarm:t,date:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.year=n.getFullYear(),t.alarmComponent.trigger.value.month=n.getMonth()+1,t.alarmComponent.trigger.value.day=n.getDate(),t.alarmComponent.trigger.value.hour=n.getHours(),t.alarmComponent.trigger.value.minute=n.getMinutes(),t.alarmComponent.trigger.value.second=0,t.absoluteDate=n,console.debug(t.alarmComponent.toICALJs().toString()))},changeAlarmAbsoluteTimezoneId(e){let{alarm:t,timezoneId:n}=e;if(t.alarmComponent){const e=(0,a.A)().getTimezoneForId(n);t.alarmComponent.trigger.value.replaceTimezone(e),t.absoluteTimezoneId=n,console.debug(t.alarmComponent.toICALJs().toString())}},updateAlarmAllDayParts(e){let{alarm:t}=e;if(t.alarmComponent){const e=t.alarmComponent.trigger.value.totalSeconds,n=(0,c.rG)(e);t.relativeUnitAllDay=n.unit,t.relativeAmountAllDay=n.amount,t.relativeHoursAllDay=n.hours,t.relativeMinutesAllDay=n.minutes}},updateAlarmTimedParts(e){let{alarm:t}=e;if(t.alarmComponent){const e=t.alarmComponent.trigger.value.totalSeconds,n=(0,c.R2)(e);t.relativeUnitTimed=n.unit,t.relativeAmountTimed=n.amount,console.debug(t.alarmComponent.toICALJs().toString())}},addAlarmToCalendarObjectInstance(e){let{calendarObjectInstance:t,type:n,totalSeconds:a}=e;if(t.eventComponent){const e=t.eventComponent,o=r.wy.fromSeconds(a),l=e.addRelativeAlarm(n,o),s=m(l);t.alarms.push(s),console.debug(s.alarmComponent.toICALJs().toString())}},removeAlarmFromCalendarObjectInstance(e){let{calendarObjectInstance:t,alarm:n}=e;if(n.alarmComponent){t.eventComponent.removeAlarm(n.alarmComponent);const e=t.alarms.indexOf(n);-1!==e&&t.alarms.splice(e,1)}},addAttachmentBySharedData(e){let{calendarObjectInstance:t,sharedData:n}=e;const a=r.zN.fromLink(n.url),o=n.fileName,l=new r.kH("FILENAME",o),s=new r.kH("X-NC-HAS-PREVIEW",n["has-preview"].toString()),d=new r.kH("X-NC-FILE-ID",n.fileid.toString()),c=new r.kH("X-NC-SHARED-TYPES",n["share-types"]["share-type"]?n["share-types"]["share-type"].join(","):"");a.setParameter(l),a.setParameter(d),a.setParameter(s),a.setParameter(c),a.isNew=!0,a.shareTypes=n["share-types"]["share-type"]?n["share-types"]["share-type"].join(","):"",a.fileName=o,a.xNcFileId=n.fileid,a.xNcHasPreview=n["has-preview"],a.formatType=n.getcontenttype,a.uri=n.url?n.url:(0,M.Jv)(`/f/${n.fileid}`),t.eventComponent.addProperty(a),t.attachments.push(a)},addAttachmentWithProperty(e){let{calendarObjectInstance:t,sharedData:n}=e;const a={},o=n.fileName;a.isNew=!0,a.shareTypes=("number"==typeof n?.["share-types"]?.["share-type"]?n?.["share-types"]?.["share-type"]?.toString():n?.["share-types"]?.["share-type"]?.join(","))??null,a.fileName=o,a.xNcFileId=n.fileid,a.xNcHasPreview=n["has-preview"],a.formatType=n.getcontenttype,a.uri=n.url?n.url:(0,M.Jv)(`/f/${n.fileid}`);const l=r.zN.fromLink(a.uri,a.formatType),s=new r.kH("FILENAME",o),d=new r.kH("X-NC-HAS-PREVIEW",a.xNcHasPreview.toString()),c=new r.kH("X-NC-FILE-ID",a.xNcFileId.toString());if(null!==a.shareTypes){const e=new r.kH("X-NC-SHARED-TYPES",a.shareTypes);l.setParameter(e)}l.setParameter(s),l.setParameter(c),l.setParameter(d),l.uri=a.uri,a.attachmentProperty=l,t.eventComponent.addProperty(l),t.attachments.push(a)},deleteAttachment(e){let{calendarObjectInstance:t,attachment:n}=e;try{const e=t.attachments.indexOf(n);-1!==e&&t.attachments.splice(e,1),t.eventComponent.removeAttachment(n.attachmentProperty)}catch{}},async resolveClosestRecurrenceIdForCalendarObject(e){let{objectId:t,closeToDate:n}=e;const a=(0,P.A)(),o=(await a.getEventByObjectId({objectId:t})).calendarComponent.getVObjectIterator().next().value,l=r.Z4.fromJSDate(n,!0);return o.recurrenceManager.getClosestOccurrence(l).getReferenceRecurrenceId().unixTime},async getCalendarObjectInstanceByObjectIdAndRecurrenceId(e){let{objectId:t,recurrenceId:n}=e;const a=(0,P.A)();if(this.existingEvent.objectId===t&&this.existingEvent.recurrenceId===n)return Promise.resolve({calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance});const o=new Date(1e3*n),r=await a.getEventByObjectId({objectId:t}),l=(0,B.s)(r,o);if(null===l)throw new Error("Not a valid recurrence-id");const s=z(l);return this.setCalendarObjectInstanceForExistingEvent({calendarObject:r,calendarObjectInstance:s,objectId:t,recurrenceId:n}),{calendarObject:r,calendarObjectInstance:s}},async getCalendarObjectInstanceForNewEvent(e){let{isAllDay:t,start:n,end:a,timezoneId:o}=e;const r=(0,F.A)(),l=(0,k.A)();if(!0===this.isNew)return Promise.resolve({calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance});const s=await r.createNewEvent({start:n,end:a,isAllDay:t,timezoneId:o}),d=new Date(1e3*n),c=(0,B.s)(s,d),i=z(c),m=parseInt(l.defaultReminder);isNaN(m)||(this.addAlarmToCalendarObjectInstance({calendarObjectInstance:i,type:"DISPLAY",totalSeconds:m}),E.Ay.debug(`Added defaultReminder (${m}s) to newly created event`));const u=(0,N.B)().status.defaultValue;return i.eventComponent.status=u,i.status=u,this.setCalendarObjectInstanceForNewEvent({calendarObject:s,calendarObjectInstance:i}),{calendarObject:s,calendarObjectInstance:i}},async updateCalendarObjectInstanceForNewEvent(e){let{isAllDay:t,start:n,end:a,timezoneId:o}=e;const r=(0,F.A)();return await r.updateTimeOfNewEvent({calendarObjectInstance:this.calendarObjectInstance,start:n,end:a,isAllDay:t,timezoneId:o}),this.setCalendarObjectInstanceForNewEvent({calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance}),{calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance}},async saveCalendarObjectInstance(e){let{thisAndAllFuture:t,calendarId:n}=e;const a=(0,F.A)(),o=this.calendarObjectInstance.eventComponent,r=this.calendarObject;if((0,c.IS)(o),await(0,x.EX)(o),o.isDirty()){let e=null,l=null;null!==o.primaryItem&&o.canCreateRecurrenceExceptions()&&([e,l]=o.createRecurrenceException(t)),await a.updateCalendarObject({calendarObject:r}),null!==e&&null!==l&&e.root!==l.root&&await a.createCalendarObjectFromFork({eventComponent:l,calendarId:n})}n!==this.calendarObject.calendarId&&await a.moveCalendarObject({calendarObject:r,newCalendarId:n})},async duplicateCalendarObjectInstance(){const e=(0,F.A)(),t=this.calendarObjectInstance,n=t.eventComponent,a=n.startDate.getInUTC(),o=n.endDate.getInUTC(),l=await e.createNewEvent({start:a.unixTime,end:o.unixTime,timezoneId:n.startDate.timezoneId,isAllDay:n.isAllDay()}),s=(0,B.s)(l,a.jsDate);!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.title=e.title,t.location=e.location,t.description=e.description,t.accessClass=e.accessClass,t.status=e.status,t.timeTransparency=e.timeTransparency;for(const n of e.categories)t.addCategory(n);e.organizer&&t.setOrganizerFromNameAndEMail(e.organizer.commonName,e.organizer.uri);for(const n of e.alarms)if(n.isRelative){const e=r.wy.fromSeconds(n.relativeTrigger);t.addRelativeAlarm(n.type,e,n.relativeIsRelatedToStart)}else{const e=r.Z4.fromJSDate(n.absoluteDate);t.addAbsoluteAlarm(n.type,e)}for(const a of e.attendees)n&&(a.attendeeProperty.participationStatus="NEEDS-ACTION",a.attendeeProperty.rsvp=!0),t.addProperty(a.attendeeProperty);for(const n of e.eventComponent.getPropertyIterator("RRULE"))t.addProperty(n);e.customColor&&(t.color=(0,d.mj)(e.customColor))}(t,s,!0);const c=z(s);await this.setCalendarObjectInstanceForNewEvent({calendarObject:l,calendarObjectInstance:c})},async deleteCalendarObjectInstance(e){let{thisAndAllFuture:t}=e;const n=(0,F.A)(),a=this.calendarObjectInstance.eventComponent.removeThisOccurrence(t),o=this.calendarObject;a?await n.deleteCalendarObject({calendarObject:o}):await n.updateCalendarObject({calendarObject:o})},changeStartDate(e){let{calendarObjectInstance:t,startDate:n,onlyTime:a=!1,changeEndDate:o=!0}=e;if(a&&n.setFullYear(t.startDate.getFullYear(),t.startDate.getMonth(),t.startDate.getDate()),o){const e=n.getTime()-t.startDate.getTime(),a=new Date(t.endDate.getTime()+e);this.changeEndDateMutation({calendarObjectInstance:t,endDate:a})}this.changeStartDateMutation({calendarObjectInstance:t,startDate:n})},changeStartTimezone(e){let{calendarObjectInstance:t,startTimezone:n}=e;this.changeStartTimezoneMutation({calendarObjectInstance:t,startTimezone:n}),this.changeStartDateMutation({calendarObjectInstance:t,startDate:t.startDate})},changeEndDate(e){let{calendarObjectInstance:t,endDate:n,onlyTime:a=!1}=e;a&&n.setFullYear(t.endDate.getFullYear(),t.endDate.getMonth(),t.endDate.getDate()),this.changeEndDateMutation({calendarObjectInstance:t,endDate:n})},changeEndTimezone(e){let{calendarObjectInstance:t,endTimezone:n}=e;this.changeEndTimezoneMutation({calendarObjectInstance:t,endTimezone:n}),this.changeEndDateMutation({calendarObjectInstance:t,endDate:t.endDate})},changeRecurrenceFrequency(e){let{calendarObjectInstance:t,recurrenceRule:n,frequency:a}=e;if(console.debug(t),console.debug(n),console.debug(a),"NONE"===n.frequency&&"NONE"!==a){const e=r.TM.fromData({}),o=new r.mA("RRULE",e);t.eventComponent.addProperty(o),t.recurrenceRule.recurrenceRuleValue=e,this.resetRecurrenceByParts({recurrenceRule:n}),this.changeRecurrenceFrequencyMutation({calendarObjectInstance:t,recurrenceRule:t.recurrenceRule,frequency:a}),this.changeRecurrenceInterval({calendarObjectInstance:t,recurrenceRule:t.recurrenceRule,interval:1}),this.changeRecurrenceToInfinite({recurrenceRule:t.recurrenceRule}),this.setDefaultRecurrenceByParts({calendarObjectInstance:t,recurrenceRule:n,frequency:a}),console.debug(`changed from none to ${a}`)}else"NONE"!==n.frequency&&"NONE"===a?(console.debug("calling removeRecurrenceRuleFromCalendarObjectInstance"),n.recurrenceRuleValue&&(t.eventComponent.deleteAllProperties("RRULE"),U.default.set(t,"recurrenceRule",S().recurrenceRule),console.debug(t),console.debug(n))):(this.resetRecurrenceByParts({recurrenceRule:n}),this.changeRecurrenceFrequencyMutation({calendarObjectInstance:t,recurrenceRule:t.recurrenceRule,frequency:a}),this.setDefaultRecurrenceByParts({calendarObjectInstance:t,recurrenceRule:n,frequency:a}))},setDefaultRecurrenceByParts(e){let{calendarObjectInstance:t,recurrenceRule:n,frequency:a}=e;switch(a){case"WEEKLY":if(n.recurrenceRuleValue){const e=s(t.startDate);n.recurrenceRuleValue.setComponent("BYDAY",[e]),n.byDay.push(e),console.debug(n.recurrenceRuleValue._innerValue.toString())}break;case"MONTHLY":if(n.recurrenceRuleValue){const e=t.startDate.getDate();n.recurrenceRuleValue.setComponent("BYMONTHDAY",[e]),n.byMonthDay.push(e),console.debug(n.recurrenceRuleValue._innerValue.toString())}break;case"YEARLY":if(n.recurrenceRuleValue){const e=t.startDate.getMonth()+1;n.recurrenceRuleValue.setComponent("BYMONTH",[e]),n.byMonth.push(e);const a=t.startDate.getDate();n.recurrenceRuleValue.setComponent("BYMONTHDAY",[a]),n.byMonthDay.push(a),console.debug(n.recurrenceRuleValue._innerValue.toString())}}},changeMonthlyRecurrenceFromByDayToBySetPosition(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;console.debug("changeMonthlyRecurrenceFromByDayToBySetPosition"),this.resetRecurrenceByParts({recurrenceRule:n}),this.setDefaultRecurrenceByPartsForMonthlyBySetPosition({calendarObjectInstance:t,recurrenceRule:n})},changeMonthlyRecurrenceFromBySetPositionToByDay(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;if(console.debug("changeMonthlyRecurrenceFromBySetPositionToByDay"),this.resetRecurrenceByParts({recurrenceRule:n}),n.recurrenceRuleValue){const e=t.startDate.getDate();n.recurrenceRuleValue.setComponent("BYMONTHDAY",[e]),n.byMonthDay.push(e),console.debug(n.recurrenceRuleValue._innerValue.toString())}},changeYearlyRecurrenceFromByDayToBySetPosition(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;this.resetRecurrenceByParts({recurrenceRule:n}),this.setDefaultRecurrenceByPartsForYearlyBySetPosition({calendarObjectInstance:t,recurrenceRule:n})},changeYearlyRecurrenceFromBySetPositionToByDay(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;if(this.resetRecurrenceByParts({recurrenceRule:n}),n.recurrenceRuleValue){const e=t.startDate.getMonth()+1;n.recurrenceRuleValue.setComponent("BYMONTH",[e]),n.byMonth.push(e);const a=t.startDate.getDate();n.recurrenceRuleValue.setComponent("BYMONTHDAY",[a]),n.byMonthDay.push(a)}},enableRecurrenceLimitByUntil(e){let t,{calendarObjectInstance:n,recurrenceRule:a}=e;switch(a.frequency){case"DAILY":t=new Date(n.startDate.getTime()+6048e5);break;case"WEEKLY":t=new Date(n.startDate.getTime()+24192e5);break;case"YEARLY":t=new Date(n.startDate.getFullYear()+10,n.startDate.getMonth(),n.startDate.getDate(),23,59,59);break;default:t=new Date(n.startDate.getFullYear()+1,n.startDate.getMonth(),n.startDate.getDate(),23,59,59)}this.changeRecurrenceToInfinite({recurrenceRule:a}),this.changeRecurrenceUntil({calendarObjectInstance:n,recurrenceRule:a,until:t})},enableRecurrenceLimitByCount(e){let{recurrenceRule:t}=e;this.changeRecurrenceToInfinite({recurrenceRule:t}),this.changeRecurrenceCount({recurrenceRule:t,count:2})},changeAlarmAmountTimed(e){let{alarm:t,amount:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,c.yu)(n,t.relativeUnitTimed,t.relativeIsBefore),t.relativeAmountTimed=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmAllDayParts({alarm:t})},changeAlarmUnitTimed(e){let{alarm:t,unit:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,c.yu)(t.relativeAmountTimed,n,t.relativeIsBefore),t.relativeUnitTimed=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmAllDayParts({alarm:t})},changeAlarmAmountAllDay(e){let{alarm:t,amount:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,c.LW)(n,t.relativeHoursAllDay,t.relativeMinutesAllDay,t.relativeUnitAllDay),t.relativeAmountAllDay=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmTimedParts({alarm:t})},changeAlarmUnitAllDay(e){let{alarm:t,unit:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,c.LW)(t.relativeAmountAllDay,t.relativeHoursAllDay,t.relativeMinutesAllDay,n),t.relativeUnitAllDay=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmTimedParts({alarm:t})},changeAlarmHoursMinutesAllDay(e){let{alarm:t,hours:n,minutes:a}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,c.LW)(t.relativeAmountAllDay,n,a,t.relativeUnitAllDay),t.relativeHoursAllDay=n,t.relativeMinutesAllDay=a,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmTimedParts({alarm:t})},changeAlarmFromRelativeToAbsolute(e){let{calendarObjectInstance:t,alarm:n}=e;if(n.alarmComponent){const e=t.eventComponent.startDate.clone();e.isDate=!1,e.addDuration(n.alarmComponent.trigger.value),n.alarmComponent.setTriggerFromAbsolute(e),n.absoluteDate=(0,o.z8)(n.alarmComponent.trigger.value),n.absoluteTimezoneId=n.alarmComponent.trigger.value.timezoneId,console.debug(n.alarmComponent.toICALJs().toString())}n.relativeIsBefore=null,n.relativeIsRelatedToStart=null,n.relativeUnitTimed=null,n.relativeAmountTimed=null,n.relativeUnitAllDay=null,n.relativeAmountAllDay=null,n.relativeHoursAllDay=null,n.relativeMinutesAllDay=null,n.relativeTrigger=null},changeAlarmFromAbsoluteToRelative(e){let{calendarObjectInstance:t,alarm:n}=e;if(n.alarmComponent){const e=n.alarmComponent.trigger.value.subtractDateWithTimezone(t.eventComponent.startDate);n.alarmComponent.setTriggerFromRelative(e),n.relativeIsBefore=n.alarmComponent.trigger.value.isNegative,n.relativeIsRelatedToStart=!0,n.relativeTrigger=e.totalSeconds}this.updateAlarmAllDayParts({alarm:n}),this.updateAlarmTimedParts({alarm:n}),n.absoluteDate=null,n.absoluteTimezoneId=null},toggleAllDay(e){let{calendarObjectInstance:t}=e;const n=(0,k.A)();if(this.toggleAllDayMutation({calendarObjectInstance:t}),!t.isAllDay){if("floating"===t.startTimezoneId){const e=n.getResolvedTimezone;this.changeStartTimezoneMutation({calendarObjectInstance:t,startTimezone:e})}this.changeTimeToDefaultForTimedEvents({calendarObjectInstance:t})}}}})},46305:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(26620),o=n(30835),r=n(88075),l=n(63521),s=n(6088),d=n(51849),c=n(2023),i=n(85471),m=n(62297);const u=(0,d.nY)("calendarObjects",{state:()=>({calendarObjects:{},modificationCount:0}),getters:{getCalendarObjectById:e=>t=>e.calendarObjects[t]},actions:{async moveCalendarObject(e){let{calendarObject:t,newCalendarId:n}=e;if(!t.existsOnServer)return;const a=(0,l.A)(),r=(0,s.A)(),d=t.id,c=t.calendarId;if(c===n)return void o.Ay.error("Old calendar Id and new calendar Id are the same, nothing to move …");const i=r.getCalendarById(n);i?(await t.dav.move(i.dav),this.calendarObjects[t.id].calendarId=n,r.addCalendarObjectToCalendarMutation({calendar:{id:n},calendarObjectId:t.id}),a.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:n,calendarObjectId:t.id}),r.deleteCalendarObjectFromCalendarMutation({calendar:{id:c},calendarObjectId:d}),a.removeCalendarObjectIdFromAllTimeRangesOfCalendar({calendarId:c,calendarObjectId:d}),this.modificationCount++):o.Ay.error("Calendar to move to not found, aborting …")},async updateCalendarObject(e){let{calendarObject:t}=e;const n=(0,l.A)(),a=(0,s.A)();if(t.existsOnServer)return t.dav.data=t.calendarComponent.toICS(),await t.dav.update(),n.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:t.calendarId,calendarObjectId:t.id}),void this.modificationCount++;const o=a.getCalendarById(t.calendarId);t.dav=await o.dav.createVObject(t.calendarComponent.toICS()),t.existsOnServer=!0,this.updateCalendarObjectIdMutation({calendarObject:t}),this.appendCalendarObjectMutation({calendarObject:t}),a.addCalendarObjectToCalendarMutation({calendar:{id:t.calendarId},calendarObjectId:t.id}),n.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:t.calendarId,calendarObjectId:t.id}),this.resetCalendarObjectToDavMutation({calendarObject:t}),this.modificationCount++},async createCalendarObjectFromFork(e){let{eventComponent:t,calendarId:n}=e;const o=(0,s.A)(),r=(0,l.A)(),d=o.getCalendarById(n),c=(0,a.cr)(t.root,d.id);c.dav=await d.dav.createVObject(c.calendarComponent.toICS()),c.existsOnServer=!0,this.updateCalendarObjectIdMutation({calendarObject:c}),this.appendCalendarObjectMutation({calendarObject:c}),o.addCalendarObjectToCalendarMutation({calendar:{id:c.calendarId},calendarObjectId:c.id}),r.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:d.id,calendarObjectId:c.id}),this.modificationCount++},async deleteCalendarObject(e){let{calendarObject:t}=e;const n=(0,s.A)(),a=(0,l.A)();t.existsOnServer&&await t.dav.delete(),i.default.delete(this.calendarObjects,t.id),n.deleteCalendarObjectFromCalendarMutation({calendar:{id:t.calendarId},calendarObjectId:t.id}),a.removeCalendarObjectIdFromAnyTimeRange({calendarObjectId:t.id}),this.modificationCount++},createNewEvent(e){let{start:t,end:n,timezoneId:o,isAllDay:l}=e;const d=(0,s.A)(),c=(0,m.ZR)().getTimezoneForId(o),i=new Date(1e3*t),u=new Date(1e3*n),_=r.Z4.fromJSDate(i,!0).getInTimezone(c),p=r.Z4.fromJSDate(u,!0).getInTimezone(c);l&&(_.isDate=!0,p.isDate=!0);const h=(0,r.lh)(_,p);for(const e of h.getVObjectIterator())e.undirtify();const y=d.sortedCalendars[0].id;return Promise.resolve((0,a.cr)(h,y))},updateTimeOfNewEvent(e){let{calendarObjectInstance:t,start:n,end:a,timezoneId:o,isAllDay:r}=e;const l=(0,c.A)(),s=l.calendarObjectInstance.eventComponent.isDirty(),d=new Date(1e3*n),i=new Date(1e3*a);t.isAllDay!==r&&l.toggleAllDayMutation({calendarObjectInstance:t}),l.changeStartTimezone({calendarObjectInstance:t,startTimezone:o}),l.changeEndTimezone({calendarObjectInstance:t,endTimezone:o}),l.changeStartDateMutation({calendarObjectInstance:t,startDate:d}),r?l.changeEndDateMutation({calendarObjectInstance:t,endDate:new Date(i.getTime()-864e5)}):l.changeEndDateMutation({calendarObjectInstance:t,endDate:i}),s||t.eventComponent.undirtify()},appendOrUpdateCalendarObjectsMutation(e){let{calendarObjects:t=[]}=e;for(const e of t)i.default.set(this.calendarObjects,e.id,e)},appendCalendarObjectMutation(e){let{calendarObject:t}=e;this.calendarObjects[t.id]||i.default.set(this.calendarObjects,t.id,t)},updateCalendarObjectIdMutation(e){let{calendarObject:t}=e;null===t.dav?t.id=null:t.id=btoa(t.dav.url)},resetCalendarObjectToDavMutation(e){let{calendarObject:t}=e;if(t=this.calendarObjects[t.id],!t||!t.existsOnServer)return;const n=(0,r.zc)().getParserForFileType("text/calendar");n.parse(t.dav.data);const a=n.getItemIterator().next().value;a&&(t.calendarComponent=a)}}})},6088:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var a=n(28928),o=n(26620),r=n(77555),l=n(16126),s=n(39419),d=n(88484),c=n(53334),i=n(62863),m=n(88075),u=n(62297),_=n(35442),p=n(85168),h=n(48565),y=n(88659),v=n(38679),f=n(63521),g=n(40819),A=n(46305),b=n(51849),C=n(85471);const j=(0,b.nY)("calendars",{state:()=>({calendars:[],trashBin:void 0,scheduleInbox:void 0,deletedCalendars:[],deletedCalendarObjects:[],calendarsById:{},initialCalendarsLoaded:!1,editCalendarModal:void 0,syncTokens:new Map}),getters:{sortedCalendarsSubscriptions(e){const t=(0,v.A)();return e.calendars.filter((e=>e.supportsEvents||t.showTasks&&e.supportsTasks)).sort(((e,t)=>e.order-t.order))},sortedCalendars:e=>e.calendars.filter((e=>e.supportsEvents)).filter((e=>!e.readOnly)).sort(((e,t)=>e.order-t.order)),sortedCalendarsAll:e=>e.calendars.filter((e=>e.supportsEvents)).sort(((e,t)=>e.order-t.order)),ownSortedCalendars:e=>e.calendars.filter((e=>e.supportsEvents)).filter((e=>!e.readOnly)).filter((e=>!e.isSharedWithMe)).sort(((e,t)=>e.order-t.order)),hasTrashBin:e=>void 0!==e.trashBin&&0!==e.trashBin.retentionDuration,sortedDeletedCalendars:e=>e.deletedCalendars.sort(((e,t)=>e.deletedAt-t.deletedAt)),allDeletedCalendarObjects(e){const t={};return e.calendars.forEach((e=>{const n=e.url.replace(/\/$/,""),a=n.slice(n.lastIndexOf("/")+1);t[a]=e})),e.deletedCalendarObjects.map((e=>({calendar:t[e.dav._props["{http://nextcloud.com/ns}calendar-uri"]],...e})))},sortedSubscriptions:e=>e.calendars.filter((e=>e.supportsEvents)).filter((e=>e.readOnly)).sort(((e,t)=>e.order-t.order)),enabledCalendars(e){const t=(0,v.A)();return e.calendars.filter((e=>e.supportsEvents||t.showTasks&&e.supportsTasks)).filter((e=>e.enabled))},getCalendarById:e=>t=>e.calendarsById[t],getCalendarByUrl:e=>t=>e.calendars.find((e=>e.url===t)),getBirthdayCalendar:e=>{for(const t of e.calendars){const e=t.url.slice(0,-1),n=e.lastIndexOf("/");if(e.slice(n+1)===_.DL)return t}return null},getPersonalCalendarColor:e=>{for(const t of e.calendars){const e=t.url.slice(0,-1),n=e.lastIndexOf("/");if(e.slice(n+1)===_.Wh)return t.color}return null},sortedCalendarFilteredByComponents(){return(e,t,n)=>this.sortedCalendars.filter((a=>!(e&&!a.supportsEvents)&&(!(t&&!a.supportsJournals)&&!(n&&!a.supportsTasks))))},getCalendarSyncToken:e=>t=>{const n=e.calendarsById[t.id];if(n)return e.syncTokens.get(t.id)??n.dav.syncToken}},actions:{async loadCollections(){const e=(0,g.A)(),{calendars:t,trashBins:n,scheduleInboxes:o,subscriptions:r}=await(0,a.JW)();return console.info("calendar home scanned",t,n,r),t.map((t=>(0,l.B)(t,e.getCurrentUserPrincipal))).forEach((e=>{this.addCalendarMutation({calendar:e})})),n.length&&(this.trashBin=n[0]),o.length&&(this.scheduleInbox=o[0]),this.initialCalendarsLoaded=!0,{calendars:this.calendars,trashBin:this.trashBin}},async loadDeletedCalendars(){(await(0,a.BK)()).forEach((e=>{this.deletedCalendars.some((t=>t.url===e.url))||this.deletedCalendars.push(e)}))},async loadDeletedCalendarObjects(){const e=await this.trashBin.findDeletedObjects();console.info("vobjects loaded",{vobjects:e}),e.forEach((e=>{try{const t=(0,o.ON)(e,void 0);if(this.deletedCalendarObjects.some((e=>e.uri===t.uri)))return;this.deletedCalendarObjects.push(t)}catch(t){console.error("could not convert calendar object",e,t)}}))},async getPublicCalendars(e){let{tokens:t}=e;const n=await(0,a.jb)(t),o=[];for(const e of n){const t=(0,l.B)(e);this.addCalendarMutation({calendar:t}),o.push(t)}return this.initialCalendarsLoaded=!0,o},async appendCalendar(e){let{displayName:t,color:n,order:o,components:r=["VEVENT"],timezone:s=null}=e;const d=(0,g.A)(),c=(0,v.A)();null===s&&(s=c.getResolvedTimezone);let _=null;const p=(0,i.A)().getTimezoneForId(s);if(p!==u.kc.utc&&p!==u.kc.floating){const e=m.Sl.fromEmpty();e.addComponent(m.Ln.fromICALJs(p.toICALJs())),_=e.toICS(!1)}const h=await(0,a.dZ)(t,n,r,o,_),y=(0,l.B)(h,d.getCurrentUserPrincipal);this.addCalendarMutation({calendar:y})},async appendSubscription(e){let{displayName:t,color:n,order:o,source:r}=e;const s=(0,g.A)(),d=await(0,a.Ky)(t,n,r,o),c=(0,l.B)(d,s.getCurrentUserPrincipal);this.addCalendarMutation({calendar:c})},async deleteCalendar(e){let{calendar:t}=e;await t.dav.delete(),this.calendars.splice(this.calendars.indexOf(t),1),C.default.delete(this.calendarsById,t.id),this.syncTokens.delete(t.id)},async deleteCalendarPermanently(e){let{calendar:t}=e;await t.delete({"X-NC-CalDAV-No-Trashbin":1}),this.deletedCalendars=this.deletedCalendars.filter((e=>e!==t))},deleteCalendarAfterTimeout(e){let{calendar:t,countdown:n=7}=e;C.default.set(this.calendarsById[t.id],"countdown",n);const a=setInterval((()=>{n--,n<0&&(n=0),C.default.set(this.calendarsById[t.id],"countdown",n)}),1e3),o=setTimeout((async()=>{try{await this.deleteCalendar({calendar:t})}catch(e){(0,p.Qg)((0,c.Tl)("calendar","An error occurred, unable to delete the calendar.")),console.error(e)}finally{clearInterval(a)}}),7e3);C.default.set(this.calendarsById[t.id],"deleteInterval",a),C.default.set(this.calendarsById[t.id],"deleteTimeout",o)},cancelCalendarDeletion(e){let{calendar:t}=e;t.deleteInterval&&clearInterval(t.deleteInterval),t.deleteTimeout&&clearTimeout(t.deleteTimeout),this.calendarsById[t.id].deleteInterval=void 0,this.calendarsById[t.id].deleteTimeout=void 0},async restoreCalendar(e){let{calendar:t}=e;await this.trashBin.restore(t.url),this.deletedCalendars=this.deletedCalendars.filter((e=>e!==t))},async restoreCalendarObject(e){let{vobject:t}=e;const n=(0,f.A)(),a=(0,A.A)();await this.trashBin.restore(t.uri),this.deletedCalendarObjects=this.deletedCalendarObjects.filter((e=>e.id!==t.id));const r=(0,o.ON)(t.dav,void 0).calendarComponent.getFirstComponent(t.objectType),l=n.getTimeRangeForCalendarCoveringRange(t.calendar.id,r.startDate?.unixTime,r.endDate?.unixTime);l&&(this.deleteFetchedTimeRangeFromCalendarMutation({calendar:t.calendar,fetchedTimeRangeId:l.id}),n.removeTimeRange({timeRangeId:l.id})),a.modificationCount++},async deleteCalendarObjectPermanently(e){let{vobject:t}=e;await t.dav.delete({"X-NC-CalDAV-No-Trashbin":1}),this.deletedCalendarObjects=this.deletedCalendarObjects.filter((e=>e.id!==t.id))},async toggleCalendarEnabled(e){let{calendar:t,updateDav:n=!0}=e;this.calendarsById[t.id].loading=!0,t.dav.enabled=!t.dav.enabled;try{n&&await t.dav.update(),this.calendarsById[t.id].loading=!1,this.calendarsById[t.id].enabled=!this.calendarsById[t.id].enabled}catch(e){throw this.calendarsById[t.id].loading=!1,e}},async renameCalendar(e){let{calendar:t,newName:n}=e;t.dav.displayname=n,await t.dav.update(),this.calendarsById[t.id].displayName=n},async changeCalendarColor(e){let{calendar:t,newColor:n}=e;t.dav.color=n,await t.dav.update(),this.calendarsById[t.id].color=n},async changeCalendarTransparency(e){let{calendar:t,transparency:n}=e;t.dav.transparency!==n&&(t.dav.transparency=n,await t.dav.update(),this.calendarsById[t.id].transparency=n)},async shareCalendar(e){let{calendar:t,user:n,displayName:a,uri:o,isGroup:r,isCircle:l}=e;await t.dav.share(o);const s={displayName:a,id:n,writeable:!1,isGroup:r,isCircle:l,uri:o};this.calendarsById[t.id].shares.push(s)},async toggleCalendarShareWritable(e){let{calendar:t,uri:n}=e;const a=t.shares.find((e=>e.uri===n));await t.dav.share(n,!a.writeable),t=this.calendars.find((e=>e.id===t.id)),a.writeable=!a.writeable},async unshareCalendar(e){let{calendar:t,uri:n}=e;await t.dav.unshare(n),t=this.calendars.find((e=>e.id===t.id));const a=t.shares.findIndex((e=>e.uri===n));t.shares.splice(a,1)},async publishCalendar(e){let{calendar:t}=e;await t.dav.publish();const n=t.dav.publishURL;t=this.calendars.find((e=>e.id===t.id)),t.publishURL=n},async unpublishCalendar(e){let{calendar:t}=e;await t.dav.unpublish(),t=this.calendars.find((e=>e.id===t.id)),t.publishURL=null},async getEventsFromCalendarInTimeRange(e){let{calendar:t,from:n,to:a}=e;const l=(0,f.A)(),s=(0,v.A)(),d=(0,A.A)();this.calendarsById[t.id].loading=!0;const c=await t.dav.findByTypeInTimeRange("VEVENT",n,a);let i=[];s.showTasks&&(i=await t.dav.findByTypeInTimeRange("VTODO",n,a)),l.addTimeRange({calendarId:t.id,from:(0,r.PY)(n),to:(0,r.PY)(a),lastFetched:(0,r.PY)((0,r.RK)()),calendarObjectIds:[]});const m=l.lastTimeRangeInsertId;this.calendarsById[t.id].fetchedTimeRanges.push(m);const u=[],_=[];for(const e of c.concat(i))try{const n=(0,o.ON)(e,t.id);u.push(n),_.push(n.id)}catch(n){console.error(`could not convert calendar object of calendar ${t.id}`,n,{response:e})}d.appendOrUpdateCalendarObjectsMutation({calendarObjects:u});for(const e of _)-1===this.calendarsById[t.id].calendarObjects.indexOf(e)&&this.calendarsById[t.id].calendarObjects.push(e);return l.appendCalendarObjectIdsToTimeFrame({timeRangeId:m,calendarObjectIds:_}),this.calendarsById[t.id].loading=!1,l.lastTimeRangeInsertId},async getEventByObjectId(e){let{objectId:t}=e;const n=(0,A.A)();if(n.getCalendarObjectById(t))return Promise.resolve(n.getCalendarObjectById(t));const a=atob(t),r=a.lastIndexOf("/"),l=a.slice(0,r+1),s=a.slice(r+1),d=btoa(l);if(!this.calendarsById[d])return Promise.reject(new Error(""));const c=this.calendarsById[d],i=await c.dav.find(s),m=(0,o.ON)(i,c.id);return n.appendCalendarObjectMutation({calendarObject:m}),this.addCalendarObjectToCalendarMutation({calendar:{id:d},calendarObjectId:m.id}),m},async importEventsIntoCalendar(){const e=(0,h.A)(),t=(0,y.A)(),n=(0,g.A)(),r=(0,f.A)(),i=(0,A.A)();e.stage=_.RW;const m=t.importFiles.slice();let u=0;for(const e of m){u+=e.parser.getItemCount();if("new"===t.importCalendarRelation[e.id]){const o=e.parser.getName()||(0,c.Tl)("calendar","Imported {filename}",{filename:e.name}),r=e.parser.getColor()||(0,d.GM)(o),s=[];e.parser.containsVEvents()&&s.push("VEVENT"),e.parser.containsVJournals()&&s.push("VJOURNAL"),e.parser.containsVTodos()&&s.push("VTODO");const i=await(0,a.dZ)(o,r,s,0),m=(0,l.B)(i,n.getCurrentUserPrincipal);this.addCalendarMutation({calendar:m}),t.setCalendarForFileId({fileId:e.id,calendarId:m.id})}}e.total=u;const p=(0,s.A)(3),v=[];for(const n of m){const a=t.importCalendarRelation[n.id],l=this.getCalendarById(a);for(const t of n.parser.getItemIterator())v.push(p((async()=>{const n=t.toICS();let s;try{s=await l.dav.createVObject(n)}catch(t){return e.denied++,void console.error(t)}const d=(0,o.ON)(s,a);i.appendCalendarObjectMutation({calendarObject:d}),this.addCalendarObjectToCalendarMutation({calendar:l,calendarObjectId:d.id}),r.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:l.id,calendarObjectId:d.id}),e.accepted++})))}await Promise.all(v),e.stage=_.NU},async updateCalendarListOrder(e){let{newOrder:t}=e;const n=(0,s.A)(3),a=[],o=[];for(const e in t)a.push(n((async()=>{const n=this.calendarsById[e];n.dav.order!==t[e]&&(n.dav.order=t[e],await n.dav.update(),o.push({calendar:n,newOrder:t[e]}))})));await Promise.all(a);for(const{calendar:e,newOrder:t}of o)console.debug(e,t),this.calendarsById[e.id].order=t},addCalendarMutation(e){let{calendar:t}=e;const n=(0,l.t)(t);this.calendars.some((e=>e.id===n.id))||(this.calendars.push(n),C.default.set(this.calendars,0,this.calendars[0])),C.default.set(this.calendarsById,n.id,n)},deleteFetchedTimeRangeFromCalendarMutation(e){let{calendar:t,fetchedTimeRangeId:n}=e;const a=this.calendarsById[t.id]?.fetchedTimeRanges.indexOf(n);-1!==a&&this.calendarsById[t.id].fetchedTimeRanges.splice(a,1)},addCalendarObjectToCalendarMutation(e){let{calendar:t,calendarObjectId:n}=e;-1===this.calendarsById[t.id].calendarObjects.indexOf(n)&&this.calendarsById[t.id].calendarObjects.push(n)},deleteCalendarObjectFromCalendarMutation(e){let{calendar:t,calendarObjectId:n}=e;const a=this.calendarsById[t.id].calendarObjects.indexOf(n);-1!==a&&this.calendarsById[t.id].calendarObjects.slice(a,1)},updateCalendarSyncToken(e){let{calendar:t,syncToken:n}=e;this.getCalendarById(t.id)&&this.syncTokens.set(t.id,n)}}})},63521:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(51849),o=n(46305),r=n(85471);const l=(0,a.nY)("fetchedTimeRanges",{state:()=>({lastTimeRangeInsertId:-1,fetchedTimeRanges:[],fetchedTimeRangesById:{}}),getters:{getAllTimeRangesForCalendar:e=>t=>e.fetchedTimeRanges.filter((e=>e.calendarId===t)),getTimeRangeForCalendarCoveringRange:e=>(t,n,a)=>e.fetchedTimeRanges.find((e=>e.calendarId===t&&e.from<=n&&e.to>=a)),getAllTimeRangesOlderThan:e=>t=>e.fetchedTimeRanges.filter((e=>e.lastFetched<=t)),getCalendarObjectsByTimeRangeId:e=>t=>{const n=(0,o.A)();return e.fetchedTimeRangesById[t]?e.fetchedTimeRangesById[t].calendarObjectIds.map((e=>n.getCalendarObjectById(e))):[]}},actions:{addTimeRange(e){let{calendarId:t,from:n,to:a,lastFetched:o,calendarObjectIds:l}=e;const s={id:++this.lastTimeRangeInsertId,calendarId:t,from:n,to:a,lastFetched:o,calendarObjectIds:l};this.fetchedTimeRanges.push(s),r.default.set(this.fetchedTimeRangesById,s.id,s)},removeTimeRange(e){let{timeRangeId:t}=e;r.default.delete(this.fetchedTimeRangesById,t),this.fetchedTimeRanges=this.fetchedTimeRanges.filter((e=>e.id!==t))},appendCalendarObjectIdsToTimeFrame(e){let{timeRangeId:t,calendarObjectIds:n}=e;for(const e of n)-1===this.fetchedTimeRangesById[t].calendarObjectIds.indexOf(e)&&this.fetchedTimeRangesById[t].calendarObjectIds.push(e)},appendCalendarObjectIdToTimeRange(e){let{timeRangeId:t,calendarObjectId:n}=e;this.fetchedTimeRangesById[t].calendarObjectIds.push(n)},removeCalendarObjectIdFromTimeRange(e){let{timeRangeId:t,calendarObjectId:n}=e;const a=this.fetchedTimeRangesById[t].calendarObjectIds.indexOf(n);-1!==a&&this.fetchedTimeRangesById[t].calendarObjectIds.splice(a,1)},removeCalendarObjectIdFromAnyTimeRange(e){let{calendarObjectId:t}=e;for(const e of this.fetchedTimeRanges){const n=e.calendarObjectIds.indexOf(t);-1!==n&&e.calendarObjectIds.splice(n,1)}},addCalendarObjectIdToAllTimeRangesOfCalendar(e){let{calendarObjectId:t,calendarId:n}=e;for(const e of this.fetchedTimeRanges)e.calendarId===n&&-1===e.calendarObjectIds.indexOf(t)&&e.calendarObjectIds.push(t)},removeCalendarObjectIdFromAllTimeRangesOfCalendar(e){let{calendarObjectId:t,calendarId:n}=e;for(const e of this.fetchedTimeRanges){if(e.calendarId!==n)continue;const a=e.calendarObjectIds.indexOf(t);-1!==a&&e.calendarObjectIds.splice(a,1)}},clearFetchedTimeRanges(){this.lastTimeRangeInsertId=-1,this.fetchedTimeRanges=[],this.fetchedTimeRangesById={}}}})},88659:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(51849),o=n(85471);const r=(0,a.nY)("importFiles",{state:()=>({lastFileInsertId:-1,importFiles:[],importFilesById:{},importCalendarRelation:{}}),actions:{addFile(e){let{contents:t,lastModified:n,name:a,parser:r,size:l,type:s}=e;const d={id:++this.lastFileInsertId,contents:t,lastModified:n,name:a,parser:r,size:l,type:s};this.importFiles=[...this.importFiles,d],o.default.set(this.importFilesById,d.id,d)},setCalendarForFileId(e){let{fileId:t,calendarId:n}=e;o.default.set(this.importCalendarRelation,t,n)},removeAllFiles(){o.default.set(this,"importFiles",[]),o.default.set(this,"importFilesById",{}),o.default.set(this,"importCalendarRelation",{})}}})},48565:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(35442);const o=(0,n(51849).nY)("importState",{state:()=>({total:0,accepted:0,denied:0,stage:a.rk}),actions:{resetState(){this.total=0,this.accepted=0,this.denied=0,this.stage=a.rk}}})},40819:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(28928),o=n(30835),r=n(35442);const l=e=>Object.assign({},{id:null,calendarUserType:"INDIVIDUAL",emailAddress:null,displayname:null,principalScheme:null,userId:null,url:null,dav:null,isCircle:!1,isUser:!1,isGroup:!1,isCalendarResource:!1,isCalendarRoom:!1,principalId:null,scheduleDefaultCalendarUrl:null},e),s=e=>{const t=btoa(encodeURI(e.url)),n=e.calendarUserType,a=e.principalScheme,o=e.email,s=e.displayname,d=e.scheduleDefaultCalendarUrl,c=e.principalScheme.startsWith(r.mI),i=e.principalScheme.startsWith(r._l),m=e.principalScheme.startsWith(r.fM),u=e.principalScheme.startsWith(r.an),_=e.principalScheme.startsWith(r.bd);let p=null;c?p=e.principalScheme.substring(r.mI.length):i?p=e.principalScheme.substring(r._l.length):m?p=e.principalScheme.substring(r.fM.length):u?p=e.principalScheme.substring(r.an.length):_&&(p=e.principalScheme.substring(r.bd.length));const h=e.principalUrl,y=e.userId;return l({id:t,calendarUserType:n,principalScheme:a,emailAddress:o,displayname:s,url:h,dav:e,isUser:c,isGroup:i,isCircle:m,isCalendarResource:u,isCalendarRoom:_,principalId:p,userId:y,scheduleDefaultCalendarUrl:d})};var d=n(51849),c=n(85471),i=n(63814);const m=(0,d.nY)("principals",{state:()=>({principals:[],principalsById:{},currentUserPrincipal:null}),getters:{getPrincipalByUrl:e=>t=>e.principals.find((e=>e.url===t)),getPrincipalById:e=>t=>e.principalsById[t],getCurrentUserPrincipal:e=>e.principalsById[e.currentUserPrincipal],getCurrentUserPrincipalEmail:e=>e.principalsById[e.currentUserPrincipal]?.emailAddress,getRoomPrincipals:e=>e.principals.filter((e=>e.isCalendarRoom)),getResourcePrincipals:e=>e.principals.filter((e=>e.isCalendarResource))},actions:{async fetchPrincipalByUrl(e){let{url:t}=e;if(this.getPrincipalByUrl(t))return;const n=await(0,a.a9)(t);n&&this.addPrincipalMutation({principal:s(n)})},async fetchRoomAndResourcePrincipals(){const e={enableCalDAVResourceBooking:!0},t=await Promise.all([(0,a.wo)((0,i.dC)("dav/principals/calendar-rooms/"),e),(0,a.wo)((0,i.dC)("dav/principals/calendar-resources/"),e)]);for(const e of t)if(e){o.Ay.debug("Fetched principals",{principals:e});for(const t of e)this.addPrincipalMutation({principal:s(t)})}},async fetchCurrentUserPrincipal(){const e=(0,a.xX)();if(!e)return;const t=s(e);this.addPrincipalMutation({principal:t}),this.currentUserPrincipal=t.id,o.Ay.debug(`Current user principal is ${t.url}`)},addPrincipalMutation(e){let{principal:t}=e;const n=l(t);this.principalsById[n.id]||(this.principals.push(n),c.default.set(this.principalsById,n.id,n))},async changePrincipalScheduleDefaultCalendarUrl(e){let{principal:t,scheduleDefaultCalendarUrl:n}=e;t.dav.scheduleDefaultCalendarUrl=n,await t.dav.update(),c.default.set(this.principalsById[t.id],"scheduleDefaultCalendarUrl",n)}}})},38679:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(28928),o=n(16126),r=n(87133),l=n(88075),s=n(70715),d=n(63814);const c=async(e,t)=>{await s.Ay.post(function(e){return[(0,d.uM)("calendar","index.php"),"v1/config",e].join("/")}(e),{value:t})};var i=n(30835),m=n(51849),u=n(62863),_=n(38213),p=n(40819),h=n(63521),y=n(6088),v=n(46305);const f=(0,m.nY)("settings",{state:()=>({appVersion:null,firstRun:null,talkEnabled:!1,disableAppointments:!1,publicCalendars:null,eventLimit:null,showTasks:null,showWeekends:null,showWeekNumbers:null,skipPopover:null,slotDuration:null,defaultReminder:null,tasksEnabled:!1,timezone:"automatic",hideEventExport:!1,forceEventAlarmType:!1,canSubscribeLink:!0,showResources:!0,momentLocale:"en",attachmentsFolder:"/Calendar",attachmentsFolderCreated:!1}),getters:{getResolvedTimezone:e=>"automatic"===e.timezone?(0,r.t)():e.timezone,getResolvedTimezoneObject(){const e=this.getResolvedTimezone;let t=(0,u.A)().getTimezoneForId(e);return t||(t=(0,u.A)().getTimezoneForId("UTC")),t}},actions:{async toggleBirthdayCalendarEnabled(){const e=(0,y.A)();if(!!e.getBirthdayCalendar){const t=e.getBirthdayCalendar;await e.deleteCalendar({calendar:t})}else{const t=await(0,a.vV)(),n=(0,o.B)(t);e.addCalendarMutation({calendar:n})}},async toggleEventLimitEnabled(){const e=!this.eventLimit?"yes":"no";await c("eventLimit",e),this.eventLimit=!this.eventLimit},async togglePopoverEnabled(){const e=!this.skipPopover?"yes":"no";await c("skipPopover",e),this.skipPopover=!this.skipPopover},async toggleWeekendsEnabled(){const e=!this.showWeekends?"yes":"no";await c("showWeekends",e),this.showWeekends=!this.showWeekends},async toggleTasksEnabled(){const e=(0,h.A)(),t=(0,v.A)(),n=!this.showTasks?"yes":"no";await c("showTasks",n),this.showTasks=!this.showTasks,e.clearFetchedTimeRanges(),t.modificationCount++},async toggleWeekNumberEnabled(){const e=!this.showWeekNumbers?"yes":"no";await c("showWeekNr",e),this.showWeekNumbers=!this.showWeekNumbers},async setInitialView(e){let{initialView:t}=e;await c("view",t)},async setSlotDuration(e){let{slotDuration:t}=e;this.slotDuration!==t&&(await c("slotDuration",t),this.slotDuration=t)},async setDefaultReminder(e){let{defaultReminder:t}=e;this.defaultReminder!==t&&(await c("defaultReminder",t),this.defaultReminder=t)},async setTimezone(e){let{timezoneId:t}=e;this.timezone!==t&&(await c("timezone",t),this.timezone=t)},async setAttachmentsFolder(e){let{attachmentsFolder:t}=e;this.attachmentsFolder!==t&&(await c("attachmentsFolder",t),this.attachmentsFolder=t,this.attachmentsFolderCreated=!1)},async createAttachmentsFolder(){const e=(0,p.A)();if(this.attachmentsFolderCreated)return this.attachmentsFolder;const t=e.getCurrentUserPrincipal.dav.userId,n=await _.vV(this.attachmentsFolder,t);return n!==this.attachmentsFolder&&await this.setAttachmentsFolder({attachmentsFolder:n}),this.attachmentsFolderCreated=!0,n},initializeCalendarJsConfig(){(0,l.Nk)("PRODID",`-//IDN nextcloud.com//Calendar app ${this.appVersion}//EN`),(0,l.Nk)("property-list-significant-change",["SUMMARY","LOCATION","DESCRIPTION"])},loadSettingsFromServer(e){let{appVersion:t,eventLimit:n,firstRun:a,showWeekNumbers:o,showTasks:r,showWeekends:l,skipPopover:s,slotDuration:d,defaultReminder:c,talkEnabled:m,tasksEnabled:u,timezone:_,hideEventExport:p,forceEventAlarmType:h,disableAppointments:y,canSubscribeLink:v,attachmentsFolder:f,showResources:g,publicCalendars:A}=e;(0,i.fH)(`\nInitial settings:\n\t- AppVersion: ${t}\n\t- EventLimit: ${n}\n\t- FirstRun: ${a}\n\t- ShowWeekNumbers: ${o}\n\t- ShowTasks: ${r}\n\t- ShowWeekends: ${l}\n\t- SkipPopover: ${s}\n\t- SlotDuration: ${d}\n\t- DefaultReminder: ${c}\n\t- TalkEnabled: ${m}\n\t- TasksEnabled: ${u}\n\t- Timezone: ${_}\n\t- HideEventExport: ${p}\n\t- ForceEventAlarmType: ${h}\n\t- disableAppointments: ${y}\n\t- CanSubscribeLink: ${v}\n\t- attachmentsFolder: ${f}\n\t- ShowResources: ${g}\n\t- PublicCalendars: ${A}\n`),this.appVersion=t,this.eventLimit=n,this.firstRun=a,this.showWeekNumbers=o,this.showTasks=r,this.showWeekends=l,this.skipPopover=s,this.slotDuration=d,this.defaultReminder=c,this.talkEnabled=m,this.tasksEnabled=u,this.timezone=_,this.hideEventExport=p,this.forceEventAlarmType=h,this.disableAppointments=y,this.canSubscribeLink=v,this.attachmentsFolder=f,this.showResources=g,this.publicCalendars=A},setMomentLocale(e){let{locale:t}=e;(0,i.fH)(`Updated moment locale: ${t}`),this.momentLocale=t}}})},74717:(e,t,n)=>{"use strict";n.d(t,{IS:()=>i,LW:()=>c,R2:()=>l,rG:()=>d,yu:()=>s});var a=n(88075),o=n(53334);function r(e){switch(e){case"seconds":default:return 1;case"minutes":return 60;case"hours":return 3600;case"days":return 86400;case"weeks":return 604800}}function l(e){return 0===(e=Math.abs(e))?{amount:0,unit:"minutes"}:e%604800==0?{amount:e/604800,unit:"weeks"}:e%86400==0?{amount:e/86400,unit:"days"}:e%3600==0?{amount:e/3600,unit:"hours"}:e%60==0?{amount:e/60,unit:"minutes"}:{amount:e,unit:"seconds"}}function s(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e*r(t)*(n?-1:1)}function d(e){const t=r("days"),n=r("hours"),a=r("minutes"),o=e<0;e=Math.abs(e);let l=Math.floor(e/t);const s=e%t;0!==s&&o&&l++;let d=0,c=null;0===l?c="days":l%7==0?(d=l/7,c="weeks"):(d=l,c="days");let i=Math.floor(s/n);const m=s%n;let u=Math.floor(m/a);return o&&(i=24-i,0!==u&&(i--,u=60-u)),{amount:d,unit:c,hours:i,minutes:u}}function c(e,t,n,a){"weeks"===a&&(e*=7,a="days");if(e>0){e--,e*=r(a);let o=24-t,l=0;0!==n&&(o--,l=60-n),e+=o*r("hours"),e+=l*r("minutes"),e*=-1}else e*=r("days"),e+=t*r("hours"),e+=n*r("minutes");return e}function i(e){for(const t of e.getAlarmIterator()){if("EMAIL"!==t.action&&"DISPLAY"!==t.action)continue;t.deleteAllProperties("SUMMARY");const n=e.getFirstProperty("SUMMARY");if(n)t.addProperty(n.clone());else{const e=(0,o.Tl)("calendar","Untitled event");t.addProperty(new a.mA("SUMMARY",e))}if(!t.hasProperty("DESCRIPTION")){const e=(0,o.Tl)("calendar","This is an event reminder.");t.addProperty(new a.mA("DESCRIPTION",e))}t.deleteAllProperties("ATTENDEE");for(const n of e.getAttendeeIterator())["RESOURCE","ROOM"].includes(n.userType)||t.addProperty(new a.Uy("ATTENDEE",n.value))}}},39661:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(9048),o=n(33031),r=n.n(o),l=n(44383),s=n.n(l),d=n(50014),c=n.n(d),i=n(32275);const m=c()(Object.keys(a),(e=>a[e])),u=s()(a,m),_=r()(Object.keys(u).map((e=>({name:e,hex:u[e]}))),(e=>e.hex)),p={detailed:!1};function h(e){const t={...p,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}},n=r()(_,(t=>function(e,t){const n=y(i.A.get.rgb(e)),a=y(i.A.get.rgb(t));return Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)+Math.pow(n[2]-a[2],2))}(e,t.hex)));return t.detailed?n[0]:n[0].name}function y(e){const t=[0,0,0],n=[0,0,0],a=[0,0,0];for(let n=0;n<e.length;n++){let a=e[n]/255;a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,t[n]=100*a}n[0]=(.4124*t[0]+.3576*t[1]+.1805*t[2])/95.047,n[1]=(.2126*t[0]+.7152*t[1]+.0722*t[2])/100,n[2]=(.0193*t[0]+.1192*t[1]+.9505*t[2])/108.883;for(let e=0;e<3;e++){let t=n[e];t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n[e]=t}return a[0]=parseFloat((116*n[1]-16).toFixed(3)),a[1]=parseFloat((500*(n[0]-n[1])).toFixed(3)),a[2]=parseFloat((200*(n[1]-n[2])).toFixed(3)),a}},83843:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(53334),o=n(51651);async function r(){const e=(0,a.JK)().replace("_","-").toLowerCase(),t=(0,a.Z0)().replace("_","-").toLowerCase();if(e===t)return l(e);const[n,r]=await Promise.all([l(e),l(t)]);if(n===r)return n;const s=`nextcloud-calendar-fake-locale-${n}-${r}`;return o.A.defineLocale(s,{parentLocale:r,longDateFormat:{LT:o.A.localeData(n).longDateFormat("LT"),LTS:o.A.localeData(n).longDateFormat("LTS"),L:o.A.localeData(n).longDateFormat("L"),LL:o.A.localeData(n).longDateFormat("LL"),LLL:o.A.localeData(n).longDateFormat("LLL"),LLLL:o.A.localeData(n).longDateFormat("LLLL"),l:o.A.localeData(n).longDateFormat("l"),ll:o.A.localeData(n).longDateFormat("ll"),lll:o.A.localeData(n).longDateFormat("lll"),llll:o.A.localeData(n).longDateFormat("llll")},week:{dow:(0,a.JN)(),doy:o.A.localeData(n).firstDayOfYear()}}),s}async function l(e){try{return await n(89595)(`./${e}.js`),e}catch(t){const a=e.split("-");try{return e=a[0],await n(89595)(`./${e}.js`),e}catch(e){console.debug("Fallback to locale","en")}}return"en"}},89013:(e,t,n)=>{"use strict";function a(){return Math.random().toString(16).slice(2)}n.d(t,{z:()=>a})},41769:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var a=n(83503),o=n.n(a);const r=e=>{let t=e.toLowerCase();null===t.match(/^([0-9a-f]{4}-?){8}$/)&&(t=o()(t)),t=t.replace(/[^0-9a-f]/g,"");const n=function(e){e||(e=6);const t=new l(182,70,157),n=new l(221,203,85),a=new l(0,130,201),o=s(e,t,n),r=s(e,n,a),d=s(e,a,t);return o.concat(r).concat(d)}(6);return n[function(e,t){let n=0;const a=[];for(let t=0;t<e.length;t++)a.push(parseInt(e.charAt(t),16)%16);for(const e in a)n+=a[e];return parseInt(parseInt(n,10)%t,10)}(t,18)]};function l(e,t,n){this.r=e,this.g=t,this.b=n}function s(e,t,n){const a=[];a.push(t);const o=function(e,t){const n=new Array(3);return n[0]=(t[1].r-t[0].r)/e,n[1]=(t[1].g-t[0].g)/e,n[2]=(t[1].b-t[0].b)/e,n}(e,[t,n]);for(let n=1;n<e;n++){const e=parseInt(t.r+o[0]*n,10),r=parseInt(t.g+o[1]*n,10),s=parseInt(t.b+o[2]*n,10);a.push(new l(e,r,s))}return a}},22371:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(71354),o=n.n(a),r=n(76314),l=n.n(r)()(o());l.push([e.id,".icon-close[data-v-e04b64d6]{display:block;height:100%}.freebusy-caption-item__color[data-v-e04b64d6]{background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal[data-v-e04b64d6]{display:flex !important;justify-content:center;align-items:stretch;width:100%;height:100%;overflow:hidden}.modal[data-v-e04b64d6] .free-busy-busy-unavailable--organizer{background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal .date-navigation[data-v-e04b64d6]{display:flex;justify-content:space-between;align-items:center}.modal .date-navigation>*[data-v-e04b64d6]{margin-inline-start:var(--default-grid-baseline)}.modal__content[data-v-e04b64d6]{max-width:1200px;width:100%;height:100%;padding:0 calc(var(--default-grid-baseline)*4);display:flex;flex-direction:column}.modal__content__actions[data-v-e04b64d6]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4)}.modal__content__actions--mobile[data-v-e04b64d6]{align-items:flex-start}.modal__content__actions__select[data-v-e04b64d6]{width:260px}.modal__content__title[data-v-e04b64d6]{display:flex;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4);width:calc(100% - 260px);margin-inline-start:260px}.modal__content__title--mobile[data-v-e04b64d6]{width:100%;margin:0}.modal__content__title h2[data-v-e04b64d6]{font-weight:500;margin:0}.modal__content__title__buttons[data-v-e04b64d6]{display:flex;justify-content:flex-end;align-items:center}.modal__content__header[data-v-e04b64d6]{margin:calc(var(--default-grid-baseline)*4) 0}.modal__content__header h3[data-v-e04b64d6]{font-weight:500}.modal__content__header__available-slots[data-v-e04b64d6]{margin:var(--default-grid-baseline) 0;width:100%;margin-top:calc(4*var(--default-grid-baseline)) !important;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__search[data-v-e04b64d6]{width:100%;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__user-bubble[data-v-e04b64d6]{margin-inline-end:var(--default-grid-baseline)}.modal__content__body[data-v-e04b64d6]{display:flex;width:100%;flex:1 1 auto;overflow:hidden;position:relative;padding-bottom:80px}.modal__content__body__sidebar[data-v-e04b64d6]{margin-top:var(--default-grid-baseline);width:260px;flex-shrink:0;margin-inline-end:calc(2*var(--default-grid-baseline))}.modal__content__body__sidebar__attendees[data-v-e04b64d6]{display:flex;flex-direction:column}.modal__content__body__calendar[data-v-e04b64d6]{flex:1 1 0%}.modal__content__footer[data-v-e04b64d6]{background-color:var(--color-main-background);padding:10px 12px;height:60px;z-index:9998;width:calc(100% - 24px);inset-inline-end:0;display:flex;justify-content:center;position:absolute;bottom:0;box-shadow:0 -4px 8px rgba(0,0,0,.05)}.modal__content__footer__content[data-v-e04b64d6]{display:flex;justify-content:space-between;align-items:flex-end;width:1200px}.modal__content__footer__content__date[data-v-e04b64d6]{margin-top:calc(var(--default-grid-baseline)*4);font-weight:600}.modal__content__footer__content__timezone[data-v-e04b64d6]{color:var(--color-text-lighter)}[data-v-e04b64d6] .vs__search{text-overflow:ellipsis}[data-v-e04b64d6] .mx-input{height:38px !important}[data-v-e04b64d6] .fc-event{pointer-events:none;margin-inline-end:0 !important;border-radius:6px !important;border:2px solid rgba(0,0,0,0) !important}[data-v-e04b64d6] .fc-event-time{display:none !important}[data-v-e04b64d6] .fc{height:100% !important;width:100%}[data-v-e04b64d6] .fc-scroller{overflow-y:auto !important}","",{version:3,sources:["webpack://./src/components/Editor/FreeBusy/FreeBusy.vue"],names:[],mappings:"AACA,6BACC,aAAA,CACA,WAAA,CAIA,+CACC,gHAAA,CAIF,wBACC,uBAAA,CACA,sBAAA,CACA,mBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CAEA,+DACC,gHAAA,CAGD,yCACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,2CACC,gDAAA,CAIF,iCACC,gBAAA,CACA,UAAA,CACA,WAAA,CACA,8CAAA,CACA,YAAA,CACA,qBAAA,CACA,0CACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,kBAAA,CACA,kDAAA,CACA,kDACC,sBAAA,CAGD,kDACC,WAAA,CAGF,wCACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kDAAA,CACA,wBAAA,CACA,yBAAA,CACA,gDACC,UAAA,CACA,QAAA,CAED,2CACC,eAAA,CACA,QAAA,CAED,iDACC,YAAA,CACA,wBAAA,CACA,kBAAA,CAGF,yCACC,6CAAA,CACA,4CACC,eAAA,CAED,0DACC,qCAAA,CACA,UAAA,CACA,0DAAA,CACA,6DAAA,CAGA,4DACC,UAAA,CACA,6DAAA,CAED,iEACC,8CAAA,CAIH,uCACC,YAAA,CACA,UAAA,CACA,aAAA,CACA,eAAA,CACA,iBAAA,CACA,mBAAA,CACA,gDACC,uCAAA,CACA,WAAA,CACA,aAAA,CACA,sDAAA,CACA,2DACC,YAAA,CACA,qBAAA,CAGF,iDACC,WAAA,CAGF,yCACC,6CAAA,CACA,iBAAA,CACA,WAAA,CACA,YAAA,CACA,uBAAA,CACA,kBAAA,CACA,YAAA,CACA,sBAAA,CACA,iBAAA,CACA,QAAA,CACA,qCAAA,CACA,kDACC,YAAA,CACA,6BAAA,CACA,oBAAA,CACA,YAAA,CACA,wDACC,+CAAA,CACA,eAAA,CAED,4DACE,+BAAA,CAON,8BACC,sBAAA,CAGD,4BACC,sBAAA,CAGD,4BACC,mBAAA,CACA,8BAAA,CACA,4BAAA,CACA,yCAAA,CAGD,iCACC,uBAAA,CAGD,sBACC,sBAAA,CACA,UAAA,CAGD,+BACC,0BAAA",sourcesContent:[".icon-close{display:block;height:100%}.freebusy-caption-item__color{background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal{display:flex !important;justify-content:center;align-items:stretch;width:100%;height:100%;overflow:hidden}.modal :deep(.free-busy-busy-unavailable--organizer){background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal .date-navigation{display:flex;justify-content:space-between;align-items:center}.modal .date-navigation>*{margin-inline-start:var(--default-grid-baseline)}.modal__content{max-width:1200px;width:100%;height:100%;padding:0 calc(var(--default-grid-baseline)*4);display:flex;flex-direction:column}.modal__content__actions{display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4)}.modal__content__actions--mobile{align-items:flex-start}.modal__content__actions__select{width:260px}.modal__content__title{display:flex;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4);width:calc(100% - 260px);margin-inline-start:260px}.modal__content__title--mobile{width:100%;margin:0}.modal__content__title h2{font-weight:500;margin:0}.modal__content__title__buttons{display:flex;justify-content:flex-end;align-items:center}.modal__content__header{margin:calc(var(--default-grid-baseline)*4) 0}.modal__content__header h3{font-weight:500}.modal__content__header__available-slots{margin:var(--default-grid-baseline) 0;width:100%;margin-top:calc(4*var(--default-grid-baseline)) !important;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__search{width:100%;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__user-bubble{margin-inline-end:var(--default-grid-baseline)}.modal__content__body{display:flex;width:100%;flex:1 1 auto;overflow:hidden;position:relative;padding-bottom:80px}.modal__content__body__sidebar{margin-top:var(--default-grid-baseline);width:260px;flex-shrink:0;margin-inline-end:calc(2*var(--default-grid-baseline))}.modal__content__body__sidebar__attendees{display:flex;flex-direction:column}.modal__content__body__calendar{flex:1 1 0%}.modal__content__footer{background-color:var(--color-main-background);padding:10px 12px;height:60px;z-index:9998;width:calc(100% - 24px);inset-inline-end:0;display:flex;justify-content:center;position:absolute;bottom:0;box-shadow:0 -4px 8px rgba(0,0,0,.05)}.modal__content__footer__content{display:flex;justify-content:space-between;align-items:flex-end;width:1200px}.modal__content__footer__content__date{margin-top:calc(var(--default-grid-baseline)*4);font-weight:600}.modal__content__footer__content__timezone{color:var(--color-text-lighter)}:deep(.vs__search){text-overflow:ellipsis}:deep(.mx-input){height:38px !important}:deep(.fc-event){pointer-events:none;margin-inline-end:0 !important;border-radius:6px !important;border:2px solid rgba(0,0,0,0) !important}:deep(.fc-event-time){display:none !important}:deep(.fc){height:100% !important;width:100%}:deep(.fc-scroller){overflow-y:auto !important}"],sourceRoot:""}]);const s=l},76783:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(71354),o=n.n(a),r=n(76314),l=n.n(r)()(o());l.push([e.id,".blocking-event-free-busy{z-index:3 !important}.free-busy-block{opacity:.7 !important}","",{version:3,sources:["webpack://./src/components/Editor/FreeBusy/FreeBusy.vue"],names:[],mappings:"AACA,0BAEC,oBAAA,CAGD,iBACC,qBAAA",sourcesContent:[".blocking-event-free-busy{z-index:3 !important}.free-busy-block{opacity:.7 !important}"],sourceRoot:""}]);const s=l},79610:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(71354),o=n.n(a),r=n(76314),l=n.n(r)()(o());l.push([e.id,"\n[data-v-2f7276d0] .avatardiv {\n\toverflow: visible !important;\n}\n","",{version:3,sources:["webpack://./src/components/Editor/Invitees/InviteesListSearch.vue"],names:[],mappings:";AAyVA;CACA,4BAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<NcSelect class=\"invitees-search__vselect\"\n\t\t:options=\"matches\"\n\t\t:searchable=\"true\"\n\t\t:max-height=\"600\"\n\t\t:placeholder=\"placeholder\"\n\t\t:class=\"{ 'showContent': inputGiven, 'icon-loading': isLoading }\"\n\t\t:clearable=\"false\"\n\t\t:label-outside=\"true\"\n\t\tinput-id=\"uid\"\n\t\tlabel=\"dropdownName\"\n\t\t@search=\"findAttendees\"\n\t\t@option:selected=\"addAttendee\">\n\t\t<template #option=\"option\">\n\t\t\t<div class=\"invitees-search-list-item\">\n\t\t\t\t\x3c!-- We need to specify a unique key here for the avatar to be reactive. --\x3e\n\t\t\t\t<Avatar v-if=\"option.isUser\"\n\t\t\t\t\t:key=\"option.uid\"\n\t\t\t\t\t:user=\"option.avatar\"\n\t\t\t\t\t:display-name=\"option.dropdownName\" />\n\t\t\t\t<Avatar v-else-if=\"option.type === 'circle'\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<GoogleCirclesCommunitiesIcon :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Avatar>\n\t\t\t\t<Avatar v-if=\"!option.isUser && option.type !== 'circle'\"\n\t\t\t\t\t:key=\"option.uid\"\n\t\t\t\t\t:url=\"option.avatar\"\n\t\t\t\t\t:display-name=\"option.commonName\" />\n\n\t\t\t\t<div class=\"invitees-search-list-item__label\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ option.commonName }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"option.email !== option.commonName && option.type !== 'circle' && option.type !== 'contactsgroup'\">\n\t\t\t\t\t\t{{ option.email }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"option.type === 'circle' || option.type === 'contactsgroup'\">\n\t\t\t\t\t\t{{ option.subtitle }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</NcSelect>\n</template>\n\n<script>\nimport {\n\tNcAvatar as Avatar,\n\tNcSelect,\n} from '@nextcloud/vue'\nimport { principalPropertySearchByDisplaynameOrEmail } from '../../../services/caldavService.js'\nimport isCirclesEnabled from '../../../services/isCirclesEnabled.js'\nimport {\n\tcircleSearchByName,\n\tcircleGetMembers,\n} from '../../../services/circleService.js'\nimport HttpClient from '@nextcloud/axios'\nimport debounce from 'debounce'\nimport { linkTo } from '@nextcloud/router'\nimport { randomId } from '../../../utils/randomId.js'\nimport GoogleCirclesCommunitiesIcon from 'vue-material-design-icons/GoogleCirclesCommunities.vue'\nimport { showInfo } from '@nextcloud/dialogs'\nimport { removeMailtoPrefix } from '../../../utils/attendee.js'\n\nexport default {\n\tname: 'InviteesListSearch',\n\tcomponents: {\n\t\tAvatar,\n\t\tNcSelect,\n\t\tGoogleCirclesCommunitiesIcon,\n\t},\n\tprops: {\n\t\talreadyInvitedEmails: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\torganizer: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t\tinputGiven: false,\n\t\t\tmatches: [],\n\t\t\tisCirclesEnabled,\n\t\t}\n\t},\n\tcomputed: {\n\t\tplaceholder() {\n\t\t\treturn this.$t('calendar', 'Search for emails, users, contacts, contact groups or teams')\n\t\t},\n\t\tnoResult() {\n\t\t\treturn this.$t('calendar', 'No match found')\n\t\t},\n\t},\n\tmethods: {\n\t\tfindAttendees: debounce(async function(query) {\n\t\t\tthis.isLoading = true\n\t\t\tconst matches = []\n\n\t\t\tif (query.length > 0) {\n\t\t\t\tconst promises = [\n\t\t\t\t\tthis.findAttendeesFromContactsAPI(query),\n\t\t\t\t\tthis.findAttendeesFromDAV(query),\n\t\t\t\t]\n\t\t\t\tif (isCirclesEnabled) {\n\t\t\t\t\tpromises.push(this.findAttendeesFromCircles(query))\n\t\t\t\t}\n\n\t\t\t\tconst [contactsResults, davResults, circleResults] = await Promise.all(promises)\n\t\t\t\tmatches.push(...contactsResults)\n\t\t\t\tmatches.push(...davResults)\n\t\t\t\tif (isCirclesEnabled) {\n\t\t\t\t\tmatches.push(...circleResults)\n\t\t\t\t}\n\n\t\t\t\t// Source of the Regex: https://stackoverflow.com/a/46181\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconst emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\t\t\t\tif (emailRegex.test(query)) {\n\t\t\t\t\tconst alreadyInList = matches.find((attendee) => attendee.email.toLowerCase() === query.toLowerCase())\n\t\t\t\t\tif (!alreadyInList) {\n\t\t\t\t\t\tmatches.unshift({\n\t\t\t\t\t\t\tcalendarUserType: 'INDIVIDUAL',\n\t\t\t\t\t\t\tcommonName: query,\n\t\t\t\t\t\t\temail: query,\n\t\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\t\tavatar: null,\n\t\t\t\t\t\t\tlanguage: null,\n\t\t\t\t\t\t\ttimezoneId: null,\n\t\t\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\t\t\tdropdownName: query,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Generate a unique id for every result to make the avatar components reactive\n\t\t\t\tfor (const match of matches) {\n\t\t\t\t\tmatch.uid = randomId()\n\t\t\t\t}\n\n\t\t\t\tthis.isLoading = false\n\t\t\t\tthis.inputGiven = true\n\t\t\t} else {\n\t\t\t\tthis.inputGiven = false\n\t\t\t\tthis.isLoading = false\n\t\t\t}\n\n\t\t\tthis.matches = matches\n\t\t}, 500),\n\t\taddAttendee(selectedValue) {\n\n\t\t\tif (selectedValue.type === 'circle') {\n\t\t\t\tshowInfo(this.$t('calendar', 'Note that members of circles get invited but are not synced yet.'))\n\t\t\t\tthis.resolveCircleMembers(selectedValue.id, selectedValue.email)\n\t\t\t}\n\t\t\tif (selectedValue.type === 'contactsgroup') {\n\t\t\t\tshowInfo(this.$t('calendar', 'Note that members of contact groups get invited but are not synced yet.'))\n\t\t\t\tthis.getContactGroupMembers(selectedValue.commonName)\n\t\t\t\tconst group = {\n\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\tcommonName: selectedValue.commonName,\n\t\t\t\t\tdropdownName: selectedValue.dropdownName,\n\t\t\t\t\temail: selectedValue.email,\n\t\t\t\t\tisUser: false,\n\t\t\t\t\tsubtitle: selectedValue.subtitle,\n\t\t\t\t\ttype: 'contactsgroup',\n\t\t\t\t}\n\t\t\t\tthis.$emit('add-attendee', group)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.$emit('add-attendee', selectedValue)\n\t\t},\n\t\tasync resolveCircleMembers(circleId, groupId) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\t// Going to query custom backend to fetch Circle members since we're going to use\n\t\t\t\t// mail addresses of local circle members. The Circles API doesn't expose member\n\t\t\t\t// emails yet. Change approved by @miaulalala and @ChristophWurst.\n\t\t\t\tresults = await circleGetMembers(circleId)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tresults.data.forEach((member) => {\n\t\t\t\tif (!this.organizer || member.email !== this.organizer.uri) {\n\t\t\t\t\tthis.$emit('add-attendee', member)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync getContactGroupMembers(groupName) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/groupmembers', {\n\t\t\t\t\tgroupName,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to fetch contact group members', error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tresults.data.forEach((member) => {\n\t\t\t\tif (!this.organizer || member.email !== this.organizer.uri) {\n\t\t\t\t\tthis.$emit('add-attendee', member)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync findAttendeesFromContactsAPI(query) {\n\t\t\tlet response\n\n\t\t\ttry {\n\t\t\t\tresponse = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/attendee', {\n\t\t\t\t\tsearch: query,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst data = response.data\n\t\t\treturn data.reduce((arr, result) => {\n\t\t\t\tconst hasMultipleEMails = result.emails.length > 1\n\n\t\t\t\tresult.emails.forEach((email) => {\n\t\t\t\t\tlet name\n\t\t\t\t\tif (result.name && !hasMultipleEMails) {\n\t\t\t\t\t\tname = result.name\n\t\t\t\t\t} else if (result.name && hasMultipleEMails) {\n\t\t\t\t\t\tname = `${result.name} (${email})`\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = email\n\t\t\t\t\t}\n\n\t\t\t\t\tif (email && this.alreadyInvitedEmails.includes(removeMailtoPrefix(email))) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result.type === 'contactsgroup') {\n\t\t\t\t\t\tarr.push({\n\t\t\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\t\t\tcommonName: result.name,\n\t\t\t\t\t\t\tsubtitle: this.$n('calendar', '%n member', '%n members', result.members),\n\t\t\t\t\t\t\tmembers: { length: result.members },\n\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\t\tavatar: result.photo,\n\t\t\t\t\t\t\tlanguage: result.lang,\n\t\t\t\t\t\t\ttimezoneId: result.tzid,\n\t\t\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\t\t\tdropdownName: name,\n\t\t\t\t\t\t\ttype: 'contactsgroup',\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tcalendarUserType: 'INDIVIDUAL',\n\t\t\t\t\t\tcommonName: result.name,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\tavatar: result.photo,\n\t\t\t\t\t\tlanguage: result.lang,\n\t\t\t\t\t\ttimezoneId: result.tzid,\n\t\t\t\t\t\thasMultipleEMails,\n\t\t\t\t\t\tdropdownName: name,\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\treturn arr\n\t\t\t}, [])\n\t\t},\n\t\tasync findAttendeesFromDAV(query) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await principalPropertySearchByDisplaynameOrEmail(query)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn results.filter((principal) => {\n\t\t\t\tif (!principal.email) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\tif (this.alreadyInvitedEmails.includes(principal.email)) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\t// Do not include resources and rooms\n\t\t\t\tif (['ROOM', 'RESOURCE'].includes(principal.calendarUserType)) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\treturn true\n\t\t\t}).map((principal) => {\n\t\t\t\treturn {\n\t\t\t\t\tcommonName: principal.displayname,\n\t\t\t\t\tcalendarUserType: principal.calendarUserType,\n\t\t\t\t\temail: principal.email,\n\t\t\t\t\tlanguage: principal.language,\n\t\t\t\t\tisUser: principal.calendarUserType === 'INDIVIDUAL',\n\t\t\t\t\tavatar: decodeURIComponent(principal.userId),\n\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\tdropdownName: principal.displayname ? [principal.displayname, principal.email].join(' ') : principal.email,\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync findAttendeesFromCircles(query) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await circleSearchByName(query)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn results.filter((circle) => {\n\t\t\t\treturn true\n\t\t\t}).map((circle) => {\n\t\t\t\treturn {\n\t\t\t\t\tcommonName: circle.displayname,\n\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\temail: 'circle+' + circle.id + '@' + circle.instance,\n\t\t\t\t\tisUser: false,\n\t\t\t\t\tdropdownName: circle.displayname,\n\t\t\t\t\ttype: 'circle',\n\t\t\t\t\tid: circle.id,\n\t\t\t\t\tsubtitle: this.$n('calendar', '%n member', '%n members', circle.population),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n:deep(.avatardiv) {\n\toverflow: visible !important;\n}\n</style>\n"],sourceRoot:""}]);const s=l},89595:(e,t,n)=>{var a={"./af.js":[25177,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-dz.js":[41488,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-kw.js":[58676,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ly.js":[42353,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ma.js":[24496,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ps.js":[6947,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-sa.js":[82682,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-tn.js":[67375,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar.js":[61509,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./az.js":[95533,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./be.js":[28959,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bg.js":[47777,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bm.js":[54903,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bn-bd.js":[17357,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bn.js":[61290,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bo.js":[31545,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./br.js":[11470,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bs.js":[44429,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ca.js":[7306,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cs.js":[56464,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cv.js":[73635,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cy.js":[64226,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./da.js":[93601,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de-at.js":[26111,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de-ch.js":[54697,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de.js":[77853,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./dv.js":[60708,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./el.js":[54691,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-au.js":[53872,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-ca.js":[28298,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-gb.js":[56195,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-ie.js":[66584,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-il.js":[65543,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-in.js":[9033,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-nz.js":[79402,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-sg.js":[43004,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./eo.js":[10553,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-do.js":[20838,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-mx.js":[17730,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-us.js":[56575,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es.js":[97650,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./et.js":[3035,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./eu.js":[3508,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fa.js":[119,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fi.js":[90527,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fil.js":[95995,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fo.js":[52477,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr-ca.js":[26435,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr-ch.js":[37892,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr.js":[85498,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fy.js":[37071,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ga.js":[41734,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gd.js":[70217,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gl.js":[77329,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gom-deva.js":[32124,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gom-latn.js":[93383,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gu.js":[95050,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./he.js":[11713,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hi.js":[43861,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hr.js":[26308,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hu.js":[90609,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hy-am.js":[17160,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./id.js":[74063,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./is.js":[89374,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./it-ch.js":[21827,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./it.js":[88383,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ja.js":[23827,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./jv.js":[89722,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ka.js":[41794,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./kk.js":[27088,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./km.js":[96870,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./kn.js":[84451,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ko.js":[63164,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ku-kmr.js":[6181,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ku.js":[98174,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ky.js":[78474,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lb.js":[79680,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lo.js":[15867,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lt.js":[45766,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lv.js":[69532,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./me.js":[58076,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mi.js":[41848,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mk.js":[30306,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ml.js":[73739,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mn.js":[99053,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mr.js":[86169,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ms-my.js":[92297,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ms.js":[73386,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mt.js":[77075,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./my.js":[72264,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nb.js":[22274,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ne.js":[8235,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nl-be.js":[43784,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nl.js":[92572,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nn.js":[54566,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./oc-lnc.js":[69330,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pa-in.js":[29849,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pl.js":[94418,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pt-br.js":[48303,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pt.js":[79834,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ro.js":[24457,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ru.js":[4652,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sd.js":[1221,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./se.js":[33478,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./si.js":[17538,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sk.js":[5784,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sl.js":[46637,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sq.js":[86794,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sr-cyrl.js":[3322,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sr.js":[45719,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ss.js":[56e3,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sv.js":[41011,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sw.js":[40748,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ta.js":[11025,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./te.js":[11885,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tet.js":[28861,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tg.js":[86571,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./th.js":[55802,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tk.js":[59527,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tl-ph.js":[29231,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tlh.js":[31052,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tr.js":[85096,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzl.js":[79846,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzm-latn.js":[97711,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzm.js":[81765,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ug-cn.js":[48414,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uk.js":[16618,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ur.js":[57777,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uz-latn.js":[72475,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uz.js":[57609,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./vi.js":[21135,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./x-pseudo.js":[64051,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./yo.js":[82218,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-cn.js":[52648,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-hk.js":[1632,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-mo.js":[31541,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-tw.js":[50304,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"]};function o(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n.t(o,23)))}o.keys=()=>Object.keys(a),o.id=89595,e.exports=o},72683:(e,t,n)=>{"use strict";var a=n(85072),o=n.n(a),r=n(97825),l=n.n(r),s=n(77659),d=n.n(s),c=n(55056),i=n.n(c),m=n(10540),u=n.n(m),_=n(41113),p=n.n(_),h=n(79610),y={};y.styleTagTransform=p(),y.setAttributes=i(),y.insert=d().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=u();o()(h.A,y),h.A&&h.A.locals&&h.A.locals},44823:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(14600),o=n(86372);n(12235),n(17719);const r=(0,n(14486).A)(o.A,a.X,a.Y,!1,null,"e04b64d6",null).exports},41975:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(40825),o=n(38700);n(9416);const r=(0,n(14486).A)(o.A,a.X,a.Y,!1,null,"2f7276d0",null).exports},86372:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=n(27203).A},38700:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=n(63939).A},9416:(e,t,n)=>{"use strict";n(72683)},12235:(e,t,n)=>{"use strict";n(82220)},17719:(e,t,n)=>{"use strict";n(58672)},82220:(e,t,n)=>{var a=n(22371);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(70534).A)("a4b1e284",a,!0,{})},58672:(e,t,n)=>{var a=n(76783);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(70534).A)("e5b54a70",a,!0,{})}}]);
//# sourceMappingURL=calendar-src_utils_closestColor_js-src_utils_moment_js-src_utils_uidToColor_js-src_components_Editor_F-24b9af.js.map?v=c553074dd11d98b07712